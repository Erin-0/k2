(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function oC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var dg={exports:{}},Hc={};var T_;function lC(){if(T_)return Hc;T_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,o){var c=null;if(o!==void 0&&(c=""+o),r.key!==void 0&&(c=""+r.key),"key"in r){o={};for(var h in r)h!=="key"&&(o[h]=r[h])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:c,ref:r!==void 0?r:null,props:o}}return Hc.Fragment=e,Hc.jsx=t,Hc.jsxs=t,Hc}var A_;function cC(){return A_||(A_=1,dg.exports=lC()),dg.exports}var d=cC(),fg={exports:{}},Oe={};var C_;function uC(){if(C_)return Oe;C_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),_=Symbol.iterator;function w(V){return V===null||typeof V!="object"?null:(V=_&&V[_]||V["@@iterator"],typeof V=="function"?V:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,O={};function M(V,q,ee){this.props=V,this.context=q,this.refs=O,this.updater=ee||S}M.prototype.isReactComponent={},M.prototype.setState=function(V,q){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,q,"setState")},M.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function F(){}F.prototype=M.prototype;function H(V,q,ee){this.props=V,this.context=q,this.refs=O,this.updater=ee||S}var G=H.prototype=new F;G.constructor=H,R(G,M.prototype),G.isPureReactComponent=!0;var X=Array.isArray;function U(){}var N={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function T(V,q,ee){var Q=ee.ref;return{$$typeof:n,type:V,key:q,ref:Q!==void 0?Q:null,props:ee}}function D(V,q){return T(V.type,q,V.props)}function I(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function z(V){var q={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ee){return q[ee]})}var k=/\/+/g;function W(V,q){return typeof V=="object"&&V!==null&&V.key!=null?z(""+V.key):q.toString(36)}function K(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(U,U):(V.status="pending",V.then(function(q){V.status==="pending"&&(V.status="fulfilled",V.value=q)},function(q){V.status==="pending"&&(V.status="rejected",V.reason=q)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function j(V,q,ee,Q,te){var fe=typeof V;(fe==="undefined"||fe==="boolean")&&(V=null);var ye=!1;if(V===null)ye=!0;else switch(fe){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(V.$$typeof){case n:case e:ye=!0;break;case g:return ye=V._init,j(ye(V._payload),q,ee,Q,te)}}if(ye)return te=te(V),ye=Q===""?"."+W(V,0):Q,X(te)?(ee="",ye!=null&&(ee=ye.replace(k,"$&/")+"/"),j(te,q,ee,"",function(We){return We})):te!=null&&(I(te)&&(te=D(te,ee+(te.key==null||V&&V.key===te.key?"":(""+te.key).replace(k,"$&/")+"/")+ye)),q.push(te)),1;ye=0;var Ne=Q===""?".":Q+":";if(X(V))for(var Ae=0;Ae<V.length;Ae++)Q=V[Ae],fe=Ne+W(Q,Ae),ye+=j(Q,q,ee,fe,te);else if(Ae=w(V),typeof Ae=="function")for(V=Ae.call(V),Ae=0;!(Q=V.next()).done;)Q=Q.value,fe=Ne+W(Q,Ae++),ye+=j(Q,q,ee,fe,te);else if(fe==="object"){if(typeof V.then=="function")return j(K(V),q,ee,Q,te);throw q=String(V),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return ye}function P(V,q,ee){if(V==null)return V;var Q=[],te=0;return j(V,Q,"","",function(fe){return q.call(ee,fe,te++)}),Q}function ne(V){if(V._status===-1){var q=V._result;q=q(),q.then(function(ee){(V._status===0||V._status===-1)&&(V._status=1,V._result=ee)},function(ee){(V._status===0||V._status===-1)&&(V._status=2,V._result=ee)}),V._status===-1&&(V._status=0,V._result=q)}if(V._status===1)return V._result.default;throw V._result}var J=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},re={map:P,forEach:function(V,q,ee){P(V,function(){q.apply(this,arguments)},ee)},count:function(V){var q=0;return P(V,function(){q++}),q},toArray:function(V){return P(V,function(q){return q})||[]},only:function(V){if(!I(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Oe.Activity=v,Oe.Children=re,Oe.Component=M,Oe.Fragment=t,Oe.Profiler=r,Oe.PureComponent=H,Oe.StrictMode=i,Oe.Suspense=f,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(V){return N.H.useMemoCache(V)}},Oe.cache=function(V){return function(){return V.apply(null,arguments)}},Oe.cacheSignal=function(){return null},Oe.cloneElement=function(V,q,ee){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var Q=R({},V.props),te=V.key;if(q!=null)for(fe in q.key!==void 0&&(te=""+q.key),q)!E.call(q,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&q.ref===void 0||(Q[fe]=q[fe]);var fe=arguments.length-2;if(fe===1)Q.children=ee;else if(1<fe){for(var ye=Array(fe),Ne=0;Ne<fe;Ne++)ye[Ne]=arguments[Ne+2];Q.children=ye}return T(V.type,te,Q)},Oe.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:o,_context:V},V},Oe.createElement=function(V,q,ee){var Q,te={},fe=null;if(q!=null)for(Q in q.key!==void 0&&(fe=""+q.key),q)E.call(q,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(te[Q]=q[Q]);var ye=arguments.length-2;if(ye===1)te.children=ee;else if(1<ye){for(var Ne=Array(ye),Ae=0;Ae<ye;Ae++)Ne[Ae]=arguments[Ae+2];te.children=Ne}if(V&&V.defaultProps)for(Q in ye=V.defaultProps,ye)te[Q]===void 0&&(te[Q]=ye[Q]);return T(V,fe,te)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(V){return{$$typeof:h,render:V}},Oe.isValidElement=I,Oe.lazy=function(V){return{$$typeof:g,_payload:{_status:-1,_result:V},_init:ne}},Oe.memo=function(V,q){return{$$typeof:m,type:V,compare:q===void 0?null:q}},Oe.startTransition=function(V){var q=N.T,ee={};N.T=ee;try{var Q=V(),te=N.S;te!==null&&te(ee,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(U,J)}catch(fe){J(fe)}finally{q!==null&&ee.types!==null&&(q.types=ee.types),N.T=q}},Oe.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Oe.use=function(V){return N.H.use(V)},Oe.useActionState=function(V,q,ee){return N.H.useActionState(V,q,ee)},Oe.useCallback=function(V,q){return N.H.useCallback(V,q)},Oe.useContext=function(V){return N.H.useContext(V)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(V,q){return N.H.useDeferredValue(V,q)},Oe.useEffect=function(V,q){return N.H.useEffect(V,q)},Oe.useEffectEvent=function(V){return N.H.useEffectEvent(V)},Oe.useId=function(){return N.H.useId()},Oe.useImperativeHandle=function(V,q,ee){return N.H.useImperativeHandle(V,q,ee)},Oe.useInsertionEffect=function(V,q){return N.H.useInsertionEffect(V,q)},Oe.useLayoutEffect=function(V,q){return N.H.useLayoutEffect(V,q)},Oe.useMemo=function(V,q){return N.H.useMemo(V,q)},Oe.useOptimistic=function(V,q){return N.H.useOptimistic(V,q)},Oe.useReducer=function(V,q,ee){return N.H.useReducer(V,q,ee)},Oe.useRef=function(V){return N.H.useRef(V)},Oe.useState=function(V){return N.H.useState(V)},Oe.useSyncExternalStore=function(V,q,ee){return N.H.useSyncExternalStore(V,q,ee)},Oe.useTransition=function(){return N.H.useTransition()},Oe.version="19.2.3",Oe}var R_;function z0(){return R_||(R_=1,fg.exports=uC()),fg.exports}var $=z0();const hC=oC($);var mg={exports:{}},qc={},pg={exports:{}},gg={};var N_;function dC(){return N_||(N_=1,(function(n){function e(j,P){var ne=j.length;j.push(P);e:for(;0<ne;){var J=ne-1>>>1,re=j[J];if(0<r(re,P))j[J]=P,j[ne]=re,ne=J;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var P=j[0],ne=j.pop();if(ne!==P){j[0]=ne;e:for(var J=0,re=j.length,V=re>>>1;J<V;){var q=2*(J+1)-1,ee=j[q],Q=q+1,te=j[Q];if(0>r(ee,ne))Q<re&&0>r(te,ee)?(j[J]=te,j[Q]=ne,J=Q):(j[J]=ee,j[q]=ne,J=q);else if(Q<re&&0>r(te,ne))j[J]=te,j[Q]=ne,J=Q;else break e}}return P}function r(j,P){var ne=j.sortIndex-P.sortIndex;return ne!==0?ne:j.id-P.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var f=[],m=[],g=1,v=null,_=3,w=!1,S=!1,R=!1,O=!1,M=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function G(j){for(var P=t(m);P!==null;){if(P.callback===null)i(m);else if(P.startTime<=j)i(m),P.sortIndex=P.expirationTime,e(f,P);else break;P=t(m)}}function X(j){if(R=!1,G(j),!S)if(t(f)!==null)S=!0,U||(U=!0,z());else{var P=t(m);P!==null&&K(X,P.startTime-j)}}var U=!1,N=-1,E=5,T=-1;function D(){return O?!0:!(n.unstable_now()-T<E)}function I(){if(O=!1,U){var j=n.unstable_now();T=j;var P=!0;try{e:{S=!1,R&&(R=!1,F(N),N=-1),w=!0;var ne=_;try{t:{for(G(j),v=t(f);v!==null&&!(v.expirationTime>j&&D());){var J=v.callback;if(typeof J=="function"){v.callback=null,_=v.priorityLevel;var re=J(v.expirationTime<=j);if(j=n.unstable_now(),typeof re=="function"){v.callback=re,G(j),P=!0;break t}v===t(f)&&i(f),G(j)}else i(f);v=t(f)}if(v!==null)P=!0;else{var V=t(m);V!==null&&K(X,V.startTime-j),P=!1}}break e}finally{v=null,_=ne,w=!1}P=void 0}}finally{P?z():U=!1}}}var z;if(typeof H=="function")z=function(){H(I)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,W=k.port2;k.port1.onmessage=I,z=function(){W.postMessage(null)}}else z=function(){M(I,0)};function K(j,P){N=M(function(){j(n.unstable_now())},P)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(j){switch(_){case 1:case 2:case 3:var P=3;break;default:P=_}var ne=_;_=P;try{return j()}finally{_=ne}},n.unstable_requestPaint=function(){O=!0},n.unstable_runWithPriority=function(j,P){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ne=_;_=j;try{return P()}finally{_=ne}},n.unstable_scheduleCallback=function(j,P,ne){var J=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?J+ne:J):ne=J,j){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=ne+re,j={id:g++,callback:P,priorityLevel:j,startTime:ne,expirationTime:re,sortIndex:-1},ne>J?(j.sortIndex=ne,e(m,j),t(f)===null&&j===t(m)&&(R?(F(N),N=-1):R=!0,K(X,ne-J))):(j.sortIndex=re,e(f,j),S||w||(S=!0,U||(U=!0,z()))),j},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(j){var P=_;return function(){var ne=_;_=P;try{return j.apply(this,arguments)}finally{_=ne}}}})(gg)),gg}var I_;function fC(){return I_||(I_=1,pg.exports=dC()),pg.exports}var yg={exports:{}},Di={};var M_;function mC(){if(M_)return Di;M_=1;var n=z0();function e(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)m+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(f,m,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:f,containerInfo:m,implementation:g}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,m){if(f==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Di.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Di.createPortal=function(f,m){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(f,m,null,g)},Di.flushSync=function(f){var m=c.T,g=i.p;try{if(c.T=null,i.p=2,f)return f()}finally{c.T=m,i.p=g,i.d.f()}},Di.preconnect=function(f,m){typeof f=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(f,m))},Di.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},Di.preinit=function(f,m){if(typeof f=="string"&&m&&typeof m.as=="string"){var g=m.as,v=h(g,m.crossOrigin),_=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;g==="style"?i.d.S(f,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:_,fetchPriority:w}):g==="script"&&i.d.X(f,{crossOrigin:v,integrity:_,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Di.preinitModule=function(f,m){if(typeof f=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var g=h(m.as,m.crossOrigin);i.d.M(f,{crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(f)},Di.preload=function(f,m){if(typeof f=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var g=m.as,v=h(g,m.crossOrigin);i.d.L(f,g,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Di.preloadModule=function(f,m){if(typeof f=="string")if(m){var g=h(m.as,m.crossOrigin);i.d.m(f,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(f)},Di.requestFormReset=function(f){i.d.r(f)},Di.unstable_batchedUpdates=function(f,m){return f(m)},Di.useFormState=function(f,m,g){return c.H.useFormState(f,m,g)},Di.useFormStatus=function(){return c.H.useHostTransitionStatus()},Di.version="19.2.3",Di}var k_;function pC(){if(k_)return yg.exports;k_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),yg.exports=mC(),yg.exports}var j_;function gC(){if(j_)return qc;j_=1;var n=fC(),e=z0(),t=pC();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,l=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(l=a.return),s=a.return;while(s)}return a.tag===3?l:null}function c(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function h(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function f(s){if(o(s)!==s)throw Error(i(188))}function m(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var l=s,u=a;;){var y=l.return;if(y===null)break;var b=y.alternate;if(b===null){if(u=y.return,u!==null){l=u;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===l)return f(y),s;if(b===u)return f(y),a;b=b.sibling}throw Error(i(188))}if(l.return!==u.return)l=y,u=b;else{for(var A=!1,L=y.child;L;){if(L===l){A=!0,l=y,u=b;break}if(L===u){A=!0,u=y,l=b;break}L=L.sibling}if(!A){for(L=b.child;L;){if(L===l){A=!0,l=b,u=y;break}if(L===u){A=!0,u=b,l=y;break}L=L.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:a}function g(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=g(s),a!==null)return a;s=s.sibling}return null}var v=Object.assign,_=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),H=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function z(s){return s===null||typeof s!="object"?null:(s=I&&s[I]||s["@@iterator"],typeof s=="function"?s:null)}var k=Symbol.for("react.client.reference");function W(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===k?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case M:return"Profiler";case O:return"StrictMode";case X:return"Suspense";case U:return"SuspenseList";case T:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case H:return s.displayName||"Context";case F:return(s._context.displayName||"Context")+".Consumer";case G:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case N:return a=s.displayName||null,a!==null?a:W(s.type)||"Memo";case E:a=s._payload,s=s._init;try{return W(s(a))}catch{}}return null}var K=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},J=[],re=-1;function V(s){return{current:s}}function q(s){0>re||(s.current=J[re],J[re]=null,re--)}function ee(s,a){re++,J[re]=s.current,s.current=a}var Q=V(null),te=V(null),fe=V(null),ye=V(null);function Ne(s,a){switch(ee(fe,a),ee(te,s),ee(Q,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?Yb(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=Yb(a),s=Wb(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}q(Q),ee(Q,s)}function Ae(){q(Q),q(te),q(fe)}function We(s){s.memoizedState!==null&&ee(ye,s);var a=Q.current,l=Wb(a,s.type);a!==l&&(ee(te,s),ee(Q,l))}function tt(s){te.current===s&&(q(Q),q(te)),ye.current===s&&(q(ye),Vc._currentValue=ne)}var xt,Gi;function Vt(s){if(xt===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);xt=a&&a[1]||"",Gi=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xt+s+Gi}var ft=!1;function It(s,a){if(!s||ft)return"";ft=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(ue){var le=ue}Reflect.construct(s,[],pe)}else{try{pe.call()}catch(ue){le=ue}s.call(pe.prototype)}}else{try{throw Error()}catch(ue){le=ue}(pe=s())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(ue){if(ue&&le&&typeof ue.stack=="string")return[ue.stack,le.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=u.DetermineComponentFrameRoot(),A=b[0],L=b[1];if(A&&L){var Y=A.split(`
`),oe=L.split(`
`);for(y=u=0;u<Y.length&&!Y[u].includes("DetermineComponentFrameRoot");)u++;for(;y<oe.length&&!oe[y].includes("DetermineComponentFrameRoot");)y++;if(u===Y.length||y===oe.length)for(u=Y.length-1,y=oe.length-1;1<=u&&0<=y&&Y[u]!==oe[y];)y--;for(;1<=u&&0<=y;u--,y--)if(Y[u]!==oe[y]){if(u!==1||y!==1)do if(u--,y--,0>y||Y[u]!==oe[y]){var he=`
`+Y[u].replace(" at new "," at ");return s.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",s.displayName)),he}while(1<=u&&0<=y);break}}}finally{ft=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Vt(l):""}function ot(s,a){switch(s.tag){case 26:case 27:case 5:return Vt(s.type);case 16:return Vt("Lazy");case 13:return s.child!==a&&a!==null?Vt("Suspense Fallback"):Vt("Suspense");case 19:return Vt("SuspenseList");case 0:case 15:return It(s.type,!1);case 11:return It(s.type.render,!1);case 1:return It(s.type,!0);case 31:return Vt("Activity");default:return""}}function st(s){try{var a="",l=null;do a+=ot(s,l),l=s,s=s.return;while(s);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Be=Object.prototype.hasOwnProperty,Qe=n.unstable_scheduleCallback,lt=n.unstable_cancelCallback,gi=n.unstable_shouldYield,St=n.unstable_requestPaint,Ve=n.unstable_now,Ut=n.unstable_getCurrentPriorityLevel,$i=n.unstable_ImmediatePriority,es=n.unstable_UserBlockingPriority,Tt=n.unstable_NormalPriority,Pn=n.unstable_LowPriority,Yt=n.unstable_IdlePriority,ki=n.log,yi=n.unstable_setDisableYieldValue,Bt=null,mt=null;function Wt(s){if(typeof ki=="function"&&yi(s),mt&&typeof mt.setStrictMode=="function")try{mt.setStrictMode(Bt,s)}catch{}}var At=Math.clz32?Math.clz32:ya,uo=Math.log,ts=Math.LN2;function ya(s){return s>>>=0,s===0?32:31-(uo(s)/ts|0)|0}var ji=256,Ms=262144,ct=4194304;function ai(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function vi(s,a,l){var u=s.pendingLanes;if(u===0)return 0;var y=0,b=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var L=u&134217727;return L!==0?(u=L&~b,u!==0?y=ai(u):(A&=L,A!==0?y=ai(A):l||(l=L&~s,l!==0&&(y=ai(l))))):(L=u&~b,L!==0?y=ai(L):A!==0?y=ai(A):l||(l=u&~s,l!==0&&(y=ai(l)))),y===0?0:a!==0&&a!==y&&(a&b)===0&&(b=y&-y,l=a&-a,b>=l||b===32&&(l&4194048)!==0)?a:y}function bi(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function ho(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wn(){var s=ct;return ct<<=1,(ct&62914560)===0&&(ct=4194304),s}function ci(s){for(var a=[],l=0;31>l;l++)a.push(s);return a}function va(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ym(s,a,l,u,y,b){var A=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var L=s.entanglements,Y=s.expirationTimes,oe=s.hiddenUpdates;for(l=A&~l;0<l;){var he=31-At(l),pe=1<<he;L[he]=0,Y[he]=-1;var le=oe[he];if(le!==null)for(oe[he]=null,he=0;he<le.length;he++){var ue=le[he];ue!==null&&(ue.lane&=-536870913)}l&=~pe}u!==0&&ba(s,u,0),b!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=b&~(A&~a))}function ba(s,a,l){s.pendingLanes|=a,s.suspendedLanes&=~a;var u=31-At(a);s.entangledLanes|=a,s.entanglements[u]=s.entanglements[u]|1073741824|l&261930}function ql(s,a){var l=s.entangledLanes|=a;for(s=s.entanglements;l;){var u=31-At(l),y=1<<u;y&a|s[u]&a&&(s[u]|=a),l&=~y}}function Gl(s,a){var l=a&-a;return l=(l&42)!==0?1:_a(l),(l&(s.suspendedLanes|a))!==0?0:l}function _a(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ks(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Wu(){var s=P.p;return s!==0?s:(s=window.event,s===void 0?32:v_(s.type))}function Ln(s,a){var l=P.p;try{return P.p=s,a()}finally{P.p=l}}var Vn=Math.random().toString(36).slice(2),Qt="__reactFiber$"+Vn,ui="__reactProps$"+Vn,is="__reactContainer$"+Vn,fo="__reactEvents$"+Vn,vm="__reactListeners$"+Vn,Qu="__reactHandles$"+Vn,Xu="__reactResources$"+Vn,ns="__reactMarker$"+Vn;function mo(s){delete s[Qt],delete s[ui],delete s[fo],delete s[vm],delete s[Qu]}function ss(s){var a=s[Qt];if(a)return a;for(var l=s.parentNode;l;){if(a=l[is]||l[Qt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(s=i_(s);s!==null;){if(l=s[Qt])return l;s=i_(s)}return a}s=l,l=s.parentNode}return null}function xn(s){if(s=s[Qt]||s[is]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function rn(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function rs(s){var a=s[Xu];return a||(a=s[Xu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Xt(s){s[ns]=!0}var $l=new Set,Kl={};function as(s,a){os(s,a),os(s+"Capture",a)}function os(s,a){for(Kl[s]=a,s=0;s<a.length;s++)$l.add(a[s])}var Yl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wl={},Ql={};function Ju(s){return Be.call(Ql,s)?!0:Be.call(Wl,s)?!1:Yl.test(s)?Ql[s]=!0:(Wl[s]=!0,!1)}function po(s,a,l){if(Ju(a))if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+l)}}function an(s,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+l)}}function Jt(s,a,l,u){if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(a,l,""+u)}}function hi(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function dr(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Xl(s,a,l){var u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,b=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return y.call(this)},set:function(A){l=""+A,b.call(this,A)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function ut(s){if(!s._valueTracker){var a=dr(s)?"checked":"value";s._valueTracker=Xl(s,a,""+s[a])}}function wa(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var l=a.getValue(),u="";return s&&(u=dr(s)?s.checked?"true":"false":s.value),s=u,s!==l?(a.setValue(s),!0):!1}function ls(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var xa=/[\n"\\]/g;function Ki(s){return s.replace(xa,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function go(s,a,l,u,y,b,A,L){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),a!=null?A==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+hi(a)):s.value!==""+hi(a)&&(s.value=""+hi(a)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),a!=null?Jl(s,A,hi(a)):l!=null?Jl(s,A,hi(l)):u!=null&&s.removeAttribute("value"),y==null&&b!=null&&(s.defaultChecked=!!b),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?s.name=""+hi(L):s.removeAttribute("name")}function Zu(s,a,l,u,y,b,A,L){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.type=b),a!=null||l!=null){if(!(b!=="submit"&&b!=="reset"||a!=null)){ut(s);return}l=l!=null?""+hi(l):"",a=a!=null?""+hi(a):l,L||a===s.value||(s.value=a),s.defaultValue=a}u=u??y,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=L?s.checked:!!u,s.defaultChecked=!!u,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),ut(s)}function Jl(s,a,l){a==="number"&&ls(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function fr(s,a,l,u){if(s=s.options,a){a={};for(var y=0;y<l.length;y++)a["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=a.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&u&&(s[l].defaultSelected=!0)}else{for(l=""+hi(l),a=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,u&&(s[y].defaultSelected=!0);return}a!==null||s[y].disabled||(a=s[y])}a!==null&&(a.selected=!0)}}function eh(s,a,l){if(a!=null&&(a=""+hi(a),a!==s.value&&(s.value=a),l==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=l!=null?""+hi(l):""}function mr(s,a,l,u){if(a==null){if(u!=null){if(l!=null)throw Error(i(92));if(K(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),a=l}l=hi(a),s.defaultValue=l,u=s.textContent,u===l&&u!==""&&u!==null&&(s.value=u),ut(s)}function Yi(s,a){if(a){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=a;return}}s.textContent=a}var th=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zl(s,a,l){var u=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":u?s.setProperty(a,l):typeof l!="number"||l===0||th.has(a)?a==="float"?s.cssFloat=l:s[a]=(""+l).trim():s[a]=l+"px"}function ec(s,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var y in a)u=a[y],a.hasOwnProperty(y)&&l[y]!==u&&Zl(s,y,u)}else for(var b in a)a.hasOwnProperty(b)&&Zl(s,b,a[b])}function yo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ih=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vo(s){return pr.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Un(){}var tc=null;function En(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var gr=null,cs=null;function Ea(s){var a=xn(s);if(a&&(s=a.stateNode)){var l=s[ui]||null;e:switch(s=a.stateNode,a.type){case"input":if(go(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ki(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var u=l[a];if(u!==s&&u.form===s.form){var y=u[ui]||null;if(!y)throw Error(i(90));go(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(a=0;a<l.length;a++)u=l[a],u.form===s.form&&wa(u)}break e;case"textarea":eh(s,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&fr(s,!!l.multiple,a,!1)}}}var bo=!1;function yr(s,a,l){if(bo)return s(a,l);bo=!0;try{var u=s(a);return u}finally{if(bo=!1,(gr!==null||cs!==null)&&(Wh(),gr&&(a=gr,s=cs,cs=gr=null,Ea(a),s)))for(a=0;a<s.length;a++)Ea(s[a])}}function Bn(s,a){var l=s.stateNode;if(l===null)return null;var u=l[ui]||null;if(u===null)return null;l=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sa=!1;if(Sn)try{var pt={};Object.defineProperty(pt,"passive",{get:function(){Sa=!0}}),window.addEventListener("test",pt,pt),window.removeEventListener("test",pt,pt)}catch{Sa=!1}var us=null,ic=null,Ta=null;function nc(){if(Ta)return Ta;var s,a=ic,l=a.length,u,y="value"in us?us.value:us.textContent,b=y.length;for(s=0;s<l&&a[s]===y[s];s++);var A=l-s;for(u=1;u<=A&&a[l-u]===y[b-u];u++);return Ta=y.slice(s,1<u?1-u:void 0)}function Aa(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function js(){return!0}function Fn(){return!1}function _i(s){function a(l,u,y,b,A){this._reactName=l,this._targetInst=y,this.type=u,this.nativeEvent=b,this.target=A,this.currentTarget=null;for(var L in s)s.hasOwnProperty(L)&&(l=s[L],this[L]=l?l(b):b[L]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?js:Fn,this.isPropagationStopped=Fn,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=js)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=js)},persist:function(){},isPersistent:js}),a}var Ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hs=_i(Ds),vr=v({},Ds,{view:0,detail:0}),sc=_i(vr),br,_o,ds,wo=v({},vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_r,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ds&&(ds&&s.type==="mousemove"?(br=s.screenX-ds.screenX,_o=s.screenY-ds.screenY):_o=br=0,ds=s),br)},movementY:function(s){return"movementY"in s?s.movementY:_o}}),rc=_i(wo),Ca=v({},wo,{dataTransfer:0}),nh=_i(Ca),sh=v({},vr,{relatedTarget:0}),Ra=_i(sh),ac=v({},Ds,{animationName:0,elapsedTime:0,pseudoElement:0}),rh=_i(ac),xo=v({},Ds,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ah=_i(xo),oh=v({},Ds,{data:0}),fs=_i(oh),lh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ch={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hh(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=uh[s])?!!a[s]:!1}function _r(){return hh}var Ui=v({},vr,{key:function(s){if(s.key){var a=lh[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Aa(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ch[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_r,charCode:function(s){return s.type==="keypress"?Aa(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Aa(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),dh=_i(Ui),fh=v({},wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Os=_i(fh),p=v({},vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_r}),x=_i(p),C=v({},Ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),B=_i(C),se=v({},wo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ce=_i(se),be=v({},Ds,{newState:0,oldState:0}),Pe=_i(be),Ft=[9,13,27,32],rt=Sn&&"CompositionEvent"in window,Mt=null;Sn&&"documentMode"in document&&(Mt=document.documentMode);var Tn=Sn&&"TextEvent"in window&&!Mt,ms=Sn&&(!rt||Mt&&8<Mt&&11>=Mt),Hn=" ",qn=!1;function Na(s,a){switch(s){case"keyup":return Ft.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Eo(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var So=!1;function MT(s,a){switch(s){case"compositionend":return Eo(a);case"keypress":return a.which!==32?null:(qn=!0,Hn);case"textInput":return s=a.data,s===Hn&&qn?null:s;default:return null}}function kT(s,a){if(So)return s==="compositionend"||!rt&&Na(s,a)?(s=nc(),Ta=ic=us=null,So=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ms&&a.locale!=="ko"?null:a.data;default:return null}}var jT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function r1(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!jT[s.type]:a==="textarea"}function a1(s,a,l,u){gr?cs?cs.push(u):cs=[u]:gr=u,a=id(a,"onChange"),0<a.length&&(l=new hs("onChange","change",null,l,u),s.push({event:l,listeners:a}))}var oc=null,lc=null;function DT(s){Fb(s,0)}function mh(s){var a=rn(s);if(wa(a))return s}function o1(s,a){if(s==="change")return a}var l1=!1;if(Sn){var bm;if(Sn){var _m="oninput"in document;if(!_m){var c1=document.createElement("div");c1.setAttribute("oninput","return;"),_m=typeof c1.oninput=="function"}bm=_m}else bm=!1;l1=bm&&(!document.documentMode||9<document.documentMode)}function u1(){oc&&(oc.detachEvent("onpropertychange",h1),lc=oc=null)}function h1(s){if(s.propertyName==="value"&&mh(lc)){var a=[];a1(a,lc,s,En(s)),yr(DT,a)}}function OT(s,a,l){s==="focusin"?(u1(),oc=a,lc=l,oc.attachEvent("onpropertychange",h1)):s==="focusout"&&u1()}function zT(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return mh(lc)}function PT(s,a){if(s==="click")return mh(a)}function LT(s,a){if(s==="input"||s==="change")return mh(a)}function VT(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var on=typeof Object.is=="function"?Object.is:VT;function cc(s,a){if(on(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var l=Object.keys(s),u=Object.keys(a);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var y=l[u];if(!Be.call(a,y)||!on(s[y],a[y]))return!1}return!0}function d1(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function f1(s,a){var l=d1(s);s=0;for(var u;l;){if(l.nodeType===3){if(u=s+l.textContent.length,s<=a&&u>=a)return{node:l,offset:a-s};s=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=d1(l)}}function m1(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?m1(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function p1(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=ls(s.document);a instanceof s.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)s=a.contentWindow;else break;a=ls(s.document)}return a}function wm(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var UT=Sn&&"documentMode"in document&&11>=document.documentMode,To=null,xm=null,uc=null,Em=!1;function g1(s,a,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Em||To==null||To!==ls(u)||(u=To,"selectionStart"in u&&wm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),uc&&cc(uc,u)||(uc=u,u=id(xm,"onSelect"),0<u.length&&(a=new hs("onSelect","select",null,a,l),s.push({event:a,listeners:u}),a.target=To)))}function Ia(s,a){var l={};return l[s.toLowerCase()]=a.toLowerCase(),l["Webkit"+s]="webkit"+a,l["Moz"+s]="moz"+a,l}var Ao={animationend:Ia("Animation","AnimationEnd"),animationiteration:Ia("Animation","AnimationIteration"),animationstart:Ia("Animation","AnimationStart"),transitionrun:Ia("Transition","TransitionRun"),transitionstart:Ia("Transition","TransitionStart"),transitioncancel:Ia("Transition","TransitionCancel"),transitionend:Ia("Transition","TransitionEnd")},Sm={},y1={};Sn&&(y1=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function Ma(s){if(Sm[s])return Sm[s];if(!Ao[s])return s;var a=Ao[s],l;for(l in a)if(a.hasOwnProperty(l)&&l in y1)return Sm[s]=a[l];return s}var v1=Ma("animationend"),b1=Ma("animationiteration"),_1=Ma("animationstart"),BT=Ma("transitionrun"),FT=Ma("transitionstart"),HT=Ma("transitioncancel"),w1=Ma("transitionend"),x1=new Map,Tm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Tm.push("scrollEnd");function Gn(s,a){x1.set(s,a),as(a,[s])}var ph=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},An=[],Co=0,Am=0;function gh(){for(var s=Co,a=Am=Co=0;a<s;){var l=An[a];An[a++]=null;var u=An[a];An[a++]=null;var y=An[a];An[a++]=null;var b=An[a];if(An[a++]=null,u!==null&&y!==null){var A=u.pending;A===null?y.next=y:(y.next=A.next,A.next=y),u.pending=y}b!==0&&E1(l,y,b)}}function yh(s,a,l,u){An[Co++]=s,An[Co++]=a,An[Co++]=l,An[Co++]=u,Am|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function Cm(s,a,l,u){return yh(s,a,l,u),vh(s)}function ka(s,a){return yh(s,null,null,a),vh(s)}function E1(s,a,l){s.lanes|=l;var u=s.alternate;u!==null&&(u.lanes|=l);for(var y=!1,b=s.return;b!==null;)b.childLanes|=l,u=b.alternate,u!==null&&(u.childLanes|=l),b.tag===22&&(s=b.stateNode,s===null||s._visibility&1||(y=!0)),s=b,b=b.return;return s.tag===3?(b=s.stateNode,y&&a!==null&&(y=31-At(l),s=b.hiddenUpdates,u=s[y],u===null?s[y]=[a]:u.push(a),a.lane=l|536870912),b):null}function vh(s){if(50<kc)throw kc=0,zp=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Ro={};function qT(s,a,l,u){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(s,a,l,u){return new qT(s,a,l,u)}function Rm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function zs(s,a){var l=s.alternate;return l===null?(l=ln(s.tag,a,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=a,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,a=s.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function S1(s,a){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,a=l.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function bh(s,a,l,u,y,b){var A=0;if(u=s,typeof s=="function")Rm(s)&&(A=1);else if(typeof s=="string")A=WA(s,l,Q.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case T:return s=ln(31,l,a,y),s.elementType=T,s.lanes=b,s;case R:return ja(l.children,y,b,a);case O:A=8,y|=24;break;case M:return s=ln(12,l,a,y|2),s.elementType=M,s.lanes=b,s;case X:return s=ln(13,l,a,y),s.elementType=X,s.lanes=b,s;case U:return s=ln(19,l,a,y),s.elementType=U,s.lanes=b,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case H:A=10;break e;case F:A=9;break e;case G:A=11;break e;case N:A=14;break e;case E:A=16,u=null;break e}A=29,l=Error(i(130,s===null?"null":typeof s,"")),u=null}return a=ln(A,l,a,y),a.elementType=s,a.type=u,a.lanes=b,a}function ja(s,a,l,u){return s=ln(7,s,u,a),s.lanes=l,s}function Nm(s,a,l){return s=ln(6,s,null,a),s.lanes=l,s}function T1(s){var a=ln(18,null,null,0);return a.stateNode=s,a}function Im(s,a,l){return a=ln(4,s.children!==null?s.children:[],s.key,a),a.lanes=l,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var A1=new WeakMap;function Cn(s,a){if(typeof s=="object"&&s!==null){var l=A1.get(s);return l!==void 0?l:(a={value:s,source:a,stack:st(a)},A1.set(s,a),a)}return{value:s,source:a,stack:st(a)}}var No=[],Io=0,_h=null,hc=0,Rn=[],Nn=0,wr=null,ps=1,gs="";function Ps(s,a){No[Io++]=hc,No[Io++]=_h,_h=s,hc=a}function C1(s,a,l){Rn[Nn++]=ps,Rn[Nn++]=gs,Rn[Nn++]=wr,wr=s;var u=ps;s=gs;var y=32-At(u)-1;u&=~(1<<y),l+=1;var b=32-At(a)+y;if(30<b){var A=y-y%5;b=(u&(1<<A)-1).toString(32),u>>=A,y-=A,ps=1<<32-At(a)+y|l<<y|u,gs=b+s}else ps=1<<b|l<<y|u,gs=s}function Mm(s){s.return!==null&&(Ps(s,1),C1(s,1,0))}function km(s){for(;s===_h;)_h=No[--Io],No[Io]=null,hc=No[--Io],No[Io]=null;for(;s===wr;)wr=Rn[--Nn],Rn[Nn]=null,gs=Rn[--Nn],Rn[Nn]=null,ps=Rn[--Nn],Rn[Nn]=null}function R1(s,a){Rn[Nn++]=ps,Rn[Nn++]=gs,Rn[Nn++]=wr,ps=a.id,gs=a.overflow,wr=s}var wi=null,Ct=null,Xe=!1,xr=null,In=!1,jm=Error(i(519));function Er(s){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw dc(Cn(a,s)),jm}function N1(s){var a=s.stateNode,l=s.type,u=s.memoizedProps;switch(a[Qt]=s,a[ui]=u,l){case"dialog":He("cancel",a),He("close",a);break;case"iframe":case"object":case"embed":He("load",a);break;case"video":case"audio":for(l=0;l<Dc.length;l++)He(Dc[l],a);break;case"source":He("error",a);break;case"img":case"image":case"link":He("error",a),He("load",a);break;case"details":He("toggle",a);break;case"input":He("invalid",a),Zu(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":He("invalid",a);break;case"textarea":He("invalid",a),mr(a,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||u.suppressHydrationWarning===!0||$b(a.textContent,l)?(u.popover!=null&&(He("beforetoggle",a),He("toggle",a)),u.onScroll!=null&&He("scroll",a),u.onScrollEnd!=null&&He("scrollend",a),u.onClick!=null&&(a.onclick=Un),a=!0):a=!1,a||Er(s,!0)}function I1(s){for(wi=s.return;wi;)switch(wi.tag){case 5:case 31:case 13:In=!1;return;case 27:case 3:In=!0;return;default:wi=wi.return}}function Mo(s){if(s!==wi)return!1;if(!Xe)return I1(s),Xe=!0,!1;var a=s.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Xp(s.type,s.memoizedProps)),l=!l),l&&Ct&&Er(s),I1(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Ct=t_(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Ct=t_(s)}else a===27?(a=Ct,Pr(s.type)?(s=ig,ig=null,Ct=s):Ct=a):Ct=wi?kn(s.stateNode.nextSibling):null;return!0}function Da(){Ct=wi=null,Xe=!1}function Dm(){var s=xr;return s!==null&&(Ji===null?Ji=s:Ji.push.apply(Ji,s),xr=null),s}function dc(s){xr===null?xr=[s]:xr.push(s)}var Om=V(null),Oa=null,Ls=null;function Sr(s,a,l){ee(Om,a._currentValue),a._currentValue=l}function Vs(s){s._currentValue=Om.current,q(Om)}function zm(s,a,l){for(;s!==null;){var u=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),s===l)break;s=s.return}}function Pm(s,a,l,u){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var b=y.dependencies;if(b!==null){var A=y.child;b=b.firstContext;e:for(;b!==null;){var L=b;b=y;for(var Y=0;Y<a.length;Y++)if(L.context===a[Y]){b.lanes|=l,L=b.alternate,L!==null&&(L.lanes|=l),zm(b.return,l,s),u||(A=null);break e}b=L.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=l,b=A.alternate,b!==null&&(b.lanes|=l),zm(A,l,s),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===s){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function ko(s,a,l,u){s=null;for(var y=a,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var L=y.type;on(y.pendingProps.value,A.value)||(s!==null?s.push(L):s=[L])}}else if(y===ye.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Vc):s=[Vc])}y=y.return}s!==null&&Pm(a,s,l,u),a.flags|=262144}function wh(s){for(s=s.firstContext;s!==null;){if(!on(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function za(s){Oa=s,Ls=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function xi(s){return M1(Oa,s)}function xh(s,a){return Oa===null&&za(s),M1(s,a)}function M1(s,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Ls===null){if(s===null)throw Error(i(308));Ls=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Ls=Ls.next=a;return l}var GT=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(l,u){s.push(u)}};this.abort=function(){a.aborted=!0,s.forEach(function(l){return l()})}},$T=n.unstable_scheduleCallback,KT=n.unstable_NormalPriority,Zt={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lm(){return{controller:new GT,data:new Map,refCount:0}}function fc(s){s.refCount--,s.refCount===0&&$T(KT,function(){s.controller.abort()})}var mc=null,Vm=0,jo=0,Do=null;function YT(s,a){if(mc===null){var l=mc=[];Vm=0,jo=Fp(),Do={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Vm++,a.then(k1,k1),a}function k1(){if(--Vm===0&&mc!==null){Do!==null&&(Do.status="fulfilled");var s=mc;mc=null,jo=0,Do=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function WT(s,a){var l=[],u={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){u.status="fulfilled",u.value=a;for(var y=0;y<l.length;y++)(0,l[y])(a)},function(y){for(u.status="rejected",u.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),u}var j1=j.S;j.S=function(s,a){gb=Ve(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&YT(s,a),j1!==null&&j1(s,a)};var Pa=V(null);function Um(){var s=Pa.current;return s!==null?s:_t.pooledCache}function Eh(s,a){a===null?ee(Pa,Pa.current):ee(Pa,a.pool)}function D1(){var s=Um();return s===null?null:{parent:Zt._currentValue,pool:s}}var Oo=Error(i(460)),Bm=Error(i(474)),Sh=Error(i(542)),Th={then:function(){}};function O1(s){return s=s.status,s==="fulfilled"||s==="rejected"}function z1(s,a,l){switch(l=s[l],l===void 0?s.push(a):l!==a&&(a.then(Un,Un),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,L1(s),s;default:if(typeof a.status=="string")a.then(Un,Un);else{if(s=_t,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(u){if(a.status==="pending"){var y=a;y.status="fulfilled",y.value=u}},function(u){if(a.status==="pending"){var y=a;y.status="rejected",y.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,L1(s),s}throw Va=a,Oo}}function La(s){try{var a=s._init;return a(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Va=l,Oo):l}}var Va=null;function P1(){if(Va===null)throw Error(i(459));var s=Va;return Va=null,s}function L1(s){if(s===Oo||s===Sh)throw Error(i(483))}var zo=null,pc=0;function Ah(s){var a=pc;return pc+=1,zo===null&&(zo=[]),z1(zo,s,a)}function gc(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function Ch(s,a){throw a.$$typeof===_?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function V1(s){function a(ie,Z){if(s){var ae=ie.deletions;ae===null?(ie.deletions=[Z],ie.flags|=16):ae.push(Z)}}function l(ie,Z){if(!s)return null;for(;Z!==null;)a(ie,Z),Z=Z.sibling;return null}function u(ie){for(var Z=new Map;ie!==null;)ie.key!==null?Z.set(ie.key,ie):Z.set(ie.index,ie),ie=ie.sibling;return Z}function y(ie,Z){return ie=zs(ie,Z),ie.index=0,ie.sibling=null,ie}function b(ie,Z,ae){return ie.index=ae,s?(ae=ie.alternate,ae!==null?(ae=ae.index,ae<Z?(ie.flags|=67108866,Z):ae):(ie.flags|=67108866,Z)):(ie.flags|=1048576,Z)}function A(ie){return s&&ie.alternate===null&&(ie.flags|=67108866),ie}function L(ie,Z,ae,me){return Z===null||Z.tag!==6?(Z=Nm(ae,ie.mode,me),Z.return=ie,Z):(Z=y(Z,ae),Z.return=ie,Z)}function Y(ie,Z,ae,me){var Re=ae.type;return Re===R?he(ie,Z,ae.props.children,me,ae.key):Z!==null&&(Z.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===E&&La(Re)===Z.type)?(Z=y(Z,ae.props),gc(Z,ae),Z.return=ie,Z):(Z=bh(ae.type,ae.key,ae.props,null,ie.mode,me),gc(Z,ae),Z.return=ie,Z)}function oe(ie,Z,ae,me){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ae.containerInfo||Z.stateNode.implementation!==ae.implementation?(Z=Im(ae,ie.mode,me),Z.return=ie,Z):(Z=y(Z,ae.children||[]),Z.return=ie,Z)}function he(ie,Z,ae,me,Re){return Z===null||Z.tag!==7?(Z=ja(ae,ie.mode,me,Re),Z.return=ie,Z):(Z=y(Z,ae),Z.return=ie,Z)}function pe(ie,Z,ae){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=Nm(""+Z,ie.mode,ae),Z.return=ie,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case w:return ae=bh(Z.type,Z.key,Z.props,null,ie.mode,ae),gc(ae,Z),ae.return=ie,ae;case S:return Z=Im(Z,ie.mode,ae),Z.return=ie,Z;case E:return Z=La(Z),pe(ie,Z,ae)}if(K(Z)||z(Z))return Z=ja(Z,ie.mode,ae,null),Z.return=ie,Z;if(typeof Z.then=="function")return pe(ie,Ah(Z),ae);if(Z.$$typeof===H)return pe(ie,xh(ie,Z),ae);Ch(ie,Z)}return null}function le(ie,Z,ae,me){var Re=Z!==null?Z.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return Re!==null?null:L(ie,Z,""+ae,me);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case w:return ae.key===Re?Y(ie,Z,ae,me):null;case S:return ae.key===Re?oe(ie,Z,ae,me):null;case E:return ae=La(ae),le(ie,Z,ae,me)}if(K(ae)||z(ae))return Re!==null?null:he(ie,Z,ae,me,null);if(typeof ae.then=="function")return le(ie,Z,Ah(ae),me);if(ae.$$typeof===H)return le(ie,Z,xh(ie,ae),me);Ch(ie,ae)}return null}function ue(ie,Z,ae,me,Re){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return ie=ie.get(ae)||null,L(Z,ie,""+me,Re);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case w:return ie=ie.get(me.key===null?ae:me.key)||null,Y(Z,ie,me,Re);case S:return ie=ie.get(me.key===null?ae:me.key)||null,oe(Z,ie,me,Re);case E:return me=La(me),ue(ie,Z,ae,me,Re)}if(K(me)||z(me))return ie=ie.get(ae)||null,he(Z,ie,me,Re,null);if(typeof me.then=="function")return ue(ie,Z,ae,Ah(me),Re);if(me.$$typeof===H)return ue(ie,Z,ae,xh(Z,me),Re);Ch(Z,me)}return null}function Se(ie,Z,ae,me){for(var Re=null,it=null,Te=Z,Ue=Z=0,Ge=null;Te!==null&&Ue<ae.length;Ue++){Te.index>Ue?(Ge=Te,Te=null):Ge=Te.sibling;var nt=le(ie,Te,ae[Ue],me);if(nt===null){Te===null&&(Te=Ge);break}s&&Te&&nt.alternate===null&&a(ie,Te),Z=b(nt,Z,Ue),it===null?Re=nt:it.sibling=nt,it=nt,Te=Ge}if(Ue===ae.length)return l(ie,Te),Xe&&Ps(ie,Ue),Re;if(Te===null){for(;Ue<ae.length;Ue++)Te=pe(ie,ae[Ue],me),Te!==null&&(Z=b(Te,Z,Ue),it===null?Re=Te:it.sibling=Te,it=Te);return Xe&&Ps(ie,Ue),Re}for(Te=u(Te);Ue<ae.length;Ue++)Ge=ue(Te,ie,Ue,ae[Ue],me),Ge!==null&&(s&&Ge.alternate!==null&&Te.delete(Ge.key===null?Ue:Ge.key),Z=b(Ge,Z,Ue),it===null?Re=Ge:it.sibling=Ge,it=Ge);return s&&Te.forEach(function(Fr){return a(ie,Fr)}),Xe&&Ps(ie,Ue),Re}function Me(ie,Z,ae,me){if(ae==null)throw Error(i(151));for(var Re=null,it=null,Te=Z,Ue=Z=0,Ge=null,nt=ae.next();Te!==null&&!nt.done;Ue++,nt=ae.next()){Te.index>Ue?(Ge=Te,Te=null):Ge=Te.sibling;var Fr=le(ie,Te,nt.value,me);if(Fr===null){Te===null&&(Te=Ge);break}s&&Te&&Fr.alternate===null&&a(ie,Te),Z=b(Fr,Z,Ue),it===null?Re=Fr:it.sibling=Fr,it=Fr,Te=Ge}if(nt.done)return l(ie,Te),Xe&&Ps(ie,Ue),Re;if(Te===null){for(;!nt.done;Ue++,nt=ae.next())nt=pe(ie,nt.value,me),nt!==null&&(Z=b(nt,Z,Ue),it===null?Re=nt:it.sibling=nt,it=nt);return Xe&&Ps(ie,Ue),Re}for(Te=u(Te);!nt.done;Ue++,nt=ae.next())nt=ue(Te,ie,Ue,nt.value,me),nt!==null&&(s&&nt.alternate!==null&&Te.delete(nt.key===null?Ue:nt.key),Z=b(nt,Z,Ue),it===null?Re=nt:it.sibling=nt,it=nt);return s&&Te.forEach(function(aC){return a(ie,aC)}),Xe&&Ps(ie,Ue),Re}function vt(ie,Z,ae,me){if(typeof ae=="object"&&ae!==null&&ae.type===R&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case w:e:{for(var Re=ae.key;Z!==null;){if(Z.key===Re){if(Re=ae.type,Re===R){if(Z.tag===7){l(ie,Z.sibling),me=y(Z,ae.props.children),me.return=ie,ie=me;break e}}else if(Z.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===E&&La(Re)===Z.type){l(ie,Z.sibling),me=y(Z,ae.props),gc(me,ae),me.return=ie,ie=me;break e}l(ie,Z);break}else a(ie,Z);Z=Z.sibling}ae.type===R?(me=ja(ae.props.children,ie.mode,me,ae.key),me.return=ie,ie=me):(me=bh(ae.type,ae.key,ae.props,null,ie.mode,me),gc(me,ae),me.return=ie,ie=me)}return A(ie);case S:e:{for(Re=ae.key;Z!==null;){if(Z.key===Re)if(Z.tag===4&&Z.stateNode.containerInfo===ae.containerInfo&&Z.stateNode.implementation===ae.implementation){l(ie,Z.sibling),me=y(Z,ae.children||[]),me.return=ie,ie=me;break e}else{l(ie,Z);break}else a(ie,Z);Z=Z.sibling}me=Im(ae,ie.mode,me),me.return=ie,ie=me}return A(ie);case E:return ae=La(ae),vt(ie,Z,ae,me)}if(K(ae))return Se(ie,Z,ae,me);if(z(ae)){if(Re=z(ae),typeof Re!="function")throw Error(i(150));return ae=Re.call(ae),Me(ie,Z,ae,me)}if(typeof ae.then=="function")return vt(ie,Z,Ah(ae),me);if(ae.$$typeof===H)return vt(ie,Z,xh(ie,ae),me);Ch(ie,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,Z!==null&&Z.tag===6?(l(ie,Z.sibling),me=y(Z,ae),me.return=ie,ie=me):(l(ie,Z),me=Nm(ae,ie.mode,me),me.return=ie,ie=me),A(ie)):l(ie,Z)}return function(ie,Z,ae,me){try{pc=0;var Re=vt(ie,Z,ae,me);return zo=null,Re}catch(Te){if(Te===Oo||Te===Sh)throw Te;var it=ln(29,Te,null,ie.mode);return it.lanes=me,it.return=ie,it}}}var Ua=V1(!0),U1=V1(!1),Tr=!1;function Fm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hm(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ar(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Cr(s,a,l){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(at&2)!==0){var y=u.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),u.pending=a,a=vh(s),E1(s,null,l),a}return yh(s,u,a,l),vh(s)}function yc(s,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var u=a.lanes;u&=s.pendingLanes,l|=u,a.lanes=l,ql(s,l)}}function qm(s,a){var l=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var y=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};b===null?y=b=A:b=b.next=A,l=l.next}while(l!==null);b===null?y=b=a:b=b.next=a}else y=b=a;l={baseState:u.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:u.shared,callbacks:u.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=a:s.next=a,l.lastBaseUpdate=a}var Gm=!1;function vc(){if(Gm){var s=Do;if(s!==null)throw s}}function bc(s,a,l,u){Gm=!1;var y=s.updateQueue;Tr=!1;var b=y.firstBaseUpdate,A=y.lastBaseUpdate,L=y.shared.pending;if(L!==null){y.shared.pending=null;var Y=L,oe=Y.next;Y.next=null,A===null?b=oe:A.next=oe,A=Y;var he=s.alternate;he!==null&&(he=he.updateQueue,L=he.lastBaseUpdate,L!==A&&(L===null?he.firstBaseUpdate=oe:L.next=oe,he.lastBaseUpdate=Y))}if(b!==null){var pe=y.baseState;A=0,he=oe=Y=null,L=b;do{var le=L.lane&-536870913,ue=le!==L.lane;if(ue?(qe&le)===le:(u&le)===le){le!==0&&le===jo&&(Gm=!0),he!==null&&(he=he.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var Se=s,Me=L;le=a;var vt=l;switch(Me.tag){case 1:if(Se=Me.payload,typeof Se=="function"){pe=Se.call(vt,pe,le);break e}pe=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Me.payload,le=typeof Se=="function"?Se.call(vt,pe,le):Se,le==null)break e;pe=v({},pe,le);break e;case 2:Tr=!0}}le=L.callback,le!==null&&(s.flags|=64,ue&&(s.flags|=8192),ue=y.callbacks,ue===null?y.callbacks=[le]:ue.push(le))}else ue={lane:le,tag:L.tag,payload:L.payload,callback:L.callback,next:null},he===null?(oe=he=ue,Y=pe):he=he.next=ue,A|=le;if(L=L.next,L===null){if(L=y.shared.pending,L===null)break;ue=L,L=ue.next,ue.next=null,y.lastBaseUpdate=ue,y.shared.pending=null}}while(!0);he===null&&(Y=pe),y.baseState=Y,y.firstBaseUpdate=oe,y.lastBaseUpdate=he,b===null&&(y.shared.lanes=0),kr|=A,s.lanes=A,s.memoizedState=pe}}function B1(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function F1(s,a){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)B1(l[s],a)}var Po=V(null),Rh=V(0);function H1(s,a){s=Ys,ee(Rh,s),ee(Po,a),Ys=s|a.baseLanes}function $m(){ee(Rh,Ys),ee(Po,Po.current)}function Km(){Ys=Rh.current,q(Po),q(Rh)}var cn=V(null),Mn=null;function Rr(s){var a=s.alternate;ee(Ht,Ht.current&1),ee(cn,s),Mn===null&&(a===null||Po.current!==null||a.memoizedState!==null)&&(Mn=s)}function Ym(s){ee(Ht,Ht.current),ee(cn,s),Mn===null&&(Mn=s)}function q1(s){s.tag===22?(ee(Ht,Ht.current),ee(cn,s),Mn===null&&(Mn=s)):Nr()}function Nr(){ee(Ht,Ht.current),ee(cn,cn.current)}function un(s){q(cn),Mn===s&&(Mn=null),q(Ht)}var Ht=V(0);function Nh(s){for(var a=s;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||eg(l)||tg(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Us=0,Le=null,gt=null,ei=null,Ih=!1,Lo=!1,Ba=!1,Mh=0,_c=0,Vo=null,QT=0;function Pt(){throw Error(i(321))}function Wm(s,a){if(a===null)return!1;for(var l=0;l<a.length&&l<s.length;l++)if(!on(s[l],a[l]))return!1;return!0}function Qm(s,a,l,u,y,b){return Us=b,Le=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,j.H=s===null||s.memoizedState===null?Cv:hp,Ba=!1,b=l(u,y),Ba=!1,Lo&&(b=$1(a,l,u,y)),G1(s),b}function G1(s){j.H=Ec;var a=gt!==null&&gt.next!==null;if(Us=0,ei=gt=Le=null,Ih=!1,_c=0,Vo=null,a)throw Error(i(300));s===null||ti||(s=s.dependencies,s!==null&&wh(s)&&(ti=!0))}function $1(s,a,l,u){Le=s;var y=0;do{if(Lo&&(Vo=null),_c=0,Lo=!1,25<=y)throw Error(i(301));if(y+=1,ei=gt=null,s.updateQueue!=null){var b=s.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}j.H=Rv,b=a(l,u)}while(Lo);return b}function XT(){var s=j.H,a=s.useState()[0];return a=typeof a.then=="function"?wc(a):a,s=s.useState()[0],(gt!==null?gt.memoizedState:null)!==s&&(Le.flags|=1024),a}function Xm(){var s=Mh!==0;return Mh=0,s}function Jm(s,a,l){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~l}function Zm(s){if(Ih){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Ih=!1}Us=0,ei=gt=Le=null,Lo=!1,_c=Mh=0,Vo=null}function Bi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ei===null?Le.memoizedState=ei=s:ei=ei.next=s,ei}function qt(){if(gt===null){var s=Le.alternate;s=s!==null?s.memoizedState:null}else s=gt.next;var a=ei===null?Le.memoizedState:ei.next;if(a!==null)ei=a,gt=s;else{if(s===null)throw Le.alternate===null?Error(i(467)):Error(i(310));gt=s,s={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},ei===null?Le.memoizedState=ei=s:ei=ei.next=s}return ei}function kh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wc(s){var a=_c;return _c+=1,Vo===null&&(Vo=[]),s=z1(Vo,s,a),a=Le,(ei===null?a.memoizedState:ei.next)===null&&(a=a.alternate,j.H=a===null||a.memoizedState===null?Cv:hp),s}function jh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return wc(s);if(s.$$typeof===H)return xi(s)}throw Error(i(438,String(s)))}function ep(s){var a=null,l=Le.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var u=Le.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(y){return y.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=kh(),Le.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(s),u=0;u<s;u++)l[u]=D;return a.index++,l}function Bs(s,a){return typeof a=="function"?a(s):a}function Dh(s){var a=qt();return tp(a,gt,s)}function tp(s,a,l){var u=s.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var y=s.baseQueue,b=u.pending;if(b!==null){if(y!==null){var A=y.next;y.next=b.next,b.next=A}a.baseQueue=y=b,u.pending=null}if(b=s.baseState,y===null)s.memoizedState=b;else{a=y.next;var L=A=null,Y=null,oe=a,he=!1;do{var pe=oe.lane&-536870913;if(pe!==oe.lane?(qe&pe)===pe:(Us&pe)===pe){var le=oe.revertLane;if(le===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),pe===jo&&(he=!0);else if((Us&le)===le){oe=oe.next,le===jo&&(he=!0);continue}else pe={lane:0,revertLane:oe.revertLane,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},Y===null?(L=Y=pe,A=b):Y=Y.next=pe,Le.lanes|=le,kr|=le;pe=oe.action,Ba&&l(b,pe),b=oe.hasEagerState?oe.eagerState:l(b,pe)}else le={lane:pe,revertLane:oe.revertLane,gesture:oe.gesture,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},Y===null?(L=Y=le,A=b):Y=Y.next=le,Le.lanes|=pe,kr|=pe;oe=oe.next}while(oe!==null&&oe!==a);if(Y===null?A=b:Y.next=L,!on(b,s.memoizedState)&&(ti=!0,he&&(l=Do,l!==null)))throw l;s.memoizedState=b,s.baseState=A,s.baseQueue=Y,u.lastRenderedState=b}return y===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function ip(s){var a=qt(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var u=l.dispatch,y=l.pending,b=a.memoizedState;if(y!==null){l.pending=null;var A=y=y.next;do b=s(b,A.action),A=A.next;while(A!==y);on(b,a.memoizedState)||(ti=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),l.lastRenderedState=b}return[b,u]}function K1(s,a,l){var u=Le,y=qt(),b=Xe;if(b){if(l===void 0)throw Error(i(407));l=l()}else l=a();var A=!on((gt||y).memoizedState,l);if(A&&(y.memoizedState=l,ti=!0),y=y.queue,rp(Q1.bind(null,u,y,s),[s]),y.getSnapshot!==a||A||ei!==null&&ei.memoizedState.tag&1){if(u.flags|=2048,Uo(9,{destroy:void 0},W1.bind(null,u,y,l,a),null),_t===null)throw Error(i(349));b||(Us&127)!==0||Y1(u,a,l)}return l}function Y1(s,a,l){s.flags|=16384,s={getSnapshot:a,value:l},a=Le.updateQueue,a===null?(a=kh(),Le.updateQueue=a,a.stores=[s]):(l=a.stores,l===null?a.stores=[s]:l.push(s))}function W1(s,a,l,u){a.value=l,a.getSnapshot=u,X1(a)&&J1(s)}function Q1(s,a,l){return l(function(){X1(a)&&J1(s)})}function X1(s){var a=s.getSnapshot;s=s.value;try{var l=a();return!on(s,l)}catch{return!0}}function J1(s){var a=ka(s,2);a!==null&&Zi(a,s,2)}function np(s){var a=Bi();if(typeof s=="function"){var l=s;if(s=l(),Ba){Wt(!0);try{l()}finally{Wt(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:s},a}function Z1(s,a,l,u){return s.baseState=l,tp(s,gt,typeof u=="function"?u:Bs)}function JT(s,a,l,u,y){if(Ph(s))throw Error(i(485));if(s=a.action,s!==null){var b={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){b.listeners.push(A)}};j.T!==null?l(!0):b.isTransition=!1,u(b),l=a.pending,l===null?(b.next=a.pending=b,ev(a,b)):(b.next=l.next,a.pending=l.next=b)}}function ev(s,a){var l=a.action,u=a.payload,y=s.state;if(a.isTransition){var b=j.T,A={};j.T=A;try{var L=l(y,u),Y=j.S;Y!==null&&Y(A,L),tv(s,a,L)}catch(oe){sp(s,a,oe)}finally{b!==null&&A.types!==null&&(b.types=A.types),j.T=b}}else try{b=l(y,u),tv(s,a,b)}catch(oe){sp(s,a,oe)}}function tv(s,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){iv(s,a,u)},function(u){return sp(s,a,u)}):iv(s,a,l)}function iv(s,a,l){a.status="fulfilled",a.value=l,nv(a),s.state=l,a=s.pending,a!==null&&(l=a.next,l===a?s.pending=null:(l=l.next,a.next=l,ev(s,l)))}function sp(s,a,l){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=l,nv(a),a=a.next;while(a!==u)}s.action=null}function nv(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function sv(s,a){return a}function rv(s,a){if(Xe){var l=_t.formState;if(l!==null){e:{var u=Le;if(Xe){if(Ct){t:{for(var y=Ct,b=In;y.nodeType!==8;){if(!b){y=null;break t}if(y=kn(y.nextSibling),y===null){y=null;break t}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){Ct=kn(y.nextSibling),u=y.data==="F!";break e}}Er(u)}u=!1}u&&(a=l[0])}}return l=Bi(),l.memoizedState=l.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sv,lastRenderedState:a},l.queue=u,l=Sv.bind(null,Le,u),u.dispatch=l,u=np(!1),b=up.bind(null,Le,!1,u.queue),u=Bi(),y={state:a,dispatch:null,action:s,pending:null},u.queue=y,l=JT.bind(null,Le,y,b,l),y.dispatch=l,u.memoizedState=s,[a,l,!1]}function av(s){var a=qt();return ov(a,gt,s)}function ov(s,a,l){if(a=tp(s,a,sv)[0],s=Dh(Bs)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=wc(a)}catch(A){throw A===Oo?Sh:A}else u=a;a=qt();var y=a.queue,b=y.dispatch;return l!==a.memoizedState&&(Le.flags|=2048,Uo(9,{destroy:void 0},ZT.bind(null,y,l),null)),[u,b,s]}function ZT(s,a){s.action=a}function lv(s){var a=qt(),l=gt;if(l!==null)return ov(a,l,s);qt(),a=a.memoizedState,l=qt();var u=l.queue.dispatch;return l.memoizedState=s,[a,u,!1]}function Uo(s,a,l,u){return s={tag:s,create:l,deps:u,inst:a,next:null},a=Le.updateQueue,a===null&&(a=kh(),Le.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=s.next=s:(u=l.next,l.next=s,s.next=u,a.lastEffect=s),s}function cv(){return qt().memoizedState}function Oh(s,a,l,u){var y=Bi();Le.flags|=s,y.memoizedState=Uo(1|a,{destroy:void 0},l,u===void 0?null:u)}function zh(s,a,l,u){var y=qt();u=u===void 0?null:u;var b=y.memoizedState.inst;gt!==null&&u!==null&&Wm(u,gt.memoizedState.deps)?y.memoizedState=Uo(a,b,l,u):(Le.flags|=s,y.memoizedState=Uo(1|a,b,l,u))}function uv(s,a){Oh(8390656,8,s,a)}function rp(s,a){zh(2048,8,s,a)}function eA(s){Le.flags|=4;var a=Le.updateQueue;if(a===null)a=kh(),Le.updateQueue=a,a.events=[s];else{var l=a.events;l===null?a.events=[s]:l.push(s)}}function hv(s){var a=qt().memoizedState;return eA({ref:a,nextImpl:s}),function(){if((at&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function dv(s,a){return zh(4,2,s,a)}function fv(s,a){return zh(4,4,s,a)}function mv(s,a){if(typeof a=="function"){s=s();var l=a(s);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function pv(s,a,l){l=l!=null?l.concat([s]):null,zh(4,4,mv.bind(null,a,s),l)}function ap(){}function gv(s,a){var l=qt();a=a===void 0?null:a;var u=l.memoizedState;return a!==null&&Wm(a,u[1])?u[0]:(l.memoizedState=[s,a],s)}function yv(s,a){var l=qt();a=a===void 0?null:a;var u=l.memoizedState;if(a!==null&&Wm(a,u[1]))return u[0];if(u=s(),Ba){Wt(!0);try{s()}finally{Wt(!1)}}return l.memoizedState=[u,a],u}function op(s,a,l){return l===void 0||(Us&1073741824)!==0&&(qe&261930)===0?s.memoizedState=a:(s.memoizedState=l,s=vb(),Le.lanes|=s,kr|=s,l)}function vv(s,a,l,u){return on(l,a)?l:Po.current!==null?(s=op(s,l,u),on(s,a)||(ti=!0),s):(Us&42)===0||(Us&1073741824)!==0&&(qe&261930)===0?(ti=!0,s.memoizedState=l):(s=vb(),Le.lanes|=s,kr|=s,a)}function bv(s,a,l,u,y){var b=P.p;P.p=b!==0&&8>b?b:8;var A=j.T,L={};j.T=L,up(s,!1,a,l);try{var Y=y(),oe=j.S;if(oe!==null&&oe(L,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var he=WT(Y,u);xc(s,a,he,fn(s))}else xc(s,a,u,fn(s))}catch(pe){xc(s,a,{then:function(){},status:"rejected",reason:pe},fn())}finally{P.p=b,A!==null&&L.types!==null&&(A.types=L.types),j.T=A}}function tA(){}function lp(s,a,l,u){if(s.tag!==5)throw Error(i(476));var y=_v(s).queue;bv(s,y,a,ne,l===null?tA:function(){return wv(s),l(u)})}function _v(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:ne},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:l},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function wv(s){var a=_v(s);a.next===null&&(a=s.alternate.memoizedState),xc(s,a.next.queue,{},fn())}function cp(){return xi(Vc)}function xv(){return qt().memoizedState}function Ev(){return qt().memoizedState}function iA(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var l=fn();s=Ar(l);var u=Cr(a,s,l);u!==null&&(Zi(u,a,l),yc(u,a,l)),a={cache:Lm()},s.payload=a;return}a=a.return}}function nA(s,a,l){var u=fn();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ph(s)?Tv(a,l):(l=Cm(s,a,l,u),l!==null&&(Zi(l,s,u),Av(l,a,u)))}function Sv(s,a,l){var u=fn();xc(s,a,l,u)}function xc(s,a,l,u){var y={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ph(s))Tv(a,y);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var A=a.lastRenderedState,L=b(A,l);if(y.hasEagerState=!0,y.eagerState=L,on(L,A))return yh(s,a,y,0),_t===null&&gh(),!1}catch{}if(l=Cm(s,a,y,u),l!==null)return Zi(l,s,u),Av(l,a,u),!0}return!1}function up(s,a,l,u){if(u={lane:2,revertLane:Fp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ph(s)){if(a)throw Error(i(479))}else a=Cm(s,l,u,2),a!==null&&Zi(a,s,2)}function Ph(s){var a=s.alternate;return s===Le||a!==null&&a===Le}function Tv(s,a){Lo=Ih=!0;var l=s.pending;l===null?a.next=a:(a.next=l.next,l.next=a),s.pending=a}function Av(s,a,l){if((l&4194048)!==0){var u=a.lanes;u&=s.pendingLanes,l|=u,a.lanes=l,ql(s,l)}}var Ec={readContext:xi,use:jh,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useLayoutEffect:Pt,useInsertionEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useSyncExternalStore:Pt,useId:Pt,useHostTransitionStatus:Pt,useFormState:Pt,useActionState:Pt,useOptimistic:Pt,useMemoCache:Pt,useCacheRefresh:Pt};Ec.useEffectEvent=Pt;var Cv={readContext:xi,use:jh,useCallback:function(s,a){return Bi().memoizedState=[s,a===void 0?null:a],s},useContext:xi,useEffect:uv,useImperativeHandle:function(s,a,l){l=l!=null?l.concat([s]):null,Oh(4194308,4,mv.bind(null,a,s),l)},useLayoutEffect:function(s,a){return Oh(4194308,4,s,a)},useInsertionEffect:function(s,a){Oh(4,2,s,a)},useMemo:function(s,a){var l=Bi();a=a===void 0?null:a;var u=s();if(Ba){Wt(!0);try{s()}finally{Wt(!1)}}return l.memoizedState=[u,a],u},useReducer:function(s,a,l){var u=Bi();if(l!==void 0){var y=l(a);if(Ba){Wt(!0);try{l(a)}finally{Wt(!1)}}}else y=a;return u.memoizedState=u.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},u.queue=s,s=s.dispatch=nA.bind(null,Le,s),[u.memoizedState,s]},useRef:function(s){var a=Bi();return s={current:s},a.memoizedState=s},useState:function(s){s=np(s);var a=s.queue,l=Sv.bind(null,Le,a);return a.dispatch=l,[s.memoizedState,l]},useDebugValue:ap,useDeferredValue:function(s,a){var l=Bi();return op(l,s,a)},useTransition:function(){var s=np(!1);return s=bv.bind(null,Le,s.queue,!0,!1),Bi().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,l){var u=Le,y=Bi();if(Xe){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),_t===null)throw Error(i(349));(qe&127)!==0||Y1(u,a,l)}y.memoizedState=l;var b={value:l,getSnapshot:a};return y.queue=b,uv(Q1.bind(null,u,b,s),[s]),u.flags|=2048,Uo(9,{destroy:void 0},W1.bind(null,u,b,l,a),null),l},useId:function(){var s=Bi(),a=_t.identifierPrefix;if(Xe){var l=gs,u=ps;l=(u&~(1<<32-At(u)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Mh++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=QT++,a="_"+a+"r_"+l.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:cp,useFormState:rv,useActionState:rv,useOptimistic:function(s){var a=Bi();a.memoizedState=a.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=up.bind(null,Le,!0,l),l.dispatch=a,[s,a]},useMemoCache:ep,useCacheRefresh:function(){return Bi().memoizedState=iA.bind(null,Le)},useEffectEvent:function(s){var a=Bi(),l={impl:s};return a.memoizedState=l,function(){if((at&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},hp={readContext:xi,use:jh,useCallback:gv,useContext:xi,useEffect:rp,useImperativeHandle:pv,useInsertionEffect:dv,useLayoutEffect:fv,useMemo:yv,useReducer:Dh,useRef:cv,useState:function(){return Dh(Bs)},useDebugValue:ap,useDeferredValue:function(s,a){var l=qt();return vv(l,gt.memoizedState,s,a)},useTransition:function(){var s=Dh(Bs)[0],a=qt().memoizedState;return[typeof s=="boolean"?s:wc(s),a]},useSyncExternalStore:K1,useId:xv,useHostTransitionStatus:cp,useFormState:av,useActionState:av,useOptimistic:function(s,a){var l=qt();return Z1(l,gt,s,a)},useMemoCache:ep,useCacheRefresh:Ev};hp.useEffectEvent=hv;var Rv={readContext:xi,use:jh,useCallback:gv,useContext:xi,useEffect:rp,useImperativeHandle:pv,useInsertionEffect:dv,useLayoutEffect:fv,useMemo:yv,useReducer:ip,useRef:cv,useState:function(){return ip(Bs)},useDebugValue:ap,useDeferredValue:function(s,a){var l=qt();return gt===null?op(l,s,a):vv(l,gt.memoizedState,s,a)},useTransition:function(){var s=ip(Bs)[0],a=qt().memoizedState;return[typeof s=="boolean"?s:wc(s),a]},useSyncExternalStore:K1,useId:xv,useHostTransitionStatus:cp,useFormState:lv,useActionState:lv,useOptimistic:function(s,a){var l=qt();return gt!==null?Z1(l,gt,s,a):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:ep,useCacheRefresh:Ev};Rv.useEffectEvent=hv;function dp(s,a,l,u){a=s.memoizedState,l=l(u,a),l=l==null?a:v({},a,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var fp={enqueueSetState:function(s,a,l){s=s._reactInternals;var u=fn(),y=Ar(u);y.payload=a,l!=null&&(y.callback=l),a=Cr(s,y,u),a!==null&&(Zi(a,s,u),yc(a,s,u))},enqueueReplaceState:function(s,a,l){s=s._reactInternals;var u=fn(),y=Ar(u);y.tag=1,y.payload=a,l!=null&&(y.callback=l),a=Cr(s,y,u),a!==null&&(Zi(a,s,u),yc(a,s,u))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var l=fn(),u=Ar(l);u.tag=2,a!=null&&(u.callback=a),a=Cr(s,u,l),a!==null&&(Zi(a,s,l),yc(a,s,l))}};function Nv(s,a,l,u,y,b,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,b,A):a.prototype&&a.prototype.isPureReactComponent?!cc(l,u)||!cc(y,b):!0}function Iv(s,a,l,u){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,u),a.state!==s&&fp.enqueueReplaceState(a,a.state,null)}function Fa(s,a){var l=a;if("ref"in a){l={};for(var u in a)u!=="ref"&&(l[u]=a[u])}if(s=s.defaultProps){l===a&&(l=v({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}function Mv(s){ph(s)}function kv(s){console.error(s)}function jv(s){ph(s)}function Lh(s,a){try{var l=s.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function Dv(s,a,l){try{var u=s.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function mp(s,a,l){return l=Ar(l),l.tag=3,l.payload={element:null},l.callback=function(){Lh(s,a)},l}function Ov(s){return s=Ar(s),s.tag=3,s}function zv(s,a,l,u){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var b=u.value;s.payload=function(){return y(b)},s.callback=function(){Dv(a,l,u)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){Dv(a,l,u),typeof y!="function"&&(jr===null?jr=new Set([this]):jr.add(this));var L=u.stack;this.componentDidCatch(u.value,{componentStack:L!==null?L:""})})}function sA(s,a,l,u,y){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=l.alternate,a!==null&&ko(a,l,y,!0),l=cn.current,l!==null){switch(l.tag){case 31:case 13:return Mn===null?Qh():l.alternate===null&&Lt===0&&(Lt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,u===Th?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([u]):a.add(u),Vp(s,u,y)),!1;case 22:return l.flags|=65536,u===Th?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([u]):l.add(u)),Vp(s,u,y)),!1}throw Error(i(435,l.tag))}return Vp(s,u,y),Qh(),!1}if(Xe)return a=cn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=y,u!==jm&&(s=Error(i(422),{cause:u}),dc(Cn(s,l)))):(u!==jm&&(a=Error(i(423),{cause:u}),dc(Cn(a,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,u=Cn(u,l),y=mp(s.stateNode,u,y),qm(s,y),Lt!==4&&(Lt=2)),!1;var b=Error(i(520),{cause:u});if(b=Cn(b,l),Mc===null?Mc=[b]:Mc.push(b),Lt!==4&&(Lt=2),a===null)return!0;u=Cn(u,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=mp(l.stateNode,u,s),qm(l,s),!1;case 1:if(a=l.type,b=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(jr===null||!jr.has(b))))return l.flags|=65536,y&=-y,l.lanes|=y,y=Ov(y),zv(y,s,l,u),qm(l,y),!1}l=l.return}while(l!==null);return!1}var pp=Error(i(461)),ti=!1;function Ei(s,a,l,u){a.child=s===null?U1(a,null,l,u):Ua(a,s.child,l,u)}function Pv(s,a,l,u,y){l=l.render;var b=a.ref;if("ref"in u){var A={};for(var L in u)L!=="ref"&&(A[L]=u[L])}else A=u;return za(a),u=Qm(s,a,l,A,b,y),L=Xm(),s!==null&&!ti?(Jm(s,a,y),Fs(s,a,y)):(Xe&&L&&Mm(a),a.flags|=1,Ei(s,a,u,y),a.child)}function Lv(s,a,l,u,y){if(s===null){var b=l.type;return typeof b=="function"&&!Rm(b)&&b.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=b,Vv(s,a,b,u,y)):(s=bh(l.type,null,u,a,a.mode,y),s.ref=a.ref,s.return=a,a.child=s)}if(b=s.child,!Ep(s,y)){var A=b.memoizedProps;if(l=l.compare,l=l!==null?l:cc,l(A,u)&&s.ref===a.ref)return Fs(s,a,y)}return a.flags|=1,s=zs(b,u),s.ref=a.ref,s.return=a,a.child=s}function Vv(s,a,l,u,y){if(s!==null){var b=s.memoizedProps;if(cc(b,u)&&s.ref===a.ref)if(ti=!1,a.pendingProps=u=b,Ep(s,y))(s.flags&131072)!==0&&(ti=!0);else return a.lanes=s.lanes,Fs(s,a,y)}return gp(s,a,l,u,y)}function Uv(s,a,l,u){var y=u.children,b=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(b=b!==null?b.baseLanes|l:l,s!==null){for(u=a.child=s.child,y=0;u!==null;)y=y|u.lanes|u.childLanes,u=u.sibling;u=y&~b}else u=0,a.child=null;return Bv(s,a,b,l,u)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Eh(a,b!==null?b.cachePool:null),b!==null?H1(a,b):$m(),q1(a);else return u=a.lanes=536870912,Bv(s,a,b!==null?b.baseLanes|l:l,l,u)}else b!==null?(Eh(a,b.cachePool),H1(a,b),Nr(),a.memoizedState=null):(s!==null&&Eh(a,null),$m(),Nr());return Ei(s,a,y,l),a.child}function Sc(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Bv(s,a,l,u,y){var b=Um();return b=b===null?null:{parent:Zt._currentValue,pool:b},a.memoizedState={baseLanes:l,cachePool:b},s!==null&&Eh(a,null),$m(),q1(a),s!==null&&ko(s,a,u,!0),a.childLanes=y,null}function Vh(s,a){return a=Bh({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function Fv(s,a,l){return Ua(a,s.child,null,l),s=Vh(a,a.pendingProps),s.flags|=2,un(a),a.memoizedState=null,s}function rA(s,a,l){var u=a.pendingProps,y=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(Xe){if(u.mode==="hidden")return s=Vh(a,u),a.lanes=536870912,Sc(null,s);if(Ym(a),(s=Ct)?(s=e_(s,In),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:wr!==null?{id:ps,overflow:gs}:null,retryLane:536870912,hydrationErrors:null},l=T1(s),l.return=a,a.child=l,wi=a,Ct=null)):s=null,s===null)throw Er(a);return a.lanes=536870912,null}return Vh(a,u)}var b=s.memoizedState;if(b!==null){var A=b.dehydrated;if(Ym(a),y)if(a.flags&256)a.flags&=-257,a=Fv(s,a,l);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(i(558));else if(ti||ko(s,a,l,!1),y=(l&s.childLanes)!==0,ti||y){if(u=_t,u!==null&&(A=Gl(u,l),A!==0&&A!==b.retryLane))throw b.retryLane=A,ka(s,A),Zi(u,s,A),pp;Qh(),a=Fv(s,a,l)}else s=b.treeContext,Ct=kn(A.nextSibling),wi=a,Xe=!0,xr=null,In=!1,s!==null&&R1(a,s),a=Vh(a,u),a.flags|=4096;return a}return s=zs(s.child,{mode:u.mode,children:u.children}),s.ref=a.ref,a.child=s,s.return=a,s}function Uh(s,a){var l=a.ref;if(l===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(a.flags|=4194816)}}function gp(s,a,l,u,y){return za(a),l=Qm(s,a,l,u,void 0,y),u=Xm(),s!==null&&!ti?(Jm(s,a,y),Fs(s,a,y)):(Xe&&u&&Mm(a),a.flags|=1,Ei(s,a,l,y),a.child)}function Hv(s,a,l,u,y,b){return za(a),a.updateQueue=null,l=$1(a,u,l,y),G1(s),u=Xm(),s!==null&&!ti?(Jm(s,a,b),Fs(s,a,b)):(Xe&&u&&Mm(a),a.flags|=1,Ei(s,a,l,b),a.child)}function qv(s,a,l,u,y){if(za(a),a.stateNode===null){var b=Ro,A=l.contextType;typeof A=="object"&&A!==null&&(b=xi(A)),b=new l(u,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=fp,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=u,b.state=a.memoizedState,b.refs={},Fm(a),A=l.contextType,b.context=typeof A=="object"&&A!==null?xi(A):Ro,b.state=a.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(dp(a,l,A,u),b.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(A=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),A!==b.state&&fp.enqueueReplaceState(b,b.state,null),bc(a,u,b,y),vc(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(s===null){b=a.stateNode;var L=a.memoizedProps,Y=Fa(l,L);b.props=Y;var oe=b.context,he=l.contextType;A=Ro,typeof he=="object"&&he!==null&&(A=xi(he));var pe=l.getDerivedStateFromProps;he=typeof pe=="function"||typeof b.getSnapshotBeforeUpdate=="function",L=a.pendingProps!==L,he||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(L||oe!==A)&&Iv(a,b,u,A),Tr=!1;var le=a.memoizedState;b.state=le,bc(a,u,b,y),vc(),oe=a.memoizedState,L||le!==oe||Tr?(typeof pe=="function"&&(dp(a,l,pe,u),oe=a.memoizedState),(Y=Tr||Nv(a,l,Y,u,le,oe,A))?(he||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=oe),b.props=u,b.state=oe,b.context=A,u=Y):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{b=a.stateNode,Hm(s,a),A=a.memoizedProps,he=Fa(l,A),b.props=he,pe=a.pendingProps,le=b.context,oe=l.contextType,Y=Ro,typeof oe=="object"&&oe!==null&&(Y=xi(oe)),L=l.getDerivedStateFromProps,(oe=typeof L=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(A!==pe||le!==Y)&&Iv(a,b,u,Y),Tr=!1,le=a.memoizedState,b.state=le,bc(a,u,b,y),vc();var ue=a.memoizedState;A!==pe||le!==ue||Tr||s!==null&&s.dependencies!==null&&wh(s.dependencies)?(typeof L=="function"&&(dp(a,l,L,u),ue=a.memoizedState),(he=Tr||Nv(a,l,he,u,le,ue,Y)||s!==null&&s.dependencies!==null&&wh(s.dependencies))?(oe||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(u,ue,Y),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(u,ue,Y)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||A===s.memoizedProps&&le===s.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&le===s.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=ue),b.props=u,b.state=ue,b.context=Y,u=he):(typeof b.componentDidUpdate!="function"||A===s.memoizedProps&&le===s.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&le===s.memoizedState||(a.flags|=1024),u=!1)}return b=u,Uh(s,a),u=(a.flags&128)!==0,b||u?(b=a.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,s!==null&&u?(a.child=Ua(a,s.child,null,y),a.child=Ua(a,null,l,y)):Ei(s,a,l,y),a.memoizedState=b.state,s=a.child):s=Fs(s,a,y),s}function Gv(s,a,l,u){return Da(),a.flags|=256,Ei(s,a,l,u),a.child}var yp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vp(s){return{baseLanes:s,cachePool:D1()}}function bp(s,a,l){return s=s!==null?s.childLanes&~l:0,a&&(s|=dn),s}function $v(s,a,l){var u=a.pendingProps,y=!1,b=(a.flags&128)!==0,A;if((A=b)||(A=s!==null&&s.memoizedState===null?!1:(Ht.current&2)!==0),A&&(y=!0,a.flags&=-129),A=(a.flags&32)!==0,a.flags&=-33,s===null){if(Xe){if(y?Rr(a):Nr(),(s=Ct)?(s=e_(s,In),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:wr!==null?{id:ps,overflow:gs}:null,retryLane:536870912,hydrationErrors:null},l=T1(s),l.return=a,a.child=l,wi=a,Ct=null)):s=null,s===null)throw Er(a);return tg(s)?a.lanes=32:a.lanes=536870912,null}var L=u.children;return u=u.fallback,y?(Nr(),y=a.mode,L=Bh({mode:"hidden",children:L},y),u=ja(u,y,l,null),L.return=a,u.return=a,L.sibling=u,a.child=L,u=a.child,u.memoizedState=vp(l),u.childLanes=bp(s,A,l),a.memoizedState=yp,Sc(null,u)):(Rr(a),_p(a,L))}var Y=s.memoizedState;if(Y!==null&&(L=Y.dehydrated,L!==null)){if(b)a.flags&256?(Rr(a),a.flags&=-257,a=wp(s,a,l)):a.memoizedState!==null?(Nr(),a.child=s.child,a.flags|=128,a=null):(Nr(),L=u.fallback,y=a.mode,u=Bh({mode:"visible",children:u.children},y),L=ja(L,y,l,null),L.flags|=2,u.return=a,L.return=a,u.sibling=L,a.child=u,Ua(a,s.child,null,l),u=a.child,u.memoizedState=vp(l),u.childLanes=bp(s,A,l),a.memoizedState=yp,a=Sc(null,u));else if(Rr(a),tg(L)){if(A=L.nextSibling&&L.nextSibling.dataset,A)var oe=A.dgst;A=oe,u=Error(i(419)),u.stack="",u.digest=A,dc({value:u,source:null,stack:null}),a=wp(s,a,l)}else if(ti||ko(s,a,l,!1),A=(l&s.childLanes)!==0,ti||A){if(A=_t,A!==null&&(u=Gl(A,l),u!==0&&u!==Y.retryLane))throw Y.retryLane=u,ka(s,u),Zi(A,s,u),pp;eg(L)||Qh(),a=wp(s,a,l)}else eg(L)?(a.flags|=192,a.child=s.child,a=null):(s=Y.treeContext,Ct=kn(L.nextSibling),wi=a,Xe=!0,xr=null,In=!1,s!==null&&R1(a,s),a=_p(a,u.children),a.flags|=4096);return a}return y?(Nr(),L=u.fallback,y=a.mode,Y=s.child,oe=Y.sibling,u=zs(Y,{mode:"hidden",children:u.children}),u.subtreeFlags=Y.subtreeFlags&65011712,oe!==null?L=zs(oe,L):(L=ja(L,y,l,null),L.flags|=2),L.return=a,u.return=a,u.sibling=L,a.child=u,Sc(null,u),u=a.child,L=s.child.memoizedState,L===null?L=vp(l):(y=L.cachePool,y!==null?(Y=Zt._currentValue,y=y.parent!==Y?{parent:Y,pool:Y}:y):y=D1(),L={baseLanes:L.baseLanes|l,cachePool:y}),u.memoizedState=L,u.childLanes=bp(s,A,l),a.memoizedState=yp,Sc(s.child,u)):(Rr(a),l=s.child,s=l.sibling,l=zs(l,{mode:"visible",children:u.children}),l.return=a,l.sibling=null,s!==null&&(A=a.deletions,A===null?(a.deletions=[s],a.flags|=16):A.push(s)),a.child=l,a.memoizedState=null,l)}function _p(s,a){return a=Bh({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Bh(s,a){return s=ln(22,s,null,a),s.lanes=0,s}function wp(s,a,l){return Ua(a,s.child,null,l),s=_p(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function Kv(s,a,l){s.lanes|=a;var u=s.alternate;u!==null&&(u.lanes|=a),zm(s.return,a,l)}function xp(s,a,l,u,y,b){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:y,treeForkCount:b}:(A.isBackwards=a,A.rendering=null,A.renderingStartTime=0,A.last=u,A.tail=l,A.tailMode=y,A.treeForkCount=b)}function Yv(s,a,l){var u=a.pendingProps,y=u.revealOrder,b=u.tail;u=u.children;var A=Ht.current,L=(A&2)!==0;if(L?(A=A&1|2,a.flags|=128):A&=1,ee(Ht,A),Ei(s,a,u,l),u=Xe?hc:0,!L&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Kv(s,l,a);else if(s.tag===19)Kv(s,l,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(l=a.child,y=null;l!==null;)s=l.alternate,s!==null&&Nh(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=a.child,a.child=null):(y=l.sibling,l.sibling=null),xp(a,!1,y,l,b,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=a.child,a.child=null;y!==null;){if(s=y.alternate,s!==null&&Nh(s)===null){a.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}xp(a,!0,l,null,b,u);break;case"together":xp(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function Fs(s,a,l){if(s!==null&&(a.dependencies=s.dependencies),kr|=a.lanes,(l&a.childLanes)===0)if(s!==null){if(ko(s,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,l=zs(s,s.pendingProps),a.child=l,l.return=a;s.sibling!==null;)s=s.sibling,l=l.sibling=zs(s,s.pendingProps),l.return=a;l.sibling=null}return a.child}function Ep(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&wh(s)))}function aA(s,a,l){switch(a.tag){case 3:Ne(a,a.stateNode.containerInfo),Sr(a,Zt,s.memoizedState.cache),Da();break;case 27:case 5:We(a);break;case 4:Ne(a,a.stateNode.containerInfo);break;case 10:Sr(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Ym(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(Rr(a),a.flags|=128,null):(l&a.child.childLanes)!==0?$v(s,a,l):(Rr(a),s=Fs(s,a,l),s!==null?s.sibling:null);Rr(a);break;case 19:var y=(s.flags&128)!==0;if(u=(l&a.childLanes)!==0,u||(ko(s,a,l,!1),u=(l&a.childLanes)!==0),y){if(u)return Yv(s,a,l);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ee(Ht,Ht.current),u)break;return null;case 22:return a.lanes=0,Uv(s,a,l,a.pendingProps);case 24:Sr(a,Zt,s.memoizedState.cache)}return Fs(s,a,l)}function Wv(s,a,l){if(s!==null)if(s.memoizedProps!==a.pendingProps)ti=!0;else{if(!Ep(s,l)&&(a.flags&128)===0)return ti=!1,aA(s,a,l);ti=(s.flags&131072)!==0}else ti=!1,Xe&&(a.flags&1048576)!==0&&C1(a,hc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(s=La(a.elementType),a.type=s,typeof s=="function")Rm(s)?(u=Fa(s,u),a.tag=1,a=qv(null,a,s,u,l)):(a.tag=0,a=gp(null,a,s,u,l));else{if(s!=null){var y=s.$$typeof;if(y===G){a.tag=11,a=Pv(null,a,s,u,l);break e}else if(y===N){a.tag=14,a=Lv(null,a,s,u,l);break e}}throw a=W(s)||s,Error(i(306,a,""))}}return a;case 0:return gp(s,a,a.type,a.pendingProps,l);case 1:return u=a.type,y=Fa(u,a.pendingProps),qv(s,a,u,y,l);case 3:e:{if(Ne(a,a.stateNode.containerInfo),s===null)throw Error(i(387));u=a.pendingProps;var b=a.memoizedState;y=b.element,Hm(s,a),bc(a,u,null,l);var A=a.memoizedState;if(u=A.cache,Sr(a,Zt,u),u!==b.cache&&Pm(a,[Zt],l,!0),vc(),u=A.element,b.isDehydrated)if(b={element:u,isDehydrated:!1,cache:A.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=Gv(s,a,u,l);break e}else if(u!==y){y=Cn(Error(i(424)),a),dc(y),a=Gv(s,a,u,l);break e}else for(s=a.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,Ct=kn(s.firstChild),wi=a,Xe=!0,xr=null,In=!0,l=U1(a,null,u,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Da(),u===y){a=Fs(s,a,l);break e}Ei(s,a,u,l)}a=a.child}return a;case 26:return Uh(s,a),s===null?(l=a_(a.type,null,a.pendingProps,null))?a.memoizedState=l:Xe||(l=a.type,s=a.pendingProps,u=nd(fe.current).createElement(l),u[Qt]=a,u[ui]=s,Si(u,l,s),Xt(u),a.stateNode=u):a.memoizedState=a_(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return We(a),s===null&&Xe&&(u=a.stateNode=n_(a.type,a.pendingProps,fe.current),wi=a,In=!0,y=Ct,Pr(a.type)?(ig=y,Ct=kn(u.firstChild)):Ct=y),Ei(s,a,a.pendingProps.children,l),Uh(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&Xe&&((y=u=Ct)&&(u=zA(u,a.type,a.pendingProps,In),u!==null?(a.stateNode=u,wi=a,Ct=kn(u.firstChild),In=!1,y=!0):y=!1),y||Er(a)),We(a),y=a.type,b=a.pendingProps,A=s!==null?s.memoizedProps:null,u=b.children,Xp(y,b)?u=null:A!==null&&Xp(y,A)&&(a.flags|=32),a.memoizedState!==null&&(y=Qm(s,a,XT,null,null,l),Vc._currentValue=y),Uh(s,a),Ei(s,a,u,l),a.child;case 6:return s===null&&Xe&&((s=l=Ct)&&(l=PA(l,a.pendingProps,In),l!==null?(a.stateNode=l,wi=a,Ct=null,s=!0):s=!1),s||Er(a)),null;case 13:return $v(s,a,l);case 4:return Ne(a,a.stateNode.containerInfo),u=a.pendingProps,s===null?a.child=Ua(a,null,u,l):Ei(s,a,u,l),a.child;case 11:return Pv(s,a,a.type,a.pendingProps,l);case 7:return Ei(s,a,a.pendingProps,l),a.child;case 8:return Ei(s,a,a.pendingProps.children,l),a.child;case 12:return Ei(s,a,a.pendingProps.children,l),a.child;case 10:return u=a.pendingProps,Sr(a,a.type,u.value),Ei(s,a,u.children,l),a.child;case 9:return y=a.type._context,u=a.pendingProps.children,za(a),y=xi(y),u=u(y),a.flags|=1,Ei(s,a,u,l),a.child;case 14:return Lv(s,a,a.type,a.pendingProps,l);case 15:return Vv(s,a,a.type,a.pendingProps,l);case 19:return Yv(s,a,l);case 31:return rA(s,a,l);case 22:return Uv(s,a,l,a.pendingProps);case 24:return za(a),u=xi(Zt),s===null?(y=Um(),y===null&&(y=_t,b=Lm(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=l),y=b),a.memoizedState={parent:u,cache:y},Fm(a),Sr(a,Zt,y)):((s.lanes&l)!==0&&(Hm(s,a),bc(a,null,null,l),vc()),y=s.memoizedState,b=a.memoizedState,y.parent!==u?(y={parent:u,cache:u},a.memoizedState=y,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=y),Sr(a,Zt,u)):(u=b.cache,Sr(a,Zt,u),u!==y.cache&&Pm(a,[Zt],l,!0))),Ei(s,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Hs(s){s.flags|=4}function Sp(s,a,l,u,y){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(xb())s.flags|=8192;else throw Va=Th,Bm}else s.flags&=-16777217}function Qv(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!h_(a))if(xb())s.flags|=8192;else throw Va=Th,Bm}function Fh(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?wn():536870912,s.lanes|=a,qo|=a)}function Tc(s,a){if(!Xe)switch(s.tailMode){case"hidden":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function Rt(s){var a=s.alternate!==null&&s.alternate.child===s.child,l=0,u=0;if(a)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,u|=y.subtreeFlags&65011712,u|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,u|=y.subtreeFlags,u|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=u,s.childLanes=l,a}function oA(s,a,l){var u=a.pendingProps;switch(km(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(a),null;case 1:return Rt(a),null;case 3:return l=a.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Vs(Zt),Ae(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Mo(a)?Hs(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Dm())),Rt(a),null;case 26:var y=a.type,b=a.memoizedState;return s===null?(Hs(a),b!==null?(Rt(a),Qv(a,b)):(Rt(a),Sp(a,y,null,u,l))):b?b!==s.memoizedState?(Hs(a),Rt(a),Qv(a,b)):(Rt(a),a.flags&=-16777217):(s=s.memoizedProps,s!==u&&Hs(a),Rt(a),Sp(a,y,s,u,l)),null;case 27:if(tt(a),l=fe.current,y=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==u&&Hs(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return Rt(a),null}s=Q.current,Mo(a)?N1(a):(s=n_(y,u,l),a.stateNode=s,Hs(a))}return Rt(a),null;case 5:if(tt(a),y=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==u&&Hs(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return Rt(a),null}if(b=Q.current,Mo(a))N1(a);else{var A=nd(fe.current);switch(b){case 1:b=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:b=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":b=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":b=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":b=A.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof u.is=="string"?A.createElement("select",{is:u.is}):A.createElement("select"),u.multiple?b.multiple=!0:u.size&&(b.size=u.size);break;default:b=typeof u.is=="string"?A.createElement(y,{is:u.is}):A.createElement(y)}}b[Qt]=a,b[ui]=u;e:for(A=a.child;A!==null;){if(A.tag===5||A.tag===6)b.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===a)break e;for(;A.sibling===null;){if(A.return===null||A.return===a)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}a.stateNode=b;e:switch(Si(b,y,u),y){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Hs(a)}}return Rt(a),Sp(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,l),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==u&&Hs(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(i(166));if(s=fe.current,Mo(a)){if(s=a.stateNode,l=a.memoizedProps,u=null,y=wi,y!==null)switch(y.tag){case 27:case 5:u=y.memoizedProps}s[Qt]=a,s=!!(s.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||$b(s.nodeValue,l)),s||Er(a,!0)}else s=nd(s).createTextNode(u),s[Qt]=a,a.stateNode=s}return Rt(a),null;case 31:if(l=a.memoizedState,s===null||s.memoizedState!==null){if(u=Mo(a),l!==null){if(s===null){if(!u)throw Error(i(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Qt]=a}else Da(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Rt(a),s=!1}else l=Dm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return a.flags&256?(un(a),a):(un(a),null);if((a.flags&128)!==0)throw Error(i(558))}return Rt(a),null;case 13:if(u=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Mo(a),u!==null&&u.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=a.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Qt]=a}else Da(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Rt(a),y=!1}else y=Dm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return a.flags&256?(un(a),a):(un(a),null)}return un(a),(a.flags&128)!==0?(a.lanes=l,a):(l=u!==null,s=s!==null&&s.memoizedState!==null,l&&(u=a.child,y=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(y=u.alternate.memoizedState.cachePool.pool),b=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(b=u.memoizedState.cachePool.pool),b!==y&&(u.flags|=2048)),l!==s&&l&&(a.child.flags|=8192),Fh(a,a.updateQueue),Rt(a),null);case 4:return Ae(),s===null&&$p(a.stateNode.containerInfo),Rt(a),null;case 10:return Vs(a.type),Rt(a),null;case 19:if(q(Ht),u=a.memoizedState,u===null)return Rt(a),null;if(y=(a.flags&128)!==0,b=u.rendering,b===null)if(y)Tc(u,!1);else{if(Lt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(b=Nh(s),b!==null){for(a.flags|=128,Tc(u,!1),s=b.updateQueue,a.updateQueue=s,Fh(a,s),a.subtreeFlags=0,s=l,l=a.child;l!==null;)S1(l,s),l=l.sibling;return ee(Ht,Ht.current&1|2),Xe&&Ps(a,u.treeForkCount),a.child}s=s.sibling}u.tail!==null&&Ve()>Kh&&(a.flags|=128,y=!0,Tc(u,!1),a.lanes=4194304)}else{if(!y)if(s=Nh(b),s!==null){if(a.flags|=128,y=!0,s=s.updateQueue,a.updateQueue=s,Fh(a,s),Tc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!b.alternate&&!Xe)return Rt(a),null}else 2*Ve()-u.renderingStartTime>Kh&&l!==536870912&&(a.flags|=128,y=!0,Tc(u,!1),a.lanes=4194304);u.isBackwards?(b.sibling=a.child,a.child=b):(s=u.last,s!==null?s.sibling=b:a.child=b,u.last=b)}return u.tail!==null?(s=u.tail,u.rendering=s,u.tail=s.sibling,u.renderingStartTime=Ve(),s.sibling=null,l=Ht.current,ee(Ht,y?l&1|2:l&1),Xe&&Ps(a,u.treeForkCount),s):(Rt(a),null);case 22:case 23:return un(a),Km(),u=a.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(l&536870912)!==0&&(a.flags&128)===0&&(Rt(a),a.subtreeFlags&6&&(a.flags|=8192)):Rt(a),l=a.updateQueue,l!==null&&Fh(a,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==l&&(a.flags|=2048),s!==null&&q(Pa),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Vs(Zt),Rt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function lA(s,a){switch(km(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Vs(Zt),Ae(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return tt(a),null;case 31:if(a.memoizedState!==null){if(un(a),a.alternate===null)throw Error(i(340));Da()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(un(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Da()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return q(Ht),null;case 4:return Ae(),null;case 10:return Vs(a.type),null;case 22:case 23:return un(a),Km(),s!==null&&q(Pa),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return Vs(Zt),null;case 25:return null;default:return null}}function Xv(s,a){switch(km(a),a.tag){case 3:Vs(Zt),Ae();break;case 26:case 27:case 5:tt(a);break;case 4:Ae();break;case 31:a.memoizedState!==null&&un(a);break;case 13:un(a);break;case 19:q(Ht);break;case 10:Vs(a.type);break;case 22:case 23:un(a),Km(),s!==null&&q(Pa);break;case 24:Vs(Zt)}}function Ac(s,a){try{var l=a.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var y=u.next;l=y;do{if((l.tag&s)===s){u=void 0;var b=l.create,A=l.inst;u=b(),A.destroy=u}l=l.next}while(l!==y)}}catch(L){dt(a,a.return,L)}}function Ir(s,a,l){try{var u=a.updateQueue,y=u!==null?u.lastEffect:null;if(y!==null){var b=y.next;u=b;do{if((u.tag&s)===s){var A=u.inst,L=A.destroy;if(L!==void 0){A.destroy=void 0,y=a;var Y=l,oe=L;try{oe()}catch(he){dt(y,Y,he)}}}u=u.next}while(u!==b)}}catch(he){dt(a,a.return,he)}}function Jv(s){var a=s.updateQueue;if(a!==null){var l=s.stateNode;try{F1(a,l)}catch(u){dt(s,s.return,u)}}}function Zv(s,a,l){l.props=Fa(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(u){dt(s,a,u)}}function Cc(s,a){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof l=="function"?s.refCleanup=l(u):l.current=u}}catch(y){dt(s,a,y)}}function ys(s,a){var l=s.ref,u=s.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(y){dt(s,a,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){dt(s,a,y)}else l.current=null}function eb(s){var a=s.type,l=s.memoizedProps,u=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(y){dt(s,s.return,y)}}function Tp(s,a,l){try{var u=s.stateNode;IA(u,s.type,l,a),u[ui]=a}catch(y){dt(s,s.return,y)}}function tb(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Pr(s.type)||s.tag===4}function Ap(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||tb(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Pr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Cp(s,a,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(s),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Un));else if(u!==4&&(u===27&&Pr(s.type)&&(l=s.stateNode,a=null),s=s.child,s!==null))for(Cp(s,a,l),s=s.sibling;s!==null;)Cp(s,a,l),s=s.sibling}function Hh(s,a,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?l.insertBefore(s,a):l.appendChild(s);else if(u!==4&&(u===27&&Pr(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Hh(s,a,l),s=s.sibling;s!==null;)Hh(s,a,l),s=s.sibling}function ib(s){var a=s.stateNode,l=s.memoizedProps;try{for(var u=s.type,y=a.attributes;y.length;)a.removeAttributeNode(y[0]);Si(a,u,l),a[Qt]=s,a[ui]=l}catch(b){dt(s,s.return,b)}}var qs=!1,ii=!1,Rp=!1,nb=typeof WeakSet=="function"?WeakSet:Set,di=null;function cA(s,a){if(s=s.containerInfo,Wp=ud,s=p1(s),wm(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var y=u.anchorOffset,b=u.focusNode;u=u.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var A=0,L=-1,Y=-1,oe=0,he=0,pe=s,le=null;t:for(;;){for(var ue;pe!==l||y!==0&&pe.nodeType!==3||(L=A+y),pe!==b||u!==0&&pe.nodeType!==3||(Y=A+u),pe.nodeType===3&&(A+=pe.nodeValue.length),(ue=pe.firstChild)!==null;)le=pe,pe=ue;for(;;){if(pe===s)break t;if(le===l&&++oe===y&&(L=A),le===b&&++he===u&&(Y=A),(ue=pe.nextSibling)!==null)break;pe=le,le=pe.parentNode}pe=ue}l=L===-1||Y===-1?null:{start:L,end:Y}}else l=null}l=l||{start:0,end:0}}else l=null;for(Qp={focusedElem:s,selectionRange:l},ud=!1,di=a;di!==null;)if(a=di,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,di=s;else for(;di!==null;){switch(a=di,b=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)y=s[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&b!==null){s=void 0,l=a,y=b.memoizedProps,b=b.memoizedState,u=l.stateNode;try{var Se=Fa(l.type,y);s=u.getSnapshotBeforeUpdate(Se,b),u.__reactInternalSnapshotBeforeUpdate=s}catch(Me){dt(l,l.return,Me)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,l=s.nodeType,l===9)Zp(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Zp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,di=s;break}di=a.return}}function sb(s,a,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:$s(s,l),u&4&&Ac(5,l);break;case 1:if($s(s,l),u&4)if(s=l.stateNode,a===null)try{s.componentDidMount()}catch(A){dt(l,l.return,A)}else{var y=Fa(l.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(y,a,s.__reactInternalSnapshotBeforeUpdate)}catch(A){dt(l,l.return,A)}}u&64&&Jv(l),u&512&&Cc(l,l.return);break;case 3:if($s(s,l),u&64&&(s=l.updateQueue,s!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{F1(s,a)}catch(A){dt(l,l.return,A)}}break;case 27:a===null&&u&4&&ib(l);case 26:case 5:$s(s,l),a===null&&u&4&&eb(l),u&512&&Cc(l,l.return);break;case 12:$s(s,l);break;case 31:$s(s,l),u&4&&ob(s,l);break;case 13:$s(s,l),u&4&&lb(s,l),u&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=vA.bind(null,l),LA(s,l))));break;case 22:if(u=l.memoizedState!==null||qs,!u){a=a!==null&&a.memoizedState!==null||ii,y=qs;var b=ii;qs=u,(ii=a)&&!b?Ks(s,l,(l.subtreeFlags&8772)!==0):$s(s,l),qs=y,ii=b}break;case 30:break;default:$s(s,l)}}function rb(s){var a=s.alternate;a!==null&&(s.alternate=null,rb(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&mo(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var kt=null,Wi=!1;function Gs(s,a,l){for(l=l.child;l!==null;)ab(s,a,l),l=l.sibling}function ab(s,a,l){if(mt&&typeof mt.onCommitFiberUnmount=="function")try{mt.onCommitFiberUnmount(Bt,l)}catch{}switch(l.tag){case 26:ii||ys(l,a),Gs(s,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:ii||ys(l,a);var u=kt,y=Wi;Pr(l.type)&&(kt=l.stateNode,Wi=!1),Gs(s,a,l),zc(l.stateNode),kt=u,Wi=y;break;case 5:ii||ys(l,a);case 6:if(u=kt,y=Wi,kt=null,Gs(s,a,l),kt=u,Wi=y,kt!==null)if(Wi)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(l.stateNode)}catch(b){dt(l,a,b)}else try{kt.removeChild(l.stateNode)}catch(b){dt(l,a,b)}break;case 18:kt!==null&&(Wi?(s=kt,Jb(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Jo(s)):Jb(kt,l.stateNode));break;case 4:u=kt,y=Wi,kt=l.stateNode.containerInfo,Wi=!0,Gs(s,a,l),kt=u,Wi=y;break;case 0:case 11:case 14:case 15:Ir(2,l,a),ii||Ir(4,l,a),Gs(s,a,l);break;case 1:ii||(ys(l,a),u=l.stateNode,typeof u.componentWillUnmount=="function"&&Zv(l,a,u)),Gs(s,a,l);break;case 21:Gs(s,a,l);break;case 22:ii=(u=ii)||l.memoizedState!==null,Gs(s,a,l),ii=u;break;default:Gs(s,a,l)}}function ob(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Jo(s)}catch(l){dt(a,a.return,l)}}}function lb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Jo(s)}catch(l){dt(a,a.return,l)}}function uA(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new nb),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new nb),a;default:throw Error(i(435,s.tag))}}function qh(s,a){var l=uA(s);a.forEach(function(u){if(!l.has(u)){l.add(u);var y=bA.bind(null,s,u);u.then(y,y)}})}function Qi(s,a){var l=a.deletions;if(l!==null)for(var u=0;u<l.length;u++){var y=l[u],b=s,A=a,L=A;e:for(;L!==null;){switch(L.tag){case 27:if(Pr(L.type)){kt=L.stateNode,Wi=!1;break e}break;case 5:kt=L.stateNode,Wi=!1;break e;case 3:case 4:kt=L.stateNode.containerInfo,Wi=!0;break e}L=L.return}if(kt===null)throw Error(i(160));ab(b,A,y),kt=null,Wi=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)cb(a,s),a=a.sibling}var $n=null;function cb(s,a){var l=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Qi(a,s),Xi(s),u&4&&(Ir(3,s,s.return),Ac(3,s),Ir(5,s,s.return));break;case 1:Qi(a,s),Xi(s),u&512&&(ii||l===null||ys(l,l.return)),u&64&&qs&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var y=$n;if(Qi(a,s),Xi(s),u&512&&(ii||l===null||ys(l,l.return)),u&4){var b=l!==null?l.memoizedState:null;if(u=s.memoizedState,l===null)if(u===null)if(s.stateNode===null){e:{u=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(u){case"title":b=y.getElementsByTagName("title")[0],(!b||b[ns]||b[Qt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(u),y.head.insertBefore(b,y.querySelector("head > title"))),Si(b,u,l),b[Qt]=s,Xt(b),u=b;break e;case"link":var A=c_("link","href",y).get(u+(l.href||""));if(A){for(var L=0;L<A.length;L++)if(b=A[L],b.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&b.getAttribute("rel")===(l.rel==null?null:l.rel)&&b.getAttribute("title")===(l.title==null?null:l.title)&&b.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(L,1);break t}}b=y.createElement(u),Si(b,u,l),y.head.appendChild(b);break;case"meta":if(A=c_("meta","content",y).get(u+(l.content||""))){for(L=0;L<A.length;L++)if(b=A[L],b.getAttribute("content")===(l.content==null?null:""+l.content)&&b.getAttribute("name")===(l.name==null?null:l.name)&&b.getAttribute("property")===(l.property==null?null:l.property)&&b.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&b.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(L,1);break t}}b=y.createElement(u),Si(b,u,l),y.head.appendChild(b);break;default:throw Error(i(468,u))}b[Qt]=s,Xt(b),u=b}s.stateNode=u}else u_(y,s.type,s.stateNode);else s.stateNode=l_(y,u,s.memoizedProps);else b!==u?(b===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):b.count--,u===null?u_(y,s.type,s.stateNode):l_(y,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Tp(s,s.memoizedProps,l.memoizedProps)}break;case 27:Qi(a,s),Xi(s),u&512&&(ii||l===null||ys(l,l.return)),l!==null&&u&4&&Tp(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Qi(a,s),Xi(s),u&512&&(ii||l===null||ys(l,l.return)),s.flags&32){y=s.stateNode;try{Yi(y,"")}catch(Se){dt(s,s.return,Se)}}u&4&&s.stateNode!=null&&(y=s.memoizedProps,Tp(s,y,l!==null?l.memoizedProps:y)),u&1024&&(Rp=!0);break;case 6:if(Qi(a,s),Xi(s),u&4){if(s.stateNode===null)throw Error(i(162));u=s.memoizedProps,l=s.stateNode;try{l.nodeValue=u}catch(Se){dt(s,s.return,Se)}}break;case 3:if(ad=null,y=$n,$n=sd(a.containerInfo),Qi(a,s),$n=y,Xi(s),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Jo(a.containerInfo)}catch(Se){dt(s,s.return,Se)}Rp&&(Rp=!1,ub(s));break;case 4:u=$n,$n=sd(s.stateNode.containerInfo),Qi(a,s),Xi(s),$n=u;break;case 12:Qi(a,s),Xi(s);break;case 31:Qi(a,s),Xi(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,qh(s,u)));break;case 13:Qi(a,s),Xi(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&($h=Ve()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,qh(s,u)));break;case 22:y=s.memoizedState!==null;var Y=l!==null&&l.memoizedState!==null,oe=qs,he=ii;if(qs=oe||y,ii=he||Y,Qi(a,s),ii=he,qs=oe,Xi(s),u&8192)e:for(a=s.stateNode,a._visibility=y?a._visibility&-2:a._visibility|1,y&&(l===null||Y||qs||ii||Ha(s)),l=null,a=s;;){if(a.tag===5||a.tag===26){if(l===null){Y=l=a;try{if(b=Y.stateNode,y)A=b.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{L=Y.stateNode;var pe=Y.memoizedProps.style,le=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;L.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(Se){dt(Y,Y.return,Se)}}}else if(a.tag===6){if(l===null){Y=a;try{Y.stateNode.nodeValue=y?"":Y.memoizedProps}catch(Se){dt(Y,Y.return,Se)}}}else if(a.tag===18){if(l===null){Y=a;try{var ue=Y.stateNode;y?Zb(ue,!0):Zb(Y.stateNode,!1)}catch(Se){dt(Y,Y.return,Se)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=s.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,qh(s,l))));break;case 19:Qi(a,s),Xi(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,qh(s,u)));break;case 30:break;case 21:break;default:Qi(a,s),Xi(s)}}function Xi(s){var a=s.flags;if(a&2){try{for(var l,u=s.return;u!==null;){if(tb(u)){l=u;break}u=u.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,b=Ap(s);Hh(s,b,y);break;case 5:var A=l.stateNode;l.flags&32&&(Yi(A,""),l.flags&=-33);var L=Ap(s);Hh(s,L,A);break;case 3:case 4:var Y=l.stateNode.containerInfo,oe=Ap(s);Cp(s,oe,Y);break;default:throw Error(i(161))}}catch(he){dt(s,s.return,he)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function ub(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;ub(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function $s(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)sb(s,a.alternate,a),a=a.sibling}function Ha(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:Ir(4,a,a.return),Ha(a);break;case 1:ys(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&Zv(a,a.return,l),Ha(a);break;case 27:zc(a.stateNode);case 26:case 5:ys(a,a.return),Ha(a);break;case 22:a.memoizedState===null&&Ha(a);break;case 30:Ha(a);break;default:Ha(a)}s=s.sibling}}function Ks(s,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,y=s,b=a,A=b.flags;switch(b.tag){case 0:case 11:case 15:Ks(y,b,l),Ac(4,b);break;case 1:if(Ks(y,b,l),u=b,y=u.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(oe){dt(u,u.return,oe)}if(u=b,y=u.updateQueue,y!==null){var L=u.stateNode;try{var Y=y.shared.hiddenCallbacks;if(Y!==null)for(y.shared.hiddenCallbacks=null,y=0;y<Y.length;y++)B1(Y[y],L)}catch(oe){dt(u,u.return,oe)}}l&&A&64&&Jv(b),Cc(b,b.return);break;case 27:ib(b);case 26:case 5:Ks(y,b,l),l&&u===null&&A&4&&eb(b),Cc(b,b.return);break;case 12:Ks(y,b,l);break;case 31:Ks(y,b,l),l&&A&4&&ob(y,b);break;case 13:Ks(y,b,l),l&&A&4&&lb(y,b);break;case 22:b.memoizedState===null&&Ks(y,b,l),Cc(b,b.return);break;case 30:break;default:Ks(y,b,l)}a=a.sibling}}function Np(s,a){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&fc(l))}function Ip(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&fc(s))}function Kn(s,a,l,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)hb(s,a,l,u),a=a.sibling}function hb(s,a,l,u){var y=a.flags;switch(a.tag){case 0:case 11:case 15:Kn(s,a,l,u),y&2048&&Ac(9,a);break;case 1:Kn(s,a,l,u);break;case 3:Kn(s,a,l,u),y&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&fc(s)));break;case 12:if(y&2048){Kn(s,a,l,u),s=a.stateNode;try{var b=a.memoizedProps,A=b.id,L=b.onPostCommit;typeof L=="function"&&L(A,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(Y){dt(a,a.return,Y)}}else Kn(s,a,l,u);break;case 31:Kn(s,a,l,u);break;case 13:Kn(s,a,l,u);break;case 23:break;case 22:b=a.stateNode,A=a.alternate,a.memoizedState!==null?b._visibility&2?Kn(s,a,l,u):Rc(s,a):b._visibility&2?Kn(s,a,l,u):(b._visibility|=2,Bo(s,a,l,u,(a.subtreeFlags&10256)!==0||!1)),y&2048&&Np(A,a);break;case 24:Kn(s,a,l,u),y&2048&&Ip(a.alternate,a);break;default:Kn(s,a,l,u)}}function Bo(s,a,l,u,y){for(y=y&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var b=s,A=a,L=l,Y=u,oe=A.flags;switch(A.tag){case 0:case 11:case 15:Bo(b,A,L,Y,y),Ac(8,A);break;case 23:break;case 22:var he=A.stateNode;A.memoizedState!==null?he._visibility&2?Bo(b,A,L,Y,y):Rc(b,A):(he._visibility|=2,Bo(b,A,L,Y,y)),y&&oe&2048&&Np(A.alternate,A);break;case 24:Bo(b,A,L,Y,y),y&&oe&2048&&Ip(A.alternate,A);break;default:Bo(b,A,L,Y,y)}a=a.sibling}}function Rc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=s,u=a,y=u.flags;switch(u.tag){case 22:Rc(l,u),y&2048&&Np(u.alternate,u);break;case 24:Rc(l,u),y&2048&&Ip(u.alternate,u);break;default:Rc(l,u)}a=a.sibling}}var Nc=8192;function Fo(s,a,l){if(s.subtreeFlags&Nc)for(s=s.child;s!==null;)db(s,a,l),s=s.sibling}function db(s,a,l){switch(s.tag){case 26:Fo(s,a,l),s.flags&Nc&&s.memoizedState!==null&&QA(l,$n,s.memoizedState,s.memoizedProps);break;case 5:Fo(s,a,l);break;case 3:case 4:var u=$n;$n=sd(s.stateNode.containerInfo),Fo(s,a,l),$n=u;break;case 22:s.memoizedState===null&&(u=s.alternate,u!==null&&u.memoizedState!==null?(u=Nc,Nc=16777216,Fo(s,a,l),Nc=u):Fo(s,a,l));break;default:Fo(s,a,l)}}function fb(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Ic(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];di=u,pb(u,s)}fb(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)mb(s),s=s.sibling}function mb(s){switch(s.tag){case 0:case 11:case 15:Ic(s),s.flags&2048&&Ir(9,s,s.return);break;case 3:Ic(s);break;case 12:Ic(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Gh(s)):Ic(s);break;default:Ic(s)}}function Gh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];di=u,pb(u,s)}fb(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:Ir(8,a,a.return),Gh(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Gh(a));break;default:Gh(a)}s=s.sibling}}function pb(s,a){for(;di!==null;){var l=di;switch(l.tag){case 0:case 11:case 15:Ir(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:fc(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,di=u;else e:for(l=s;di!==null;){u=di;var y=u.sibling,b=u.return;if(rb(u),u===l){di=null;break e}if(y!==null){y.return=b,di=y;break e}di=b}}}var hA={getCacheForType:function(s){var a=xi(Zt),l=a.data.get(s);return l===void 0&&(l=s(),a.data.set(s,l)),l},cacheSignal:function(){return xi(Zt).controller.signal}},dA=typeof WeakMap=="function"?WeakMap:Map,at=0,_t=null,Fe=null,qe=0,ht=0,hn=null,Mr=!1,Ho=!1,Mp=!1,Ys=0,Lt=0,kr=0,qa=0,kp=0,dn=0,qo=0,Mc=null,Ji=null,jp=!1,$h=0,gb=0,Kh=1/0,Yh=null,jr=null,oi=0,Dr=null,Go=null,Ws=0,Dp=0,Op=null,yb=null,kc=0,zp=null;function fn(){return(at&2)!==0&&qe!==0?qe&-qe:j.T!==null?Fp():Wu()}function vb(){if(dn===0)if((qe&536870912)===0||Xe){var s=Ms;Ms<<=1,(Ms&3932160)===0&&(Ms=262144),dn=s}else dn=536870912;return s=cn.current,s!==null&&(s.flags|=32),dn}function Zi(s,a,l){(s===_t&&(ht===2||ht===9)||s.cancelPendingCommit!==null)&&($o(s,0),Or(s,qe,dn,!1)),va(s,l),((at&2)===0||s!==_t)&&(s===_t&&((at&2)===0&&(qa|=l),Lt===4&&Or(s,qe,dn,!1)),vs(s))}function bb(s,a,l){if((at&6)!==0)throw Error(i(327));var u=!l&&(a&127)===0&&(a&s.expiredLanes)===0||bi(s,a),y=u?pA(s,a):Lp(s,a,!0),b=u;do{if(y===0){Ho&&!u&&Or(s,a,0,!1);break}else{if(l=s.current.alternate,b&&!fA(l)){y=Lp(s,a,!1),b=!1;continue}if(y===2){if(b=a,s.errorRecoveryDisabledLanes&b)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){a=A;e:{var L=s;y=Mc;var Y=L.current.memoizedState.isDehydrated;if(Y&&($o(L,A).flags|=256),A=Lp(L,A,!1),A!==2){if(Mp&&!Y){L.errorRecoveryDisabledLanes|=b,qa|=b,y=4;break e}b=Ji,Ji=y,b!==null&&(Ji===null?Ji=b:Ji.push.apply(Ji,b))}y=A}if(b=!1,y!==2)continue}}if(y===1){$o(s,0),Or(s,a,0,!0);break}e:{switch(u=s,b=y,b){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Or(u,a,dn,!Mr);break e;case 2:Ji=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(y=$h+300-Ve(),10<y)){if(Or(u,a,dn,!Mr),vi(u,0,!0)!==0)break e;Ws=a,u.timeoutHandle=Qb(_b.bind(null,u,l,Ji,Yh,jp,a,dn,qa,qo,Mr,b,"Throttled",-0,0),y);break e}_b(u,l,Ji,Yh,jp,a,dn,qa,qo,Mr,b,null,-0,0)}}break}while(!0);vs(s)}function _b(s,a,l,u,y,b,A,L,Y,oe,he,pe,le,ue){if(s.timeoutHandle=-1,pe=a.subtreeFlags,pe&8192||(pe&16785408)===16785408){pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Un},db(a,b,pe);var Se=(b&62914560)===b?$h-Ve():(b&4194048)===b?gb-Ve():0;if(Se=XA(pe,Se),Se!==null){Ws=b,s.cancelPendingCommit=Se(Rb.bind(null,s,a,b,l,u,y,A,L,Y,he,pe,null,le,ue)),Or(s,b,A,!oe);return}}Rb(s,a,b,l,u,y,A,L,Y)}function fA(s){for(var a=s;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var y=l[u],b=y.getSnapshot;y=y.value;try{if(!on(b(),y))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Or(s,a,l,u){a&=~kp,a&=~qa,s.suspendedLanes|=a,s.pingedLanes&=~a,u&&(s.warmLanes|=a),u=s.expirationTimes;for(var y=a;0<y;){var b=31-At(y),A=1<<b;u[b]=-1,y&=~A}l!==0&&ba(s,l,a)}function Wh(){return(at&6)===0?(jc(0),!1):!0}function Pp(){if(Fe!==null){if(ht===0)var s=Fe.return;else s=Fe,Ls=Oa=null,Zm(s),zo=null,pc=0,s=Fe;for(;s!==null;)Xv(s.alternate,s),s=s.return;Fe=null}}function $o(s,a){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,jA(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Ws=0,Pp(),_t=s,Fe=l=zs(s.current,null),qe=a,ht=0,hn=null,Mr=!1,Ho=bi(s,a),Mp=!1,qo=dn=kp=qa=kr=Lt=0,Ji=Mc=null,jp=!1,(a&8)!==0&&(a|=a&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=a;0<u;){var y=31-At(u),b=1<<y;a|=s[y],u&=~b}return Ys=a,gh(),l}function wb(s,a){Le=null,j.H=Ec,a===Oo||a===Sh?(a=P1(),ht=3):a===Bm?(a=P1(),ht=4):ht=a===pp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,hn=a,Fe===null&&(Lt=1,Lh(s,Cn(a,s.current)))}function xb(){var s=cn.current;return s===null?!0:(qe&4194048)===qe?Mn===null:(qe&62914560)===qe||(qe&536870912)!==0?s===Mn:!1}function Eb(){var s=j.H;return j.H=Ec,s===null?Ec:s}function Sb(){var s=j.A;return j.A=hA,s}function Qh(){Lt=4,Mr||(qe&4194048)!==qe&&cn.current!==null||(Ho=!0),(kr&134217727)===0&&(qa&134217727)===0||_t===null||Or(_t,qe,dn,!1)}function Lp(s,a,l){var u=at;at|=2;var y=Eb(),b=Sb();(_t!==s||qe!==a)&&(Yh=null,$o(s,a)),a=!1;var A=Lt;e:do try{if(ht!==0&&Fe!==null){var L=Fe,Y=hn;switch(ht){case 8:Pp(),A=6;break e;case 3:case 2:case 9:case 6:cn.current===null&&(a=!0);var oe=ht;if(ht=0,hn=null,Ko(s,L,Y,oe),l&&Ho){A=0;break e}break;default:oe=ht,ht=0,hn=null,Ko(s,L,Y,oe)}}mA(),A=Lt;break}catch(he){wb(s,he)}while(!0);return a&&s.shellSuspendCounter++,Ls=Oa=null,at=u,j.H=y,j.A=b,Fe===null&&(_t=null,qe=0,gh()),A}function mA(){for(;Fe!==null;)Tb(Fe)}function pA(s,a){var l=at;at|=2;var u=Eb(),y=Sb();_t!==s||qe!==a?(Yh=null,Kh=Ve()+500,$o(s,a)):Ho=bi(s,a);e:do try{if(ht!==0&&Fe!==null){a=Fe;var b=hn;t:switch(ht){case 1:ht=0,hn=null,Ko(s,a,b,1);break;case 2:case 9:if(O1(b)){ht=0,hn=null,Ab(a);break}a=function(){ht!==2&&ht!==9||_t!==s||(ht=7),vs(s)},b.then(a,a);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:O1(b)?(ht=0,hn=null,Ab(a)):(ht=0,hn=null,Ko(s,a,b,7));break;case 5:var A=null;switch(Fe.tag){case 26:A=Fe.memoizedState;case 5:case 27:var L=Fe;if(A?h_(A):L.stateNode.complete){ht=0,hn=null;var Y=L.sibling;if(Y!==null)Fe=Y;else{var oe=L.return;oe!==null?(Fe=oe,Xh(oe)):Fe=null}break t}}ht=0,hn=null,Ko(s,a,b,5);break;case 6:ht=0,hn=null,Ko(s,a,b,6);break;case 8:Pp(),Lt=6;break e;default:throw Error(i(462))}}gA();break}catch(he){wb(s,he)}while(!0);return Ls=Oa=null,j.H=u,j.A=y,at=l,Fe!==null?0:(_t=null,qe=0,gh(),Lt)}function gA(){for(;Fe!==null&&!gi();)Tb(Fe)}function Tb(s){var a=Wv(s.alternate,s,Ys);s.memoizedProps=s.pendingProps,a===null?Xh(s):Fe=a}function Ab(s){var a=s,l=a.alternate;switch(a.tag){case 15:case 0:a=Hv(l,a,a.pendingProps,a.type,void 0,qe);break;case 11:a=Hv(l,a,a.pendingProps,a.type.render,a.ref,qe);break;case 5:Zm(a);default:Xv(l,a),a=Fe=S1(a,Ys),a=Wv(l,a,Ys)}s.memoizedProps=s.pendingProps,a===null?Xh(s):Fe=a}function Ko(s,a,l,u){Ls=Oa=null,Zm(a),zo=null,pc=0;var y=a.return;try{if(sA(s,y,a,l,qe)){Lt=1,Lh(s,Cn(l,s.current)),Fe=null;return}}catch(b){if(y!==null)throw Fe=y,b;Lt=1,Lh(s,Cn(l,s.current)),Fe=null;return}a.flags&32768?(Xe||u===1?s=!0:Ho||(qe&536870912)!==0?s=!1:(Mr=s=!0,(u===2||u===9||u===3||u===6)&&(u=cn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Cb(a,s)):Xh(a)}function Xh(s){var a=s;do{if((a.flags&32768)!==0){Cb(a,Mr);return}s=a.return;var l=oA(a.alternate,a,Ys);if(l!==null){Fe=l;return}if(a=a.sibling,a!==null){Fe=a;return}Fe=a=s}while(a!==null);Lt===0&&(Lt=5)}function Cb(s,a){do{var l=lA(s.alternate,s);if(l!==null){l.flags&=32767,Fe=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(s=s.sibling,s!==null)){Fe=s;return}Fe=s=l}while(s!==null);Lt=6,Fe=null}function Rb(s,a,l,u,y,b,A,L,Y){s.cancelPendingCommit=null;do Jh();while(oi!==0);if((at&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(b=a.lanes|a.childLanes,b|=Am,ym(s,l,b,A,L,Y),s===_t&&(Fe=_t=null,qe=0),Go=a,Dr=s,Ws=l,Dp=b,Op=y,yb=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,_A(Tt,function(){return jb(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=j.T,j.T=null,y=P.p,P.p=2,A=at,at|=4;try{cA(s,a,l)}finally{at=A,P.p=y,j.T=u}}oi=1,Nb(),Ib(),Mb()}}function Nb(){if(oi===1){oi=0;var s=Dr,a=Go,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=j.T,j.T=null;var u=P.p;P.p=2;var y=at;at|=4;try{cb(a,s);var b=Qp,A=p1(s.containerInfo),L=b.focusedElem,Y=b.selectionRange;if(A!==L&&L&&L.ownerDocument&&m1(L.ownerDocument.documentElement,L)){if(Y!==null&&wm(L)){var oe=Y.start,he=Y.end;if(he===void 0&&(he=oe),"selectionStart"in L)L.selectionStart=oe,L.selectionEnd=Math.min(he,L.value.length);else{var pe=L.ownerDocument||document,le=pe&&pe.defaultView||window;if(le.getSelection){var ue=le.getSelection(),Se=L.textContent.length,Me=Math.min(Y.start,Se),vt=Y.end===void 0?Me:Math.min(Y.end,Se);!ue.extend&&Me>vt&&(A=vt,vt=Me,Me=A);var ie=f1(L,Me),Z=f1(L,vt);if(ie&&Z&&(ue.rangeCount!==1||ue.anchorNode!==ie.node||ue.anchorOffset!==ie.offset||ue.focusNode!==Z.node||ue.focusOffset!==Z.offset)){var ae=pe.createRange();ae.setStart(ie.node,ie.offset),ue.removeAllRanges(),Me>vt?(ue.addRange(ae),ue.extend(Z.node,Z.offset)):(ae.setEnd(Z.node,Z.offset),ue.addRange(ae))}}}}for(pe=[],ue=L;ue=ue.parentNode;)ue.nodeType===1&&pe.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<pe.length;L++){var me=pe[L];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}ud=!!Wp,Qp=Wp=null}finally{at=y,P.p=u,j.T=l}}s.current=a,oi=2}}function Ib(){if(oi===2){oi=0;var s=Dr,a=Go,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=j.T,j.T=null;var u=P.p;P.p=2;var y=at;at|=4;try{sb(s,a.alternate,a)}finally{at=y,P.p=u,j.T=l}}oi=3}}function Mb(){if(oi===4||oi===3){oi=0,St();var s=Dr,a=Go,l=Ws,u=yb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?oi=5:(oi=0,Go=Dr=null,kb(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(jr=null),ks(l),a=a.stateNode,mt&&typeof mt.onCommitFiberRoot=="function")try{mt.onCommitFiberRoot(Bt,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=j.T,y=P.p,P.p=2,j.T=null;try{for(var b=s.onRecoverableError,A=0;A<u.length;A++){var L=u[A];b(L.value,{componentStack:L.stack})}}finally{j.T=a,P.p=y}}(Ws&3)!==0&&Jh(),vs(s),y=s.pendingLanes,(l&261930)!==0&&(y&42)!==0?s===zp?kc++:(kc=0,zp=s):kc=0,jc(0)}}function kb(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,fc(a)))}function Jh(){return Nb(),Ib(),Mb(),jb()}function jb(){if(oi!==5)return!1;var s=Dr,a=Dp;Dp=0;var l=ks(Ws),u=j.T,y=P.p;try{P.p=32>l?32:l,j.T=null,l=Op,Op=null;var b=Dr,A=Ws;if(oi=0,Go=Dr=null,Ws=0,(at&6)!==0)throw Error(i(331));var L=at;if(at|=4,mb(b.current),hb(b,b.current,A,l),at=L,jc(0,!1),mt&&typeof mt.onPostCommitFiberRoot=="function")try{mt.onPostCommitFiberRoot(Bt,b)}catch{}return!0}finally{P.p=y,j.T=u,kb(s,a)}}function Db(s,a,l){a=Cn(l,a),a=mp(s.stateNode,a,2),s=Cr(s,a,2),s!==null&&(va(s,2),vs(s))}function dt(s,a,l){if(s.tag===3)Db(s,s,l);else for(;a!==null;){if(a.tag===3){Db(a,s,l);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(jr===null||!jr.has(u))){s=Cn(l,s),l=Ov(2),u=Cr(a,l,2),u!==null&&(zv(l,u,a,s),va(u,2),vs(u));break}}a=a.return}}function Vp(s,a,l){var u=s.pingCache;if(u===null){u=s.pingCache=new dA;var y=new Set;u.set(a,y)}else y=u.get(a),y===void 0&&(y=new Set,u.set(a,y));y.has(l)||(Mp=!0,y.add(l),s=yA.bind(null,s,a,l),a.then(s,s))}function yA(s,a,l){var u=s.pingCache;u!==null&&u.delete(a),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,_t===s&&(qe&l)===l&&(Lt===4||Lt===3&&(qe&62914560)===qe&&300>Ve()-$h?(at&2)===0&&$o(s,0):kp|=l,qo===qe&&(qo=0)),vs(s)}function Ob(s,a){a===0&&(a=wn()),s=ka(s,a),s!==null&&(va(s,a),vs(s))}function vA(s){var a=s.memoizedState,l=0;a!==null&&(l=a.retryLane),Ob(s,l)}function bA(s,a){var l=0;switch(s.tag){case 31:case 13:var u=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(a),Ob(s,l)}function _A(s,a){return Qe(s,a)}var Zh=null,Yo=null,Up=!1,ed=!1,Bp=!1,zr=0;function vs(s){s!==Yo&&s.next===null&&(Yo===null?Zh=Yo=s:Yo=Yo.next=s),ed=!0,Up||(Up=!0,xA())}function jc(s,a){if(!Bp&&ed){Bp=!0;do for(var l=!1,u=Zh;u!==null;){if(s!==0){var y=u.pendingLanes;if(y===0)var b=0;else{var A=u.suspendedLanes,L=u.pingedLanes;b=(1<<31-At(42|s)+1)-1,b&=y&~(A&~L),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(l=!0,Vb(u,b))}else b=qe,b=vi(u,u===_t?b:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(b&3)===0||bi(u,b)||(l=!0,Vb(u,b));u=u.next}while(l);Bp=!1}}function wA(){zb()}function zb(){ed=Up=!1;var s=0;zr!==0&&kA()&&(s=zr);for(var a=Ve(),l=null,u=Zh;u!==null;){var y=u.next,b=Pb(u,a);b===0?(u.next=null,l===null?Zh=y:l.next=y,y===null&&(Yo=l)):(l=u,(s!==0||(b&3)!==0)&&(ed=!0)),u=y}oi!==0&&oi!==5||jc(s),zr!==0&&(zr=0)}function Pb(s,a){for(var l=s.suspendedLanes,u=s.pingedLanes,y=s.expirationTimes,b=s.pendingLanes&-62914561;0<b;){var A=31-At(b),L=1<<A,Y=y[A];Y===-1?((L&l)===0||(L&u)!==0)&&(y[A]=ho(L,a)):Y<=a&&(s.expiredLanes|=L),b&=~L}if(a=_t,l=qe,l=vi(s,s===a?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,l===0||s===a&&(ht===2||ht===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&lt(u),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||bi(s,l)){if(a=l&-l,a===s.callbackPriority)return a;switch(u!==null&&lt(u),ks(l)){case 2:case 8:l=es;break;case 32:l=Tt;break;case 268435456:l=Yt;break;default:l=Tt}return u=Lb.bind(null,s),l=Qe(l,u),s.callbackPriority=a,s.callbackNode=l,a}return u!==null&&u!==null&&lt(u),s.callbackPriority=2,s.callbackNode=null,2}function Lb(s,a){if(oi!==0&&oi!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Jh()&&s.callbackNode!==l)return null;var u=qe;return u=vi(s,s===_t?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(bb(s,u,a),Pb(s,Ve()),s.callbackNode!=null&&s.callbackNode===l?Lb.bind(null,s):null)}function Vb(s,a){if(Jh())return null;bb(s,a,!0)}function xA(){DA(function(){(at&6)!==0?Qe($i,wA):zb()})}function Fp(){if(zr===0){var s=jo;s===0&&(s=ji,ji<<=1,(ji&261888)===0&&(ji=256)),zr=s}return zr}function Ub(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:vo(""+s)}function Bb(s,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,s.id&&l.setAttribute("form",s.id),a.parentNode.insertBefore(l,a),s=new FormData(s),l.parentNode.removeChild(l),s}function EA(s,a,l,u,y){if(a==="submit"&&l&&l.stateNode===y){var b=Ub((y[ui]||null).action),A=u.submitter;A&&(a=(a=A[ui]||null)?Ub(a.formAction):A.getAttribute("formAction"),a!==null&&(b=a,A=null));var L=new hs("action","action",null,u,y);s.push({event:L,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(zr!==0){var Y=A?Bb(y,A):new FormData(y);lp(l,{pending:!0,data:Y,method:y.method,action:b},null,Y)}}else typeof b=="function"&&(L.preventDefault(),Y=A?Bb(y,A):new FormData(y),lp(l,{pending:!0,data:Y,method:y.method,action:b},b,Y))},currentTarget:y}]})}}for(var Hp=0;Hp<Tm.length;Hp++){var qp=Tm[Hp],SA=qp.toLowerCase(),TA=qp[0].toUpperCase()+qp.slice(1);Gn(SA,"on"+TA)}Gn(v1,"onAnimationEnd"),Gn(b1,"onAnimationIteration"),Gn(_1,"onAnimationStart"),Gn("dblclick","onDoubleClick"),Gn("focusin","onFocus"),Gn("focusout","onBlur"),Gn(BT,"onTransitionRun"),Gn(FT,"onTransitionStart"),Gn(HT,"onTransitionCancel"),Gn(w1,"onTransitionEnd"),os("onMouseEnter",["mouseout","mouseover"]),os("onMouseLeave",["mouseout","mouseover"]),os("onPointerEnter",["pointerout","pointerover"]),os("onPointerLeave",["pointerout","pointerover"]),as("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),as("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),as("onBeforeInput",["compositionend","keypress","textInput","paste"]),as("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),as("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),as("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dc));function Fb(s,a){a=(a&4)!==0;for(var l=0;l<s.length;l++){var u=s[l],y=u.event;u=u.listeners;e:{var b=void 0;if(a)for(var A=u.length-1;0<=A;A--){var L=u[A],Y=L.instance,oe=L.currentTarget;if(L=L.listener,Y!==b&&y.isPropagationStopped())break e;b=L,y.currentTarget=oe;try{b(y)}catch(he){ph(he)}y.currentTarget=null,b=Y}else for(A=0;A<u.length;A++){if(L=u[A],Y=L.instance,oe=L.currentTarget,L=L.listener,Y!==b&&y.isPropagationStopped())break e;b=L,y.currentTarget=oe;try{b(y)}catch(he){ph(he)}y.currentTarget=null,b=Y}}}}function He(s,a){var l=a[fo];l===void 0&&(l=a[fo]=new Set);var u=s+"__bubble";l.has(u)||(Hb(a,s,2,!1),l.add(u))}function Gp(s,a,l){var u=0;a&&(u|=4),Hb(l,s,u,a)}var td="_reactListening"+Math.random().toString(36).slice(2);function $p(s){if(!s[td]){s[td]=!0,$l.forEach(function(l){l!=="selectionchange"&&(AA.has(l)||Gp(l,!1,s),Gp(l,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[td]||(a[td]=!0,Gp("selectionchange",!1,a))}}function Hb(s,a,l,u){switch(v_(a)){case 2:var y=eC;break;case 8:y=tC;break;default:y=og}l=y.bind(null,a,l,s),y=void 0,!Sa||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),u?y!==void 0?s.addEventListener(a,l,{capture:!0,passive:y}):s.addEventListener(a,l,!0):y!==void 0?s.addEventListener(a,l,{passive:y}):s.addEventListener(a,l,!1)}function Kp(s,a,l,u,y){var b=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var A=u.tag;if(A===3||A===4){var L=u.stateNode.containerInfo;if(L===y)break;if(A===4)for(A=u.return;A!==null;){var Y=A.tag;if((Y===3||Y===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;L!==null;){if(A=ss(L),A===null)return;if(Y=A.tag,Y===5||Y===6||Y===26||Y===27){u=b=A;continue e}L=L.parentNode}}u=u.return}yr(function(){var oe=b,he=En(l),pe=[];e:{var le=x1.get(s);if(le!==void 0){var ue=hs,Se=s;switch(s){case"keypress":if(Aa(l)===0)break e;case"keydown":case"keyup":ue=dh;break;case"focusin":Se="focus",ue=Ra;break;case"focusout":Se="blur",ue=Ra;break;case"beforeblur":case"afterblur":ue=Ra;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=rc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=nh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=x;break;case v1:case b1:case _1:ue=rh;break;case w1:ue=B;break;case"scroll":case"scrollend":ue=sc;break;case"wheel":ue=ce;break;case"copy":case"cut":case"paste":ue=ah;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=Os;break;case"toggle":case"beforetoggle":ue=Pe}var Me=(a&4)!==0,vt=!Me&&(s==="scroll"||s==="scrollend"),ie=Me?le!==null?le+"Capture":null:le;Me=[];for(var Z=oe,ae;Z!==null;){var me=Z;if(ae=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||ae===null||ie===null||(me=Bn(Z,ie),me!=null&&Me.push(Oc(Z,me,ae))),vt)break;Z=Z.return}0<Me.length&&(le=new ue(le,Se,null,l,he),pe.push({event:le,listeners:Me}))}}if((a&7)===0){e:{if(le=s==="mouseover"||s==="pointerover",ue=s==="mouseout"||s==="pointerout",le&&l!==tc&&(Se=l.relatedTarget||l.fromElement)&&(ss(Se)||Se[is]))break e;if((ue||le)&&(le=he.window===he?he:(le=he.ownerDocument)?le.defaultView||le.parentWindow:window,ue?(Se=l.relatedTarget||l.toElement,ue=oe,Se=Se?ss(Se):null,Se!==null&&(vt=o(Se),Me=Se.tag,Se!==vt||Me!==5&&Me!==27&&Me!==6)&&(Se=null)):(ue=null,Se=oe),ue!==Se)){if(Me=rc,me="onMouseLeave",ie="onMouseEnter",Z="mouse",(s==="pointerout"||s==="pointerover")&&(Me=Os,me="onPointerLeave",ie="onPointerEnter",Z="pointer"),vt=ue==null?le:rn(ue),ae=Se==null?le:rn(Se),le=new Me(me,Z+"leave",ue,l,he),le.target=vt,le.relatedTarget=ae,me=null,ss(he)===oe&&(Me=new Me(ie,Z+"enter",Se,l,he),Me.target=ae,Me.relatedTarget=vt,me=Me),vt=me,ue&&Se)t:{for(Me=CA,ie=ue,Z=Se,ae=0,me=ie;me;me=Me(me))ae++;me=0;for(var Re=Z;Re;Re=Me(Re))me++;for(;0<ae-me;)ie=Me(ie),ae--;for(;0<me-ae;)Z=Me(Z),me--;for(;ae--;){if(ie===Z||Z!==null&&ie===Z.alternate){Me=ie;break t}ie=Me(ie),Z=Me(Z)}Me=null}else Me=null;ue!==null&&qb(pe,le,ue,Me,!1),Se!==null&&vt!==null&&qb(pe,vt,Se,Me,!0)}}e:{if(le=oe?rn(oe):window,ue=le.nodeName&&le.nodeName.toLowerCase(),ue==="select"||ue==="input"&&le.type==="file")var it=o1;else if(r1(le))if(l1)it=LT;else{it=zT;var Te=OT}else ue=le.nodeName,!ue||ue.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?oe&&yo(oe.elementType)&&(it=o1):it=PT;if(it&&(it=it(s,oe))){a1(pe,it,l,he);break e}Te&&Te(s,le,oe),s==="focusout"&&oe&&le.type==="number"&&oe.memoizedProps.value!=null&&Jl(le,"number",le.value)}switch(Te=oe?rn(oe):window,s){case"focusin":(r1(Te)||Te.contentEditable==="true")&&(To=Te,xm=oe,uc=null);break;case"focusout":uc=xm=To=null;break;case"mousedown":Em=!0;break;case"contextmenu":case"mouseup":case"dragend":Em=!1,g1(pe,l,he);break;case"selectionchange":if(UT)break;case"keydown":case"keyup":g1(pe,l,he)}var Ue;if(rt)e:{switch(s){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else So?Na(s,l)&&(Ge="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Ge="onCompositionStart");Ge&&(ms&&l.locale!=="ko"&&(So||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&So&&(Ue=nc()):(us=he,ic="value"in us?us.value:us.textContent,So=!0)),Te=id(oe,Ge),0<Te.length&&(Ge=new fs(Ge,s,null,l,he),pe.push({event:Ge,listeners:Te}),Ue?Ge.data=Ue:(Ue=Eo(l),Ue!==null&&(Ge.data=Ue)))),(Ue=Tn?MT(s,l):kT(s,l))&&(Ge=id(oe,"onBeforeInput"),0<Ge.length&&(Te=new fs("onBeforeInput","beforeinput",null,l,he),pe.push({event:Te,listeners:Ge}),Te.data=Ue)),EA(pe,s,oe,l,he)}Fb(pe,a)})}function Oc(s,a,l){return{instance:s,listener:a,currentTarget:l}}function id(s,a){for(var l=a+"Capture",u=[];s!==null;){var y=s,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=Bn(s,l),y!=null&&u.unshift(Oc(s,y,b)),y=Bn(s,a),y!=null&&u.push(Oc(s,y,b))),s.tag===3)return u;s=s.return}return[]}function CA(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function qb(s,a,l,u,y){for(var b=a._reactName,A=[];l!==null&&l!==u;){var L=l,Y=L.alternate,oe=L.stateNode;if(L=L.tag,Y!==null&&Y===u)break;L!==5&&L!==26&&L!==27||oe===null||(Y=oe,y?(oe=Bn(l,b),oe!=null&&A.unshift(Oc(l,oe,Y))):y||(oe=Bn(l,b),oe!=null&&A.push(Oc(l,oe,Y)))),l=l.return}A.length!==0&&s.push({event:a,listeners:A})}var RA=/\r\n?/g,NA=/\u0000|\uFFFD/g;function Gb(s){return(typeof s=="string"?s:""+s).replace(RA,`
`).replace(NA,"")}function $b(s,a){return a=Gb(a),Gb(s)===a}function yt(s,a,l,u,y,b){switch(l){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||Yi(s,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&Yi(s,""+u);break;case"className":an(s,"class",u);break;case"tabIndex":an(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":an(s,l,u);break;case"style":ec(s,u,b);break;case"data":if(a!=="object"){an(s,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||l!=="href")){s.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=vo(""+u),s.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(l==="formAction"?(a!=="input"&&yt(s,a,"name",y.name,y,null),yt(s,a,"formEncType",y.formEncType,y,null),yt(s,a,"formMethod",y.formMethod,y,null),yt(s,a,"formTarget",y.formTarget,y,null)):(yt(s,a,"encType",y.encType,y,null),yt(s,a,"method",y.method,y,null),yt(s,a,"target",y.target,y,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=vo(""+u),s.setAttribute(l,u);break;case"onClick":u!=null&&(s.onclick=Un);break;case"onScroll":u!=null&&He("scroll",s);break;case"onScrollEnd":u!=null&&He("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}l=vo(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""+u):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":u===!0?s.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,u):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(l,u):s.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(l):s.setAttribute(l,u);break;case"popover":He("beforetoggle",s),He("toggle",s),po(s,"popover",u);break;case"xlinkActuate":Jt(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Jt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Jt(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Jt(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Jt(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Jt(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Jt(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Jt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Jt(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":po(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=ih.get(l)||l,po(s,l,u))}}function Yp(s,a,l,u,y,b){switch(l){case"style":ec(s,u,b);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof u=="string"?Yi(s,u):(typeof u=="number"||typeof u=="bigint")&&Yi(s,""+u);break;case"onScroll":u!=null&&He("scroll",s);break;case"onScrollEnd":u!=null&&He("scrollend",s);break;case"onClick":u!=null&&(s.onclick=Un);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Kl.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),a=l.slice(2,y?l.length-7:void 0),b=s[ui]||null,b=b!=null?b[l]:null,typeof b=="function"&&s.removeEventListener(a,b,y),typeof u=="function")){typeof b!="function"&&b!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(a,u,y);break e}l in s?s[l]=u:u===!0?s.setAttribute(l,""):po(s,l,u)}}}function Si(s,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",s),He("load",s);var u=!1,y=!1,b;for(b in l)if(l.hasOwnProperty(b)){var A=l[b];if(A!=null)switch(b){case"src":u=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:yt(s,a,b,A,l,null)}}y&&yt(s,a,"srcSet",l.srcSet,l,null),u&&yt(s,a,"src",l.src,l,null);return;case"input":He("invalid",s);var L=b=A=y=null,Y=null,oe=null;for(u in l)if(l.hasOwnProperty(u)){var he=l[u];if(he!=null)switch(u){case"name":y=he;break;case"type":A=he;break;case"checked":Y=he;break;case"defaultChecked":oe=he;break;case"value":b=he;break;case"defaultValue":L=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(137,a));break;default:yt(s,a,u,he,l,null)}}Zu(s,b,L,Y,oe,A,y,!1);return;case"select":He("invalid",s),u=A=b=null;for(y in l)if(l.hasOwnProperty(y)&&(L=l[y],L!=null))switch(y){case"value":b=L;break;case"defaultValue":A=L;break;case"multiple":u=L;default:yt(s,a,y,L,l,null)}a=b,l=A,s.multiple=!!u,a!=null?fr(s,!!u,a,!1):l!=null&&fr(s,!!u,l,!0);return;case"textarea":He("invalid",s),b=y=u=null;for(A in l)if(l.hasOwnProperty(A)&&(L=l[A],L!=null))switch(A){case"value":u=L;break;case"defaultValue":y=L;break;case"children":b=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(i(91));break;default:yt(s,a,A,L,l,null)}mr(s,u,y,b);return;case"option":for(Y in l)l.hasOwnProperty(Y)&&(u=l[Y],u!=null)&&(Y==="selected"?s.selected=u&&typeof u!="function"&&typeof u!="symbol":yt(s,a,Y,u,l,null));return;case"dialog":He("beforetoggle",s),He("toggle",s),He("cancel",s),He("close",s);break;case"iframe":case"object":He("load",s);break;case"video":case"audio":for(u=0;u<Dc.length;u++)He(Dc[u],s);break;case"image":He("error",s),He("load",s);break;case"details":He("toggle",s);break;case"embed":case"source":case"link":He("error",s),He("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in l)if(l.hasOwnProperty(oe)&&(u=l[oe],u!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:yt(s,a,oe,u,l,null)}return;default:if(yo(a)){for(he in l)l.hasOwnProperty(he)&&(u=l[he],u!==void 0&&Yp(s,a,he,u,l,void 0));return}}for(L in l)l.hasOwnProperty(L)&&(u=l[L],u!=null&&yt(s,a,L,u,l,null))}function IA(s,a,l,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,A=null,L=null,Y=null,oe=null,he=null;for(ue in l){var pe=l[ue];if(l.hasOwnProperty(ue)&&pe!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":Y=pe;default:u.hasOwnProperty(ue)||yt(s,a,ue,null,u,pe)}}for(var le in u){var ue=u[le];if(pe=l[le],u.hasOwnProperty(le)&&(ue!=null||pe!=null))switch(le){case"type":b=ue;break;case"name":y=ue;break;case"checked":oe=ue;break;case"defaultChecked":he=ue;break;case"value":A=ue;break;case"defaultValue":L=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(i(137,a));break;default:ue!==pe&&yt(s,a,le,ue,u,pe)}}go(s,A,L,Y,oe,he,b,y);return;case"select":ue=A=L=le=null;for(b in l)if(Y=l[b],l.hasOwnProperty(b)&&Y!=null)switch(b){case"value":break;case"multiple":ue=Y;default:u.hasOwnProperty(b)||yt(s,a,b,null,u,Y)}for(y in u)if(b=u[y],Y=l[y],u.hasOwnProperty(y)&&(b!=null||Y!=null))switch(y){case"value":le=b;break;case"defaultValue":L=b;break;case"multiple":A=b;default:b!==Y&&yt(s,a,y,b,u,Y)}a=L,l=A,u=ue,le!=null?fr(s,!!l,le,!1):!!u!=!!l&&(a!=null?fr(s,!!l,a,!0):fr(s,!!l,l?[]:"",!1));return;case"textarea":ue=le=null;for(L in l)if(y=l[L],l.hasOwnProperty(L)&&y!=null&&!u.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:yt(s,a,L,null,u,y)}for(A in u)if(y=u[A],b=l[A],u.hasOwnProperty(A)&&(y!=null||b!=null))switch(A){case"value":le=y;break;case"defaultValue":ue=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==b&&yt(s,a,A,y,u,b)}eh(s,le,ue);return;case"option":for(var Se in l)le=l[Se],l.hasOwnProperty(Se)&&le!=null&&!u.hasOwnProperty(Se)&&(Se==="selected"?s.selected=!1:yt(s,a,Se,null,u,le));for(Y in u)le=u[Y],ue=l[Y],u.hasOwnProperty(Y)&&le!==ue&&(le!=null||ue!=null)&&(Y==="selected"?s.selected=le&&typeof le!="function"&&typeof le!="symbol":yt(s,a,Y,le,u,ue));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in l)le=l[Me],l.hasOwnProperty(Me)&&le!=null&&!u.hasOwnProperty(Me)&&yt(s,a,Me,null,u,le);for(oe in u)if(le=u[oe],ue=l[oe],u.hasOwnProperty(oe)&&le!==ue&&(le!=null||ue!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(i(137,a));break;default:yt(s,a,oe,le,u,ue)}return;default:if(yo(a)){for(var vt in l)le=l[vt],l.hasOwnProperty(vt)&&le!==void 0&&!u.hasOwnProperty(vt)&&Yp(s,a,vt,void 0,u,le);for(he in u)le=u[he],ue=l[he],!u.hasOwnProperty(he)||le===ue||le===void 0&&ue===void 0||Yp(s,a,he,le,u,ue);return}}for(var ie in l)le=l[ie],l.hasOwnProperty(ie)&&le!=null&&!u.hasOwnProperty(ie)&&yt(s,a,ie,null,u,le);for(pe in u)le=u[pe],ue=l[pe],!u.hasOwnProperty(pe)||le===ue||le==null&&ue==null||yt(s,a,pe,le,u,ue)}function Kb(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function MA(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var y=l[u],b=y.transferSize,A=y.initiatorType,L=y.duration;if(b&&L&&Kb(A)){for(A=0,L=y.responseEnd,u+=1;u<l.length;u++){var Y=l[u],oe=Y.startTime;if(oe>L)break;var he=Y.transferSize,pe=Y.initiatorType;he&&Kb(pe)&&(Y=Y.responseEnd,A+=he*(Y<L?1:(L-oe)/(Y-oe)))}if(--u,a+=8*(b+A)/(y.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Wp=null,Qp=null;function nd(s){return s.nodeType===9?s:s.ownerDocument}function Yb(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Wb(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Xp(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Jp=null;function kA(){var s=window.event;return s&&s.type==="popstate"?s===Jp?!1:(Jp=s,!0):(Jp=null,!1)}var Qb=typeof setTimeout=="function"?setTimeout:void 0,jA=typeof clearTimeout=="function"?clearTimeout:void 0,Xb=typeof Promise=="function"?Promise:void 0,DA=typeof queueMicrotask=="function"?queueMicrotask:typeof Xb<"u"?function(s){return Xb.resolve(null).then(s).catch(OA)}:Qb;function OA(s){setTimeout(function(){throw s})}function Pr(s){return s==="head"}function Jb(s,a){var l=a,u=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(u===0){s.removeChild(y),Jo(a);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")zc(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,zc(l);for(var b=l.firstChild;b;){var A=b.nextSibling,L=b.nodeName;b[ns]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&b.rel.toLowerCase()==="stylesheet"||l.removeChild(b),b=A}}else l==="body"&&zc(s.ownerDocument.body);l=y}while(l);Jo(a)}function Zb(s,a){var l=s;s=0;do{var u=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=u}while(l)}function Zp(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Zp(l),mo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function zA(s,a,l,u){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[ns])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(b=s.getAttribute("rel"),b==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(b!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(b=s.getAttribute("src"),(b!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===b)return s}else return s;if(s=kn(s.nextSibling),s===null)break}return null}function PA(s,a,l){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=kn(s.nextSibling),s===null))return null;return s}function e_(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=kn(s.nextSibling),s===null))return null;return s}function eg(s){return s.data==="$?"||s.data==="$~"}function tg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function LA(s,a){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||l.readyState!=="loading")a();else{var u=function(){a(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function kn(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var ig=null;function t_(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(a===0)return kn(s.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}s=s.nextSibling}return null}function i_(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return s;a--}else l!=="/$"&&l!=="/&"||a++}s=s.previousSibling}return null}function n_(s,a,l){switch(a=nd(l),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function zc(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);mo(s)}var jn=new Map,s_=new Set;function sd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Qs=P.d;P.d={f:VA,r:UA,D:BA,C:FA,L:HA,m:qA,X:$A,S:GA,M:KA};function VA(){var s=Qs.f(),a=Wh();return s||a}function UA(s){var a=xn(s);a!==null&&a.tag===5&&a.type==="form"?wv(a):Qs.r(s)}var Wo=typeof document>"u"?null:document;function r_(s,a,l){var u=Wo;if(u&&typeof a=="string"&&a){var y=Ki(a);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),s_.has(y)||(s_.add(y),s={rel:s,crossOrigin:l,href:a},u.querySelector(y)===null&&(a=u.createElement("link"),Si(a,"link",s),Xt(a),u.head.appendChild(a)))}}function BA(s){Qs.D(s),r_("dns-prefetch",s,null)}function FA(s,a){Qs.C(s,a),r_("preconnect",s,a)}function HA(s,a,l){Qs.L(s,a,l);var u=Wo;if(u&&s&&a){var y='link[rel="preload"][as="'+Ki(a)+'"]';a==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+Ki(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+Ki(l.imageSizes)+'"]')):y+='[href="'+Ki(s)+'"]';var b=y;switch(a){case"style":b=Qo(s);break;case"script":b=Xo(s)}jn.has(b)||(s=v({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:s,as:a},l),jn.set(b,s),u.querySelector(y)!==null||a==="style"&&u.querySelector(Pc(b))||a==="script"&&u.querySelector(Lc(b))||(a=u.createElement("link"),Si(a,"link",s),Xt(a),u.head.appendChild(a)))}}function qA(s,a){Qs.m(s,a);var l=Wo;if(l&&s){var u=a&&typeof a.as=="string"?a.as:"script",y='link[rel="modulepreload"][as="'+Ki(u)+'"][href="'+Ki(s)+'"]',b=y;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Xo(s)}if(!jn.has(b)&&(s=v({rel:"modulepreload",href:s},a),jn.set(b,s),l.querySelector(y)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Lc(b)))return}u=l.createElement("link"),Si(u,"link",s),Xt(u),l.head.appendChild(u)}}}function GA(s,a,l){Qs.S(s,a,l);var u=Wo;if(u&&s){var y=rs(u).hoistableStyles,b=Qo(s);a=a||"default";var A=y.get(b);if(!A){var L={loading:0,preload:null};if(A=u.querySelector(Pc(b)))L.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":a},l),(l=jn.get(b))&&ng(s,l);var Y=A=u.createElement("link");Xt(Y),Si(Y,"link",s),Y._p=new Promise(function(oe,he){Y.onload=oe,Y.onerror=he}),Y.addEventListener("load",function(){L.loading|=1}),Y.addEventListener("error",function(){L.loading|=2}),L.loading|=4,rd(A,a,u)}A={type:"stylesheet",instance:A,count:1,state:L},y.set(b,A)}}}function $A(s,a){Qs.X(s,a);var l=Wo;if(l&&s){var u=rs(l).hoistableScripts,y=Xo(s),b=u.get(y);b||(b=l.querySelector(Lc(y)),b||(s=v({src:s,async:!0},a),(a=jn.get(y))&&sg(s,a),b=l.createElement("script"),Xt(b),Si(b,"link",s),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},u.set(y,b))}}function KA(s,a){Qs.M(s,a);var l=Wo;if(l&&s){var u=rs(l).hoistableScripts,y=Xo(s),b=u.get(y);b||(b=l.querySelector(Lc(y)),b||(s=v({src:s,async:!0,type:"module"},a),(a=jn.get(y))&&sg(s,a),b=l.createElement("script"),Xt(b),Si(b,"link",s),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},u.set(y,b))}}function a_(s,a,l,u){var y=(y=fe.current)?sd(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Qo(l.href),l=rs(y).hoistableStyles,u=l.get(a),u||(u={type:"style",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Qo(l.href);var b=rs(y).hoistableStyles,A=b.get(s);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(s,A),(b=y.querySelector(Pc(s)))&&!b._p&&(A.instance=b,A.state.loading=5),jn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},jn.set(s,l),b||YA(y,s,l,A.state))),a&&u===null)throw Error(i(528,""));return A}if(a&&u!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Xo(l),l=rs(y).hoistableScripts,u=l.get(a),u||(u={type:"script",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Qo(s){return'href="'+Ki(s)+'"'}function Pc(s){return'link[rel="stylesheet"]['+s+"]"}function o_(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function YA(s,a,l,u){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=s.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),Si(a,"link",l),Xt(a),s.head.appendChild(a))}function Xo(s){return'[src="'+Ki(s)+'"]'}function Lc(s){return"script[async]"+s}function l_(s,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var u=s.querySelector('style[data-href~="'+Ki(l.href)+'"]');if(u)return a.instance=u,Xt(u),u;var y=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),Xt(u),Si(u,"style",y),rd(u,l.precedence,s),a.instance=u;case"stylesheet":y=Qo(l.href);var b=s.querySelector(Pc(y));if(b)return a.state.loading|=4,a.instance=b,Xt(b),b;u=o_(l),(y=jn.get(y))&&ng(u,y),b=(s.ownerDocument||s).createElement("link"),Xt(b);var A=b;return A._p=new Promise(function(L,Y){A.onload=L,A.onerror=Y}),Si(b,"link",u),a.state.loading|=4,rd(b,l.precedence,s),a.instance=b;case"script":return b=Xo(l.src),(y=s.querySelector(Lc(b)))?(a.instance=y,Xt(y),y):(u=l,(y=jn.get(b))&&(u=v({},l),sg(u,y)),s=s.ownerDocument||s,y=s.createElement("script"),Xt(y),Si(y,"link",u),s.head.appendChild(y),a.instance=y);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,rd(u,l.precedence,s));return a.instance}function rd(s,a,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=u.length?u[u.length-1]:null,b=y,A=0;A<u.length;A++){var L=u[A];if(L.dataset.precedence===a)b=L;else if(b!==y)break}b?b.parentNode.insertBefore(s,b.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(s,a.firstChild))}function ng(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function sg(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var ad=null;function c_(s,a,l){if(ad===null){var u=new Map,y=ad=new Map;y.set(l,u)}else y=ad,u=y.get(l),u||(u=new Map,y.set(l,u));if(u.has(s))return u;for(u.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var b=l[y];if(!(b[ns]||b[Qt]||s==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var A=b.getAttribute(a)||"";A=s+A;var L=u.get(A);L?L.push(b):u.set(A,[b])}}return u}function u_(s,a,l){s=s.ownerDocument||s,s.head.insertBefore(l,a==="title"?s.querySelector("head > title"):null)}function WA(s,a,l){if(l===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(s=a.disabled,typeof a.precedence=="string"&&s==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function h_(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function QA(s,a,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=Qo(u.href),b=a.querySelector(Pc(y));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=od.bind(s),a.then(s,s)),l.state.loading|=4,l.instance=b,Xt(b);return}b=a.ownerDocument||a,u=o_(u),(y=jn.get(y))&&ng(u,y),b=b.createElement("link"),Xt(b);var A=b;A._p=new Promise(function(L,Y){A.onload=L,A.onerror=Y}),Si(b,"link",u),l.instance=b}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=od.bind(s),a.addEventListener("load",l),a.addEventListener("error",l))}}var rg=0;function XA(s,a){return s.stylesheets&&s.count===0&&cd(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var u=setTimeout(function(){if(s.stylesheets&&cd(s,s.stylesheets),s.unsuspend){var b=s.unsuspend;s.unsuspend=null,b()}},6e4+a);0<s.imgBytes&&rg===0&&(rg=62500*MA());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&cd(s,s.stylesheets),s.unsuspend)){var b=s.unsuspend;s.unsuspend=null,b()}},(s.imgBytes>rg?50:800)+a);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(u),clearTimeout(y)}}:null}function od(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)cd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var ld=null;function cd(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,ld=new Map,a.forEach(JA,s),ld=null,od.call(s))}function JA(s,a){if(!(a.state.loading&4)){var l=ld.get(s);if(l)var u=l.get(null);else{l=new Map,ld.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var A=y[b];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),u=A)}u&&l.set(null,u)}y=a.instance,A=y.getAttribute("data-precedence"),b=l.get(A)||u,b===u&&l.set(null,y),l.set(A,y),this.count++,u=od.bind(this),y.addEventListener("load",u),y.addEventListener("error",u),b?b.parentNode.insertBefore(y,b.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),a.state.loading|=4}}var Vc={$$typeof:H,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function ZA(s,a,l,u,y,b,A,L,Y){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ci(0),this.hiddenUpdates=ci(null),this.identifierPrefix=u,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function d_(s,a,l,u,y,b,A,L,Y,oe,he,pe){return s=new ZA(s,a,l,A,Y,oe,he,pe,L),a=1,b===!0&&(a|=24),b=ln(3,null,null,a),s.current=b,b.stateNode=s,a=Lm(),a.refCount++,s.pooledCache=a,a.refCount++,b.memoizedState={element:u,isDehydrated:l,cache:a},Fm(b),s}function f_(s){return s?(s=Ro,s):Ro}function m_(s,a,l,u,y,b){y=f_(y),u.context===null?u.context=y:u.pendingContext=y,u=Ar(a),u.payload={element:l},b=b===void 0?null:b,b!==null&&(u.callback=b),l=Cr(s,u,a),l!==null&&(Zi(l,s,a),yc(l,s,a))}function p_(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<a?l:a}}function ag(s,a){p_(s,a),(s=s.alternate)&&p_(s,a)}function g_(s){if(s.tag===13||s.tag===31){var a=ka(s,67108864);a!==null&&Zi(a,s,67108864),ag(s,67108864)}}function y_(s){if(s.tag===13||s.tag===31){var a=fn();a=_a(a);var l=ka(s,a);l!==null&&Zi(l,s,a),ag(s,a)}}var ud=!0;function eC(s,a,l,u){var y=j.T;j.T=null;var b=P.p;try{P.p=2,og(s,a,l,u)}finally{P.p=b,j.T=y}}function tC(s,a,l,u){var y=j.T;j.T=null;var b=P.p;try{P.p=8,og(s,a,l,u)}finally{P.p=b,j.T=y}}function og(s,a,l,u){if(ud){var y=lg(u);if(y===null)Kp(s,a,u,hd,l),b_(s,u);else if(nC(y,s,a,l,u))u.stopPropagation();else if(b_(s,u),a&4&&-1<iC.indexOf(s)){for(;y!==null;){var b=xn(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var A=ai(b.pendingLanes);if(A!==0){var L=b;for(L.pendingLanes|=2,L.entangledLanes|=2;A;){var Y=1<<31-At(A);L.entanglements[1]|=Y,A&=~Y}vs(b),(at&6)===0&&(Kh=Ve()+500,jc(0))}}break;case 31:case 13:L=ka(b,2),L!==null&&Zi(L,b,2),Wh(),ag(b,2)}if(b=lg(u),b===null&&Kp(s,a,u,hd,l),b===y)break;y=b}y!==null&&u.stopPropagation()}else Kp(s,a,u,null,l)}}function lg(s){return s=En(s),cg(s)}var hd=null;function cg(s){if(hd=null,s=ss(s),s!==null){var a=o(s);if(a===null)s=null;else{var l=a.tag;if(l===13){if(s=c(a),s!==null)return s;s=null}else if(l===31){if(s=h(a),s!==null)return s;s=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return hd=s,null}function v_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ut()){case $i:return 2;case es:return 8;case Tt:case Pn:return 32;case Yt:return 268435456;default:return 32}default:return 32}}var ug=!1,Lr=null,Vr=null,Ur=null,Uc=new Map,Bc=new Map,Br=[],iC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function b_(s,a){switch(s){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Vr=null;break;case"mouseover":case"mouseout":Ur=null;break;case"pointerover":case"pointerout":Uc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bc.delete(a.pointerId)}}function Fc(s,a,l,u,y,b){return s===null||s.nativeEvent!==b?(s={blockedOn:a,domEventName:l,eventSystemFlags:u,nativeEvent:b,targetContainers:[y]},a!==null&&(a=xn(a),a!==null&&g_(a)),s):(s.eventSystemFlags|=u,a=s.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),s)}function nC(s,a,l,u,y){switch(a){case"focusin":return Lr=Fc(Lr,s,a,l,u,y),!0;case"dragenter":return Vr=Fc(Vr,s,a,l,u,y),!0;case"mouseover":return Ur=Fc(Ur,s,a,l,u,y),!0;case"pointerover":var b=y.pointerId;return Uc.set(b,Fc(Uc.get(b)||null,s,a,l,u,y)),!0;case"gotpointercapture":return b=y.pointerId,Bc.set(b,Fc(Bc.get(b)||null,s,a,l,u,y)),!0}return!1}function __(s){var a=ss(s.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){s.blockedOn=a,Ln(s.priority,function(){y_(l)});return}}else if(a===31){if(a=h(l),a!==null){s.blockedOn=a,Ln(s.priority,function(){y_(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function dd(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var l=lg(s.nativeEvent);if(l===null){l=s.nativeEvent;var u=new l.constructor(l.type,l);tc=u,l.target.dispatchEvent(u),tc=null}else return a=xn(l),a!==null&&g_(a),s.blockedOn=l,!1;a.shift()}return!0}function w_(s,a,l){dd(s)&&l.delete(a)}function sC(){ug=!1,Lr!==null&&dd(Lr)&&(Lr=null),Vr!==null&&dd(Vr)&&(Vr=null),Ur!==null&&dd(Ur)&&(Ur=null),Uc.forEach(w_),Bc.forEach(w_)}function fd(s,a){s.blockedOn===a&&(s.blockedOn=null,ug||(ug=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,sC)))}var md=null;function x_(s){md!==s&&(md=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){md===s&&(md=null);for(var a=0;a<s.length;a+=3){var l=s[a],u=s[a+1],y=s[a+2];if(typeof u!="function"){if(cg(u||l)===null)continue;break}var b=xn(l);b!==null&&(s.splice(a,3),a-=3,lp(b,{pending:!0,data:y,method:l.method,action:u},u,y))}}))}function Jo(s){function a(Y){return fd(Y,s)}Lr!==null&&fd(Lr,s),Vr!==null&&fd(Vr,s),Ur!==null&&fd(Ur,s),Uc.forEach(a),Bc.forEach(a);for(var l=0;l<Br.length;l++){var u=Br[l];u.blockedOn===s&&(u.blockedOn=null)}for(;0<Br.length&&(l=Br[0],l.blockedOn===null);)__(l),l.blockedOn===null&&Br.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var y=l[u],b=l[u+1],A=y[ui]||null;if(typeof b=="function")A||x_(l);else if(A){var L=null;if(b&&b.hasAttribute("formAction")){if(y=b,A=b[ui]||null)L=A.formAction;else if(cg(y)!==null)continue}else L=A.action;typeof L=="function"?l[u+1]=L:(l.splice(u,3),u-=3),x_(l)}}}function E_(){function s(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function a(){y!==null&&(y(),y=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),y!==null&&(y(),y=null)}}}function hg(s){this._internalRoot=s}pd.prototype.render=hg.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,u=fn();m_(l,u,s,a,null,null)},pd.prototype.unmount=hg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;m_(s.current,2,null,s,null,null),Wh(),a[is]=null}};function pd(s){this._internalRoot=s}pd.prototype.unstable_scheduleHydration=function(s){if(s){var a=Wu();s={blockedOn:null,target:s,priority:a};for(var l=0;l<Br.length&&a!==0&&a<Br[l].priority;l++);Br.splice(l,0,s),l===0&&__(s)}};var S_=e.version;if(S_!=="19.2.3")throw Error(i(527,S_,"19.2.3"));P.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=m(a),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var rC={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gd.isDisabled&&gd.supportsFiber)try{Bt=gd.inject(rC),mt=gd}catch{}}return qc.createRoot=function(s,a){if(!r(s))throw Error(i(299));var l=!1,u="",y=Mv,b=kv,A=jv;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError)),a=d_(s,1,!1,null,null,l,u,null,y,b,A,E_),s[is]=a.current,$p(s),new hg(a)},qc.hydrateRoot=function(s,a,l){if(!r(s))throw Error(i(299));var u=!1,y="",b=Mv,A=kv,L=jv,Y=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(L=l.onRecoverableError),l.formState!==void 0&&(Y=l.formState)),a=d_(s,1,!0,a,l??null,u,y,Y,b,A,L,E_),a.context=f_(null),l=a.current,u=fn(),u=_a(u),y=Ar(u),y.callback=null,Cr(l,y,u),l=u,a.current.lanes=l,va(a,l),vs(a),s[is]=a.current,$p(s),new pd(a)},qc.version="19.2.3",qc}var D_;function yC(){if(D_)return mg.exports;D_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),mg.exports=gC(),mg.exports}var vC=yC();var O_="popstate";function bC(n={}){function e(i,r){let{pathname:o,search:c,hash:h}=i.location;return Jg("",{pathname:o,search:c,hash:h},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:du(r)}return wC(e,t,null,n)}function jt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function zn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _C(){return Math.random().toString(36).substring(2,10)}function z_(n,e){return{usr:n.state,key:n.key,idx:e}}function Jg(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Il(e):e,state:t,key:e&&e.key||i||_C()}}function du({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Il(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function wC(n,e,t,i={}){let{window:r=document.defaultView,v5Compat:o=!1}=i,c=r.history,h="POP",f=null,m=g();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function g(){return(c.state||{idx:null}).idx}function v(){h="POP";let O=g(),M=O==null?null:O-m;m=O,f&&f({action:h,location:R.location,delta:M})}function _(O,M){h="PUSH";let F=Jg(R.location,O,M);m=g()+1;let H=z_(F,m),G=R.createHref(F);try{c.pushState(H,"",G)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;r.location.assign(G)}o&&f&&f({action:h,location:R.location,delta:1})}function w(O,M){h="REPLACE";let F=Jg(R.location,O,M);m=g();let H=z_(F,m),G=R.createHref(F);c.replaceState(H,"",G),o&&f&&f({action:h,location:R.location,delta:0})}function S(O){return xC(O)}let R={get action(){return h},get location(){return n(r,c)},listen(O){if(f)throw new Error("A history only accepts one active listener");return r.addEventListener(O_,v),f=O,()=>{r.removeEventListener(O_,v),f=null}},createHref(O){return e(r,O)},createURL:S,encodeLocation(O){let M=S(O);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:_,replace:w,go(O){return c.go(O)}};return R}function xC(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),jt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:du(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function Ox(n,e,t="/"){return EC(n,e,t,!1)}function EC(n,e,t,i){let r=typeof e=="string"?Il(e):e,o=nr(r.pathname||"/",t);if(o==null)return null;let c=zx(n);SC(c);let h=null;for(let f=0;h==null&&f<c.length;++f){let m=OC(o);h=jC(c[f],m,i)}return h}function zx(n,e=[],t=[],i="",r=!1){let o=(c,h,f=r,m)=>{let g={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&f)return;jt(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let v=tr([i,g.relativePath]),_=t.concat(g);c.children&&c.children.length>0&&(jt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),zx(c.children,e,_,v,f)),!(c.path==null&&!c.index)&&e.push({path:v,score:MC(v,c.index),routesMeta:_})};return n.forEach((c,h)=>{if(c.path===""||!c.path?.includes("?"))o(c,h);else for(let f of Px(c.path))o(c,h,!0,f)}),e}function Px(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),o=t.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let c=Px(i.join("/")),h=[];return h.push(...c.map(f=>f===""?o:[o,f].join("/"))),r&&h.push(...c),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function SC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:kC(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var TC=/^:[\w-]+$/,AC=3,CC=2,RC=1,NC=10,IC=-2,P_=n=>n==="*";function MC(n,e){let t=n.split("/"),i=t.length;return t.some(P_)&&(i+=IC),e&&(i+=CC),t.filter(r=>!P_(r)).reduce((r,o)=>r+(TC.test(o)?AC:o===""?RC:NC),i)}function kC(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function jC(n,e,t=!1){let{routesMeta:i}=n,r={},o="/",c=[];for(let h=0;h<i.length;++h){let f=i[h],m=h===i.length-1,g=o==="/"?e:e.slice(o.length)||"/",v=Xd({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},g),_=f.route;if(!v&&m&&t&&!i[i.length-1].route.index&&(v=Xd({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},g)),!v)return null;Object.assign(r,v.params),c.push({params:r,pathname:tr([o,v.pathname]),pathnameBase:VC(tr([o,v.pathnameBase])),route:_}),v.pathnameBase!=="/"&&(o=tr([o,v.pathnameBase]))}return c}function Xd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=DC(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let o=r[0],c=o.replace(/(.)\/+$/,"$1"),h=r.slice(1);return{params:i.reduce((m,{paramName:g,isOptional:v},_)=>{if(g==="*"){let S=h[_]||"";c=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const w=h[_];return v&&!w?m[g]=void 0:m[g]=(w||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:c,pattern:n}}function DC(n,e=!1,t=!0){zn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,f)=>(i.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function OC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function nr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}var Lx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zC=n=>Lx.test(n);function PC(n,e="/"){let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Il(n):n,o;if(t)if(zC(t))o=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),zn(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?o=L_(t.substring(1),"/"):o=L_(t,e)}else o=e;return{pathname:o,search:UC(i),hash:BC(r)}}function L_(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function vg(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function LC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function P0(n){let e=LC(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function L0(n,e,t,i=!1){let r;typeof n=="string"?r=Il(n):(r={...n},jt(!r.pathname||!r.pathname.includes("?"),vg("?","pathname","search",r)),jt(!r.pathname||!r.pathname.includes("#"),vg("#","pathname","hash",r)),jt(!r.search||!r.search.includes("#"),vg("#","search","hash",r)));let o=n===""||r.pathname==="",c=o?"/":r.pathname,h;if(c==null)h=t;else{let v=e.length-1;if(!i&&c.startsWith("..")){let _=c.split("/");for(;_[0]==="..";)_.shift(),v-=1;r.pathname=_.join("/")}h=v>=0?e[v]:"/"}let f=PC(r,h),m=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||g)&&(f.pathname+="/"),f}var tr=n=>n.join("/").replace(/\/\/+/g,"/"),VC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),UC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,BC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,FC=class{constructor(n,e,t,i=!1){this.status=n,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function HC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function qC(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Vx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ux(n,e){let t=n;if(typeof t!="string"||!Lx.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,r=!1;if(Vx)try{let o=new URL(window.location.href),c=t.startsWith("//")?new URL(o.protocol+t):new URL(t),h=nr(c.pathname,e);c.origin===o.origin&&h!=null?t=h+c.search+c.hash:r=!0}catch{zn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:r,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Bx=["POST","PUT","PATCH","DELETE"];new Set(Bx);var GC=["GET",...Bx];new Set(GC);var Ml=$.createContext(null);Ml.displayName="DataRouter";var Mf=$.createContext(null);Mf.displayName="DataRouterState";var $C=$.createContext(!1),Fx=$.createContext({isTransitioning:!1});Fx.displayName="ViewTransition";var KC=$.createContext(new Map);KC.displayName="Fetchers";var YC=$.createContext(null);YC.displayName="Await";var _n=$.createContext(null);_n.displayName="Navigation";var Ru=$.createContext(null);Ru.displayName="Location";var Ns=$.createContext({outlet:null,matches:[],isDataRoute:!1});Ns.displayName="Route";var V0=$.createContext(null);V0.displayName="RouteError";var Hx="REACT_ROUTER_ERROR",WC="REDIRECT",QC="ROUTE_ERROR_RESPONSE";function XC(n){if(n.startsWith(`${Hx}:${WC}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function JC(n){if(n.startsWith(`${Hx}:${QC}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new FC(e.status,e.statusText,e.data)}catch{}}function ZC(n,{relative:e}={}){jt(kl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=$.useContext(_n),{hash:r,pathname:o,search:c}=Nu(n,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:tr([t,o])),i.createHref({pathname:h,search:c,hash:r})}function kl(){return $.useContext(Ru)!=null}function Is(){return jt(kl(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(Ru).location}var qx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Gx(n){$.useContext(_n).static||$.useLayoutEffect(n)}function U0(){let{isDataRoute:n}=$.useContext(Ns);return n?dR():eR()}function eR(){jt(kl(),"useNavigate() may be used only in the context of a <Router> component.");let n=$.useContext(Ml),{basename:e,navigator:t}=$.useContext(_n),{matches:i}=$.useContext(Ns),{pathname:r}=Is(),o=JSON.stringify(P0(i)),c=$.useRef(!1);return Gx(()=>{c.current=!0}),$.useCallback((f,m={})=>{if(zn(c.current,qx),!c.current)return;if(typeof f=="number"){t.go(f);return}let g=L0(f,JSON.parse(o),r,m.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:tr([e,g.pathname])),(m.replace?t.replace:t.push)(g,m.state,m)},[e,t,o,r,n])}$.createContext(null);function Nu(n,{relative:e}={}){let{matches:t}=$.useContext(Ns),{pathname:i}=Is(),r=JSON.stringify(P0(t));return $.useMemo(()=>L0(n,JSON.parse(r),i,e==="path"),[n,r,i,e])}function tR(n,e){return $x(n,e)}function $x(n,e,t,i,r){jt(kl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=$.useContext(_n),{matches:c}=$.useContext(Ns),h=c[c.length-1],f=h?h.params:{},m=h?h.pathname:"/",g=h?h.pathnameBase:"/",v=h&&h.route;{let F=v&&v.path||"";Yx(m,!v||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let _=Is(),w;if(e){let F=typeof e=="string"?Il(e):e;jt(g==="/"||F.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${F.pathname}" was given in the \`location\` prop.`),w=F}else w=_;let S=w.pathname||"/",R=S;if(g!=="/"){let F=g.replace(/^\//,"").split("/");R="/"+S.replace(/^\//,"").split("/").slice(F.length).join("/")}let O=Ox(n,{pathname:R});zn(v||O!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),zn(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=aR(O&&O.map(F=>Object.assign({},F,{params:Object.assign({},f,F.params),pathname:tr([g,o.encodeLocation?o.encodeLocation(F.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?g:tr([g,o.encodeLocation?o.encodeLocation(F.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathnameBase])})),c,t,i,r);return e&&M?$.createElement(Ru.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},M):M}function iR(){let n=hR(),e=HC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=$.createElement($.Fragment,null,$.createElement("p",null," Hey developer "),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:o},"ErrorBoundary")," or"," ",$.createElement("code",{style:o},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),t?$.createElement("pre",{style:r},t):null,c)}var nR=$.createElement(iR,null),Kx=class extends $.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=JC(n.digest);t&&(n=t)}let e=n!==void 0?$.createElement(Ns.Provider,{value:this.props.routeContext},$.createElement(V0.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?$.createElement(sR,{error:n},e):e}};Kx.contextType=$C;var bg=new WeakMap;function sR({children:n,error:e}){let{basename:t}=$.useContext(_n);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=XC(e.digest);if(i){let r=bg.get(e);if(r)throw r;let o=Ux(i.location,t);if(Vx&&!bg.get(e))if(o.isExternal||i.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:i.replace}));throw bg.set(e,c),c}return $.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return n}function rR({routeContext:n,match:e,children:t}){let i=$.useContext(Ml);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),$.createElement(Ns.Provider,{value:n},t)}function aR(n,e=[],t=null,i=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,c=t?.errors;if(c!=null){let g=o.findIndex(v=>v.route.id&&c?.[v.route.id]!==void 0);jt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let h=!1,f=-1;if(t)for(let g=0;g<o.length;g++){let v=o[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(f=g),v.route.id){let{loaderData:_,errors:w}=t,S=v.route.loader&&!_.hasOwnProperty(v.route.id)&&(!w||w[v.route.id]===void 0);if(v.route.lazy||S){h=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}let m=t&&i?(g,v)=>{i(g,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:qC(t.matches),errorInfo:v})}:void 0;return o.reduceRight((g,v,_)=>{let w,S=!1,R=null,O=null;t&&(w=c&&v.route.id?c[v.route.id]:void 0,R=v.route.errorElement||nR,h&&(f<0&&_===0?(Yx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,O=null):f===_&&(S=!0,O=v.route.hydrateFallbackElement||null)));let M=e.concat(o.slice(0,_+1)),F=()=>{let H;return w?H=R:S?H=O:v.route.Component?H=$.createElement(v.route.Component,null):v.route.element?H=v.route.element:H=g,$.createElement(rR,{match:v,routeContext:{outlet:g,matches:M,isDataRoute:t!=null},children:H})};return t&&(v.route.ErrorBoundary||v.route.errorElement||_===0)?$.createElement(Kx,{location:t.location,revalidation:t.revalidation,component:R,error:w,children:F(),routeContext:{outlet:null,matches:M,isDataRoute:!0},onError:m}):F()},null)}function B0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function oR(n){let e=$.useContext(Ml);return jt(e,B0(n)),e}function lR(n){let e=$.useContext(Mf);return jt(e,B0(n)),e}function cR(n){let e=$.useContext(Ns);return jt(e,B0(n)),e}function F0(n){let e=cR(n),t=e.matches[e.matches.length-1];return jt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function uR(){return F0("useRouteId")}function hR(){let n=$.useContext(V0),e=lR("useRouteError"),t=F0("useRouteError");return n!==void 0?n:e.errors?.[t]}function dR(){let{router:n}=oR("useNavigate"),e=F0("useNavigate"),t=$.useRef(!1);return Gx(()=>{t.current=!0}),$.useCallback(async(r,o={})=>{zn(t.current,qx),t.current&&(typeof r=="number"?await n.navigate(r):await n.navigate(r,{fromRouteId:e,...o}))},[n,e])}var V_={};function Yx(n,e,t){!e&&!V_[n]&&(V_[n]=!0,zn(!1,t))}$.memo(fR);function fR({routes:n,future:e,state:t,onError:i}){return $x(n,void 0,t,i,e)}function Wx({to:n,replace:e,state:t,relative:i}){jt(kl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=$.useContext(_n);zn(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=$.useContext(Ns),{pathname:c}=Is(),h=U0(),f=L0(n,P0(o),c,i==="path"),m=JSON.stringify(f);return $.useEffect(()=>{h(JSON.parse(m),{replace:e,state:t,relative:i})},[h,m,i,e,t]),null}function fi(n){jt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mR({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:r,static:o=!1,unstable_useTransitions:c}){jt(!kl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=n.replace(/^\/*/,"/"),f=$.useMemo(()=>({basename:h,navigator:r,static:o,unstable_useTransitions:c,future:{}}),[h,r,o,c]);typeof t=="string"&&(t=Il(t));let{pathname:m="/",search:g="",hash:v="",state:_=null,key:w="default"}=t,S=$.useMemo(()=>{let R=nr(m,h);return R==null?null:{location:{pathname:R,search:g,hash:v,state:_,key:w},navigationType:i}},[h,m,g,v,_,w,i]);return zn(S!=null,`<Router basename="${h}"> is not able to match the URL "${m}${g}${v}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:$.createElement(_n.Provider,{value:f},$.createElement(Ru.Provider,{children:e,value:S}))}function pR({children:n,location:e}){return tR(Zg(n),e)}function Zg(n,e=[]){let t=[];return $.Children.forEach(n,(i,r)=>{if(!$.isValidElement(i))return;let o=[...e,r];if(i.type===$.Fragment){t.push.apply(t,Zg(i.props.children,o));return}jt(i.type===fi,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),jt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Zg(i.props.children,o)),t.push(c)}),t}var jd="get",Dd="application/x-www-form-urlencoded";function kf(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function gR(n){return kf(n)&&n.tagName.toLowerCase()==="button"}function yR(n){return kf(n)&&n.tagName.toLowerCase()==="form"}function vR(n){return kf(n)&&n.tagName.toLowerCase()==="input"}function bR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function _R(n,e){return n.button===0&&(!e||e==="_self")&&!bR(n)}var yd=null;function wR(){if(yd===null)try{new FormData(document.createElement("form"),0),yd=!1}catch{yd=!0}return yd}var xR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _g(n){return n!=null&&!xR.has(n)?(zn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Dd}"`),null):n}function ER(n,e){let t,i,r,o,c;if(yR(n)){let h=n.getAttribute("action");i=h?nr(h,e):null,t=n.getAttribute("method")||jd,r=_g(n.getAttribute("enctype"))||Dd,o=new FormData(n)}else if(gR(n)||vR(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||h.getAttribute("action");if(i=f?nr(f,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||jd,r=_g(n.getAttribute("formenctype"))||_g(h.getAttribute("enctype"))||Dd,o=new FormData(h,n),!wR()){let{name:m,type:g,value:v}=n;if(g==="image"){let _=m?`${m}.`:"";o.append(`${_}x`,"0"),o.append(`${_}y`,"0")}else m&&o.append(m,v)}}else{if(kf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=jd,i=null,r=Dd,c=n}return o&&r==="text/plain"&&(c=o,o=void 0),{action:i,method:t.toLowerCase(),encType:r,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function H0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function SR(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&nr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function TR(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function AR(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function CR(n,e,t){let i=await Promise.all(n.map(async r=>{let o=e.routes[r.route.id];if(o){let c=await TR(o,t);return c.links?c.links():[]}return[]}));return MR(i.flat(1).filter(AR).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function U_(n,e,t,i,r,o){let c=(f,m)=>t[m]?f.route.id!==t[m].route.id:!0,h=(f,m)=>t[m].pathname!==f.pathname||t[m].route.path?.endsWith("*")&&t[m].params["*"]!==f.params["*"];return o==="assets"?e.filter((f,m)=>c(f,m)||h(f,m)):o==="data"?e.filter((f,m)=>{let g=i.routes[f.route.id];if(!g||!g.hasLoader)return!1;if(c(f,m)||h(f,m))return!0;if(f.route.shouldRevalidate){let v=f.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function RR(n,e,{includeHydrateFallback:t}={}){return NR(n.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function NR(n){return[...new Set(n)]}function IR(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function MR(n,e){let t=new Set;return new Set(e),n.reduce((i,r)=>{let o=JSON.stringify(IR(r));return t.has(o)||(t.add(o),i.push({key:o,link:r})),i},[])}function Qx(){let n=$.useContext(Ml);return H0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function kR(){let n=$.useContext(Mf);return H0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var q0=$.createContext(void 0);q0.displayName="FrameworkContext";function Xx(){let n=$.useContext(q0);return H0(n,"You must render this element inside a <HydratedRouter> element"),n}function jR(n,e){let t=$.useContext(q0),[i,r]=$.useState(!1),[o,c]=$.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:m,onMouseLeave:g,onTouchStart:v}=e,_=$.useRef(null);$.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let R=M=>{M.forEach(F=>{c(F.isIntersecting)})},O=new IntersectionObserver(R,{threshold:.5});return _.current&&O.observe(_.current),()=>{O.disconnect()}}},[n]),$.useEffect(()=>{if(i){let R=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(R)}}},[i]);let w=()=>{r(!0)},S=()=>{r(!1),c(!1)};return t?n!=="intent"?[o,_,{}]:[o,_,{onFocus:Gc(h,w),onBlur:Gc(f,S),onMouseEnter:Gc(m,w),onMouseLeave:Gc(g,S),onTouchStart:Gc(v,w)}]:[!1,_,{}]}function Gc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function DR({page:n,...e}){let{router:t}=Qx(),i=$.useMemo(()=>Ox(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?$.createElement(zR,{page:n,matches:i,...e}):null}function OR(n){let{manifest:e,routeModules:t}=Xx(),[i,r]=$.useState([]);return $.useEffect(()=>{let o=!1;return CR(n,e,t).then(c=>{o||r(c)}),()=>{o=!0}},[n,e,t]),i}function zR({page:n,matches:e,...t}){let i=Is(),{manifest:r,routeModules:o}=Xx(),{basename:c}=Qx(),{loaderData:h,matches:f}=kR(),m=$.useMemo(()=>U_(n,e,f,r,i,"data"),[n,e,f,r,i]),g=$.useMemo(()=>U_(n,e,f,r,i,"assets"),[n,e,f,r,i]),v=$.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let S=new Set,R=!1;if(e.forEach(M=>{let F=r.routes[M.route.id];!F||!F.hasLoader||(!m.some(H=>H.route.id===M.route.id)&&M.route.id in h&&o[M.route.id]?.shouldRevalidate||F.hasClientLoader?R=!0:S.add(M.route.id))}),S.size===0)return[];let O=SR(n,c,"data");return R&&S.size>0&&O.searchParams.set("_routes",e.filter(M=>S.has(M.route.id)).map(M=>M.route.id).join(",")),[O.pathname+O.search]},[c,h,i,r,m,e,n,o]),_=$.useMemo(()=>RR(g,r),[g,r]),w=OR(g);return $.createElement($.Fragment,null,v.map(S=>$.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),_.map(S=>$.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),w.map(({key:S,link:R})=>$.createElement("link",{key:S,nonce:t.nonce,...R})))}function PR(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var LR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{LR&&(window.__reactRouterVersion="7.11.0")}catch{}function VR({basename:n,children:e,unstable_useTransitions:t,window:i}){let r=$.useRef();r.current==null&&(r.current=bC({window:i,v5Compat:!0}));let o=r.current,[c,h]=$.useState({action:o.action,location:o.location}),f=$.useCallback(m=>{t===!1?h(m):$.startTransition(()=>h(m))},[t]);return $.useLayoutEffect(()=>o.listen(f),[o,f]),$.createElement(mR,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:t})}var Jx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yl=$.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:r,reloadDocument:o,replace:c,state:h,target:f,to:m,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:_,...w},S){let{basename:R,unstable_useTransitions:O}=$.useContext(_n),M=typeof m=="string"&&Jx.test(m),F=Ux(m,R);m=F.to;let H=ZC(m,{relative:r}),[G,X,U]=jR(i,w),N=HR(m,{replace:c,state:h,target:f,preventScrollReset:g,relative:r,viewTransition:v,unstable_defaultShouldRevalidate:_,unstable_useTransitions:O});function E(D){e&&e(D),D.defaultPrevented||N(D)}let T=$.createElement("a",{...w,...U,href:F.absoluteURL||H,onClick:F.isExternal||o?e:E,ref:PR(S,X),target:f,"data-discover":!M&&t==="render"?"true":void 0});return G&&!M?$.createElement($.Fragment,null,T,$.createElement(DR,{page:H})):T});yl.displayName="Link";var UR=$.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:r=!1,style:o,to:c,viewTransition:h,children:f,...m},g){let v=Nu(c,{relative:m.relative}),_=Is(),w=$.useContext(Mf),{navigator:S,basename:R}=$.useContext(_n),O=w!=null&&YR(v)&&h===!0,M=S.encodeLocation?S.encodeLocation(v).pathname:v.pathname,F=_.pathname,H=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(F=F.toLowerCase(),H=H?H.toLowerCase():null,M=M.toLowerCase()),H&&R&&(H=nr(H,R)||H);const G=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let X=F===M||!r&&F.startsWith(M)&&F.charAt(G)==="/",U=H!=null&&(H===M||!r&&H.startsWith(M)&&H.charAt(M.length)==="/"),N={isActive:X,isPending:U,isTransitioning:O},E=X?e:void 0,T;typeof i=="function"?T=i(N):T=[i,X?"active":null,U?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let D=typeof o=="function"?o(N):o;return $.createElement(yl,{...m,"aria-current":E,className:T,ref:g,style:D,to:c,viewTransition:h},typeof f=="function"?f(N):f)});UR.displayName="NavLink";var BR=$.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:r,state:o,method:c=jd,action:h,onSubmit:f,relative:m,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:_,...w},S)=>{let{unstable_useTransitions:R}=$.useContext(_n),O=$R(),M=KR(h,{relative:m}),F=c.toLowerCase()==="get"?"get":"post",H=typeof h=="string"&&Jx.test(h),G=X=>{if(f&&f(X),X.defaultPrevented)return;X.preventDefault();let U=X.nativeEvent.submitter,N=U?.getAttribute("formmethod")||c,E=()=>O(U||X.currentTarget,{fetcherKey:e,method:N,navigate:t,replace:r,state:o,relative:m,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:_});R&&t!==!1?$.startTransition(()=>E()):E()};return $.createElement("form",{ref:S,method:F,action:M,onSubmit:i?f:G,...w,"data-discover":!H&&n==="render"?"true":void 0})});BR.displayName="Form";function FR(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Zx(n){let e=$.useContext(Ml);return jt(e,FR(n)),e}function HR(n,{target:e,replace:t,state:i,preventScrollReset:r,relative:o,viewTransition:c,unstable_defaultShouldRevalidate:h,unstable_useTransitions:f}={}){let m=U0(),g=Is(),v=Nu(n,{relative:o});return $.useCallback(_=>{if(_R(_,e)){_.preventDefault();let w=t!==void 0?t:du(g)===du(v),S=()=>m(n,{replace:w,state:i,preventScrollReset:r,relative:o,viewTransition:c,unstable_defaultShouldRevalidate:h});f?$.startTransition(()=>S()):S()}},[g,m,v,t,i,e,n,r,o,c,h,f])}var qR=0,GR=()=>`__${String(++qR)}__`;function $R(){let{router:n}=Zx("useSubmit"),{basename:e}=$.useContext(_n),t=uR(),i=n.fetch,r=n.navigate;return $.useCallback(async(o,c={})=>{let{action:h,method:f,encType:m,formData:g,body:v}=ER(o,e);if(c.navigate===!1){let _=c.fetcherKey||GR();await i(_,t,c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:v,formMethod:c.method||f,formEncType:c.encType||m,flushSync:c.flushSync})}else await r(c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:v,formMethod:c.method||f,formEncType:c.encType||m,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,r,e,t])}function KR(n,{relative:e}={}){let{basename:t}=$.useContext(_n),i=$.useContext(Ns);jt(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),o={...Nu(n||".",{relative:e})},c=Is();if(n==null){o.search=c.search;let h=new URLSearchParams(o.search),f=h.getAll("index");if(f.some(g=>g==="")){h.delete("index"),f.filter(v=>v).forEach(v=>h.append("index",v));let g=h.toString();o.search=g?`?${g}`:""}}return(!n||n===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:tr([t,o.pathname])),du(o)}function YR(n,{relative:e}={}){let t=$.useContext(Fx);jt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Zx("useViewTransitionState"),r=Nu(n,{relative:e});if(!t.isTransitioning)return!1;let o=nr(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=nr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Xd(r.pathname,c)!=null||Xd(r.pathname,o)!=null}const WR=()=>{};var B_={};const eE=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},QR=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=n[t++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=n[t++],c=n[t++],h=n[t++],f=((r&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const o=n[t++],c=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|c&63)}}return e.join("")},tE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const o=n[r],c=r+1<n.length,h=c?n[r+1]:0,f=r+2<n.length,m=f?n[r+2]:0,g=o>>2,v=(o&3)<<4|h>>4;let _=(h&15)<<2|m>>6,w=m&63;f||(w=64,c||(_=64)),i.push(t[g],t[v],t[_],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(eE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):QR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const o=t[n.charAt(r++)],h=r<n.length?t[n.charAt(r)]:0;++r;const m=r<n.length?t[n.charAt(r)]:64;++r;const v=r<n.length?t[n.charAt(r)]:64;if(++r,o==null||h==null||m==null||v==null)throw new XR;const _=o<<2|h>>4;if(i.push(_),m!==64){const w=h<<4&240|m>>2;if(i.push(w),v!==64){const S=m<<6&192|v;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class XR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JR=function(n){const e=eE(n);return tE.encodeByteArray(e,!0)},Jd=function(n){return JR(n).replace(/\./g,"")},iE=function(n){try{return tE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ZR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const eN=()=>ZR().__FIREBASE_DEFAULTS__,tN=()=>{if(typeof process>"u"||typeof B_>"u")return;const n=B_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},iN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&iE(n[1]);return e&&JSON.parse(e)},jf=()=>{try{return WR()||eN()||tN()||iN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},nE=n=>jf()?.emulatorHosts?.[n],nN=n=>{const e=nE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},sE=()=>jf()?.config,rE=n=>jf()?.[`_${n}`];class sN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function jl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function aE(n){return(await fetch(n,{credentials:"include"})).ok}function rN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Jd(JSON.stringify(t)),Jd(JSON.stringify(c)),""].join(".")}const eu={};function aN(){const n={prod:[],emulator:[]};for(const e of Object.keys(eu))eu[e]?n.emulator.push(e):n.prod.push(e);return n}function oN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let F_=!1;function oE(n,e){if(typeof window>"u"||typeof document>"u"||!jl(window.location.host)||eu[n]===e||eu[n]||F_)return;eu[n]=e;function t(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=aN().prod.length>0;function c(){const _=document.getElementById(i);_&&_.remove()}function h(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function f(_,w){_.setAttribute("width","24"),_.setAttribute("id",w),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function m(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{F_=!0,c()},_}function g(_,w){_.setAttribute("id",w),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){const _=oN(i),w=t("text"),S=document.getElementById(w)||document.createElement("span"),R=t("learnmore"),O=document.getElementById(R)||document.createElement("a"),M=t("preprendIcon"),F=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const H=_.element;h(H),g(O,R);const G=m();f(F,M),H.append(F,S,O,G),document.body.appendChild(H)}o?(S.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function Vi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vi())}function cN(){const n=jf()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function dN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fN(){const n=Vi();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function mN(){return!cN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pN(){try{return typeof indexedDB=="object"}catch{return!1}}function gN(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(t){e(t)}})}const yN="FirebaseError";class cr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=yN,Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Iu.prototype.create)}}class Iu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],c=o?vN(o,i):"Error",h=`${this.serviceName}: ${c} (${r}).`;return new cr(r,h,i)}}function vN(n,e){return n.replace(bN,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const bN=/\{\$([^}]+)}/g;function _N(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function aa(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const o=n[r],c=e[r];if(H_(o)&&H_(c)){if(!aa(o,c))return!1}else if(o!==c)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function H_(n){return n!==null&&typeof n=="object"}function Mu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Yc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function Wc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function wN(n,e){const t=new xN(n,e);return t.subscribe.bind(t)}class xN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");EN(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=wg),r.error===void 0&&(r.error=wg),r.complete===void 0&&(r.complete=wg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function wg(){}function Kt(n){return n&&n._delegate?n._delegate:n}class Ja{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const $a="[DEFAULT]";class SN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new sN;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AN(e))try{this.getOrInitializeService({instanceIdentifier:$a})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=$a){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$a){return this.instances.has(e)}getOptions(e=$a){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&c.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:TN(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=$a){return this.component?this.component.multipleInstances?e:$a:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TN(n){return n===$a?void 0:n}function AN(n){return n.instantiationMode==="EAGER"}class CN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new SN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var $e;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})($e||($e={}));const RN={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},NN=$e.INFO,IN={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},MN=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=IN[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class G0{constructor(e){this.name=e,this._logLevel=NN,this._logHandler=MN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const kN=(n,e)=>e.some(t=>n instanceof t);let q_,G_;function jN(){return q_||(q_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DN(){return G_||(G_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lE=new WeakMap,e0=new WeakMap,cE=new WeakMap,xg=new WeakMap,$0=new WeakMap;function ON(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(Jr(n.result)),r()},c=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&lE.set(t,n)}).catch(()=>{}),$0.set(e,n),e}function zN(n){if(e0.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),r()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});e0.set(n,e)}let t0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return e0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||cE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Jr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function PN(n){t0=n(t0)}function LN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Eg(this),e,...t);return cE.set(i,e.sort?e.sort():[e]),Jr(i)}:DN().includes(n)?function(...e){return n.apply(Eg(this),e),Jr(lE.get(this))}:function(...e){return Jr(n.apply(Eg(this),e))}}function VN(n){return typeof n=="function"?LN(n):(n instanceof IDBTransaction&&zN(n),kN(n,jN())?new Proxy(n,t0):n)}function Jr(n){if(n instanceof IDBRequest)return ON(n);if(xg.has(n))return xg.get(n);const e=VN(n);return e!==n&&(xg.set(n,e),$0.set(e,n)),e}const Eg=n=>$0.get(n);function UN(n,e,{blocked:t,upgrade:i,blocking:r,terminated:o}={}){const c=indexedDB.open(n,e),h=Jr(c);return i&&c.addEventListener("upgradeneeded",f=>{i(Jr(c.result),f.oldVersion,f.newVersion,Jr(c.transaction),f)}),t&&c.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{o&&f.addEventListener("close",()=>o()),r&&f.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const BN=["get","getKey","getAll","getAllKeys","count"],FN=["put","add","delete","clear"],Sg=new Map;function $_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Sg.get(e))return Sg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=FN.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||BN.includes(t)))return;const o=async function(c,...h){const f=this.transaction(c,r?"readwrite":"readonly");let m=f.store;return i&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),r&&f.done]))[0]};return Sg.set(e,o),o}PN(n=>({...n,get:(e,t,i)=>$_(e,t)||n.get(e,t,i),has:(e,t)=>!!$_(e,t)||n.has(e,t)}));class HN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(qN(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function qN(n){return n.getComponent()?.type==="VERSION"}const i0="@firebase/app",K_="0.14.6";const sr=new G0("@firebase/app"),GN="@firebase/app-compat",$N="@firebase/analytics-compat",KN="@firebase/analytics",YN="@firebase/app-check-compat",WN="@firebase/app-check",QN="@firebase/auth",XN="@firebase/auth-compat",JN="@firebase/database",ZN="@firebase/data-connect",e4="@firebase/database-compat",t4="@firebase/functions",i4="@firebase/functions-compat",n4="@firebase/installations",s4="@firebase/installations-compat",r4="@firebase/messaging",a4="@firebase/messaging-compat",o4="@firebase/performance",l4="@firebase/performance-compat",c4="@firebase/remote-config",u4="@firebase/remote-config-compat",h4="@firebase/storage",d4="@firebase/storage-compat",f4="@firebase/firestore",m4="@firebase/ai",p4="@firebase/firestore-compat",g4="firebase",y4="12.6.0";const n0="[DEFAULT]",v4={[i0]:"fire-core",[GN]:"fire-core-compat",[KN]:"fire-analytics",[$N]:"fire-analytics-compat",[WN]:"fire-app-check",[YN]:"fire-app-check-compat",[QN]:"fire-auth",[XN]:"fire-auth-compat",[JN]:"fire-rtdb",[ZN]:"fire-data-connect",[e4]:"fire-rtdb-compat",[t4]:"fire-fn",[i4]:"fire-fn-compat",[n4]:"fire-iid",[s4]:"fire-iid-compat",[r4]:"fire-fcm",[a4]:"fire-fcm-compat",[o4]:"fire-perf",[l4]:"fire-perf-compat",[c4]:"fire-rc",[u4]:"fire-rc-compat",[h4]:"fire-gcs",[d4]:"fire-gcs-compat",[f4]:"fire-fst",[p4]:"fire-fst-compat",[m4]:"fire-vertex","fire-js":"fire-js",[g4]:"fire-js-all"};const Zd=new Map,b4=new Map,s0=new Map;function Y_(n,e){try{n.container.addComponent(e)}catch(t){sr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function vl(n){const e=n.name;if(s0.has(e))return sr.debug(`There were multiple attempts to register component ${e}.`),!1;s0.set(e,n);for(const t of Zd.values())Y_(t,n);for(const t of b4.values())Y_(t,n);return!0}function K0(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Dn(n){return n==null?!1:n.settings!==void 0}const _4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zr=new Iu("app","Firebase",_4);class w4{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ja("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zr.create("app-deleted",{appName:this._name})}}const Dl=y4;function uE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:n0,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Zr.create("bad-app-name",{appName:String(r)});if(t||(t=sE()),!t)throw Zr.create("no-options");const o=Zd.get(r);if(o){if(aa(t,o.options)&&aa(i,o.config))return o;throw Zr.create("duplicate-app",{appName:r})}const c=new CN(r);for(const f of s0.values())c.addComponent(f);const h=new w4(t,i,c);return Zd.set(r,h),h}function hE(n=n0){const e=Zd.get(n);if(!e&&n===n0&&sE())return uE();if(!e)throw Zr.create("no-app",{appName:n});return e}function ea(n,e,t){let i=v4[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const c=[`Unable to register library "${i}" with version "${e}":`];r&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),sr.warn(c.join(" "));return}vl(new Ja(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const x4="firebase-heartbeat-database",E4=1,fu="firebase-heartbeat-store";let Tg=null;function dE(){return Tg||(Tg=UN(x4,E4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Zr.create("idb-open",{originalErrorMessage:n.message})})),Tg}async function S4(n){try{const t=(await dE()).transaction(fu),i=await t.objectStore(fu).get(fE(n));return await t.done,i}catch(e){if(e instanceof cr)sr.warn(e.message);else{const t=Zr.create("idb-get",{originalErrorMessage:e?.message});sr.warn(t.message)}}}async function W_(n,e){try{const i=(await dE()).transaction(fu,"readwrite");await i.objectStore(fu).put(e,fE(n)),await i.done}catch(t){if(t instanceof cr)sr.warn(t.message);else{const i=Zr.create("idb-set",{originalErrorMessage:t?.message});sr.warn(i.message)}}}function fE(n){return`${n.name}!${n.options.appId}`}const T4=1024,A4=30;class C4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new N4(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Q_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>A4){const r=I4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){sr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Q_(),{heartbeatsToSend:t,unsentEntries:i}=R4(this._heartbeatsCache.heartbeats),r=Jd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return sr.warn(e),""}}}function Q_(){return new Date().toISOString().substring(0,10)}function R4(n,e=T4){const t=[];let i=n.slice();for(const r of n){const o=t.find(c=>c.agent===r.agent);if(o){if(o.dates.push(r.date),X_(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),X_(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class N4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pN()?gN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await S4(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return W_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return W_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function X_(n){return Jd(JSON.stringify({version:2,heartbeats:n})).length}function I4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function M4(n){vl(new Ja("platform-logger",e=>new HN(e),"PRIVATE")),vl(new Ja("heartbeat",e=>new C4(e),"PRIVATE")),ea(i0,K_,n),ea(i0,K_,"esm2020"),ea("fire-js","")}M4("");var k4="firebase",j4="12.7.0";ea(k4,j4,"app");var J_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ta,mE;(function(){var n;function e(N,E){function T(){}T.prototype=E.prototype,N.F=E.prototype,N.prototype=new T,N.prototype.constructor=N,N.D=function(D,I,z){for(var k=Array(arguments.length-2),W=2;W<arguments.length;W++)k[W-2]=arguments[W];return E.prototype[I].apply(D,k)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(N,E,T){T||(T=0);const D=Array(16);if(typeof E=="string")for(var I=0;I<16;++I)D[I]=E.charCodeAt(T++)|E.charCodeAt(T++)<<8|E.charCodeAt(T++)<<16|E.charCodeAt(T++)<<24;else for(I=0;I<16;++I)D[I]=E[T++]|E[T++]<<8|E[T++]<<16|E[T++]<<24;E=N.g[0],T=N.g[1],I=N.g[2];let z=N.g[3],k;k=E+(z^T&(I^z))+D[0]+3614090360&4294967295,E=T+(k<<7&4294967295|k>>>25),k=z+(I^E&(T^I))+D[1]+3905402710&4294967295,z=E+(k<<12&4294967295|k>>>20),k=I+(T^z&(E^T))+D[2]+606105819&4294967295,I=z+(k<<17&4294967295|k>>>15),k=T+(E^I&(z^E))+D[3]+3250441966&4294967295,T=I+(k<<22&4294967295|k>>>10),k=E+(z^T&(I^z))+D[4]+4118548399&4294967295,E=T+(k<<7&4294967295|k>>>25),k=z+(I^E&(T^I))+D[5]+1200080426&4294967295,z=E+(k<<12&4294967295|k>>>20),k=I+(T^z&(E^T))+D[6]+2821735955&4294967295,I=z+(k<<17&4294967295|k>>>15),k=T+(E^I&(z^E))+D[7]+4249261313&4294967295,T=I+(k<<22&4294967295|k>>>10),k=E+(z^T&(I^z))+D[8]+1770035416&4294967295,E=T+(k<<7&4294967295|k>>>25),k=z+(I^E&(T^I))+D[9]+2336552879&4294967295,z=E+(k<<12&4294967295|k>>>20),k=I+(T^z&(E^T))+D[10]+4294925233&4294967295,I=z+(k<<17&4294967295|k>>>15),k=T+(E^I&(z^E))+D[11]+2304563134&4294967295,T=I+(k<<22&4294967295|k>>>10),k=E+(z^T&(I^z))+D[12]+1804603682&4294967295,E=T+(k<<7&4294967295|k>>>25),k=z+(I^E&(T^I))+D[13]+4254626195&4294967295,z=E+(k<<12&4294967295|k>>>20),k=I+(T^z&(E^T))+D[14]+2792965006&4294967295,I=z+(k<<17&4294967295|k>>>15),k=T+(E^I&(z^E))+D[15]+1236535329&4294967295,T=I+(k<<22&4294967295|k>>>10),k=E+(I^z&(T^I))+D[1]+4129170786&4294967295,E=T+(k<<5&4294967295|k>>>27),k=z+(T^I&(E^T))+D[6]+3225465664&4294967295,z=E+(k<<9&4294967295|k>>>23),k=I+(E^T&(z^E))+D[11]+643717713&4294967295,I=z+(k<<14&4294967295|k>>>18),k=T+(z^E&(I^z))+D[0]+3921069994&4294967295,T=I+(k<<20&4294967295|k>>>12),k=E+(I^z&(T^I))+D[5]+3593408605&4294967295,E=T+(k<<5&4294967295|k>>>27),k=z+(T^I&(E^T))+D[10]+38016083&4294967295,z=E+(k<<9&4294967295|k>>>23),k=I+(E^T&(z^E))+D[15]+3634488961&4294967295,I=z+(k<<14&4294967295|k>>>18),k=T+(z^E&(I^z))+D[4]+3889429448&4294967295,T=I+(k<<20&4294967295|k>>>12),k=E+(I^z&(T^I))+D[9]+568446438&4294967295,E=T+(k<<5&4294967295|k>>>27),k=z+(T^I&(E^T))+D[14]+3275163606&4294967295,z=E+(k<<9&4294967295|k>>>23),k=I+(E^T&(z^E))+D[3]+4107603335&4294967295,I=z+(k<<14&4294967295|k>>>18),k=T+(z^E&(I^z))+D[8]+1163531501&4294967295,T=I+(k<<20&4294967295|k>>>12),k=E+(I^z&(T^I))+D[13]+2850285829&4294967295,E=T+(k<<5&4294967295|k>>>27),k=z+(T^I&(E^T))+D[2]+4243563512&4294967295,z=E+(k<<9&4294967295|k>>>23),k=I+(E^T&(z^E))+D[7]+1735328473&4294967295,I=z+(k<<14&4294967295|k>>>18),k=T+(z^E&(I^z))+D[12]+2368359562&4294967295,T=I+(k<<20&4294967295|k>>>12),k=E+(T^I^z)+D[5]+4294588738&4294967295,E=T+(k<<4&4294967295|k>>>28),k=z+(E^T^I)+D[8]+2272392833&4294967295,z=E+(k<<11&4294967295|k>>>21),k=I+(z^E^T)+D[11]+1839030562&4294967295,I=z+(k<<16&4294967295|k>>>16),k=T+(I^z^E)+D[14]+4259657740&4294967295,T=I+(k<<23&4294967295|k>>>9),k=E+(T^I^z)+D[1]+2763975236&4294967295,E=T+(k<<4&4294967295|k>>>28),k=z+(E^T^I)+D[4]+1272893353&4294967295,z=E+(k<<11&4294967295|k>>>21),k=I+(z^E^T)+D[7]+4139469664&4294967295,I=z+(k<<16&4294967295|k>>>16),k=T+(I^z^E)+D[10]+3200236656&4294967295,T=I+(k<<23&4294967295|k>>>9),k=E+(T^I^z)+D[13]+681279174&4294967295,E=T+(k<<4&4294967295|k>>>28),k=z+(E^T^I)+D[0]+3936430074&4294967295,z=E+(k<<11&4294967295|k>>>21),k=I+(z^E^T)+D[3]+3572445317&4294967295,I=z+(k<<16&4294967295|k>>>16),k=T+(I^z^E)+D[6]+76029189&4294967295,T=I+(k<<23&4294967295|k>>>9),k=E+(T^I^z)+D[9]+3654602809&4294967295,E=T+(k<<4&4294967295|k>>>28),k=z+(E^T^I)+D[12]+3873151461&4294967295,z=E+(k<<11&4294967295|k>>>21),k=I+(z^E^T)+D[15]+530742520&4294967295,I=z+(k<<16&4294967295|k>>>16),k=T+(I^z^E)+D[2]+3299628645&4294967295,T=I+(k<<23&4294967295|k>>>9),k=E+(I^(T|~z))+D[0]+4096336452&4294967295,E=T+(k<<6&4294967295|k>>>26),k=z+(T^(E|~I))+D[7]+1126891415&4294967295,z=E+(k<<10&4294967295|k>>>22),k=I+(E^(z|~T))+D[14]+2878612391&4294967295,I=z+(k<<15&4294967295|k>>>17),k=T+(z^(I|~E))+D[5]+4237533241&4294967295,T=I+(k<<21&4294967295|k>>>11),k=E+(I^(T|~z))+D[12]+1700485571&4294967295,E=T+(k<<6&4294967295|k>>>26),k=z+(T^(E|~I))+D[3]+2399980690&4294967295,z=E+(k<<10&4294967295|k>>>22),k=I+(E^(z|~T))+D[10]+4293915773&4294967295,I=z+(k<<15&4294967295|k>>>17),k=T+(z^(I|~E))+D[1]+2240044497&4294967295,T=I+(k<<21&4294967295|k>>>11),k=E+(I^(T|~z))+D[8]+1873313359&4294967295,E=T+(k<<6&4294967295|k>>>26),k=z+(T^(E|~I))+D[15]+4264355552&4294967295,z=E+(k<<10&4294967295|k>>>22),k=I+(E^(z|~T))+D[6]+2734768916&4294967295,I=z+(k<<15&4294967295|k>>>17),k=T+(z^(I|~E))+D[13]+1309151649&4294967295,T=I+(k<<21&4294967295|k>>>11),k=E+(I^(T|~z))+D[4]+4149444226&4294967295,E=T+(k<<6&4294967295|k>>>26),k=z+(T^(E|~I))+D[11]+3174756917&4294967295,z=E+(k<<10&4294967295|k>>>22),k=I+(E^(z|~T))+D[2]+718787259&4294967295,I=z+(k<<15&4294967295|k>>>17),k=T+(z^(I|~E))+D[9]+3951481745&4294967295,N.g[0]=N.g[0]+E&4294967295,N.g[1]=N.g[1]+(I+(k<<21&4294967295|k>>>11))&4294967295,N.g[2]=N.g[2]+I&4294967295,N.g[3]=N.g[3]+z&4294967295}i.prototype.v=function(N,E){E===void 0&&(E=N.length);const T=E-this.blockSize,D=this.C;let I=this.h,z=0;for(;z<E;){if(I==0)for(;z<=T;)r(this,N,z),z+=this.blockSize;if(typeof N=="string"){for(;z<E;)if(D[I++]=N.charCodeAt(z++),I==this.blockSize){r(this,D),I=0;break}}else for(;z<E;)if(D[I++]=N[z++],I==this.blockSize){r(this,D),I=0;break}}this.h=I,this.o+=E},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var E=1;E<N.length-8;++E)N[E]=0;E=this.o*8;for(var T=N.length-8;T<N.length;++T)N[T]=E&255,E/=256;for(this.v(N),N=Array(16),E=0,T=0;T<4;++T)for(let D=0;D<32;D+=8)N[E++]=this.g[T]>>>D&255;return N};function o(N,E){var T=h;return Object.prototype.hasOwnProperty.call(T,N)?T[N]:T[N]=E(N)}function c(N,E){this.h=E;const T=[];let D=!0;for(let I=N.length-1;I>=0;I--){const z=N[I]|0;D&&z==E||(T[I]=z,D=!1)}this.g=T}var h={};function f(N){return-128<=N&&N<128?o(N,function(E){return new c([E|0],E<0?-1:0)}):new c([N|0],N<0?-1:0)}function m(N){if(isNaN(N)||!isFinite(N))return v;if(N<0)return O(m(-N));const E=[];let T=1;for(let D=0;N>=T;D++)E[D]=N/T|0,T*=4294967296;return new c(E,0)}function g(N,E){if(N.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(N.charAt(0)=="-")return O(g(N.substring(1),E));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=m(Math.pow(E,8));let D=v;for(let z=0;z<N.length;z+=8){var I=Math.min(8,N.length-z);const k=parseInt(N.substring(z,z+I),E);I<8?(I=m(Math.pow(E,I)),D=D.j(I).add(m(k))):(D=D.j(T),D=D.add(m(k)))}return D}var v=f(0),_=f(1),w=f(16777216);n=c.prototype,n.m=function(){if(R(this))return-O(this).m();let N=0,E=1;for(let T=0;T<this.g.length;T++){const D=this.i(T);N+=(D>=0?D:4294967296+D)*E,E*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(S(this))return"0";if(R(this))return"-"+O(this).toString(N);const E=m(Math.pow(N,6));var T=this;let D="";for(;;){const I=G(T,E).g;T=M(T,I.j(E));let z=((T.g.length>0?T.g[0]:T.h)>>>0).toString(N);if(T=I,S(T))return z+D;for(;z.length<6;)z="0"+z;D=z+D}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function S(N){if(N.h!=0)return!1;for(let E=0;E<N.g.length;E++)if(N.g[E]!=0)return!1;return!0}function R(N){return N.h==-1}n.l=function(N){return N=M(this,N),R(N)?-1:S(N)?0:1};function O(N){const E=N.g.length,T=[];for(let D=0;D<E;D++)T[D]=~N.g[D];return new c(T,~N.h).add(_)}n.abs=function(){return R(this)?O(this):this},n.add=function(N){const E=Math.max(this.g.length,N.g.length),T=[];let D=0;for(let I=0;I<=E;I++){let z=D+(this.i(I)&65535)+(N.i(I)&65535),k=(z>>>16)+(this.i(I)>>>16)+(N.i(I)>>>16);D=k>>>16,z&=65535,k&=65535,T[I]=k<<16|z}return new c(T,T[T.length-1]&-2147483648?-1:0)};function M(N,E){return N.add(O(E))}n.j=function(N){if(S(this)||S(N))return v;if(R(this))return R(N)?O(this).j(O(N)):O(O(this).j(N));if(R(N))return O(this.j(O(N)));if(this.l(w)<0&&N.l(w)<0)return m(this.m()*N.m());const E=this.g.length+N.g.length,T=[];for(var D=0;D<2*E;D++)T[D]=0;for(D=0;D<this.g.length;D++)for(let I=0;I<N.g.length;I++){const z=this.i(D)>>>16,k=this.i(D)&65535,W=N.i(I)>>>16,K=N.i(I)&65535;T[2*D+2*I]+=k*K,F(T,2*D+2*I),T[2*D+2*I+1]+=z*K,F(T,2*D+2*I+1),T[2*D+2*I+1]+=k*W,F(T,2*D+2*I+1),T[2*D+2*I+2]+=z*W,F(T,2*D+2*I+2)}for(N=0;N<E;N++)T[N]=T[2*N+1]<<16|T[2*N];for(N=E;N<2*E;N++)T[N]=0;return new c(T,0)};function F(N,E){for(;(N[E]&65535)!=N[E];)N[E+1]+=N[E]>>>16,N[E]&=65535,E++}function H(N,E){this.g=N,this.h=E}function G(N,E){if(S(E))throw Error("division by zero");if(S(N))return new H(v,v);if(R(N))return E=G(O(N),E),new H(O(E.g),O(E.h));if(R(E))return E=G(N,O(E)),new H(O(E.g),E.h);if(N.g.length>30){if(R(N)||R(E))throw Error("slowDivide_ only works with positive integers.");for(var T=_,D=E;D.l(N)<=0;)T=X(T),D=X(D);var I=U(T,1),z=U(D,1);for(D=U(D,2),T=U(T,2);!S(D);){var k=z.add(D);k.l(N)<=0&&(I=I.add(T),z=k),D=U(D,1),T=U(T,1)}return E=M(N,I.j(E)),new H(I,E)}for(I=v;N.l(E)>=0;){for(T=Math.max(1,Math.floor(N.m()/E.m())),D=Math.ceil(Math.log(T)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),z=m(T),k=z.j(E);R(k)||k.l(N)>0;)T-=D,z=m(T),k=z.j(E);S(z)&&(z=_),I=I.add(z),N=M(N,k)}return new H(I,N)}n.B=function(N){return G(this,N).h},n.and=function(N){const E=Math.max(this.g.length,N.g.length),T=[];for(let D=0;D<E;D++)T[D]=this.i(D)&N.i(D);return new c(T,this.h&N.h)},n.or=function(N){const E=Math.max(this.g.length,N.g.length),T=[];for(let D=0;D<E;D++)T[D]=this.i(D)|N.i(D);return new c(T,this.h|N.h)},n.xor=function(N){const E=Math.max(this.g.length,N.g.length),T=[];for(let D=0;D<E;D++)T[D]=this.i(D)^N.i(D);return new c(T,this.h^N.h)};function X(N){const E=N.g.length+1,T=[];for(let D=0;D<E;D++)T[D]=N.i(D)<<1|N.i(D-1)>>>31;return new c(T,N.h)}function U(N,E){const T=E>>5;E%=32;const D=N.g.length-T,I=[];for(let z=0;z<D;z++)I[z]=E>0?N.i(z+T)>>>E|N.i(z+T+1)<<32-E:N.i(z+T);return new c(I,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,mE=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=g,ta=c}).apply(typeof J_<"u"?J_:typeof self<"u"?self:typeof window<"u"?window:{});var vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var pE,Qc,gE,Od,r0,yE,vE,bE;(function(){var n,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof vd=="object"&&vd];for(var x=0;x<p.length;++x){var C=p[x];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=t(this);function r(p,x){if(x)e:{var C=i;p=p.split(".");for(var B=0;B<p.length-1;B++){var se=p[B];if(!(se in C))break e;C=C[se]}p=p[p.length-1],B=C[p],x=x(B),x!=B&&x!=null&&e(C,p,{configurable:!0,writable:!0,value:x})}}r("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(p){return p||function(x){var C=[],B;for(B in x)Object.prototype.hasOwnProperty.call(x,B)&&C.push([B,x[B]]);return C}});var o=o||{},c=this||self;function h(p){var x=typeof p;return x=="object"&&p!=null||x=="function"}function f(p,x,C){return p.call.apply(p.bind,arguments)}function m(p,x,C){return m=f,m.apply(null,arguments)}function g(p,x){var C=Array.prototype.slice.call(arguments,1);return function(){var B=C.slice();return B.push.apply(B,arguments),p.apply(this,B)}}function v(p,x){function C(){}C.prototype=x.prototype,p.Z=x.prototype,p.prototype=new C,p.prototype.constructor=p,p.Ob=function(B,se,ce){for(var be=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)be[Pe-2]=arguments[Pe];return x.prototype[se].apply(B,be)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function w(p){const x=p.length;if(x>0){const C=Array(x);for(let B=0;B<x;B++)C[B]=p[B];return C}return[]}function S(p,x){for(let B=1;B<arguments.length;B++){const se=arguments[B];var C=typeof se;if(C=C!="object"?C:se?Array.isArray(se)?"array":C:"null",C=="array"||C=="object"&&typeof se.length=="number"){C=p.length||0;const ce=se.length||0;p.length=C+ce;for(let be=0;be<ce;be++)p[C+be]=se[be]}else p.push(se)}}class R{constructor(x,C){this.i=x,this.j=C,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function O(p){c.setTimeout(()=>{throw p},0)}function M(){var p=N;let x=null;return p.g&&(x=p.g,p.g=p.g.next,p.g||(p.h=null),x.next=null),x}class F{constructor(){this.h=this.g=null}add(x,C){const B=H.get();B.set(x,C),this.h?this.h.next=B:this.g=B,this.h=B}}var H=new R(()=>new G,p=>p.reset());class G{constructor(){this.next=this.g=this.h=null}set(x,C){this.h=x,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let X,U=!1,N=new F,E=()=>{const p=Promise.resolve(void 0);X=()=>{p.then(T)}};function T(){for(var p;p=M();){try{p.h.call(p.g)}catch(C){O(C)}var x=H;x.j(p),x.h<100&&(x.h++,p.next=x.g,x.g=p)}U=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(p,x){this.type=p,this.g=this.target=x,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var p=!1,x=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const C=()=>{};c.addEventListener("test",C,x),c.removeEventListener("test",C,x)}catch{}return p})();function k(p){return/^[\s\xa0]*$/.test(p)}function W(p,x){I.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,x)}v(W,I),W.prototype.init=function(p,x){const C=this.type=p.type,B=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=x,x=p.relatedTarget,x||(C=="mouseover"?x=p.fromElement:C=="mouseout"&&(x=p.toElement)),this.relatedTarget=x,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&W.Z.h.call(this)},W.prototype.h=function(){W.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var K="closure_listenable_"+(Math.random()*1e6|0),j=0;function P(p,x,C,B,se){this.listener=p,this.proxy=null,this.src=x,this.type=C,this.capture=!!B,this.ha=se,this.key=++j,this.da=this.fa=!1}function ne(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function J(p,x,C){for(const B in p)x.call(C,p[B],B,p)}function re(p,x){for(const C in p)x.call(void 0,p[C],C,p)}function V(p){const x={};for(const C in p)x[C]=p[C];return x}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(p,x){let C,B;for(let se=1;se<arguments.length;se++){B=arguments[se];for(C in B)p[C]=B[C];for(let ce=0;ce<q.length;ce++)C=q[ce],Object.prototype.hasOwnProperty.call(B,C)&&(p[C]=B[C])}}function Q(p){this.src=p,this.g={},this.h=0}Q.prototype.add=function(p,x,C,B,se){const ce=p.toString();p=this.g[ce],p||(p=this.g[ce]=[],this.h++);const be=fe(p,x,B,se);return be>-1?(x=p[be],C||(x.fa=!1)):(x=new P(x,this.src,ce,!!B,se),x.fa=C,p.push(x)),x};function te(p,x){const C=x.type;if(C in p.g){var B=p.g[C],se=Array.prototype.indexOf.call(B,x,void 0),ce;(ce=se>=0)&&Array.prototype.splice.call(B,se,1),ce&&(ne(x),p.g[C].length==0&&(delete p.g[C],p.h--))}}function fe(p,x,C,B){for(let se=0;se<p.length;++se){const ce=p[se];if(!ce.da&&ce.listener==x&&ce.capture==!!C&&ce.ha==B)return se}return-1}var ye="closure_lm_"+(Math.random()*1e6|0),Ne={};function Ae(p,x,C,B,se){if(Array.isArray(x)){for(let ce=0;ce<x.length;ce++)Ae(p,x[ce],C,B,se);return null}return C=st(C),p&&p[K]?p.J(x,C,h(B)?!!B.capture:!1,se):We(p,x,C,!1,B,se)}function We(p,x,C,B,se,ce){if(!x)throw Error("Invalid event type");const be=h(se)?!!se.capture:!!se;let Pe=It(p);if(Pe||(p[ye]=Pe=new Q(p)),C=Pe.add(x,C,B,be,ce),C.proxy)return C;if(B=tt(),C.proxy=B,B.src=p,B.listener=C,p.addEventListener)z||(se=be),se===void 0&&(se=!1),p.addEventListener(x.toString(),B,se);else if(p.attachEvent)p.attachEvent(Vt(x.toString()),B);else if(p.addListener&&p.removeListener)p.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return C}function tt(){function p(C){return x.call(p.src,p.listener,C)}const x=ft;return p}function xt(p,x,C,B,se){if(Array.isArray(x))for(var ce=0;ce<x.length;ce++)xt(p,x[ce],C,B,se);else B=h(B)?!!B.capture:!!B,C=st(C),p&&p[K]?(p=p.i,ce=String(x).toString(),ce in p.g&&(x=p.g[ce],C=fe(x,C,B,se),C>-1&&(ne(x[C]),Array.prototype.splice.call(x,C,1),x.length==0&&(delete p.g[ce],p.h--)))):p&&(p=It(p))&&(x=p.g[x.toString()],p=-1,x&&(p=fe(x,C,B,se)),(C=p>-1?x[p]:null)&&Gi(C))}function Gi(p){if(typeof p!="number"&&p&&!p.da){var x=p.src;if(x&&x[K])te(x.i,p);else{var C=p.type,B=p.proxy;x.removeEventListener?x.removeEventListener(C,B,p.capture):x.detachEvent?x.detachEvent(Vt(C),B):x.addListener&&x.removeListener&&x.removeListener(B),(C=It(x))?(te(C,p),C.h==0&&(C.src=null,x[ye]=null)):ne(p)}}}function Vt(p){return p in Ne?Ne[p]:Ne[p]="on"+p}function ft(p,x){if(p.da)p=!0;else{x=new W(x,this);const C=p.listener,B=p.ha||p.src;p.fa&&Gi(p),p=C.call(B,x)}return p}function It(p){return p=p[ye],p instanceof Q?p:null}var ot="__closure_events_fn_"+(Math.random()*1e9>>>0);function st(p){return typeof p=="function"?p:(p[ot]||(p[ot]=function(x){return p.handleEvent(x)}),p[ot])}function Be(){D.call(this),this.i=new Q(this),this.M=this,this.G=null}v(Be,D),Be.prototype[K]=!0,Be.prototype.removeEventListener=function(p,x,C,B){xt(this,p,x,C,B)};function Qe(p,x){var C,B=p.G;if(B)for(C=[];B;B=B.G)C.push(B);if(p=p.M,B=x.type||x,typeof x=="string")x=new I(x,p);else if(x instanceof I)x.target=x.target||p;else{var se=x;x=new I(B,p),ee(x,se)}se=!0;let ce,be;if(C)for(be=C.length-1;be>=0;be--)ce=x.g=C[be],se=lt(ce,B,!0,x)&&se;if(ce=x.g=p,se=lt(ce,B,!0,x)&&se,se=lt(ce,B,!1,x)&&se,C)for(be=0;be<C.length;be++)ce=x.g=C[be],se=lt(ce,B,!1,x)&&se}Be.prototype.N=function(){if(Be.Z.N.call(this),this.i){var p=this.i;for(const x in p.g){const C=p.g[x];for(let B=0;B<C.length;B++)ne(C[B]);delete p.g[x],p.h--}}this.G=null},Be.prototype.J=function(p,x,C,B){return this.i.add(String(p),x,!1,C,B)},Be.prototype.K=function(p,x,C,B){return this.i.add(String(p),x,!0,C,B)};function lt(p,x,C,B){if(x=p.i.g[String(x)],!x)return!0;x=x.concat();let se=!0;for(let ce=0;ce<x.length;++ce){const be=x[ce];if(be&&!be.da&&be.capture==C){const Pe=be.listener,Ft=be.ha||be.src;be.fa&&te(p.i,be),se=Pe.call(Ft,B)!==!1&&se}}return se&&!B.defaultPrevented}function gi(p,x){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=m(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:c.setTimeout(p,x||0)}function St(p){p.g=gi(()=>{p.g=null,p.i&&(p.i=!1,St(p))},p.l);const x=p.h;p.h=null,p.m.apply(null,x)}class Ve extends D{constructor(x,C){super(),this.m=x,this.l=C,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:St(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ut(p){D.call(this),this.h=p,this.g={}}v(Ut,D);var $i=[];function es(p){J(p.g,function(x,C){this.g.hasOwnProperty(C)&&Gi(x)},p),p.g={}}Ut.prototype.N=function(){Ut.Z.N.call(this),es(this)},Ut.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tt=c.JSON.stringify,Pn=c.JSON.parse,Yt=class{stringify(p){return c.JSON.stringify(p,void 0)}parse(p){return c.JSON.parse(p,void 0)}};function ki(){}function yi(){}var Bt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function mt(){I.call(this,"d")}v(mt,I);function Wt(){I.call(this,"c")}v(Wt,I);var At={},uo=null;function ts(){return uo=uo||new Be}At.Ia="serverreachability";function ya(p){I.call(this,At.Ia,p)}v(ya,I);function ji(p){const x=ts();Qe(x,new ya(x))}At.STAT_EVENT="statevent";function Ms(p,x){I.call(this,At.STAT_EVENT,p),this.stat=x}v(Ms,I);function ct(p){const x=ts();Qe(x,new Ms(x,p))}At.Ja="timingevent";function ai(p,x){I.call(this,At.Ja,p),this.size=x}v(ai,I);function vi(p,x){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){p()},x)}function bi(){this.g=!0}bi.prototype.ua=function(){this.g=!1};function ho(p,x,C,B,se,ce){p.info(function(){if(p.g)if(ce){var be="",Pe=ce.split("&");for(let rt=0;rt<Pe.length;rt++){var Ft=Pe[rt].split("=");if(Ft.length>1){const Mt=Ft[0];Ft=Ft[1];const Tn=Mt.split("_");be=Tn.length>=2&&Tn[1]=="type"?be+(Mt+"="+Ft+"&"):be+(Mt+"=redacted&")}}}else be=null;else be=ce;return"XMLHTTP REQ ("+B+") [attempt "+se+"]: "+x+`
`+C+`
`+be})}function wn(p,x,C,B,se,ce,be){p.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+se+"]: "+x+`
`+C+`
`+ce+" "+be})}function ci(p,x,C,B){p.info(function(){return"XMLHTTP TEXT ("+x+"): "+ym(p,C)+(B?" "+B:"")})}function va(p,x){p.info(function(){return"TIMEOUT: "+x})}bi.prototype.info=function(){};function ym(p,x){if(!p.g)return x;if(!x)return null;try{const ce=JSON.parse(x);if(ce){for(p=0;p<ce.length;p++)if(Array.isArray(ce[p])){var C=ce[p];if(!(C.length<2)){var B=C[1];if(Array.isArray(B)&&!(B.length<1)){var se=B[0];if(se!="noop"&&se!="stop"&&se!="close")for(let be=1;be<B.length;be++)B[be]=""}}}}return Tt(ce)}catch{return x}}var ba={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ql={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Gl;function _a(){}v(_a,ki),_a.prototype.g=function(){return new XMLHttpRequest},Gl=new _a;function ks(p){return encodeURIComponent(String(p))}function Wu(p){var x=1;p=p.split(":");const C=[];for(;x>0&&p.length;)C.push(p.shift()),x--;return p.length&&C.push(p.join(":")),C}function Ln(p,x,C,B){this.j=p,this.i=x,this.l=C,this.S=B||1,this.V=new Ut(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Vn}function Vn(){this.i=null,this.g="",this.h=!1}var Qt={},ui={};function is(p,x,C){p.M=1,p.A=wa(Jt(x)),p.u=C,p.R=!0,fo(p,null)}function fo(p,x){p.F=Date.now(),ns(p),p.B=Jt(p.A);var C=p.B,B=p.S;Array.isArray(B)||(B=[String(B)]),yo(C.i,"t",B),p.C=0,C=p.j.L,p.h=new Vn,p.g=uh(p.j,C?x:null,!p.u),p.P>0&&(p.O=new Ve(m(p.Y,p,p.g),p.P)),x=p.V,C=p.g,B=p.ba;var se="readystatechange";Array.isArray(se)||(se&&($i[0]=se.toString()),se=$i);for(let ce=0;ce<se.length;ce++){const be=Ae(C,se[ce],B||x.handleEvent,!1,x.h||x);if(!be)break;x.g[be.key]=be}x=p.J?V(p.J):{},p.u?(p.v||(p.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,x)):(p.v="GET",p.g.ea(p.B,p.v,null,x)),ji(),ho(p.i,p.v,p.B,p.l,p.S,p.u)}Ln.prototype.ba=function(p){p=p.target;const x=this.O;x&&Fn(p)==3?x.j():this.Y(p)},Ln.prototype.Y=function(p){try{if(p==this.g)e:{const Pe=Fn(this.g),Ft=this.g.ya(),rt=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||_i(this.g)))){this.K||Pe!=4||Ft==7||(Ft==8||rt<=0?ji(3):ji(2)),ss(this);var x=this.g.ca();this.X=x;var C=vm(this);if(this.o=x==200,wn(this.i,this.v,this.B,this.l,this.S,Pe,x),this.o){if(this.U&&!this.L){t:{if(this.g){var B,se=this.g;if((B=se.g?se.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(B)){var ce=B;break t}}ce=null}if(p=ce)ci(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,rs(this,p);else{this.o=!1,this.m=3,ct(12),rn(this),xn(this);break e}}if(this.R){p=!0;let Mt;for(;!this.K&&this.C<C.length;)if(Mt=Xu(this,C),Mt==ui){Pe==4&&(this.m=4,ct(14),p=!1),ci(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==Qt){this.m=4,ct(15),ci(this.i,this.l,C,"[Invalid Chunk]"),p=!1;break}else ci(this.i,this.l,Mt,null),rs(this,Mt);if(Qu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||C.length!=0||this.h.h||(this.m=1,ct(16),p=!1),this.o=this.o&&p,!p)ci(this.i,this.l,C,"[Invalid Chunked Response]"),rn(this),xn(this);else if(C.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),ac(be),be.P=!0,ct(11))}}else ci(this.i,this.l,C,null),rs(this,C);Pe==4&&rn(this),this.o&&!this.K&&(Pe==4?ah(this.j,this):(this.o=!1,ns(this)))}else Ds(this.g),x==400&&C.indexOf("Unknown SID")>0?(this.m=3,ct(12)):(this.m=0,ct(13)),rn(this),xn(this)}}}catch{}};function vm(p){if(!Qu(p))return p.g.la();const x=_i(p.g);if(x==="")return"";let C="";const B=x.length,se=Fn(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return rn(p),xn(p),"";p.h.i=new c.TextDecoder}for(let ce=0;ce<B;ce++)p.h.h=!0,C+=p.h.i.decode(x[ce],{stream:!(se&&ce==B-1)});return x.length=0,p.h.g+=C,p.C=0,p.h.g}function Qu(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function Xu(p,x){var C=p.C,B=x.indexOf(`
`,C);return B==-1?ui:(C=Number(x.substring(C,B)),isNaN(C)?Qt:(B+=1,B+C>x.length?ui:(x=x.slice(B,B+C),p.C=B+C,x)))}Ln.prototype.cancel=function(){this.K=!0,rn(this)};function ns(p){p.T=Date.now()+p.H,mo(p,p.H)}function mo(p,x){if(p.D!=null)throw Error("WatchDog timer not null");p.D=vi(m(p.aa,p),x)}function ss(p){p.D&&(c.clearTimeout(p.D),p.D=null)}Ln.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(va(this.i,this.B),this.M!=2&&(ji(),ct(17)),rn(this),this.m=2,xn(this)):mo(this,this.T-p)};function xn(p){p.j.I==0||p.K||ah(p.j,p)}function rn(p){ss(p);var x=p.O;x&&typeof x.dispose=="function"&&x.dispose(),p.O=null,es(p.V),p.g&&(x=p.g,p.g=null,x.abort(),x.dispose())}function rs(p,x){try{var C=p.j;if(C.I!=0&&(C.g==p||os(C.h,p))){if(!p.L&&os(C.h,p)&&C.I==3){try{var B=C.Ba.g.parse(x)}catch{B=null}if(Array.isArray(B)&&B.length==3){var se=B;if(se[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<p.F)xo(C),br(C);else break e;Ra(C),ct(18)}}else C.xa=se[1],0<C.xa-C.K&&se[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=vi(m(C.Va,C),6e3));as(C.h)<=1&&C.ta&&(C.ta=void 0)}else fs(C,11)}else if((p.L||C.g==p)&&xo(C),!k(x))for(se=C.Ba.g.parse(x),x=0;x<se.length;x++){let rt=se[x];const Mt=rt[0];if(!(Mt<=C.K))if(C.K=Mt,rt=rt[1],C.I==2)if(rt[0]=="c"){C.M=rt[1],C.ba=rt[2];const Tn=rt[3];Tn!=null&&(C.ka=Tn,C.j.info("VER="+C.ka));const ms=rt[4];ms!=null&&(C.za=ms,C.j.info("SVER="+C.za));const Hn=rt[5];Hn!=null&&typeof Hn=="number"&&Hn>0&&(B=1.5*Hn,C.O=B,C.j.info("backChannelRequestTimeoutMs_="+B)),B=C;const qn=p.g;if(qn){const Na=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Na){var ce=B.h;ce.g||Na.indexOf("spdy")==-1&&Na.indexOf("quic")==-1&&Na.indexOf("h2")==-1||(ce.j=ce.l,ce.g=new Set,ce.h&&(Yl(ce,ce.h),ce.h=null))}if(B.G){const Eo=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;Eo&&(B.wa=Eo,ut(B.J,B.G,Eo))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-p.F,C.j.info("Handshake RTT: "+C.T+"ms")),B=C;var be=p;if(B.na=ch(B,B.L?B.ba:null,B.W),be.L){Wl(B.h,be);var Pe=be,Ft=B.O;Ft&&(Pe.H=Ft),Pe.D&&(ss(Pe),ns(Pe)),B.g=be}else sh(B);C.i.length>0&&ds(C)}else rt[0]!="stop"&&rt[0]!="close"||fs(C,7);else C.I==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?fs(C,7):sc(C):rt[0]!="noop"&&C.l&&C.l.qa(rt),C.A=0)}}ji(4)}catch{}}var Xt=class{constructor(p,x){this.g=p,this.map=x}};function $l(p){this.l=p||10,c.PerformanceNavigationTiming?(p=c.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Kl(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function as(p){return p.h?1:p.g?p.g.size:0}function os(p,x){return p.h?p.h==x:p.g?p.g.has(x):!1}function Yl(p,x){p.g?p.g.add(x):p.h=x}function Wl(p,x){p.h&&p.h==x?p.h=null:p.g&&p.g.has(x)&&p.g.delete(x)}$l.prototype.cancel=function(){if(this.i=Ql(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Ql(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let x=p.i;for(const C of p.g.values())x=x.concat(C.G);return x}return w(p.i)}var Ju=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function po(p,x){if(p){p=p.split("&");for(let C=0;C<p.length;C++){const B=p[C].indexOf("=");let se,ce=null;B>=0?(se=p[C].substring(0,B),ce=p[C].substring(B+1)):se=p[C],x(se,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}function an(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;p instanceof an?(this.l=p.l,hi(this,p.j),this.o=p.o,this.g=p.g,dr(this,p.u),this.h=p.h,Xl(this,ih(p.i)),this.m=p.m):p&&(x=String(p).match(Ju))?(this.l=!1,hi(this,x[1]||"",!0),this.o=ls(x[2]||""),this.g=ls(x[3]||"",!0),dr(this,x[4]),this.h=ls(x[5]||"",!0),Xl(this,x[6]||"",!0),this.m=ls(x[7]||"")):(this.l=!1,this.i=new mr(null,this.l))}an.prototype.toString=function(){const p=[];var x=this.j;x&&p.push(xa(x,go,!0),":");var C=this.g;return(C||x=="file")&&(p.push("//"),(x=this.o)&&p.push(xa(x,go,!0),"@"),p.push(ks(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&p.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&p.push("/"),p.push(xa(C,C.charAt(0)=="/"?Jl:Zu,!0))),(C=this.i.toString())&&p.push("?",C),(C=this.m)&&p.push("#",xa(C,eh)),p.join("")},an.prototype.resolve=function(p){const x=Jt(this);let C=!!p.j;C?hi(x,p.j):C=!!p.o,C?x.o=p.o:C=!!p.g,C?x.g=p.g:C=p.u!=null;var B=p.h;if(C)dr(x,p.u);else if(C=!!p.h){if(B.charAt(0)!="/")if(this.g&&!this.h)B="/"+B;else{var se=x.h.lastIndexOf("/");se!=-1&&(B=x.h.slice(0,se+1)+B)}if(se=B,se==".."||se==".")B="";else if(se.indexOf("./")!=-1||se.indexOf("/.")!=-1){B=se.lastIndexOf("/",0)==0,se=se.split("/");const ce=[];for(let be=0;be<se.length;){const Pe=se[be++];Pe=="."?B&&be==se.length&&ce.push(""):Pe==".."?((ce.length>1||ce.length==1&&ce[0]!="")&&ce.pop(),B&&be==se.length&&ce.push("")):(ce.push(Pe),B=!0)}B=ce.join("/")}else B=se}return C?x.h=B:C=p.i.toString()!=="",C?Xl(x,ih(p.i)):C=!!p.m,C&&(x.m=p.m),x};function Jt(p){return new an(p)}function hi(p,x,C){p.j=C?ls(x,!0):x,p.j&&(p.j=p.j.replace(/:$/,""))}function dr(p,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);p.u=x}else p.u=null}function Xl(p,x,C){x instanceof mr?(p.i=x,vo(p.i,p.l)):(C||(x=xa(x,fr)),p.i=new mr(x,p.l))}function ut(p,x,C){p.i.set(x,C)}function wa(p){return ut(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function ls(p,x){return p?x?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function xa(p,x,C){return typeof p=="string"?(p=encodeURI(p).replace(x,Ki),C&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Ki(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var go=/[#\/\?@]/g,Zu=/[#\?:]/g,Jl=/[#\?]/g,fr=/[#\?@]/g,eh=/#/g;function mr(p,x){this.h=this.g=null,this.i=p||null,this.j=!!x}function Yi(p){p.g||(p.g=new Map,p.h=0,p.i&&po(p.i,function(x,C){p.add(decodeURIComponent(x.replace(/\+/g," ")),C)}))}n=mr.prototype,n.add=function(p,x){Yi(this),this.i=null,p=pr(this,p);let C=this.g.get(p);return C||this.g.set(p,C=[]),C.push(x),this.h+=1,this};function th(p,x){Yi(p),x=pr(p,x),p.g.has(x)&&(p.i=null,p.h-=p.g.get(x).length,p.g.delete(x))}function Zl(p,x){return Yi(p),x=pr(p,x),p.g.has(x)}n.forEach=function(p,x){Yi(this),this.g.forEach(function(C,B){C.forEach(function(se){p.call(x,se,B,this)},this)},this)};function ec(p,x){Yi(p);let C=[];if(typeof x=="string")Zl(p,x)&&(C=C.concat(p.g.get(pr(p,x))));else for(p=Array.from(p.g.values()),x=0;x<p.length;x++)C=C.concat(p[x]);return C}n.set=function(p,x){return Yi(this),this.i=null,p=pr(this,p),Zl(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[x]),this.h+=1,this},n.get=function(p,x){return p?(p=ec(this,p),p.length>0?String(p[0]):x):x};function yo(p,x,C){th(p,x),C.length>0&&(p.i=null,p.g.set(pr(p,x),w(C)),p.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],x=Array.from(this.g.keys());for(let B=0;B<x.length;B++){var C=x[B];const se=ks(C);C=ec(this,C);for(let ce=0;ce<C.length;ce++){let be=se;C[ce]!==""&&(be+="="+ks(C[ce])),p.push(be)}}return this.i=p.join("&")};function ih(p){const x=new mr;return x.i=p.i,p.g&&(x.g=new Map(p.g),x.h=p.h),x}function pr(p,x){return x=String(x),p.j&&(x=x.toLowerCase()),x}function vo(p,x){x&&!p.j&&(Yi(p),p.i=null,p.g.forEach(function(C,B){const se=B.toLowerCase();B!=se&&(th(this,B),yo(this,se,C))},p)),p.j=x}function Un(p,x){const C=new bi;if(c.Image){const B=new Image;B.onload=g(En,C,"TestLoadImage: loaded",!0,x,B),B.onerror=g(En,C,"TestLoadImage: error",!1,x,B),B.onabort=g(En,C,"TestLoadImage: abort",!1,x,B),B.ontimeout=g(En,C,"TestLoadImage: timeout",!1,x,B),c.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=p}else x(!1)}function tc(p,x){const C=new bi,B=new AbortController,se=setTimeout(()=>{B.abort(),En(C,"TestPingServer: timeout",!1,x)},1e4);fetch(p,{signal:B.signal}).then(ce=>{clearTimeout(se),ce.ok?En(C,"TestPingServer: ok",!0,x):En(C,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(se),En(C,"TestPingServer: error",!1,x)})}function En(p,x,C,B,se){try{se&&(se.onload=null,se.onerror=null,se.onabort=null,se.ontimeout=null),B(C)}catch{}}function gr(){this.g=new Yt}function cs(p){this.i=p.Sb||null,this.h=p.ab||!1}v(cs,ki),cs.prototype.g=function(){return new Ea(this.i,this.h)};function Ea(p,x){Be.call(this),this.H=p,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Ea,Be),n=Ea.prototype,n.open=function(p,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=x,this.readyState=1,Bn(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(x.body=p),(this.H||c).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,yr(this)),this.readyState=0},n.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Bn(this)),this.g&&(this.readyState=3,Bn(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;bo(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function bo(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}n.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var x=p.value?p.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!p.done}))&&(this.response=this.responseText+=x)}p.done?yr(this):Bn(this),this.readyState==3&&bo(this)}},n.Oa=function(p){this.g&&(this.response=this.responseText=p,yr(this))},n.Na=function(p){this.g&&(this.response=p,yr(this))},n.ga=function(){this.g&&yr(this)};function yr(p){p.readyState=4,p.l=null,p.j=null,p.B=null,Bn(p)}n.setRequestHeader=function(p,x){this.A.append(p,x)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],x=this.h.entries();for(var C=x.next();!C.done;)C=C.value,p.push(C[0]+": "+C[1]),C=x.next();return p.join(`\r
`)};function Bn(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Ea.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Sn(p){let x="";return J(p,function(C,B){x+=B,x+=":",x+=C,x+=`\r
`}),x}function Sa(p,x,C){e:{for(B in C){var B=!1;break e}B=!0}B||(C=Sn(C),typeof p=="string"?C!=null&&ks(C):ut(p,x,C))}function pt(p){Be.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(pt,Be);var us=/^https?$/i,ic=["POST","PUT"];n=pt.prototype,n.Fa=function(p){this.H=p},n.ea=function(p,x,C,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);x=x?x.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gl.g(),this.g.onreadystatechange=_(m(this.Ca,this));try{this.B=!0,this.g.open(x,String(p),!0),this.B=!1}catch(ce){Ta(this,ce);return}if(p=C||"",C=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var se in B)C.set(se,B[se]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const ce of B.keys())C.set(ce,B.get(ce));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(C.keys()).find(ce=>ce.toLowerCase()=="content-type"),se=c.FormData&&p instanceof c.FormData,!(Array.prototype.indexOf.call(ic,x,void 0)>=0)||B||se||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ce,be]of C)this.g.setRequestHeader(ce,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(ce){Ta(this,ce)}};function Ta(p,x){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=x,p.o=5,nc(p),js(p)}function nc(p){p.A||(p.A=!0,Qe(p,"complete"),Qe(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Qe(this,"complete"),Qe(this,"abort"),js(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),js(this,!0)),pt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Aa(this):this.Xa())},n.Xa=function(){Aa(this)};function Aa(p){if(p.h&&typeof o<"u"){if(p.v&&Fn(p)==4)setTimeout(p.Ca.bind(p),0);else if(Qe(p,"readystatechange"),Fn(p)==4){p.h=!1;try{const ce=p.ca();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var C;if(!(C=x)){var B;if(B=ce===0){let be=String(p.D).match(Ju)[1]||null;!be&&c.self&&c.self.location&&(be=c.self.location.protocol.slice(0,-1)),B=!us.test(be?be.toLowerCase():"")}C=B}if(C)Qe(p,"complete"),Qe(p,"success");else{p.o=6;try{var se=Fn(p)>2?p.g.statusText:""}catch{se=""}p.l=se+" ["+p.ca()+"]",nc(p)}}finally{js(p)}}}}function js(p,x){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const C=p.g;p.g=null,x||Qe(p,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Fn(p){return p.g?p.g.readyState:0}n.ca=function(){try{return Fn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(p){if(this.g){var x=this.g.responseText;return p&&x.indexOf(p)==0&&(x=x.substring(p.length)),Pn(x)}};function _i(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Ds(p){const x={};p=(p.g&&Fn(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<p.length;B++){if(k(p[B]))continue;var C=Wu(p[B]);const se=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const ce=x[se]||[];x[se]=ce,ce.push(C)}re(x,function(B){return B.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function hs(p,x,C){return C&&C.internalChannelParams&&C.internalChannelParams[p]||x}function vr(p){this.za=0,this.i=[],this.j=new bi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=hs("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=hs("baseRetryDelayMs",5e3,p),this.Za=hs("retryDelaySeedMs",1e4,p),this.Ta=hs("forwardChannelMaxRetries",2,p),this.va=hs("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new $l(p&&p.concurrentRequestLimit),this.Ba=new gr,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=vr.prototype,n.ka=8,n.I=1,n.connect=function(p,x,C,B){ct(0),this.W=p,this.H=x||{},C&&B!==void 0&&(this.H.OSID=C,this.H.OAID=B),this.F=this.X,this.J=ch(this,null,this.W),ds(this)};function sc(p){if(_o(p),p.I==3){var x=p.V++,C=Jt(p.J);if(ut(C,"SID",p.M),ut(C,"RID",x),ut(C,"TYPE","terminate"),Ca(p,C),x=new Ln(p,p.j,x),x.M=2,x.A=wa(Jt(C)),C=!1,c.navigator&&c.navigator.sendBeacon)try{C=c.navigator.sendBeacon(x.A.toString(),"")}catch{}!C&&c.Image&&(new Image().src=x.A,C=!0),C||(x.g=uh(x.j,null),x.g.ea(x.A)),x.F=Date.now(),ns(x)}lh(p)}function br(p){p.g&&(ac(p),p.g.cancel(),p.g=null)}function _o(p){br(p),p.v&&(c.clearTimeout(p.v),p.v=null),xo(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&c.clearTimeout(p.m),p.m=null)}function ds(p){if(!Kl(p.h)&&!p.m){p.m=!0;var x=p.Ea;X||E(),U||(X(),U=!0),N.add(x,p),p.D=0}}function wo(p,x){return as(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=x.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=vi(m(p.Ea,p,x),oh(p,p.D)),p.D++,!0)}n.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const se=new Ln(this,this.j,p);let ce=this.o;if(this.U&&(ce?(ce=V(ce),ee(ce,this.U)):ce=this.U),this.u!==null||this.R||(se.J=ce,ce=null),this.S)e:{for(var x=0,C=0;C<this.i.length;C++){t:{var B=this.i[C];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(x+=B,x>4096){x=C;break e}if(x===4096||C===this.i.length-1){x=C+1;break e}}x=1e3}else x=1e3;x=nh(this,se,x),C=Jt(this.J),ut(C,"RID",p),ut(C,"CVER",22),this.G&&ut(C,"X-HTTP-Session-Id",this.G),Ca(this,C),ce&&(this.R?x="headers="+ks(Sn(ce))+"&"+x:this.u&&Sa(C,this.u,ce)),Yl(this.h,se),this.Ra&&ut(C,"TYPE","init"),this.S?(ut(C,"$req",x),ut(C,"SID","null"),se.U=!0,is(se,C,null)):is(se,C,x),this.I=2}}else this.I==3&&(p?rc(this,p):this.i.length==0||Kl(this.h)||rc(this))};function rc(p,x){var C;x?C=x.l:C=p.V++;const B=Jt(p.J);ut(B,"SID",p.M),ut(B,"RID",C),ut(B,"AID",p.K),Ca(p,B),p.u&&p.o&&Sa(B,p.u,p.o),C=new Ln(p,p.j,C,p.D+1),p.u===null&&(C.J=p.o),x&&(p.i=x.G.concat(p.i)),x=nh(p,C,1e3),C.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Yl(p.h,C),is(C,B,x)}function Ca(p,x){p.H&&J(p.H,function(C,B){ut(x,B,C)}),p.l&&J({},function(C,B){ut(x,B,C)})}function nh(p,x,C){C=Math.min(p.i.length,C);const B=p.l?m(p.l.Ka,p.l,p):null;e:{var se=p.i;let Pe=-1;for(;;){const Ft=["count="+C];Pe==-1?C>0?(Pe=se[0].g,Ft.push("ofs="+Pe)):Pe=0:Ft.push("ofs="+Pe);let rt=!0;for(let Mt=0;Mt<C;Mt++){var ce=se[Mt].g;const Tn=se[Mt].map;if(ce-=Pe,ce<0)Pe=Math.max(0,se[Mt].g-100),rt=!1;else try{ce="req"+ce+"_"||"";try{var be=Tn instanceof Map?Tn:Object.entries(Tn);for(const[ms,Hn]of be){let qn=Hn;h(Hn)&&(qn=Tt(Hn)),Ft.push(ce+ms+"="+encodeURIComponent(qn))}}catch(ms){throw Ft.push(ce+"type="+encodeURIComponent("_badmap")),ms}}catch{B&&B(Tn)}}if(rt){be=Ft.join("&");break e}}be=void 0}return p=p.i.splice(0,C),x.G=p,be}function sh(p){if(!p.g&&!p.v){p.Y=1;var x=p.Da;X||E(),U||(X(),U=!0),N.add(x,p),p.A=0}}function Ra(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=vi(m(p.Da,p),oh(p,p.A)),p.A++,!0)}n.Da=function(){if(this.v=null,rh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=vi(m(this.Wa,this),p)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ct(10),br(this),rh(this))};function ac(p){p.B!=null&&(c.clearTimeout(p.B),p.B=null)}function rh(p){p.g=new Ln(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var x=Jt(p.na);ut(x,"RID","rpc"),ut(x,"SID",p.M),ut(x,"AID",p.K),ut(x,"CI",p.F?"0":"1"),!p.F&&p.ia&&ut(x,"TO",p.ia),ut(x,"TYPE","xmlhttp"),Ca(p,x),p.u&&p.o&&Sa(x,p.u,p.o),p.O&&(p.g.H=p.O);var C=p.g;p=p.ba,C.M=1,C.A=wa(Jt(x)),C.u=null,C.R=!0,fo(C,p)}n.Va=function(){this.C!=null&&(this.C=null,br(this),Ra(this),ct(19))};function xo(p){p.C!=null&&(c.clearTimeout(p.C),p.C=null)}function ah(p,x){var C=null;if(p.g==x){xo(p),ac(p),p.g=null;var B=2}else if(os(p.h,x))C=x.G,Wl(p.h,x),B=1;else return;if(p.I!=0){if(x.o)if(B==1){C=x.u?x.u.length:0,x=Date.now()-x.F;var se=p.D;B=ts(),Qe(B,new ai(B,C)),ds(p)}else sh(p);else if(se=x.m,se==3||se==0&&x.X>0||!(B==1&&wo(p,x)||B==2&&Ra(p)))switch(C&&C.length>0&&(x=p.h,x.i=x.i.concat(C)),se){case 1:fs(p,5);break;case 4:fs(p,10);break;case 3:fs(p,6);break;default:fs(p,2)}}}function oh(p,x){let C=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(C*=2),C*x}function fs(p,x){if(p.j.info("Error code "+x),x==2){var C=m(p.bb,p),B=p.Ua;const se=!B;B=new an(B||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||hi(B,"https"),wa(B),se?Un(B.toString(),C):tc(B.toString(),C)}else ct(2);p.I=0,p.l&&p.l.pa(x),lh(p),_o(p)}n.bb=function(p){p?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function lh(p){if(p.I=0,p.ja=[],p.l){const x=Ql(p.h);(x.length!=0||p.i.length!=0)&&(S(p.ja,x),S(p.ja,p.i),p.h.i.length=0,w(p.i),p.i.length=0),p.l.oa()}}function ch(p,x,C){var B=C instanceof an?Jt(C):new an(C);if(B.g!="")x&&(B.g=x+"."+B.g),dr(B,B.u);else{var se=c.location;B=se.protocol,x=x?x+"."+se.hostname:se.hostname,se=+se.port;const ce=new an(null);B&&hi(ce,B),x&&(ce.g=x),se&&dr(ce,se),C&&(ce.h=C),B=ce}return C=p.G,x=p.wa,C&&x&&ut(B,C,x),ut(B,"VER",p.ka),Ca(p,B),B}function uh(p,x,C){if(x&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=p.Aa&&!p.ma?new pt(new cs({ab:C})):new pt(p.ma),x.Fa(p.L),x}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function hh(){}n=hh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function _r(){}_r.prototype.g=function(p,x){return new Ui(p,x)};function Ui(p,x){Be.call(this),this.g=new vr(x),this.l=p,this.h=x&&x.messageUrlParams||null,p=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(p?p["X-WebChannel-Content-Type"]=x.messageContentType:p={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(p?p["X-WebChannel-Client-Profile"]=x.sa:p={"X-WebChannel-Client-Profile":x.sa}),this.g.U=p,(p=x&&x.Qb)&&!k(p)&&(this.g.u=p),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!k(x)&&(this.g.G=x,p=this.h,p!==null&&x in p&&(p=this.h,x in p&&delete p[x])),this.j=new Os(this)}v(Ui,Be),Ui.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ui.prototype.close=function(){sc(this.g)},Ui.prototype.o=function(p){var x=this.g;if(typeof p=="string"){var C={};C.__data__=p,p=C}else this.v&&(C={},C.__data__=Tt(p),p=C);x.i.push(new Xt(x.Ya++,p)),x.I==3&&ds(x)},Ui.prototype.N=function(){this.g.l=null,delete this.j,sc(this.g),delete this.g,Ui.Z.N.call(this)};function dh(p){mt.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var x=p.__sm__;if(x){e:{for(const C in x){p=C;break e}p=void 0}(this.i=p)&&(p=this.i,x=x!==null&&p in x?x[p]:void 0),this.data=x}else this.data=p}v(dh,mt);function fh(){Wt.call(this),this.status=1}v(fh,Wt);function Os(p){this.g=p}v(Os,hh),Os.prototype.ra=function(){Qe(this.g,"a")},Os.prototype.qa=function(p){Qe(this.g,new dh(p))},Os.prototype.pa=function(p){Qe(this.g,new fh)},Os.prototype.oa=function(){Qe(this.g,"b")},_r.prototype.createWebChannel=_r.prototype.g,Ui.prototype.send=Ui.prototype.o,Ui.prototype.open=Ui.prototype.m,Ui.prototype.close=Ui.prototype.close,bE=function(){return new _r},vE=function(){return ts()},yE=At,r0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ba.NO_ERROR=0,ba.TIMEOUT=8,ba.HTTP_ERROR=6,Od=ba,ql.COMPLETE="complete",gE=ql,yi.EventType=Bt,Bt.OPEN="a",Bt.CLOSE="b",Bt.ERROR="c",Bt.MESSAGE="d",Be.prototype.listen=Be.prototype.J,Qc=yi,pt.prototype.listenOnce=pt.prototype.K,pt.prototype.getLastError=pt.prototype.Ha,pt.prototype.getLastErrorCode=pt.prototype.ya,pt.prototype.getStatus=pt.prototype.ca,pt.prototype.getResponseJson=pt.prototype.La,pt.prototype.getResponseText=pt.prototype.la,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Fa,pE=pt}).apply(typeof vd<"u"?vd:typeof self<"u"?self:typeof window<"u"?window:{});const Z_="@firebase/firestore",ew="4.9.3";class zi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zi.UNAUTHENTICATED=new zi(null),zi.GOOGLE_CREDENTIALS=new zi("google-credentials-uid"),zi.FIRST_PARTY=new zi("first-party-uid"),zi.MOCK_USER=new zi("mock-user");let Ol="12.7.0";const Za=new G0("@firebase/firestore");function il(){return Za.logLevel}function xe(n,...e){if(Za.logLevel<=$e.DEBUG){const t=e.map(Y0);Za.debug(`Firestore (${Ol}): ${n}`,...t)}}function rr(n,...e){if(Za.logLevel<=$e.ERROR){const t=e.map(Y0);Za.error(`Firestore (${Ol}): ${n}`,...t)}}function bl(n,...e){if(Za.logLevel<=$e.WARN){const t=e.map(Y0);Za.warn(`Firestore (${Ol}): ${n}`,...t)}}function Y0(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Ie(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,_E(n,i,t)}function _E(n,e,t){let i=`FIRESTORE (${Ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw rr(i),new Error(i)}function et(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||_E(e,r,i)}function De(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends cr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class wE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class D4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(zi.UNAUTHENTICATED)))}shutdown(){}}class O4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class z4{constructor(e){this.t=e,this.currentUser=zi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){et(this.o===void 0,42304);let i=this.i;const r=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let o=new xs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new xs,e.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const f=o;e.enqueueRetryable((async()=>{await f.promise,await r(this.currentUser)}))},h=f=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new xs)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(et(typeof i.accessToken=="string",31837,{l:i}),new wE(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string",2055,{h:e}),new zi(e)}}class P4{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=zi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class L4{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new P4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(zi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class tw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class V4{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){et(this.o===void 0,3512);const i=o=>{o.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,xe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const r=o=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new tw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(et(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new tw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function U4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class W0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=U4(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+=e.charAt(r[o]%62))}return i}}function Ke(n,e){return n<e?-1:n>e?1:0}function a0(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),o=e.charAt(i);if(r!==o)return Ag(r)===Ag(o)?Ke(r,o):Ag(r)?1:-1}return Ke(n.length,e.length)}const B4=55296,F4=57343;function Ag(n){const e=n.charCodeAt(0);return e>=B4&&e<=F4}function _l(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}const iw="__name__";class _s{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ie(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return _s.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _s?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const o=_s.compareSegments(e.get(r),t.get(r));if(o!==0)return o}return Ke(e.length,t.length)}static compareSegments(e,t){const i=_s.isNumericId(e),r=_s.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?_s.extractNumericId(e).compare(_s.extractNumericId(t)):a0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ta.fromString(e.substring(4,e.length-2))}}class bt extends _s{construct(e,t,i){return new bt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new _e(de.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new bt(t)}static emptyPath(){return new bt([])}}const H4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ni extends _s{construct(e,t,i){return new Ni(e,t,i)}static isValidIdentifier(e){return H4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ni.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===iw}static keyField(){return new Ni([iw])}static fromServerFormat(e){const t=[];let i="",r=0;const o=()=>{if(i.length===0)throw new _e(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;r<e.length;){const h=e[r];if(h==="\\"){if(r+1===e.length)throw new _e(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[r+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new _e(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,r+=2}else h==="`"?(c=!c,r++):h!=="."||c?(i+=h,r++):(o(),r++)}if(o(),c)throw new _e(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ni(t)}static emptyPath(){return new Ni([])}}class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(bt.fromString(e))}static fromName(e){return new Ce(bt.fromString(e).popFirst(5))}static empty(){return new Ce(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return bt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new bt(e.slice()))}}function xE(n,e,t){if(!t)throw new _e(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function q4(n,e,t,i){if(e===!0&&i===!0)throw new _e(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nw(n){if(!Ce.isDocumentKey(n))throw new _e(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sw(n){if(Ce.isDocumentKey(n))throw new _e(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function EE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Df(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Df(n);throw new _e(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function G4(n,e){if(e<=0)throw new _e(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function ri(n,e){const t={typeString:n};return e&&(t.value=e),t}function ku(n,e){if(!EE(n))throw new _e(de.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(r&&typeof c!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${i}' field to equal '${o.value}'`;break}}if(t)throw new _e(de.INVALID_ARGUMENT,t);return!0}const rw=-62135596800,aw=1e6;class Et{static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*aw);return new Et(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<rw)throw new _e(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/aw}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ku(e,Et._jsonSchema))return new Et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Et._jsonSchemaVersion="firestore/timestamp/1.0",Et._jsonSchema={type:ri("string",Et._jsonSchemaVersion),seconds:ri("number"),nanoseconds:ri("number")};class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new Et(0,0))}static max(){return new ke(new Et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const mu=-1;function $4(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=ke.fromTimestamp(i===1e9?new Et(t+1,0):new Et(t,i));return new oa(r,Ce.empty(),e)}function K4(n){return new oa(n.readTime,n.key,mu)}class oa{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new oa(ke.min(),Ce.empty(),mu)}static max(){return new oa(ke.max(),Ce.empty(),mu)}}function Y4(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(n.documentKey,e.documentKey),t!==0?t:Ke(n.largestBatchId,e.largestBatchId))}const W4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Q4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function zl(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==W4)throw n;xe("LocalStore","Unexpectedly lost primary lease")}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge(((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ge.reject(t)}static resolve(e){return new ge(((t,i)=>{t(e)}))}static reject(e){return new ge(((t,i)=>{i(e)}))}static waitFor(e){return new ge(((t,i)=>{let r=0,o=0,c=!1;e.forEach((h=>{++r,h.next((()=>{++o,c&&o===r&&t()}),(f=>i(f)))})),c=!0,o===r&&t()}))}static or(e){let t=ge.resolve(!1);for(const i of e)t=t.next((r=>r?ge.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,o)=>{i.push(t.call(this,r,o))})),this.waitFor(i)}static mapArray(e,t){return new ge(((i,r)=>{const o=e.length,c=new Array(o);let h=0;for(let f=0;f<o;f++){const m=f;t(e[m]).next((g=>{c[m]=g,++h,h===o&&i(c)}),(g=>r(g)))}}))}static doWhile(e,t){return new ge(((i,r)=>{const o=()=>{e()===!0?t().next((()=>{o()}),r):i()};o()}))}}function X4(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Pl(n){return n.name==="IndexedDbTransactionError"}class Of{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Of.ce=-1;const Q0=-1;function ju(n){return n==null}function ef(n){return n===0&&1/n==-1/0}function J4(n){return typeof n=="number"&&Number.isInteger(n)&&!ef(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const SE="";function Z4(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ow(e)),e=eI(n.get(t),e);return ow(e)}function eI(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":t+="";break;case SE:t+="";break;default:t+=o}}return t}function ow(n){return n+SE+""}function lw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function TE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class zt{constructor(e,t){this.comparator=e,this.root=t||Ci.EMPTY}insert(e,t){return new zt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ci.BLACK,null,null))}remove(e){return new zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ci.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bd(this.root,e,this.comparator,!1)}getReverseIterator(){return new bd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bd(this.root,e,this.comparator,!0)}}class bd{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ci{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??Ci.RED,this.left=r??Ci.EMPTY,this.right=o??Ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new Ci(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Ci.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}Ci.EMPTY=null,Ci.RED=!0,Ci.BLACK=!1;Ci.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,i,r,o){return this}insert(e,t,i){return new Ci(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class li{constructor(e){this.comparator=e,this.data=new zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cw(this.data.getIterator())}getIteratorFrom(e){return new cw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof li)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new li(this.comparator);return t.data=e,t}}class cw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class gn{constructor(e){this.fields=e,e.sort(Ni.comparator)}static empty(){return new gn([])}unionWith(e){let t=new li(Ni.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _l(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class AE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ii{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new AE("Invalid base64 string: "+o):o}})(e);return new Ii(t)}static fromUint8Array(e){const t=(function(r){let o="";for(let c=0;c<r.length;++c)o+=String.fromCharCode(r[c]);return o})(e);return new Ii(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ii.EMPTY_BYTE_STRING=new Ii("");const tI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function la(n){if(et(!!n,39018),typeof n=="string"){let e=0;const t=tI.exec(n);if(et(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Gt(n.seconds),nanos:Gt(n.nanos)}}function Gt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ca(n){return typeof n=="string"?Ii.fromBase64String(n):Ii.fromUint8Array(n)}const CE="server_timestamp",RE="__type__",NE="__previous_value__",IE="__local_write_time__";function X0(n){return(n?.mapValue?.fields||{})[RE]?.stringValue===CE}function zf(n){const e=n.mapValue.fields[NE];return X0(e)?zf(e):e}function pu(n){const e=la(n.mapValue.fields[IE].timestampValue);return new Et(e.seconds,e.nanos)}class iI{constructor(e,t,i,r,o,c,h,f,m,g){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=g}}const tf="(default)";class gu{constructor(e,t){this.projectId=e,this.database=t||tf}static empty(){return new gu("","")}get isDefaultDatabase(){return this.database===tf}isEqual(e){return e instanceof gu&&e.projectId===this.projectId&&e.database===this.database}}const ME="__type__",nI="__max__",_d={mapValue:{}},kE="__vector__",nf="value";function ua(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?X0(n)?4:rI(n)?9007199254740991:sI(n)?10:11:Ie(28295,{value:n})}function Rs(n,e){if(n===e)return!0;const t=ua(n);if(t!==ua(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return pu(n).isEqual(pu(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const c=la(r.timestampValue),h=la(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,o){return ca(r.bytesValue).isEqual(ca(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,o){return Gt(r.geoPointValue.latitude)===Gt(o.geoPointValue.latitude)&&Gt(r.geoPointValue.longitude)===Gt(o.geoPointValue.longitude)})(n,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return Gt(r.integerValue)===Gt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const c=Gt(r.doubleValue),h=Gt(o.doubleValue);return c===h?ef(c)===ef(h):isNaN(c)&&isNaN(h)}return!1})(n,e);case 9:return _l(n.arrayValue.values||[],e.arrayValue.values||[],Rs);case 10:case 11:return(function(r,o){const c=r.mapValue.fields||{},h=o.mapValue.fields||{};if(lw(c)!==lw(h))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(h[f]===void 0||!Rs(c[f],h[f])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function yu(n,e){return(n.values||[]).find((t=>Rs(t,e)))!==void 0}function wl(n,e){if(n===e)return 0;const t=ua(n),i=ua(e);if(t!==i)return Ke(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ke(n.booleanValue,e.booleanValue);case 2:return(function(o,c){const h=Gt(o.integerValue||o.doubleValue),f=Gt(c.integerValue||c.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(n,e);case 3:return uw(n.timestampValue,e.timestampValue);case 4:return uw(pu(n),pu(e));case 5:return a0(n.stringValue,e.stringValue);case 6:return(function(o,c){const h=ca(o),f=ca(c);return h.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(o,c){const h=o.split("/"),f=c.split("/");for(let m=0;m<h.length&&m<f.length;m++){const g=Ke(h[m],f[m]);if(g!==0)return g}return Ke(h.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,c){const h=Ke(Gt(o.latitude),Gt(c.latitude));return h!==0?h:Ke(Gt(o.longitude),Gt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return hw(n.arrayValue,e.arrayValue);case 10:return(function(o,c){const h=o.fields||{},f=c.fields||{},m=h[nf]?.arrayValue,g=f[nf]?.arrayValue,v=Ke(m?.values?.length||0,g?.values?.length||0);return v!==0?v:hw(m,g)})(n.mapValue,e.mapValue);case 11:return(function(o,c){if(o===_d.mapValue&&c===_d.mapValue)return 0;if(o===_d.mapValue)return 1;if(c===_d.mapValue)return-1;const h=o.fields||{},f=Object.keys(h),m=c.fields||{},g=Object.keys(m);f.sort(),g.sort();for(let v=0;v<f.length&&v<g.length;++v){const _=a0(f[v],g[v]);if(_!==0)return _;const w=wl(h[f[v]],m[g[v]]);if(w!==0)return w}return Ke(f.length,g.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function uw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ke(n,e);const t=la(n),i=la(e),r=Ke(t.seconds,i.seconds);return r!==0?r:Ke(t.nanos,i.nanos)}function hw(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const o=wl(t[r],i[r]);if(o)return o}return Ke(t.length,i.length)}function xl(n){return o0(n)}function o0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=la(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ca(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ce.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const o of t.values||[])r?r=!1:i+=",",i+=o0(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",o=!0;for(const c of i)o?o=!1:r+=",",r+=`${c}:${o0(t.fields[c])}`;return r+"}"})(n.mapValue):Ie(61005,{value:n})}function zd(n){switch(ua(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zf(n);return e?16+zd(e):16;case 5:return 2*n.stringValue.length;case 6:return ca(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,o)=>r+zd(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return fa(i.fields,((o,c)=>{r+=o.length+zd(c)})),r})(n.mapValue);default:throw Ie(13486,{value:n})}}function dw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function l0(n){return!!n&&"integerValue"in n}function J0(n){return!!n&&"arrayValue"in n}function fw(n){return!!n&&"nullValue"in n}function mw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Pd(n){return!!n&&"mapValue"in n}function sI(n){return(n?.mapValue?.fields||{})[ME]?.stringValue===kE}function tu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return fa(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=tu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tu(n.arrayValue.values[t]);return e}return{...n}}function rI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===nI}class Hi{constructor(e){this.value=e}static empty(){return new Hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Pd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tu(t)}setAll(e){let t=Ni.emptyPath(),i={},r=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,i,r),i={},r=[],t=h.popLast()}c?i[h.lastSegment()]=tu(c):r.push(h.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){const t=this.field(e.popLast());Pd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Rs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Pd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){fa(t,((r,o)=>e[r]=o));for(const r of i)delete e[r]}clone(){return new Hi(tu(this.value))}}function jE(n){const e=[];return fa(n.fields,((t,i)=>{const r=new Ni([t]);if(Pd(i)){const o=jE(i.mapValue).fields;if(o.length===0)e.push(r);else for(const c of o)e.push(r.child(c))}else e.push(r)})),new gn(e)}class pi{constructor(e,t,i,r,o,c,h){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=o,this.data=c,this.documentState=h}static newInvalidDocument(e){return new pi(e,0,ke.min(),ke.min(),ke.min(),Hi.empty(),0)}static newFoundDocument(e,t,i,r){return new pi(e,1,t,ke.min(),i,r,0)}static newNoDocument(e,t){return new pi(e,2,t,ke.min(),ke.min(),Hi.empty(),0)}static newUnknownDocument(e,t){return new pi(e,3,t,ke.min(),ke.min(),Hi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class sf{constructor(e,t){this.position=e,this.inclusive=t}}function pw(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const o=e[r],c=n.position[r];if(o.field.isKeyField()?i=Ce.comparator(Ce.fromName(c.referenceValue),t.key):i=wl(c,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function gw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Rs(n.position[t],e.position[t]))return!1;return!0}class vu{constructor(e,t="asc"){this.field=e,this.dir=t}}function aI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class DE{}class si extends DE{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new lI(e,t,i):t==="array-contains"?new hI(e,i):t==="in"?new dI(e,i):t==="not-in"?new fI(e,i):t==="array-contains-any"?new mI(e,i):new si(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new cI(e,i):new uI(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(wl(t,this.value)):t!==null&&ua(this.value)===ua(t)&&this.matchesComparison(wl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xn extends DE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Xn(e,t)}matches(e){return OE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function OE(n){return n.op==="and"}function zE(n){return oI(n)&&OE(n)}function oI(n){for(const e of n.filters)if(e instanceof Xn)return!1;return!0}function c0(n){if(n instanceof si)return n.field.canonicalString()+n.op.toString()+xl(n.value);if(zE(n))return n.filters.map((e=>c0(e))).join(",");{const e=n.filters.map((t=>c0(t))).join(",");return`${n.op}(${e})`}}function PE(n,e){return n instanceof si?(function(i,r){return r instanceof si&&i.op===r.op&&i.field.isEqual(r.field)&&Rs(i.value,r.value)})(n,e):n instanceof Xn?(function(i,r){return r instanceof Xn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((o,c,h)=>o&&PE(c,r.filters[h])),!0):!1})(n,e):void Ie(19439)}function LE(n){return n instanceof si?(function(t){return`${t.field.canonicalString()} ${t.op} ${xl(t.value)}`})(n):n instanceof Xn?(function(t){return t.op.toString()+" {"+t.getFilters().map(LE).join(" ,")+"}"})(n):"Filter"}class lI extends si{constructor(e,t,i){super(e,t,i),this.key=Ce.fromName(i.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class cI extends si{constructor(e,t){super(e,"in",t),this.keys=VE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class uI extends si{constructor(e,t){super(e,"not-in",t),this.keys=VE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function VE(n,e){return(e.arrayValue?.values||[]).map((t=>Ce.fromName(t.referenceValue)))}class hI extends si{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return J0(t)&&yu(t.arrayValue,this.value)}}class dI extends si{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&yu(this.value.arrayValue,t)}}class fI extends si{constructor(e,t){super(e,"not-in",t)}matches(e){if(yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!yu(this.value.arrayValue,t)}}class mI extends si{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!J0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>yu(this.value.arrayValue,i)))}}class pI{constructor(e,t=null,i=[],r=[],o=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=c,this.endAt=h,this.Te=null}}function yw(n,e=null,t=[],i=[],r=null,o=null,c=null){return new pI(n,e,t,i,r,o,c)}function Z0(n){const e=De(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>c0(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),ju(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>xl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>xl(i))).join(",")),e.Te=t}return e.Te}function ey(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!aI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!PE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!gw(n.startAt,e.startAt)&&gw(n.endAt,e.endAt)}function u0(n){return Ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Ll{constructor(e,t=null,i=[],r=[],o=null,c="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function gI(n,e,t,i,r,o,c,h){return new Ll(n,e,t,i,r,o,c,h)}function Pf(n){return new Ll(n)}function vw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function UE(n){return n.collectionGroup!==null}function iu(n){const e=De(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new li(Ni.comparator);return c.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new vu(o,i))})),t.has(Ni.keyField().canonicalString())||e.Ie.push(new vu(Ni.keyField(),i))}return e.Ie}function Es(n){const e=De(n);return e.Ee||(e.Ee=yI(e,iu(n))),e.Ee}function yI(n,e){if(n.limitType==="F")return yw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new vu(r.field,o)}));const t=n.endAt?new sf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new sf(n.startAt.position,n.startAt.inclusive):null;return yw(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function h0(n,e){const t=n.filters.concat([e]);return new Ll(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function rf(n,e,t){return new Ll(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lf(n,e){return ey(Es(n),Es(e))&&n.limitType===e.limitType}function BE(n){return`${Z0(Es(n))}|lt:${n.limitType}`}function nl(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>LE(r))).join(", ")}]`),ju(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>xl(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>xl(r))).join(",")),`Target(${i})`})(Es(n))}; limitType=${n.limitType})`}function Vf(n,e){return e.isFoundDocument()&&(function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Ce.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,e)&&(function(i,r){for(const o of iu(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(c,h,f){const m=pw(c,h,f);return c.inclusive?m<=0:m<0})(i.startAt,iu(i),r)||i.endAt&&!(function(c,h,f){const m=pw(c,h,f);return c.inclusive?m>=0:m>0})(i.endAt,iu(i),r))})(n,e)}function vI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function FE(n){return(e,t)=>{let i=!1;for(const r of iu(n)){const o=bI(r,e,t);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function bI(n,e,t){const i=n.field.isKeyField()?Ce.comparator(e.key,t.key):(function(o,c,h){const f=c.data.field(o),m=h.data.field(o);return f!==null&&m!==null?wl(f,m):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ie(19790,{direction:n.dir})}}class oo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){fa(this.inner,((t,i)=>{for(const[r,o]of i)e(r,o)}))}isEmpty(){return TE(this.inner)}size(){return this.innerSize}}const _I=new zt(Ce.comparator);function ar(){return _I}const HE=new zt(Ce.comparator);function Xc(...n){let e=HE;for(const t of n)e=e.insert(t.key,t);return e}function qE(n){let e=HE;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ka(){return nu()}function GE(){return nu()}function nu(){return new oo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const wI=new zt(Ce.comparator),xI=new li(Ce.comparator);function Ye(...n){let e=xI;for(const t of n)e=e.add(t);return e}const EI=new li(Ke);function SI(){return EI}function ty(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ef(e)?"-0":e}}function $E(n){return{integerValue:""+n}}function TI(n,e){return J4(e)?$E(e):ty(n,e)}class Uf{constructor(){this._=void 0}}function AI(n,e,t){return n instanceof bu?(function(r,o){const c={fields:{[RE]:{stringValue:CE},[IE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&X0(o)&&(o=zf(o)),o&&(c.fields[NE]=o),{mapValue:c}})(t,e):n instanceof El?YE(n,e):n instanceof _u?WE(n,e):(function(r,o){const c=KE(r,o),h=bw(c)+bw(r.Ae);return l0(c)&&l0(r.Ae)?$E(h):ty(r.serializer,h)})(n,e)}function CI(n,e,t){return n instanceof El?YE(n,e):n instanceof _u?WE(n,e):t}function KE(n,e){return n instanceof af?(function(i){return l0(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class bu extends Uf{}class El extends Uf{constructor(e){super(),this.elements=e}}function YE(n,e){const t=QE(e);for(const i of n.elements)t.some((r=>Rs(r,i)))||t.push(i);return{arrayValue:{values:t}}}class _u extends Uf{constructor(e){super(),this.elements=e}}function WE(n,e){let t=QE(e);for(const i of n.elements)t=t.filter((r=>!Rs(r,i)));return{arrayValue:{values:t}}}class af extends Uf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function bw(n){return Gt(n.integerValue||n.doubleValue)}function QE(n){return J0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class XE{constructor(e,t){this.field=e,this.transform=t}}function RI(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof El&&r instanceof El||i instanceof _u&&r instanceof _u?_l(i.elements,r.elements,Rs):i instanceof af&&r instanceof af?Rs(i.Ae,r.Ae):i instanceof bu&&r instanceof bu})(n.transform,e.transform)}class NI{constructor(e,t){this.version=e,this.transformResults=t}}class Pi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pi}static exists(e){return new Pi(void 0,e)}static updateTime(e){return new Pi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ld(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Bf{}function JE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new iy(n.key,Pi.none()):new Du(n.key,n.data,Pi.none());{const t=n.data,i=Hi.empty();let r=new li(Ni.comparator);for(let o of e.fields)if(!r.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?i.delete(o):i.set(o,c),r=r.add(o)}return new ma(n.key,i,new gn(r.toArray()),Pi.none())}}function II(n,e,t){n instanceof Du?(function(r,o,c){const h=r.value.clone(),f=ww(r.fieldTransforms,o,c.transformResults);h.setAll(f),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):n instanceof ma?(function(r,o,c){if(!Ld(r.precondition,o))return void o.convertToUnknownDocument(c.version);const h=ww(r.fieldTransforms,o,c.transformResults),f=o.data;f.setAll(ZE(r)),f.setAll(h),o.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):(function(r,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function su(n,e,t,i){return n instanceof Du?(function(o,c,h,f){if(!Ld(o.precondition,c))return h;const m=o.value.clone(),g=xw(o.fieldTransforms,f,c);return m.setAll(g),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,i):n instanceof ma?(function(o,c,h,f){if(!Ld(o.precondition,c))return h;const m=xw(o.fieldTransforms,f,c),g=c.data;return g.setAll(ZE(o)),g.setAll(m),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((v=>v.field)))})(n,e,t,i):(function(o,c,h){return Ld(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,e,t)}function MI(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),o=KE(i.transform,r||null);o!=null&&(t===null&&(t=Hi.empty()),t.set(i.field,o))}return t||null}function _w(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&_l(i,r,((o,c)=>RI(o,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Du extends Bf{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ma extends Bf{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function ZE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function ww(n,e,t){const i=new Map;et(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const o=n[r],c=o.transform,h=e.data.field(o.field);i.set(o.field,CI(c,h,t[r]))}return i}function xw(n,e,t){const i=new Map;for(const r of n){const o=r.transform,c=t.data.field(r.field);i.set(r.field,AI(o,c,e))}return i}class iy extends Bf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eS extends Bf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class kI{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&II(o,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=su(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=su(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=GE();return this.mutations.forEach((r=>{const o=e.get(r.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=t.has(r.key)?null:h;const f=JE(c,h);f!==null&&i.set(r.key,f),c.isValidDocument()||c.convertToNoDocument(ke.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ye())}isEqual(e){return this.batchId===e.batchId&&_l(this.mutations,e.mutations,((t,i)=>_w(t,i)))&&_l(this.baseMutations,e.baseMutations,((t,i)=>_w(t,i)))}}class ny{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){et(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return wI})();const o=e.mutations;for(let c=0;c<o.length;c++)r=r.insert(o[c].key,i[c].version);return new ny(e,t,i,r)}}class jI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class DI{constructor(e,t){this.count=e,this.unchangedNames=t}}var ni,Ze;function tS(n){switch(n){case de.OK:return Ie(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function iS(n){if(n===void 0)return rr("GRPC error has no .code"),de.UNKNOWN;switch(n){case ni.OK:return de.OK;case ni.CANCELLED:return de.CANCELLED;case ni.UNKNOWN:return de.UNKNOWN;case ni.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case ni.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case ni.INTERNAL:return de.INTERNAL;case ni.UNAVAILABLE:return de.UNAVAILABLE;case ni.UNAUTHENTICATED:return de.UNAUTHENTICATED;case ni.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case ni.NOT_FOUND:return de.NOT_FOUND;case ni.ALREADY_EXISTS:return de.ALREADY_EXISTS;case ni.PERMISSION_DENIED:return de.PERMISSION_DENIED;case ni.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case ni.ABORTED:return de.ABORTED;case ni.OUT_OF_RANGE:return de.OUT_OF_RANGE;case ni.UNIMPLEMENTED:return de.UNIMPLEMENTED;case ni.DATA_LOSS:return de.DATA_LOSS;default:return Ie(39323,{code:n})}}(Ze=ni||(ni={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";function OI(){return new TextEncoder}const zI=new ta([4294967295,4294967295],0);function Ew(n){const e=OI().encode(n),t=new mE;return t.update(e),new Uint8Array(t.digest())}function Sw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ta([t,i],0),new ta([r,o],0)]}class sy{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Jc(`Invalid padding: ${t}`);if(i<0)throw new Jc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Jc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Jc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ta.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(ta.fromNumber(i)));return r.compare(zI)===1&&(r=new ta([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Ew(e),[i,r]=Sw(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,r,o);if(!this.we(c))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new sy(o,r,t);return i.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const t=Ew(e),[i,r]=Sw(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,r,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Jc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ff{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Ou.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Ff(ke.min(),r,new zt(Ke),ar(),Ye())}}class Ou{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Ou(i,t,Ye(),Ye(),Ye())}}class Vd{constructor(e,t,i,r){this.be=e,this.removedTargetIds=t,this.key=i,this.De=r}}class nS{constructor(e,t){this.targetId=e,this.Ce=t}}class sS{constructor(e,t,i=Ii.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class Tw{constructor(){this.ve=0,this.Fe=Aw(),this.Me=Ii.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),t=Ye(),i=Ye();return this.Fe.forEach(((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Ie(38017,{changeType:o})}})),new Ou(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Aw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,et(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class PI{constructor(e){this.Ge=e,this.ze=new Map,this.je=ar(),this.Je=wd(),this.He=wd(),this.Ye=new zt(Ke)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const o=r.target;if(u0(o))if(i===0){const c=new Ce(o.path);this.et(t,c,pi.newNoDocument(c,ke.min()))}else et(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const h=this.ut(e),f=h?this.ct(h,e,c):1;if(f!==0){this.it(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=t;let c,h;try{c=ca(i).toUint8Array()}catch(f){if(f instanceof AE)return bl("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new sy(c,r,o)}catch(f){return bl(f instanceof Jc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.ge===0?null:h}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((o=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(t,o,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((o,c)=>{const h=this.ot(c);if(h){if(o.current&&u0(h.target)){const f=new Ce(h.target.path);this.It(f).has(c)||this.Et(c,f)||this.et(c,f,pi.newNoDocument(f,e))}o.Be&&(t.set(c,o.ke()),o.qe())}}));let i=Ye();this.He.forEach(((o,c)=>{let h=!0;c.forEachWhile((f=>{const m=this.ot(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const r=new Ff(e,t,this.Ye,this.je,i);return this.je=ar(),this.Je=wd(),this.He=wd(),this.Ye=new zt(Ke),r}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Tw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new li(Ke),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new li(Ke),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||xe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Tw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function wd(){return new zt(Ce.comparator)}function Aw(){return new zt(Ce.comparator)}const LI={asc:"ASCENDING",desc:"DESCENDING"},VI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UI={and:"AND",or:"OR"};class BI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function d0(n,e){return n.useProto3Json||ju(e)?e:{value:e}}function of(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function FI(n,e){return of(n,e.toTimestamp())}function vn(n){return et(!!n,49232),ke.fromTimestamp((function(t){const i=la(t);return new Et(i.seconds,i.nanos)})(n))}function ry(n,e){return f0(n,e).canonicalString()}function f0(n,e){const t=(function(r){return new bt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function aS(n){const e=bt.fromString(n);return et(dS(e),10190,{key:e.toString()}),e}function lf(n,e){return ry(n.databaseId,e.path)}function ru(n,e){const t=aS(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ce(lS(t))}function oS(n,e){return ry(n.databaseId,e)}function HI(n){const e=aS(n);return e.length===4?bt.emptyPath():lS(e)}function m0(n){return new bt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lS(n){return et(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Cw(n,e,t){return{name:lf(n,e),fields:t.value.mapValue.fields}}function qI(n,e){return"found"in e?(function(i,r){et(!!r.found,43571),r.found.name,r.found.updateTime;const o=ru(i,r.found.name),c=vn(r.found.updateTime),h=r.found.createTime?vn(r.found.createTime):ke.min(),f=new Hi({mapValue:{fields:r.found.fields}});return pi.newFoundDocument(o,c,h,f)})(n,e):"missing"in e?(function(i,r){et(!!r.missing,3894),et(!!r.readTime,22933);const o=ru(i,r.missing),c=vn(r.readTime);return pi.newNoDocument(o,c)})(n,e):Ie(7234,{result:e})}function GI(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ie(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(m,g){return m.useProto3Json?(et(g===void 0||typeof g=="string",58123),Ii.fromBase64String(g||"")):(et(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Ii.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(m){const g=m.code===void 0?de.UNKNOWN:iS(m.code);return new _e(g,m.message||"")})(c);t=new sS(i,r,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=ru(n,i.document.name),o=vn(i.document.updateTime),c=i.document.createTime?vn(i.document.createTime):ke.min(),h=new Hi({mapValue:{fields:i.document.fields}}),f=pi.newFoundDocument(r,o,c,h),m=i.targetIds||[],g=i.removedTargetIds||[];t=new Vd(m,g,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=ru(n,i.document),o=i.readTime?vn(i.readTime):ke.min(),c=pi.newNoDocument(r,o),h=i.removedTargetIds||[];t=new Vd([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=ru(n,i.document),o=i.removedTargetIds||[];t=new Vd([],o,r,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,c=new DI(r,o),h=i.targetId;t=new nS(h,c)}}return t}function cS(n,e){let t;if(e instanceof Du)t={update:Cw(n,e.key,e.value)};else if(e instanceof iy)t={delete:lf(n,e.key)};else if(e instanceof ma)t={update:Cw(n,e.key,e.data),updateMask:e3(e.fieldMask)};else{if(!(e instanceof eS))return Ie(16599,{Vt:e.type});t={verify:lf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(o,c){const h=c.transform;if(h instanceof bu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof El)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof _u)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof af)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw Ie(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:FI(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ie(27497)})(n,e.precondition)),t}function $I(n,e){return n&&n.length>0?(et(e!==void 0,14353),n.map((t=>(function(r,o){let c=r.updateTime?vn(r.updateTime):vn(o);return c.isEqual(ke.min())&&(c=vn(o)),new NI(c,r.transformResults||[])})(t,e)))):[]}function KI(n,e){return{documents:[oS(n,e.path)]}}function YI(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=oS(n,r);const o=(function(m){if(m.length!==0)return hS(Xn.create(m,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const c=(function(m){if(m.length!==0)return m.map((g=>(function(_){return{field:sl(_.field),direction:XI(_.dir)}})(g)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=d0(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:r}}function WI(n){let e=HI(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){et(i===1,65062);const g=t.from[0];g.allDescendants?r=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(v){const _=uS(v);return _ instanceof Xn&&zE(_)?_.getFilters():[_]})(t.where));let c=[];t.orderBy&&(c=(function(v){return v.map((_=>(function(S){return new vu(rl(S.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(_)))})(t.orderBy));let h=null;t.limit&&(h=(function(v){let _;return _=typeof v=="object"?v.value:v,ju(_)?null:_})(t.limit));let f=null;t.startAt&&(f=(function(v){const _=!!v.before,w=v.values||[];return new sf(w,_)})(t.startAt));let m=null;return t.endAt&&(m=(function(v){const _=!v.before,w=v.values||[];return new sf(w,_)})(t.endAt)),gI(e,r,c,o,h,"F",f,m)}function QI(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function uS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=rl(t.unaryFilter.field);return si.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=rl(t.unaryFilter.field);return si.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=rl(t.unaryFilter.field);return si.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=rl(t.unaryFilter.field);return si.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return si.create(rl(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Xn.create(t.compositeFilter.filters.map((i=>uS(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function XI(n){return LI[n]}function JI(n){return VI[n]}function ZI(n){return UI[n]}function sl(n){return{fieldPath:n.canonicalString()}}function rl(n){return Ni.fromServerFormat(n.fieldPath)}function hS(n){return n instanceof si?(function(t){if(t.op==="=="){if(mw(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NAN"}};if(fw(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(mw(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NOT_NAN"}};if(fw(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sl(t.field),op:JI(t.op),value:t.value}}})(n):n instanceof Xn?(function(t){const i=t.getFilters().map((r=>hS(r)));return i.length===1?i[0]:{compositeFilter:{op:ZI(t.op),filters:i}}})(n):Ie(54877,{filter:n})}function e3(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function dS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Qr{constructor(e,t,i,r,o=ke.min(),c=ke.min(),h=Ii.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new Qr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class t3{constructor(e){this.yt=e}}function i3(n){const e=WI({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?rf(e,e.limit,"L"):e}class n3{constructor(){this.Cn=new s3}addToCollectionParentIndex(e,t){return this.Cn.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t){return ge.resolve(null)}getIndexType(e,t){return ge.resolve(0)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,t){return ge.resolve(oa.min())}getMinOffsetFromCollectionGroup(e,t){return ge.resolve(oa.min())}updateCollectionGroup(e,t,i){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class s3{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new li(bt.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new li(bt.comparator)).toArray()}}const Rw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fS=41943040;class en{static withCacheSize(e){return new en(e,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}en.DEFAULT_COLLECTION_PERCENTILE=10,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,en.DEFAULT=new en(fS,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),en.DISABLED=new en(-1,0,0);class Sl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Sl(0)}static cr(){return new Sl(-1)}}const Nw="LruGarbageCollector",r3=1048576;function Iw([n,e],[t,i]){const r=Ke(n,t);return r===0?Ke(e,i):r}class a3{constructor(e){this.Ir=e,this.buffer=new li(Iw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Iw(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class o3{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){xe(Nw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Pl(t)?xe(Nw,"Ignoring IndexedDB error during garbage collection: ",t):await zl(t)}await this.Vr(3e5)}))}}class l3{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ge.resolve(Of.ce);const i=new a3(t);return this.mr.forEachTarget(e,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(Rw)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,r,o,c,h,f,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),r=this.params.maximumSequenceNumbersToCollect):r=v,c=Date.now(),this.nthSequenceNumber(e,r)))).next((v=>(i=v,h=Date.now(),this.removeTargets(e,i,t)))).next((v=>(o=v,f=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(m=Date.now(),il()<=$e.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${r} in `+(h-c)+`ms
	Removed ${o} targets in `+(f-h)+`ms
	Removed ${v} documents in `+(m-f)+`ms
Total Duration: ${m-g}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:v}))))}}function c3(n,e){return new l3(n,e)}class u3{constructor(){this.changes=new oo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ge.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class h3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class d3{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&su(i.mutation,r,gn.empty(),Et.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ye()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ye()){const r=Ka();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((o=>{let c=Xc();return o.forEach(((h,f)=>{c=c.insert(h,f.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=Ka();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ye())))}populateOverlays(e,t,i){const r=[];return i.forEach((o=>{t.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(e,r).next((o=>{o.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,i,r){let o=ar();const c=nu(),h=(function(){return nu()})();return t.forEach(((f,m)=>{const g=i.get(m.key);r.has(m.key)&&(g===void 0||g.mutation instanceof ma)?o=o.insert(m.key,m):g!==void 0?(c.set(m.key,g.mutation.getFieldMask()),su(g.mutation,m,g.mutation.getFieldMask(),Et.now())):c.set(m.key,gn.empty())})),this.recalculateAndSaveOverlays(e,o).next((f=>(f.forEach(((m,g)=>c.set(m,g))),t.forEach(((m,g)=>h.set(m,new h3(g,c.get(m)??null)))),h)))}recalculateAndSaveOverlays(e,t){const i=nu();let r=new zt(((c,h)=>c-h)),o=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let g=i.get(f)||gn.empty();g=h.applyToLocalView(m,g),i.set(f,g);const v=(r.get(h.batchId)||Ye()).add(f);r=r.insert(h.batchId,v)}))})).next((()=>{const c=[],h=r.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),m=f.key,g=f.value,v=GE();g.forEach((_=>{if(!o.has(_)){const w=JE(t.get(_),i.get(_));w!==null&&v.set(_,w),o=o.add(_)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,v))}return ge.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return(function(c){return Ce.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):UE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((o=>{const c=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):ge.resolve(Ka());let h=mu,f=o;return c.next((m=>ge.forEach(m,((g,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(g)?ge.resolve():this.remoteDocumentCache.getEntry(e,g).next((_=>{f=f.insert(g,_)}))))).next((()=>this.populateOverlays(e,m,o))).next((()=>this.computeViews(e,f,m,Ye()))).next((g=>({batchId:h,changes:qE(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next((i=>{let r=Xc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const o=t.collectionGroup;let c=Xc();return this.indexManager.getCollectionParents(e,o).next((h=>ge.forEach(h,(f=>{const m=(function(v,_){return new Ll(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,i,r).next((g=>{g.forEach(((v,_)=>{c=c.insert(v,_)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,r)))).next((c=>{o.forEach(((f,m)=>{const g=m.getKey();c.get(g)===null&&(c=c.insert(g,pi.newInvalidDocument(g)))}));let h=Xc();return c.forEach(((f,m)=>{const g=o.get(f);g!==void 0&&su(g.mutation,m,gn.empty(),Et.now()),Vf(t,m)&&(h=h.insert(f,m))})),h}))}}class f3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ge.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:vn(r.createTime)}})(t)),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:i3(r.bundledQuery),readTime:vn(r.readTime)}})(t)),ge.resolve()}}class m3{constructor(){this.overlays=new zt(Ce.comparator),this.qr=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ka();return ge.forEach(t,(r=>this.getOverlay(e,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,o)=>{this.St(e,t,o)})),ge.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),ge.resolve()}getOverlaysForCollection(e,t,i){const r=Ka(),o=t.length+1,c=new Ce(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const f=h.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===o&&f.largestBatchId>i&&r.set(f.getKey(),f)}return ge.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new zt(((m,g)=>m-g));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let g=o.get(m.largestBatchId);g===null&&(g=Ka(),o=o.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const h=Ka(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,g)=>h.set(m,g))),!(h.size()>=r)););return ge.resolve(h)}St(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const c=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new jI(t,i));let o=this.qr.get(t);o===void 0&&(o=Ye(),this.qr.set(t,o)),this.qr.set(t,o.add(i.key))}}class p3{constructor(){this.sessionToken=Ii.EMPTY_BYTE_STRING}getSessionToken(e){return ge.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ge.resolve()}}class ay{constructor(){this.Qr=new li(mi.$r),this.Ur=new li(mi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new mi(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new mi(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Ce(new bt([])),i=new mi(t,e),r=new mi(t,e+1),o=[];return this.Ur.forEachInRange([i,r],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ce(new bt([])),i=new mi(t,e),r=new mi(t,e+1);let o=Ye();return this.Ur.forEachInRange([i,r],(c=>{o=o.add(c.key)})),o}containsKey(e){const t=new mi(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class mi{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ce.comparator(e.key,t.key)||Ke(e.Yr,t.Yr)}static Kr(e,t){return Ke(e.Yr,t.Yr)||Ce.comparator(e.key,t.key)}}class g3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new li(mi.$r)}checkEmpty(e){return ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new kI(o,t,i,r);this.mutationQueue.push(c);for(const h of r)this.Zr=this.Zr.add(new mi(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ge.resolve(c)}lookupMutationBatch(e,t){return ge.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.ei(i),o=r<0?0:r;return ge.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(this.mutationQueue.length===0?Q0:this.tr-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new mi(t,0),r=new mi(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],(c=>{const h=this.Xr(c.Yr);o.push(h)})),ge.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new li(Ke);return t.forEach((r=>{const o=new mi(r,0),c=new mi(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(h=>{i=i.add(h.Yr)}))})),ge.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let o=i;Ce.isDocumentKey(o)||(o=o.child(""));const c=new mi(new Ce(o),0);let h=new li(Ke);return this.Zr.forEachWhile((f=>{const m=f.key.path;return!!i.isPrefixOf(m)&&(m.length===r&&(h=h.add(f.Yr)),!0)}),c),ge.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((i=>{const r=this.Xr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){et(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ge.forEach(t.mutations,(r=>{const o=new mi(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new mi(t,0),r=this.Zr.firstAfterOrEqual(i);return ge.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class y3{constructor(e){this.ri=e,this.docs=(function(){return new zt(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),o=r?r.size:0,c=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ge.resolve(i?i.document.mutableCopy():pi.newInvalidDocument(t))}getEntries(e,t){let i=ar();return t.forEach((r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():pi.newInvalidDocument(r))})),ge.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let o=ar();const c=t.path,h=new Ce(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:m,value:{document:g}}=f.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||Y4(K4(g),i)<=0||(r.has(g.key)||Vf(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return ge.resolve(o)}getAllFromCollectionGroup(e,t,i,r){Ie(9500)}ii(e,t){return ge.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new v3(this)}getSize(e){return ge.resolve(this.size)}}class v3 extends u3{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)})),ge.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class b3{constructor(e){this.persistence=e,this.si=new oo((t=>Z0(t)),ey),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new ay,this.targetCount=0,this.ai=Sl.ur()}forEachTarget(e,t){return this.si.forEach(((i,r)=>t(r))),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),ge.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Sl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.Pr(t),ge.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,i){let r=0;const o=[];return this.si.forEach(((c,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)})),ge.waitFor(o).next((()=>r))}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return ge.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),ge.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach((c=>{o.push(r.markPotentiallyOrphaned(e,c))})),ge.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return ge.resolve(i)}containsKey(e,t){return ge.resolve(this._i.containsKey(t))}}class mS{constructor(e,t){this.ui={},this.overlays={},this.ci=new Of(0),this.li=!1,this.li=!0,this.hi=new p3,this.referenceDelegate=e(this),this.Pi=new b3(this),this.indexManager=new n3,this.remoteDocumentCache=(function(r){return new y3(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new t3(t),this.Ii=new f3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new m3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new g3(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){xe("MemoryPersistence","Starting transaction:",e);const r=new _3(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ai(e,t){return ge.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class _3 extends Q4{constructor(e){super(),this.currentSequenceNumber=e}}class oy{constructor(e){this.persistence=e,this.Ri=new ay,this.Vi=null}static mi(e){return new oy(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),ge.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.fi,(i=>{const r=Ce.fromPath(i);return this.gi(e,r).next((o=>{o||t.removeEntry(r,ke.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ge.or([()=>ge.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class cf{constructor(e,t){this.persistence=e,this.pi=new oo((i=>Z4(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=c3(this,t)}static mi(e,t){return new cf(e,t)}Ei(){}di(e){return ge.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return ge.forEach(this.pi,((i,r)=>this.br(e,i,r).next((o=>o?ge.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,(c=>this.br(e,c,t).next((h=>{h||(i++,o.removeEntry(c,ke.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ge.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ge.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ge.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ge.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=zd(e.data.value)),t}br(e,t,i){return ge.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return ge.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ly{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=r}static As(e,t){let i=Ye(),r=Ye();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new ly(e,t.fromCache,i,r)}}class w3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class x3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return mN()?8:X4(Vi())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const o={result:null};return this.ys(e,t).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,t,r,i).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new w3;return this.Ss(e,t,c).next((h=>{if(o.result=h,this.Vs)return this.bs(e,t,c,h.size)}))})).next((()=>o.result))}bs(e,t,i,r){return i.documentReadCount<this.fs?(il()<=$e.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",nl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ge.resolve()):(il()<=$e.DEBUG&&xe("QueryEngine","Query:",nl(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(il()<=$e.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",nl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Es(t))):ge.resolve())}ys(e,t){if(vw(t))return ge.resolve(null);let i=Es(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=rf(t,null,"F"),i=Es(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const c=Ye(...o);return this.ps.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,i).next((f=>{const m=this.Ds(t,h);return this.Cs(t,m,c,f.readTime)?this.ys(e,rf(t,null,"F")):this.vs(e,m,t,f)}))))})))))}ws(e,t,i,r){return vw(t)||r.isEqual(ke.min())?ge.resolve(null):this.ps.getDocuments(e,i).next((o=>{const c=this.Ds(t,o);return this.Cs(t,c,i,r)?ge.resolve(null):(il()<=$e.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),nl(t)),this.vs(e,c,t,$4(r,mu)).next((h=>h)))}))}Ds(e,t){let i=new li(FE(e));return t.forEach(((r,o)=>{Vf(e,o)&&(i=i.add(o))})),i}Cs(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,t,i){return il()<=$e.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",nl(t)),this.ps.getDocumentsMatchingQuery(e,t,oa.min(),i)}vs(e,t,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next((o=>(t.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const cy="LocalStore",E3=3e8;class S3{constructor(e,t,i,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new zt(Ke),this.xs=new oo((o=>Z0(o)),ey),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new d3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function T3(n,e,t,i){return new S3(n,e,t,i)}async function pS(n,e){const t=De(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((o=>(r=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((o=>{const c=[],h=[];let f=Ye();for(const m of r){c.push(m.batchId);for(const g of m.mutations)f=f.add(g.key)}for(const m of o){h.push(m.batchId);for(const g of m.mutations)f=f.add(g.key)}return t.localDocuments.getDocuments(i,f).next((m=>({Ls:m,removedBatchIds:c,addedBatchIds:h})))}))}))}function A3(n,e){const t=De(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,f,m,g){const v=m.batch,_=v.keys();let w=ge.resolve();return _.forEach((S=>{w=w.next((()=>g.getEntry(f,S))).next((R=>{const O=m.docVersions.get(S);et(O!==null,48541),R.version.compareTo(O)<0&&(v.applyToRemoteDocument(R,m),R.isValidDocument()&&(R.setReadTime(m.commitVersion),g.addEntry(R)))}))})),w.next((()=>h.mutationQueue.removeMutationBatch(f,v)))})(t,i,e,o).next((()=>o.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let f=Ye();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function gS(n){const e=De(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function C3(n,e){const t=De(n),i=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const h=[];e.targetChanges.forEach(((g,v)=>{const _=r.get(v);if(!_)return;h.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,v))));let w=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?w=w.withResumeToken(Ii.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,i)),r=r.insert(v,w),(function(R,O,M){return R.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=E3?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0})(_,w,g)&&h.push(t.Pi.updateTargetData(o,w))}));let f=ar(),m=Ye();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),h.push(R3(o,c,e.documentUpdates).next((g=>{f=g.ks,m=g.qs}))),!i.isEqual(ke.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((v=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));h.push(g)}return ge.waitFor(h).next((()=>c.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,f,m))).next((()=>f))})).then((o=>(t.Ms=r,o)))}function R3(n,e,t){let i=Ye(),r=Ye();return t.forEach((o=>i=i.add(o))),e.getEntries(n,i).next((o=>{let c=ar();return t.forEach(((h,f)=>{const m=o.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(h)),f.isNoDocument()&&f.version.isEqual(ke.min())?(e.removeEntry(h,f.readTime),c=c.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),c=c.insert(h,f)):xe(cy,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)})),{ks:c,qs:r}}))}function N3(n,e){const t=De(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Q0),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function I3(n,e){const t=De(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.Pi.getTargetData(i,e).next((o=>o?(r=o,ge.resolve(r)):t.Pi.allocateTargetId(i).next((c=>(r=new Qr(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function p0(n,e,t){const i=De(n),r=i.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",o,(c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!Pl(c))throw c;xe(cy,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function Mw(n,e,t){const i=De(n);let r=ke.min(),o=Ye();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,m,g){const v=De(f),_=v.xs.get(g);return _!==void 0?ge.resolve(v.Ms.get(_)):v.Pi.getTargetData(m,g)})(i,c,Es(e)).next((h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,h.targetId).next((f=>{o=f}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,t?r:ke.min(),t?o:Ye()))).next((h=>(M3(i,vI(e),h),{documents:h,Qs:o})))))}function M3(n,e,t){let i=n.Os.get(e)||ke.min();t.forEach(((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.Os.set(e,i)}class kw{constructor(){this.activeTargetIds=SI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class k3{constructor(){this.Mo=new kw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new kw,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class j3{Oo(e){}shutdown(){}}const jw="ConnectivityMonitor";class Dw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){xe(jw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){xe(jw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let xd=null;function g0(){return xd===null?xd=(function(){return 268435456+Math.round(2147483648*Math.random())})():xd++,"0x"+xd.toString(16)}const Cg="RestConnection",D3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class O3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===tf?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,t,i,r,o){const c=g0(),h=this.zo(e,t.toUriEncodedString());xe(Cg,`Sending RPC '${e}' ${c}:`,h,i);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,r,o);const{host:m}=new URL(h),g=jl(m);return this.Jo(e,h,f,i,g).then((v=>(xe(Cg,`Received RPC '${e}' ${c}: `,v),v)),(v=>{throw bl(Cg,`RPC '${e}' ${c} failed with error: `,v,"url: ",h,"request:",i),v}))}Ho(e,t,i,r,o,c){return this.Go(e,t,i,r,o)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ol})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,o)=>e[o]=r)),i&&i.headers.forEach(((r,o)=>e[o]=r))}zo(e,t){const i=D3[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}class z3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Oi="WebChannelConnection";class P3 extends O3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,r,o){const c=g0();return new Promise(((h,f)=>{const m=new pE;m.setWithCredentials(!0),m.listenOnce(gE.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Od.NO_ERROR:const v=m.getResponseJson();xe(Oi,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),h(v);break;case Od.TIMEOUT:xe(Oi,`RPC '${e}' ${c} timed out`),f(new _e(de.DEADLINE_EXCEEDED,"Request time out"));break;case Od.HTTP_ERROR:const _=m.getStatus();if(xe(Oi,`RPC '${e}' ${c} failed with status:`,_,"response text:",m.getResponseText()),_>0){let w=m.getResponseJson();Array.isArray(w)&&(w=w[0]);const S=w?.error;if(S&&S.status&&S.message){const R=(function(M){const F=M.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(F)>=0?F:de.UNKNOWN})(S.status);f(new _e(R,S.message))}else f(new _e(de.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new _e(de.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{xe(Oi,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(r);xe(Oi,`RPC '${e}' ${c} sending request:`,r),m.send(t,"POST",g,i,15)}))}T_(e,t,i){const r=g0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=bE(),h=vE(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const g=o.join("");xe(Oi,`Creating RPC '${e}' stream ${r}: ${g}`,f);const v=c.createWebChannel(g,f);this.I_(v);let _=!1,w=!1;const S=new z3({Yo:O=>{w?xe(Oi,`Not sending because RPC '${e}' stream ${r} is closed:`,O):(_||(xe(Oi,`Opening RPC '${e}' stream ${r} transport.`),v.open(),_=!0),xe(Oi,`RPC '${e}' stream ${r} sending:`,O),v.send(O))},Zo:()=>v.close()}),R=(O,M,F)=>{O.listen(M,(H=>{try{F(H)}catch(G){setTimeout((()=>{throw G}),0)}}))};return R(v,Qc.EventType.OPEN,(()=>{w||(xe(Oi,`RPC '${e}' stream ${r} transport opened.`),S.o_())})),R(v,Qc.EventType.CLOSE,(()=>{w||(w=!0,xe(Oi,`RPC '${e}' stream ${r} transport closed`),S.a_(),this.E_(v))})),R(v,Qc.EventType.ERROR,(O=>{w||(w=!0,bl(Oi,`RPC '${e}' stream ${r} transport errored. Name:`,O.name,"Message:",O.message),S.a_(new _e(de.UNAVAILABLE,"The operation could not be completed")))})),R(v,Qc.EventType.MESSAGE,(O=>{if(!w){const M=O.data[0];et(!!M,16349);const F=M,H=F?.error||F[0]?.error;if(H){xe(Oi,`RPC '${e}' stream ${r} received error:`,H);const G=H.status;let X=(function(E){const T=ni[E];if(T!==void 0)return iS(T)})(G),U=H.message;X===void 0&&(X=de.INTERNAL,U="Unknown error status: "+G+" with message "+H.message),w=!0,S.a_(new _e(X,U)),v.close()}else xe(Oi,`RPC '${e}' stream ${r} received:`,M),S.u_(M)}})),R(h,yE.STAT_EVENT,(O=>{O.stat===r0.PROXY?xe(Oi,`RPC '${e}' stream ${r} detected buffering proxy`):O.stat===r0.NOPROXY&&xe(Oi,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{S.__()}),0),S}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Rg(){return typeof document<"u"?document:null}function Hf(n){return new BI(n,!0)}class uy{constructor(e,t,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&xe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Ow="PersistentStream";class yS{constructor(e,t,i,r,o,c,h,f){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new uy(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(rr(t.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new _e(de.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return xe(Ow,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(xe(Ow,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class L3 extends yS{constructor(e,t,i,r,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=GI(this.serializer,e),i=(function(o){if(!("targetChange"in o))return ke.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?ke.min():c.readTime?vn(c.readTime):ke.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=m0(this.serializer),t.addTarget=(function(o,c){let h;const f=c.target;if(h=u0(f)?{documents:KI(o,f)}:{query:YI(o,f).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=rS(o,c.resumeToken);const m=d0(o,c.expectedCount);m!==null&&(h.expectedCount=m)}else if(c.snapshotVersion.compareTo(ke.min())>0){h.readTime=of(o,c.snapshotVersion.toTimestamp());const m=d0(o,c.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const i=QI(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=m0(this.serializer),t.removeTarget=e,this.q_(t)}}class V3 extends yS{constructor(e,t,i,r,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=$I(e.writeResults,e.commitTime),i=vn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=m0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>cS(this.serializer,i)))};this.q_(t)}}class U3{}class B3 extends U3{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new _e(de.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,f0(t,i),r,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _e(de.UNKNOWN,o.toString())}))}Ho(e,t,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Ho(e,f0(t,i),r,c,h,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new _e(de.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class F3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(rr(t),this.aa=!1):xe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const eo="RemoteStore";class H3{constructor(e,t,i,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{lo(this)&&(xe(eo,"Restarting streams for network reachability change."),await(async function(f){const m=De(f);m.Ea.add(4),await zu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await qf(m)})(this))}))})),this.Ra=new F3(i,r)}}async function qf(n){if(lo(n))for(const e of n.da)await e(!0)}async function zu(n){for(const e of n.da)await e(!1)}function vS(n,e){const t=De(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),my(t)?fy(t):Vl(t).O_()&&dy(t,e))}function hy(n,e){const t=De(n),i=Vl(t);t.Ia.delete(e),i.O_()&&bS(t,e),t.Ia.size===0&&(i.O_()?i.L_():lo(t)&&t.Ra.set("Unknown"))}function dy(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vl(n).Y_(e)}function bS(n,e){n.Va.Ue(e),Vl(n).Z_(e)}function fy(n){n.Va=new PI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Vl(n).start(),n.Ra.ua()}function my(n){return lo(n)&&!Vl(n).x_()&&n.Ia.size>0}function lo(n){return De(n).Ea.size===0}function _S(n){n.Va=void 0}async function q3(n){n.Ra.set("Online")}async function G3(n){n.Ia.forEach(((e,t)=>{dy(n,e)}))}async function $3(n,e){_S(n),my(n)?(n.Ra.ha(e),fy(n)):n.Ra.set("Unknown")}async function K3(n,e,t){if(n.Ra.set("Online"),e instanceof sS&&e.state===2&&e.cause)try{await(async function(r,o){const c=o.cause;for(const h of o.targetIds)r.Ia.has(h)&&(await r.remoteSyncer.rejectListen(h,c),r.Ia.delete(h),r.Va.removeTarget(h))})(n,e)}catch(i){xe(eo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await uf(n,i)}else if(e instanceof Vd?n.Va.Ze(e):e instanceof nS?n.Va.st(e):n.Va.tt(e),!t.isEqual(ke.min()))try{const i=await gS(n.localStore);t.compareTo(i)>=0&&await(function(o,c){const h=o.Va.Tt(c);return h.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const g=o.Ia.get(m);g&&o.Ia.set(m,g.withResumeToken(f.resumeToken,c))}})),h.targetMismatches.forEach(((f,m)=>{const g=o.Ia.get(f);if(!g)return;o.Ia.set(f,g.withResumeToken(Ii.EMPTY_BYTE_STRING,g.snapshotVersion)),bS(o,f);const v=new Qr(g.target,f,m,g.sequenceNumber);dy(o,v)})),o.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(i){xe(eo,"Failed to raise snapshot:",i),await uf(n,i)}}async function uf(n,e,t){if(!Pl(e))throw e;n.Ea.add(1),await zu(n),n.Ra.set("Offline"),t||(t=()=>gS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{xe(eo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await qf(n)}))}function wS(n,e){return e().catch((t=>uf(n,t,e)))}async function Gf(n){const e=De(n),t=ha(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Q0;for(;Y3(e);)try{const r=await N3(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,W3(e,r)}catch(r){await uf(e,r)}xS(e)&&ES(e)}function Y3(n){return lo(n)&&n.Ta.length<10}function W3(n,e){n.Ta.push(e);const t=ha(n);t.O_()&&t.X_&&t.ea(e.mutations)}function xS(n){return lo(n)&&!ha(n).x_()&&n.Ta.length>0}function ES(n){ha(n).start()}async function Q3(n){ha(n).ra()}async function X3(n){const e=ha(n);for(const t of n.Ta)e.ea(t.mutations)}async function J3(n,e,t){const i=n.Ta.shift(),r=ny.from(i,e,t);await wS(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await Gf(n)}async function Z3(n,e){e&&ha(n).X_&&await(async function(i,r){if((function(c){return tS(c)&&c!==de.ABORTED})(r.code)){const o=i.Ta.shift();ha(i).B_(),await wS(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r))),await Gf(i)}})(n,e),xS(n)&&ES(n)}async function zw(n,e){const t=De(n);t.asyncQueue.verifyOperationInProgress(),xe(eo,"RemoteStore received new credentials");const i=lo(t);t.Ea.add(3),await zu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await qf(t)}async function eM(n,e){const t=De(n);e?(t.Ea.delete(2),await qf(t)):e||(t.Ea.add(2),await zu(t),t.Ra.set("Unknown"))}function Vl(n){return n.ma||(n.ma=(function(t,i,r){const o=De(t);return o.sa(),new L3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:q3.bind(null,n),t_:G3.bind(null,n),r_:$3.bind(null,n),H_:K3.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),my(n)?fy(n):n.Ra.set("Unknown")):(await n.ma.stop(),_S(n))}))),n.ma}function ha(n){return n.fa||(n.fa=(function(t,i,r){const o=De(t);return o.sa(),new V3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Q3.bind(null,n),r_:Z3.bind(null,n),ta:X3.bind(null,n),na:J3.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Gf(n)):(await n.fa.stop(),n.Ta.length>0&&(xe(eo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class py{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,o){const c=Date.now()+i,h=new py(e,t,c,r,o);return h.start(i),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gy(n,e){if(rr("AsyncQueue",`${e}: ${n}`),Pl(n))return new _e(de.UNAVAILABLE,`${e}: ${n}`);throw n}class dl{static emptySet(e){return new dl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ce.comparator(t.key,i.key):(t,i)=>Ce.comparator(t.key,i.key),this.keyedMap=Xc(),this.sortedSet=new zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof dl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new dl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class Pw{constructor(){this.ga=new zt(Ce.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Tl{constructor(e,t,i,r,o,c,h,f,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,r,o){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new Tl(e,t,dl.emptySet(t),c,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class tM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class iM{constructor(){this.queries=Lw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=De(t),o=r.queries;r.queries=Lw(),o.forEach(((c,h)=>{for(const f of h.Sa)f.onError(i)}))})(this,new _e(de.ABORTED,"Firestore shutting down"))}}function Lw(){return new oo((n=>BE(n)),Lf)}async function yy(n,e){const t=De(n);let i=3;const r=e.query;let o=t.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new tM,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await t.onListen(r,!0);break;case 1:o.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(c){const h=gy(c,`Initialization of query '${nl(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&by(t)}async function vy(n,e){const t=De(n),i=e.query;let r=3;const o=t.queries.get(i);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function nM(n,e){const t=De(n);let i=!1;for(const r of e){const o=r.query,c=t.queries.get(o);if(c){for(const h of c.Sa)h.Fa(r)&&(i=!0);c.wa=r}}i&&by(t)}function sM(n,e,t){const i=De(n),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(t);i.queries.delete(e)}function by(n){n.Ca.forEach((e=>{e.next()}))}var y0,Vw;(Vw=y0||(y0={})).Ma="default",Vw.Cache="cache";class _y{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Tl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==y0.Cache}}class SS{constructor(e){this.key=e}}class TS{constructor(e){this.key=e}}class rM{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=FE(e),this.tu=new dl(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new Pw,r=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=r,h=!1;const f=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,m=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((g,v)=>{const _=r.get(g),w=Vf(this.query,v)?v:null,S=!!_&&this.mutatedKeys.has(_.key),R=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let O=!1;_&&w?_.data.isEqual(w.data)?S!==R&&(i.track({type:3,doc:w}),O=!0):this.su(_,w)||(i.track({type:2,doc:w}),O=!0,(f&&this.eu(w,f)>0||m&&this.eu(w,m)<0)&&(h=!0)):!_&&w?(i.track({type:0,doc:w}),O=!0):_&&!w&&(i.track({type:1,doc:_}),O=!0,(f||m)&&(h=!0)),O&&(w?(c=c.add(w),o=R?o.add(g):o.delete(g)):(c=c.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{tu:c,iu:i,Cs:h,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,v)=>(function(w,S){const R=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:O})}};return R(w)-R(S)})(g.type,v.type)||this.eu(g.doc,v.doc))),this.ou(i),r=r??!1;const h=t&&!r?this._u():[],f=this.Xa.size===0&&this.current&&!r?1:0,m=f!==this.Za;return this.Za=f,c.length!==0||m?{snapshot:new Tl(this.query,e.tu,o,c,e.mutatedKeys,f===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Pw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ye(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new TS(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new SS(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ye();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Tl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const wy="SyncEngine";class aM{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class oM{constructor(e){this.key=e,this.hu=!1}}class lM{constructor(e,t,i,r,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new oo((h=>BE(h)),Lf),this.Iu=new Map,this.Eu=new Set,this.du=new zt(Ce.comparator),this.Au=new Map,this.Ru=new ay,this.Vu={},this.mu=new Map,this.fu=Sl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function cM(n,e,t=!0){const i=MS(n);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await AS(i,e,t,!0),r}async function uM(n,e){const t=MS(n);await AS(t,e,!0,!1)}async function AS(n,e,t,i){const r=await I3(n.localStore,Es(e)),o=r.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t);let h;return i&&(h=await hM(n,e,o,c==="current",r.resumeToken)),n.isPrimaryClient&&t&&vS(n.remoteStore,r),h}async function hM(n,e,t,i,r){n.pu=(v,_,w)=>(async function(R,O,M,F){let H=O.view.ru(M);H.Cs&&(H=await Mw(R.localStore,O.query,!1).then((({documents:N})=>O.view.ru(N,H))));const G=F&&F.targetChanges.get(O.targetId),X=F&&F.targetMismatches.get(O.targetId)!=null,U=O.view.applyChanges(H,R.isPrimaryClient,G,X);return Bw(R,O.targetId,U.au),U.snapshot})(n,v,_,w);const o=await Mw(n.localStore,e,!0),c=new rM(e,o.Qs),h=c.ru(o.documents),f=Ou.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),m=c.applyChanges(h,n.isPrimaryClient,f);Bw(n,t,m.au);const g=new aM(e,t,c);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function dM(n,e,t){const i=De(n),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter((c=>!Lf(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await p0(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&hy(i.remoteStore,r.targetId),v0(i,r.targetId)})).catch(zl)):(v0(i,r.targetId),await p0(i.localStore,r.targetId,!0))}async function fM(n,e){const t=De(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),hy(t.remoteStore,i.targetId))}async function mM(n,e,t){const i=wM(n);try{const r=await(function(c,h){const f=De(c),m=Et.now(),g=h.reduce(((w,S)=>w.add(S.key)),Ye());let v,_;return f.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let S=ar(),R=Ye();return f.Ns.getEntries(w,g).next((O=>{S=O,S.forEach(((M,F)=>{F.isValidDocument()||(R=R.add(M))}))})).next((()=>f.localDocuments.getOverlayedDocuments(w,S))).next((O=>{v=O;const M=[];for(const F of h){const H=MI(F,v.get(F.key).overlayedDocument);H!=null&&M.push(new ma(F.key,H,jE(H.value.mapValue),Pi.exists(!0)))}return f.mutationQueue.addMutationBatch(w,m,M,h)})).next((O=>{_=O;const M=O.applyToLocalDocumentSet(v,R);return f.documentOverlayCache.saveOverlays(w,O.batchId,M)}))})).then((()=>({batchId:_.batchId,changes:qE(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(c,h,f){let m=c.Vu[c.currentUser.toKey()];m||(m=new zt(Ke)),m=m.insert(h,f),c.Vu[c.currentUser.toKey()]=m})(i,r.batchId,t),await Pu(i,r.changes),await Gf(i.remoteStore)}catch(r){const o=gy(r,"Failed to persist write");t.reject(o)}}async function CS(n,e){const t=De(n);try{const i=await C3(t.localStore,e);e.targetChanges.forEach(((r,o)=>{const c=t.Au.get(o);c&&(et(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.hu=!0:r.modifiedDocuments.size>0?et(c.hu,14607):r.removedDocuments.size>0&&(et(c.hu,42227),c.hu=!1))})),await Pu(t,i,e)}catch(i){await zl(i)}}function Uw(n,e,t){const i=De(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((o,c)=>{const h=c.view.va(e);h.snapshot&&r.push(h.snapshot)})),(function(c,h){const f=De(c);f.onlineState=h;let m=!1;f.queries.forEach(((g,v)=>{for(const _ of v.Sa)_.va(h)&&(m=!0)})),m&&by(f)})(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function pM(n,e,t){const i=De(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),o=r&&r.key;if(o){let c=new zt(Ce.comparator);c=c.insert(o,pi.newNoDocument(o,ke.min()));const h=Ye().add(o),f=new Ff(ke.min(),new Map,new zt(Ke),c,h);await CS(i,f),i.du=i.du.remove(o),i.Au.delete(e),xy(i)}else await p0(i.localStore,e,!1).then((()=>v0(i,e,t))).catch(zl)}async function gM(n,e){const t=De(n),i=e.batch.batchId;try{const r=await A3(t.localStore,e);NS(t,i,null),RS(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Pu(t,r)}catch(r){await zl(r)}}async function yM(n,e,t){const i=De(n);try{const r=await(function(c,h){const f=De(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let g;return f.mutationQueue.lookupMutationBatch(m,h).next((v=>(et(v!==null,37113),g=v.keys(),f.mutationQueue.removeMutationBatch(m,v)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,g,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g))).next((()=>f.localDocuments.getDocuments(m,g)))}))})(i.localStore,e);NS(i,e,t),RS(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Pu(i,r)}catch(r){await zl(r)}}function RS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function NS(n,e,t){const i=De(n);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function v0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||IS(n,i)}))}function IS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(hy(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),xy(n))}function Bw(n,e,t){for(const i of t)i instanceof SS?(n.Ru.addReference(i.key,e),vM(n,i)):i instanceof TS?(xe(wy,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||IS(n,i.key)):Ie(19791,{wu:i})}function vM(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(xe(wy,"New document in limbo: "+t),n.Eu.add(i),xy(n))}function xy(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ce(bt.fromString(e)),i=n.fu.next();n.Au.set(i,new oM(t)),n.du=n.du.insert(t,i),vS(n.remoteStore,new Qr(Es(Pf(t.path)),i,"TargetPurposeLimboResolution",Of.ce))}}async function Pu(n,e,t){const i=De(n),r=[],o=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((h,f)=>{c.push(i.pu(f,e,t).then((m=>{if((m||t)&&i.isPrimaryClient){const g=m?!m.fromCache:t?.targetChanges.get(f.targetId)?.current;i.sharedClientState.updateQueryState(f.targetId,g?"current":"not-current")}if(m){r.push(m);const g=ly.As(f.targetId,m);o.push(g)}})))})),await Promise.all(c),i.Pu.H_(r),await(async function(f,m){const g=De(f);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>ge.forEach(m,(_=>ge.forEach(_.Es,(w=>g.persistence.referenceDelegate.addReference(v,_.targetId,w))).next((()=>ge.forEach(_.ds,(w=>g.persistence.referenceDelegate.removeReference(v,_.targetId,w)))))))))}catch(v){if(!Pl(v))throw v;xe(cy,"Failed to update sequence numbers: "+v)}for(const v of m){const _=v.targetId;if(!v.fromCache){const w=g.Ms.get(_),S=w.snapshotVersion,R=w.withLastLimboFreeSnapshotVersion(S);g.Ms=g.Ms.insert(_,R)}}})(i.localStore,o))}async function bM(n,e){const t=De(n);if(!t.currentUser.isEqual(e)){xe(wy,"User change. New user:",e.toKey());const i=await pS(t.localStore,e);t.currentUser=e,(function(o,c){o.mu.forEach((h=>{h.forEach((f=>{f.reject(new _e(de.CANCELLED,c))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Pu(t,i.Ls)}}function _M(n,e){const t=De(n),i=t.Au.get(e);if(i&&i.hu)return Ye().add(i.key);{let r=Ye();const o=t.Iu.get(e);if(!o)return r;for(const c of o){const h=t.Tu.get(c);r=r.unionWith(h.view.nu)}return r}}function MS(n){const e=De(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=CS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_M.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pM.bind(null,e),e.Pu.H_=nM.bind(null,e.eventManager),e.Pu.yu=sM.bind(null,e.eventManager),e}function wM(n){const e=De(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yM.bind(null,e),e}class hf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return T3(this.persistence,new x3,e.initialUser,this.serializer)}Cu(e){return new mS(oy.mi,this.serializer)}Du(e){return new k3}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hf.provider={build:()=>new hf};class xM extends hf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){et(this.persistence.referenceDelegate instanceof cf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new o3(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new mS((i=>cf.mi(i,t)),this.serializer)}}class b0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Uw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=bM.bind(null,this.syncEngine),await eM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new iM})()}createDatastore(e){const t=Hf(e.databaseInfo.databaseId),i=(function(o){return new P3(o)})(e.databaseInfo);return(function(o,c,h,f){return new B3(o,c,h,f)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,o,c,h){return new H3(i,r,o,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>Uw(this.syncEngine,t,0)),(function(){return Dw.v()?new Dw:new j3})())}createSyncEngine(e,t){return(function(r,o,c,h,f,m,g){const v=new lM(r,o,c,h,f,m);return g&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=De(t);xe(eo,"RemoteStore shutting down."),i.Ea.add(5),await zu(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}b0.provider={build:()=>new b0};class Ey{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class EM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new _e(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(r,o){const c=De(r),h={documents:o.map((v=>lf(c.serializer,v)))},f=await c.Ho("BatchGetDocuments",c.serializer.databaseId,bt.emptyPath(),h,o.length),m=new Map;f.forEach((v=>{const _=qI(c.serializer,v);m.set(_.key.toString(),_)}));const g=[];return o.forEach((v=>{const _=m.get(v.toString());et(!!_,55234,{key:v}),g.push(_)})),g})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new iy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const r=Ce.fromPath(i);this.mutations.push(new eS(r,this.precondition(r)))})),await(async function(i,r){const o=De(i),c={writes:r.map((h=>cS(o.serializer,h)))};await o.Go("Commit",o.serializer.databaseId,bt.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ie(50498,{Gu:e.constructor.name});t=ke.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new _e(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ke.min())?Pi.exists(!1):Pi.updateTime(t):Pi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ke.min()))throw new _e(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pi.updateTime(t)}return Pi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class SM{constructor(e,t,i,r,o){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=o,this.zu=i.maxAttempts,this.M_=new uy(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new EM(this.datastore),t=this.Hu(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((r=>{this.Yu(r)}))))})).catch((i=>{this.Yu(i)}))}))}Hu(e){try{const t=this.updateFunction(e);return!ju(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!tS(t)}return!1}}const da="FirestoreClient";class TM{constructor(e,t,i,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=zi.UNAUTHENTICATED,this.clientId=W0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async c=>{xe(da,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(xe(da,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=gy(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Ng(n,e){n.asyncQueue.verifyOperationInProgress(),xe(da,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await pS(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Fw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await AM(n);xe(da,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>zw(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>zw(e.remoteStore,r))),n._onlineComponents=e}async function AM(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){xe(da,"Using user provided OfflineComponentProvider");try{await Ng(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===de.FAILED_PRECONDITION||r.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;bl("Error using user provided cache. Falling back to memory cache: "+t),await Ng(n,new hf)}}else xe(da,"Using default OfflineComponentProvider"),await Ng(n,new xM(void 0));return n._offlineComponents}async function Sy(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(xe(da,"Using user provided OnlineComponentProvider"),await Fw(n,n._uninitializedComponentsProvider._online)):(xe(da,"Using default OnlineComponentProvider"),await Fw(n,new b0))),n._onlineComponents}function CM(n){return Sy(n).then((e=>e.syncEngine))}function RM(n){return Sy(n).then((e=>e.datastore))}async function df(n){const e=await Sy(n),t=e.eventManager;return t.onListen=cM.bind(null,e.syncEngine),t.onUnlisten=dM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=uM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=fM.bind(null,e.syncEngine),t}function NM(n,e,t={}){const i=new xs;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,h,f,m){const g=new Ey({next:_=>{g.Nu(),c.enqueueAndForget((()=>vy(o,v)));const w=_.docs.has(h);!w&&_.fromCache?m.reject(new _e(de.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&_.fromCache&&f&&f.source==="server"?m.reject(new _e(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(_)},error:_=>m.reject(_)}),v=new _y(Pf(h.path),g,{includeMetadataChanges:!0,qa:!0});return yy(o,v)})(await df(n),n.asyncQueue,e,t,i))),i.promise}function IM(n,e,t={}){const i=new xs;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,h,f,m){const g=new Ey({next:_=>{g.Nu(),c.enqueueAndForget((()=>vy(o,v))),_.fromCache&&f.source==="server"?m.reject(new _e(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(_)},error:_=>m.reject(_)}),v=new _y(h,g,{includeMetadataChanges:!0,qa:!0});return yy(o,v)})(await df(n),n.asyncQueue,e,t,i))),i.promise}function kS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const Hw=new Map;const jS="firestore.googleapis.com",qw=!0;class Gw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jS,this.ssl=qw}else this.host=e.host,this.ssl=e.ssl??qw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<r3)throw new _e(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}q4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kS(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new _e(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new _e(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new _e(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $f{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new D4;switch(i.type){case"firstParty":return new L4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new _e(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Hw.get(t);i&&(xe("ComponentProvider","Removing Datastore"),Hw.delete(t),i.terminate())})(this),Promise.resolve()}}function MM(n,e,t,i={}){n=nn(n,$f);const r=jl(e),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;r&&(aE(`https://${h}`),oE("Firestore",!0)),o.host!==jS&&o.host!==h&&bl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:h,ssl:r,emulatorOptions:i};if(!aa(f,c)&&(n._setSettings(f),i.mockUserToken)){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=zi.MOCK_USER;else{m=rN(i.mockUserToken,n._app?.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new _e(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new zi(v)}n._authCredentials=new O4(new wE(m,g))}}class ur{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ur(this.firestore,e,this._query)}}class Ot{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ia(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}toJSON(){return{type:Ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(ku(t,Ot._jsonSchema))return new Ot(e,i||null,new Ce(bt.fromString(t.referencePath)))}}Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:ri("string",Ot._jsonSchemaVersion),referencePath:ri("string")};class ia extends ur{constructor(e,t,i){super(e,t,Pf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new Ce(e))}withConverter(e){return new ia(this.firestore,e,this._path)}}function Je(n,e,...t){if(n=Kt(n),xE("collection","path",e),n instanceof $f){const i=bt.fromString(e,...t);return sw(i),new ia(n,null,i)}{if(!(n instanceof Ot||n instanceof ia))throw new _e(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(bt.fromString(e,...t));return sw(i),new ia(n.firestore,null,i)}}function ze(n,e,...t){if(n=Kt(n),arguments.length===1&&(e=W0.newId()),xE("doc","path",e),n instanceof $f){const i=bt.fromString(e,...t);return nw(i),new Ot(n,null,new Ce(i))}{if(!(n instanceof Ot||n instanceof ia))throw new _e(de.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(bt.fromString(e,...t));return nw(i),new Ot(n.firestore,n instanceof ia?n.converter:null,new Ce(i))}}const $w="AsyncQueue";class Kw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new uy(this,"async_queue_retry"),this._c=()=>{const i=Rg();i&&xe($w,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Rg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Rg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new xs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Pl(e))throw e;xe($w,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,rr("INTERNAL UNHANDLED ERROR: ",Yw(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=py.createAndSchedule(this,e,t,i,(o=>this.hc(o)));return this.tc.push(r),r}uc(){this.nc&&Ie(47125,{Pc:Yw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Yw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function Ww(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const r=t;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1})(n,["next","error","complete"])}class or extends $f{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new Kw,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kw(e),this._firestoreClient=void 0,await e}}}function kM(n,e){const t=typeof n=="object"?n:hE(),i=typeof n=="string"?n:tf,r=K0(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=nN("firestore");o&&MM(r,...o)}return r}function Lu(n){if(n._terminated)throw new _e(de.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||jM(n),n._firestoreClient}function jM(n){const e=n._freezeSettings(),t=(function(r,o,c,h){return new iI(r,o,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,kS(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new TM(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(r){const o=r?._online.build();return{_offline:r?._offline.build(o),_online:o}})(n._componentsProvider))}class mn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mn(Ii.fromBase64String(e))}catch(t){throw new _e(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new mn(Ii.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:mn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ku(e,mn._jsonSchema))return mn.fromBase64String(e.bytes)}}mn._jsonSchemaVersion="firestore/bytes/1.0",mn._jsonSchema={type:ri("string",mn._jsonSchemaVersion),bytes:ri("string")};class Vu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ni(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Uu{constructor(e){this._methodName=e}}class Ss{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ss._jsonSchemaVersion}}static fromJSON(e){if(ku(e,Ss._jsonSchema))return new Ss(e.latitude,e.longitude)}}Ss._jsonSchemaVersion="firestore/geoPoint/1.0",Ss._jsonSchema={type:ri("string",Ss._jsonSchemaVersion),latitude:ri("number"),longitude:ri("number")};class Ts{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ts._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ku(e,Ts._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ts(e.vectorValues);throw new _e(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ts._jsonSchemaVersion="firestore/vectorValue/1.0",Ts._jsonSchema={type:ri("string",Ts._jsonSchemaVersion),vectorValues:ri("object")};const DM=/^__.*__$/;class OM{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ma(e,this.data,this.fieldMask,t,this.fieldTransforms):new Du(e,this.data,t,this.fieldTransforms)}}class DS{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ma(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function OS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:n})}}class Kf{constructor(e,t,i,r,o,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Kf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ff(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(OS(this.Ac)&&DM.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class zM{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Hf(e)}Cc(e,t,i,r=!1){return new Kf({Ac:e,methodName:t,Dc:i,path:Ni.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bu(n){const e=n._freezeSettings(),t=Hf(n._databaseId);return new zM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ty(n,e,t,i,r,o={}){const c=n.Cc(o.merge||o.mergeFields?2:0,e,t,r);Ry("Data must be an object, but it was:",c,i);const h=LS(i,c);let f,m;if(o.merge)f=new gn(c.fieldMask),m=c.fieldTransforms;else if(o.mergeFields){const g=[];for(const v of o.mergeFields){const _=_0(e,v,t);if(!c.contains(_))throw new _e(de.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);US(g,_)||g.push(_)}f=new gn(g),m=c.fieldTransforms.filter((v=>f.covers(v.field)))}else f=null,m=c.fieldTransforms;return new OM(new Hi(h),f,m)}class Yf extends Uu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yf}}function PM(n,e,t){return new Kf({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ay extends Uu{_toFieldTransform(e){return new XE(e.path,new bu)}isEqual(e){return e instanceof Ay}}class Cy extends Uu{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=PM(this,e,!0),i=this.vc.map((o=>Ul(o,t))),r=new El(i);return new XE(e.path,r)}isEqual(e){return e instanceof Cy&&aa(this.vc,e.vc)}}function zS(n,e,t,i){const r=n.Cc(1,e,t);Ry("Data must be an object, but it was:",r,i);const o=[],c=Hi.empty();fa(i,((f,m)=>{const g=Ny(e,f,t);m=Kt(m);const v=r.yc(g);if(m instanceof Yf)o.push(g);else{const _=Ul(m,v);_!=null&&(o.push(g),c.set(g,_))}}));const h=new gn(o);return new DS(c,h,r.fieldTransforms)}function PS(n,e,t,i,r,o){const c=n.Cc(1,e,t),h=[_0(e,i,t)],f=[r];if(o.length%2!=0)throw new _e(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)h.push(_0(e,o[_])),f.push(o[_+1]);const m=[],g=Hi.empty();for(let _=h.length-1;_>=0;--_)if(!US(m,h[_])){const w=h[_];let S=f[_];S=Kt(S);const R=c.yc(w);if(S instanceof Yf)m.push(w);else{const O=Ul(S,R);O!=null&&(m.push(w),g.set(w,O))}}const v=new gn(m);return new DS(g,v,c.fieldTransforms)}function LM(n,e,t,i=!1){return Ul(t,n.Cc(i?4:3,e))}function Ul(n,e){if(VS(n=Kt(n)))return Ry("Unsupported field value:",e,n),LS(n,e);if(n instanceof Uu)return(function(i,r){if(!OS(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,r){const o=[];let c=0;for(const h of i){let f=Ul(h,r.wc(c));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),c++}return{arrayValue:{values:o}}})(n,e)}return(function(i,r){if((i=Kt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return TI(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Et.fromDate(i);return{timestampValue:of(r.serializer,o)}}if(i instanceof Et){const o=new Et(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:of(r.serializer,o)}}if(i instanceof Ss)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof mn)return{bytesValue:rS(r.serializer,i._byteString)};if(i instanceof Ot){const o=r.databaseId,c=i.firestore._databaseId;if(!c.isEqual(o))throw r.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ry(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Ts)return(function(c,h){return{mapValue:{fields:{[ME]:{stringValue:kE},[nf]:{arrayValue:{values:c.toArray().map((m=>{if(typeof m!="number")throw h.Sc("VectorValues must only contain numeric values.");return ty(h.serializer,m)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${Df(i)}`)})(n,e)}function LS(n,e){const t={};return TE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fa(n,((i,r)=>{const o=Ul(r,e.mc(i));o!=null&&(t[i]=o)})),{mapValue:{fields:t}}}function VS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Et||n instanceof Ss||n instanceof mn||n instanceof Ot||n instanceof Uu||n instanceof Ts)}function Ry(n,e,t){if(!VS(t)||!EE(t)){const i=Df(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function _0(n,e,t){if((e=Kt(e))instanceof Vu)return e._internalPath;if(typeof e=="string")return Ny(n,e);throw ff("Field path arguments must be of type string or ",n,!1,void 0,t)}const VM=new RegExp("[~\\*/\\[\\]]");function Ny(n,e,t){if(e.search(VM)>=0)throw ff(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vu(...e.split("."))._internalPath}catch{throw ff(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ff(n,e,t,i,r){const o=i&&!i.isEmpty(),c=r!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(o||c)&&(f+=" (found",o&&(f+=` in field ${i}`),c&&(f+=` in document ${r}`),f+=")"),new _e(de.INVALID_ARGUMENT,h+n+f)}function US(n,e){return n.some((t=>t.isEqual(e)))}class mf{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Wf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class UM extends mf{data(){return super.data()}}function Wf(n,e){return typeof e=="string"?Ny(n,e):e instanceof Vu?e._internalPath:e._delegate._internalPath}function BS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new _e(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Iy{}class My extends Iy{}function On(n,e,...t){let i=[];e instanceof Iy&&i.push(e),i=i.concat(t),(function(o){const c=o.filter((f=>f instanceof ky)).length,h=o.filter((f=>f instanceof Qf)).length;if(c>1||c>0&&h>0)throw new _e(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)n=r._apply(n);return n}class Qf extends My{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Qf(e,t,i)}_apply(e){const t=this._parse(e);return FS(e._query,t),new ur(e.firestore,e.converter,h0(e._query,t))}_parse(e){const t=Bu(e.firestore);return(function(o,c,h,f,m,g,v){let _;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new _e(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Xw(v,g);const S=[];for(const R of v)S.push(Qw(f,o,R));_={arrayValue:{values:S}}}else _=Qw(f,o,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Xw(v,g),_=LM(h,c,v,g==="in"||g==="not-in");return si.create(m,g,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Wn(n,e,t){const i=e,r=Wf("where",n);return Qf._create(r,i,t)}class ky extends Iy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ky(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Xn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,o){let c=r;const h=o.getFlattenedFilters();for(const f of h)FS(c,f),c=h0(c,f)})(e._query,t),new ur(e.firestore,e.converter,h0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jy extends My{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new jy(e,t)}_apply(e){const t=(function(r,o,c){if(r.startAt!==null)throw new _e(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new _e(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vu(o,c)})(e._query,this._field,this._direction);return new ur(e.firestore,e.converter,(function(r,o){const c=r.explicitOrderBy.concat([o]);return new Ll(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}}function wu(n,e="asc"){const t=e,i=Wf("orderBy",n);return jy._create(i,t)}class Dy extends My{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new Dy(e,t,i)}_apply(e){return new ur(e.firestore,e.converter,rf(e._query,this._limit,this._limitType))}}function w0(n){return G4("limit",n),Dy._create("limit",n,"F")}function Qw(n,e,t){if(typeof(t=Kt(t))=="string"){if(t==="")throw new _e(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!UE(e)&&t.indexOf("/")!==-1)throw new _e(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(bt.fromString(t));if(!Ce.isDocumentKey(i))throw new _e(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return dw(n,new Ce(i))}if(t instanceof Ot)return dw(n,t._key);throw new _e(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Df(t)}.`)}function Xw(n,e){if(!Array.isArray(n)||n.length===0)throw new _e(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FS(n,e){const t=(function(r,o){for(const c of r)for(const h of c.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new _e(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class HS{convertValue(e,t="none"){switch(ua(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ca(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return fa(e,((r,o)=>{i[r]=this.convertValue(o,t)})),i}convertVectorValue(e){const t=e.fields?.[nf].arrayValue?.values?.map((i=>Gt(i.doubleValue)));return new Ts(t)}convertGeoPoint(e){return new Ss(Gt(e.latitude),Gt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=zf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(pu(e));default:return null}}convertTimestamp(e){const t=la(e);return new Et(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=bt.fromString(e);et(dS(i),9688,{name:e});const r=new gu(i.get(1),i.get(3)),o=new Ce(i.popFirst(5));return r.isEqual(t)||rr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function Oy(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class BM extends HS{constructor(e){super(),this.firestore=e}convertBytes(e){return new mn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,t)}}class al{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class na extends mf{constructor(e,t,i,r,o,c){super(e,t,i,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ud(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Wf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=na._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}na._jsonSchemaVersion="firestore/documentSnapshot/1.0",na._jsonSchema={type:ri("string",na._jsonSchemaVersion),bundleSource:ri("string","DocumentSnapshot"),bundleName:ri("string"),bundle:ri("string")};class Ud extends na{data(e={}){return super.data(e)}}class Wa{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new al(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Ud(this._firestore,this._userDataWriter,i.key,i,new al(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((h=>{const f=new Ud(r._firestore,r._userDataWriter,h.doc.key,h.doc,new al(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((h=>o||h.type!==3)).map((h=>{const f=new Ud(r._firestore,r._userDataWriter,h.doc.key,h.doc,new al(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,g=-1;return h.type!==0&&(m=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),g=c.indexOf(h.doc.key)),{type:FM(h.type),doc:f,oldIndex:m,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Wa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=W0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function FM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}function qS(n){n=nn(n,Ot);const e=nn(n.firestore,or);return NM(Lu(e),n._key).then((t=>$S(e,n,t)))}Wa._jsonSchemaVersion="firestore/querySnapshot/1.0",Wa._jsonSchema={type:ri("string",Wa._jsonSchemaVersion),bundleSource:ri("string","QuerySnapshot"),bundleName:ri("string"),bundle:ri("string")};class Xf extends HS{constructor(e){super(),this.firestore=e}convertBytes(e){return new mn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,t)}}function yn(n){n=nn(n,ur);const e=nn(n.firestore,or),t=Lu(e),i=new Xf(e);return BS(n._query),IM(t,n._query).then((r=>new Wa(e,i,n,r)))}function GS(n,e,t){n=nn(n,Ot);const i=nn(n.firestore,or),r=Oy(n.converter,e,t);return zy(i,[Ty(Bu(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Pi.none())])}function pn(n,e,t,...i){n=nn(n,Ot);const r=nn(n.firestore,or),o=Bu(r);let c;return c=typeof(e=Kt(e))=="string"||e instanceof Vu?PS(o,"updateDoc",n._key,e,t,i):zS(o,"updateDoc",n._key,e),zy(r,[c.toMutation(n._key,Pi.exists(!0))])}function Jf(n,e){const t=nn(n.firestore,or),i=ze(n),r=Oy(n.converter,e);return zy(t,[Ty(Bu(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Pi.exists(!1))]).then((()=>i))}function sa(n,...e){n=Kt(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Ww(e[i])||(t=e[i++]);const r={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Ww(e[i])){const f=e[i];e[i]=f.next?.bind(f),e[i+1]=f.error?.bind(f),e[i+2]=f.complete?.bind(f)}let o,c,h;if(n instanceof Ot)c=nn(n.firestore,or),h=Pf(n._key.path),o={next:f=>{e[i]&&e[i]($S(c,n,f))},error:e[i+1],complete:e[i+2]};else{const f=nn(n,ur);c=nn(f.firestore,or),h=f._query;const m=new Xf(c);o={next:g=>{e[i]&&e[i](new Wa(c,m,f,g))},error:e[i+1],complete:e[i+2]},BS(n._query)}return(function(m,g,v,_){const w=new Ey(_),S=new _y(g,w,v);return m.asyncQueue.enqueueAndForget((async()=>yy(await df(m),S))),()=>{w.Nu(),m.asyncQueue.enqueueAndForget((async()=>vy(await df(m),S)))}})(Lu(c),h,r,o)}function zy(n,e){return(function(i,r){const o=new xs;return i.asyncQueue.enqueueAndForget((async()=>mM(await CM(i),r,o))),o.promise})(Lu(n),e)}function $S(n,e,t){const i=t.docs.get(e._key),r=new Xf(n);return new na(n,r,e._key,i,new al(t.hasPendingWrites,t.fromCache),e.converter)}const HM={maxAttempts:5};function Zc(n,e){if((n=Kt(n)).firestore!==e)throw new _e(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class qM{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Bu(e)}get(e){const t=Zc(e,this._firestore),i=new BM(this._firestore);return this._transaction.lookup([t._key]).then((r=>{if(!r||r.length!==1)return Ie(24041);const o=r[0];if(o.isFoundDocument())return new mf(this._firestore,i,o.key,o,t.converter);if(o.isNoDocument())return new mf(this._firestore,i,t._key,null,t.converter);throw Ie(18433,{doc:o})}))}set(e,t,i){const r=Zc(e,this._firestore),o=Oy(r.converter,t,i),c=Ty(this._dataReader,"Transaction.set",r._key,o,r.converter!==null,i);return this._transaction.set(r._key,c),this}update(e,t,i,...r){const o=Zc(e,this._firestore);let c;return c=typeof(t=Kt(t))=="string"||t instanceof Vu?PS(this._dataReader,"Transaction.update",o._key,t,i,r):zS(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,c),this}delete(e){const t=Zc(e,this._firestore);return this._transaction.delete(t._key),this}}class GM extends qM{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Zc(e,this._firestore),i=new Xf(this._firestore);return super.get(e).then((r=>new na(this._firestore,i,t._key,r._document,new al(!1,!1),t.converter)))}}function Jn(n,e,t){n=nn(n,or);const i={...HM,...t};return(function(o){if(o.maxAttempts<1)throw new _e(de.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(o,c,h){const f=new xs;return o.asyncQueue.enqueueAndForget((async()=>{const m=await RM(o);new SM(o.asyncQueue,m,h,c,f).ju()})),f.promise})(Lu(n),(r=>e(new GM(n,r))),i)}function Nt(){return new Ay("serverTimestamp")}function Py(...n){return new Cy("arrayUnion",n)}(function(e,t=!0){(function(r){Ol=r})(Dl),vl(new Ja("firestore",((i,{instanceIdentifier:r,options:o})=>{const c=i.getProvider("app").getImmediate(),h=new or(new z4(i.getProvider("auth-internal")),new V4(c,i.getProvider("app-check-internal")),(function(m,g){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new _e(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gu(m.options.projectId,g)})(c,r),c);return o={useFetchStreams:t,...o},h._setSettings(o),h}),"PUBLIC").setMultipleInstances(!0)),ea(Z_,ew,e),ea(Z_,ew,"esm2020")})();function KS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $M=KS,YS=new Iu("auth","Firebase",KS());const pf=new G0("@firebase/auth");function KM(n,...e){pf.logLevel<=$e.WARN&&pf.warn(`Auth (${Dl}): ${n}`,...e)}function Bd(n,...e){pf.logLevel<=$e.ERROR&&pf.error(`Auth (${Dl}): ${n}`,...e)}function Zn(n,...e){throw Ly(n,...e)}function As(n,...e){return Ly(n,...e)}function WS(n,e,t){const i={...$M(),[e]:t};return new Iu("auth","Firebase",i).create(e,{appName:n.name})}function ir(n){return WS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ly(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return YS.create(n,...e)}function je(n,e,...t){if(!n)throw Ly(e,...t)}function Xs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Bd(e),new Error(e)}function lr(n,e){n||Xs(e)}function x0(){return typeof self<"u"&&self.location?.href||""}function YM(){return Jw()==="http:"||Jw()==="https:"}function Jw(){return typeof self<"u"&&self.location?.protocol||null}function WM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YM()||hN()||"connection"in navigator)?navigator.onLine:!0}function QM(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Fu{constructor(e,t){this.shortDelay=e,this.longDelay=t,lr(t>e,"Short delay should be less than long delay!"),this.isMobile=lN()||dN()}get(){return WM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Vy(n,e){lr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class QS{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const XM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const JM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ZM=new Fu(3e4,6e4);function pa(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ga(n,e,t,i,r={}){return XS(n,r,async()=>{let o={},c={};i&&(e==="GET"?c=i:o={body:JSON.stringify(i)});const h=Mu({key:n.config.apiKey,...c}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:f,...o};return uN()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&jl(n.emulatorConfig.host)&&(m.credentials="include"),QS.fetch()(await JS(n,n.config.apiHost,t,h),m)})}async function XS(n,e,t){n._canInitEmulator=!1;const i={...XM,...e};try{const r=new tk(n),o=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw Ed(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const h=o.ok?c.errorMessage:c.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ed(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw Ed(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw Ed(n,"user-disabled",c);const g=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw WS(n,g,m);Zn(n,g)}}catch(r){if(r instanceof cr)throw r;Zn(n,"network-request-failed",{message:String(r)})}}async function Hu(n,e,t,i,r={}){const o=await ga(n,e,t,i,r);return"mfaPendingCredential"in o&&Zn(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function JS(n,e,t,i){const r=`${e}${t}?${i}`,o=n,c=o.config.emulator?Vy(n.config,r):`${n.config.apiScheme}://${r}`;return JM.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function ek(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(As(this.auth,"network-request-failed")),ZM.get())})}}function Ed(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=As(n,e,i);return r.customData._tokenResponse=t,r}function Zw(n){return n!==void 0&&n.enterprise!==void 0}class ik{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ek(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nk(n,e){return ga(n,"GET","/v2/recaptchaConfig",pa(n,e))}async function sk(n,e){return ga(n,"POST","/v1/accounts:delete",e)}async function gf(n,e){return ga(n,"POST","/v1/accounts:lookup",e)}function au(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rk(n,e=!1){const t=Kt(n),i=await t.getIdToken(e),r=Uy(i);je(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,c=o?.sign_in_provider;return{claims:r,token:i,authTime:au(Ig(r.auth_time)),issuedAtTime:au(Ig(r.iat)),expirationTime:au(Ig(r.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Ig(n){return Number(n)*1e3}function Uy(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Bd("JWT malformed, contained fewer than 3 sections"),null;try{const r=iE(t);return r?JSON.parse(r):(Bd("Failed to decode base64 JWT payload"),null)}catch(r){return Bd("Caught error parsing JWT payload as JSON",r?.toString()),null}}function e2(n){const e=Uy(n);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function xu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof cr&&ak(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function ak({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class ok{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class E0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function yf(n){const e=n.auth,t=await n.getIdToken(),i=await xu(n,gf(e,{idToken:t}));je(i?.users.length,e,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const o=r.providerUserInfo?.length?ZS(r.providerUserInfo):[],c=ck(n.providerData,o),h=n.isAnonymous,f=!(n.email&&r.passwordHash)&&!c?.length,m=h?f:!1,g={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:c,metadata:new E0(r.createdAt,r.lastLoginAt),isAnonymous:m};Object.assign(n,g)}async function lk(n){const e=Kt(n);await yf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ck(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function ZS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function uk(n,e){const t=await XS(n,{},async()=>{const i=Mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,c=await JS(n,r,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:i};return n.emulatorConfig&&jl(n.emulatorConfig.host)&&(f.credentials="include"),QS.fetch()(c,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function hk(n,e){return ga(n,"POST","/v2/accounts:revokeToken",pa(n,e))}class fl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):e2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){je(e.length!==0,"internal-error");const t=e2(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:o}=await uk(e,t);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:o}=t,c=new fl;return i&&(je(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),r&&(je(typeof r=="string","internal-error",{appName:e}),c.accessToken=r),o&&(je(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fl,this.toJSON())}_performRefresh(){return Xs("not implemented")}}function Hr(n,e){je(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Qn{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new ok(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new E0(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await xu(this,this.stsTokenManager.getToken(this.auth,e));return je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return rk(this,e)}reload(){return lk(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Qn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await yf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dn(this.auth.app))return Promise.reject(ir(this.auth));const e=await this.getIdToken();return await xu(this,sk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,r=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,h=t.tenantId??void 0,f=t._redirectEventId??void 0,m=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:v,emailVerified:_,isAnonymous:w,providerData:S,stsTokenManager:R}=t;je(v&&R,e,"internal-error");const O=fl.fromJSON(this.name,R);je(typeof v=="string",e,"internal-error"),Hr(i,e.name),Hr(r,e.name),je(typeof _=="boolean",e,"internal-error"),je(typeof w=="boolean",e,"internal-error"),Hr(o,e.name),Hr(c,e.name),Hr(h,e.name),Hr(f,e.name),Hr(m,e.name),Hr(g,e.name);const M=new Qn({uid:v,auth:e,email:r,emailVerified:_,displayName:i,isAnonymous:w,photoURL:c,phoneNumber:o,tenantId:h,stsTokenManager:O,createdAt:m,lastLoginAt:g});return S&&Array.isArray(S)&&(M.providerData=S.map(F=>({...F}))),f&&(M._redirectEventId=f),M}static async _fromIdTokenResponse(e,t,i=!1){const r=new fl;r.updateFromServerResponse(t);const o=new Qn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await yf(o),o}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];je(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?ZS(r.providerUserInfo):[],c=!(r.email&&r.passwordHash)&&!o?.length,h=new fl;h.updateFromIdToken(i);const f=new Qn({uid:r.localId,auth:e,stsTokenManager:h,isAnonymous:c}),m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new E0(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!o?.length};return Object.assign(f,m),f}}const t2=new Map;function Js(n){lr(n instanceof Function,"Expected a class definition");let e=t2.get(n);return e?(lr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,t2.set(n,e),e)}class e5{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}e5.type="NONE";const i2=e5;function Fd(n,e,t){return`firebase:${n}:${e}:${t}`}class ml{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Fd(this.userKey,r.apiKey,o),this.fullPersistenceKey=Fd("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await gf(this.auth,{idToken:e}).catch(()=>{});return t?Qn._fromGetAccountInfoResponse(this.auth,t,e):null}return Qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ml(Js(i2),e,i);const r=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=r[0]||Js(i2);const c=Fd(i,e.config.apiKey,e.name);let h=null;for(const m of t)try{const g=await m._get(c);if(g){let v;if(typeof g=="string"){const _=await gf(e,{idToken:g}).catch(()=>{});if(!_)break;v=await Qn._fromGetAccountInfoResponse(e,_,g)}else v=Qn._fromJSON(e,g);m!==o&&(h=v),o=m;break}}catch{}const f=r.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new ml(o,e,i):(o=f[0],h&&await o._set(c,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==o)try{await m._remove(c)}catch{}})),new ml(o,e,i))}}function n2(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(s5(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(t5(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(a5(e))return"Blackberry";if(o5(e))return"Webos";if(i5(e))return"Safari";if((e.includes("chrome/")||n5(e))&&!e.includes("edge/"))return"Chrome";if(r5(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function t5(n=Vi()){return/firefox\//i.test(n)}function i5(n=Vi()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function n5(n=Vi()){return/crios\//i.test(n)}function s5(n=Vi()){return/iemobile/i.test(n)}function r5(n=Vi()){return/android/i.test(n)}function a5(n=Vi()){return/blackberry/i.test(n)}function o5(n=Vi()){return/webos/i.test(n)}function By(n=Vi()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function dk(n=Vi()){return By(n)&&!!window.navigator?.standalone}function fk(){return fN()&&document.documentMode===10}function l5(n=Vi()){return By(n)||r5(n)||o5(n)||a5(n)||/windows phone/i.test(n)||s5(n)}function c5(n,e=[]){let t;switch(n){case"Browser":t=n2(Vi());break;case"Worker":t=`${n2(Vi())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Dl}/${i}`}class mk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((c,h)=>{try{const f=e(o);c(f)}catch(f){h(f)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function pk(n,e={}){return ga(n,"GET","/v2/passwordPolicy",pa(n,e))}const gk=6;class yk{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??gk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class vk{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new s2(this),this.idTokenSubscription=new s2(this),this.beforeStateQueue=new mk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Js(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ml.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await gf(this,{idToken:e}),i=await Qn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Dn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=i?._redirectEventId,h=await this.tryRedirectSignIn(e);(!o||o===c)&&h?.user&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await yf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dn(this.app))return Promise.reject(ir(this));const t=e?Kt(e):null;return t&&je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dn(this.app)?Promise.reject(ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dn(this.app)?Promise.reject(ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Js(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pk(this),t=new yk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Iu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await hk(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Js(e)||this._popupRedirectResolver;je(t,this,"argument-error"),this.redirectPersistenceManager=await ml.create(this,[Js(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(h,this,"internal-error"),h.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,i,r);return()=>{c=!0,f()}}else{const f=e.addObserver(t);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=c5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&KM(`Error while retrieving App Check token: ${e.error}`),e?.token}}function co(n){return Kt(n)}class s2{constructor(e){this.auth=e,this.observer=null,this.addObserver=wN(t=>this.observer=t)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Zf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bk(n){Zf=n}function u5(n){return Zf.loadJS(n)}function _k(){return Zf.recaptchaEnterpriseScript}function wk(){return Zf.gapiScript}function xk(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Ek{constructor(){this.enterprise=new Sk}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Sk{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Tk="recaptcha-enterprise",h5="NO_RECAPTCHA";class Ak{constructor(e){this.type=Tk,this.auth=co(e)}async verify(e="verify",t=!1){async function i(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,h)=>{nk(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new ik(f);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,c(m.siteKey)}}).catch(f=>{h(f)})})}function r(o,c,h){const f=window.grecaptcha;Zw(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(m=>{c(m)}).catch(()=>{c(h5)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Ek().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{i(this.auth).then(h=>{if(!t&&Zw(window.grecaptcha))r(h,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=_k();f.length!==0&&(f+=h),u5(f).then(()=>{r(h,o,c)}).catch(m=>{c(m)})}}).catch(h=>{c(h)})})}}async function r2(n,e,t,i=!1,r=!1){const o=new Ak(n);let c;if(r)c=h5;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function S0(n,e,t,i,r){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await r2(n,e,t,t==="getOobCode");return i(n,o)}else return i(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await r2(n,e,t,t==="getOobCode");return i(n,c)}else return Promise.reject(o)})}function Ck(n,e){const t=K0(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),o=t.getOptions();if(aa(o,e??{}))return r;Zn(r,"already-initialized")}return t.initialize({options:e})}function Rk(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Js);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function Nk(n,e,t){const i=co(n);je(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=d5(e),{host:c,port:h}=Ik(e),f=h===null?"":`:${h}`,m={url:`${o}//${c}${f}/`},g=Object.freeze({host:c,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){je(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),je(aa(m,i.config.emulator)&&aa(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,jl(c)?(aE(`${o}//${c}${f}`),oE("Auth",!0)):Mk()}function d5(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Ik(n){const e=d5(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:a2(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:a2(c)}}}function a2(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Mk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class Fy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xs("not implemented")}_getIdTokenResponse(e){return Xs("not implemented")}_linkToIdToken(e,t){return Xs("not implemented")}_getReauthenticationResolver(e){return Xs("not implemented")}}async function kk(n,e){return ga(n,"POST","/v1/accounts:signUp",e)}async function jk(n,e){return Hu(n,"POST","/v1/accounts:signInWithPassword",pa(n,e))}async function Dk(n,e){return Hu(n,"POST","/v1/accounts:signInWithEmailLink",pa(n,e))}async function Ok(n,e){return Hu(n,"POST","/v1/accounts:signInWithEmailLink",pa(n,e))}class Eu extends Fy{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Eu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Eu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return S0(e,t,"signInWithPassword",jk);case"emailLink":return Dk(e,{email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return S0(e,i,"signUpPassword",kk);case"emailLink":return Ok(e,{idToken:t,email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function pl(n,e){return Hu(n,"POST","/v1/accounts:signInWithIdp",pa(n,e))}const zk="http://localhost";class to extends Fy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new to(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Zn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=t;if(!i||!r)return null;const c=new to(i,r);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return pl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,pl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pl(e,t)}buildRequest(){const e={requestUri:zk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Mu(t)}return e}}function Pk(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Lk(n){const e=Yc(Wc(n)).link,t=e?Yc(Wc(e)).deep_link_id:null,i=Yc(Wc(n)).deep_link_id;return(i?Yc(Wc(i)).link:null)||i||t||e||n}class Hy{constructor(e){const t=Yc(Wc(e)),i=t.apiKey??null,r=t.oobCode??null,o=Pk(t.mode??null);je(i&&r&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Lk(e);try{return new Hy(t)}catch{return null}}}class Bl{constructor(){this.providerId=Bl.PROVIDER_ID}static credential(e,t){return Eu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Hy.parseLink(t);return je(i,"argument-error"),Eu._fromEmailAndCode(e,i.code,i.tenantId)}}Bl.PROVIDER_ID="password";Bl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class f5{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class qu extends f5{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class $r extends qu{constructor(){super("facebook.com")}static credential(e){return to._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.FACEBOOK_SIGN_IN_METHOD="facebook.com";$r.PROVIDER_ID="facebook.com";class Kr extends qu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return to._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Kr.credential(t,i)}catch{return null}}}Kr.GOOGLE_SIGN_IN_METHOD="google.com";Kr.PROVIDER_ID="google.com";class Yr extends qu{constructor(){super("github.com")}static credential(e){return to._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yr.credential(e.oauthAccessToken)}catch{return null}}}Yr.GITHUB_SIGN_IN_METHOD="github.com";Yr.PROVIDER_ID="github.com";class Wr extends qu{constructor(){super("twitter.com")}static credential(e,t){return to._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Wr.credential(t,i)}catch{return null}}}Wr.TWITTER_SIGN_IN_METHOD="twitter.com";Wr.PROVIDER_ID="twitter.com";async function Vk(n,e){return Hu(n,"POST","/v1/accounts:signUp",pa(n,e))}class io{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const o=await Qn._fromIdTokenResponse(e,i,r),c=o2(i);return new io({user:o,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=o2(i);return new io({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function o2(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class vf extends cr{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,vf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new vf(e,t,i,r)}}function m5(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?vf._fromErrorAndOperation(n,o,e,i):o})}async function Uk(n,e,t=!1){const i=await xu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return io._forOperation(n,"link",i)}async function Bk(n,e,t=!1){const{auth:i}=n;if(Dn(i.app))return Promise.reject(ir(i));const r="reauthenticate";try{const o=await xu(n,m5(i,r,e,n),t);je(o.idToken,i,"internal-error");const c=Uy(o.idToken);je(c,i,"internal-error");const{sub:h}=c;return je(n.uid===h,i,"user-mismatch"),io._forOperation(n,r,o)}catch(o){throw o?.code==="auth/user-not-found"&&Zn(i,"user-mismatch"),o}}async function p5(n,e,t=!1){if(Dn(n.app))return Promise.reject(ir(n));const i="signIn",r=await m5(n,i,e),o=await io._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(o.user),o}async function Fk(n,e){return p5(co(n),e)}async function g5(n){const e=co(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Hk(n,e,t){if(Dn(n.app))return Promise.reject(ir(n));const i=co(n),c=await S0(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Vk).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&g5(n),f}),h=await io._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(h.user),h}function qk(n,e,t){return Dn(n.app)?Promise.reject(ir(n)):Fk(Kt(n),Bl.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&g5(n),i})}function Gk(n,e,t,i){return Kt(n).onIdTokenChanged(e,t,i)}function $k(n,e,t){return Kt(n).beforeAuthStateChanged(e,t)}function Kk(n,e,t,i){return Kt(n).onAuthStateChanged(e,t,i)}function Yk(n){return Kt(n).signOut()}const bf="__sak";class y5{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bf,"1"),this.storage.removeItem(bf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Wk=1e3,Qk=10;class v5 extends y5{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=l5(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,f)=>{this.notifyListeners(c,f)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);fk()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Qk):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Wk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}v5.type="LOCAL";const Xk=v5;class b5 extends y5{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}b5.type="SESSION";const _5=b5;function Jk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class em{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new em(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:o}=t.data,c=this.handlersMap[r];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const h=Array.from(c).map(async m=>m(t.origin,o)),f=await Jk(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}em.receivers=[];function qy(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}class Zk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,c;return new Promise((h,f)=>{const m=qy("",20);r.port1.start();const g=setTimeout(()=>{f(new Error("unsupported_event"))},i);c={messageChannel:r,onMessage(v){const _=v;if(_.data.eventId===m)switch(_.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(_.data.response);break;default:clearTimeout(g),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Cs(){return window}function e6(n){Cs().location.href=n}function w5(){return typeof Cs().WorkerGlobalScope<"u"&&typeof Cs().importScripts=="function"}async function t6(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function i6(){return navigator?.serviceWorker?.controller||null}function n6(){return w5()?self:null}const x5="firebaseLocalStorageDb",s6=1,_f="firebaseLocalStorage",E5="fbase_key";class Gu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function tm(n,e){return n.transaction([_f],e?"readwrite":"readonly").objectStore(_f)}function r6(){const n=indexedDB.deleteDatabase(x5);return new Gu(n).toPromise()}function T0(){const n=indexedDB.open(x5,s6);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(_f,{keyPath:E5})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(_f)?e(i):(i.close(),await r6(),e(await T0()))})})}async function l2(n,e,t){const i=tm(n,!0).put({[E5]:e,value:t});return new Gu(i).toPromise()}async function a6(n,e){const t=tm(n,!1).get(e),i=await new Gu(t).toPromise();return i===void 0?null:i.value}function c2(n,e){const t=tm(n,!0).delete(e);return new Gu(t).toPromise()}const o6=800,l6=3;class S5{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await T0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>l6)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return w5()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=em._getInstance(n6()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await t6(),!this.activeServiceWorker)return;this.sender=new Zk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||i6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await T0();return await l2(e,bf,"1"),await c2(e,bf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>l2(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>a6(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>c2(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=tm(r,!1).getAll();return new Gu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),o6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}S5.type="LOCAL";const c6=S5;new Fu(3e4,6e4);function u6(n,e){return e?Js(e):(je(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Gy extends Fy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return pl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return pl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function h6(n){return p5(n.auth,new Gy(n),n.bypassAuthState)}function d6(n){const{auth:e,user:t}=n;return je(t,e,"internal-error"),Bk(t,new Gy(n),n.bypassAuthState)}async function f6(n){const{auth:e,user:t}=n;return je(t,e,"internal-error"),Uk(t,new Gy(n),n.bypassAuthState)}class T5{constructor(e,t,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:o,error:c,type:h}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return h6;case"linkViaPopup":case"linkViaRedirect":return f6;case"reauthViaPopup":case"reauthViaRedirect":return d6;default:Zn(this.auth,"internal-error")}}resolve(e){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const m6=new Fu(2e3,1e4);class ol extends T5{constructor(e,t,i,r,o){super(e,t,r,o),this.provider=i,this.authWindow=null,this.pollId=null,ol.currentPopupAction&&ol.currentPopupAction.cancel(),ol.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){lr(this.filter.length===1,"Popup operations only handle one event");const e=qy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(As(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(As(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ol.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(As(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,m6.get())};e()}}ol.currentPopupAction=null;const p6="pendingRedirect",Hd=new Map;class g6 extends T5{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Hd.get(this.auth._key());if(!e){try{const i=await y6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Hd.set(this.auth._key(),e)}return this.bypassAuthState||Hd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function y6(n,e){const t=_6(e),i=b6(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function v6(n,e){Hd.set(n._key(),e)}function b6(n){return Js(n._redirectPersistence)}function _6(n){return Fd(p6,n.config.apiKey,n.name)}async function w6(n,e,t=!1){if(Dn(n.app))return Promise.reject(ir(n));const i=co(n),r=u6(i,e),c=await new g6(i,r,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}const x6=600*1e3;class E6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!S6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!A5(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(As(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=x6&&this.cachedEventUids.clear(),this.cachedEventUids.has(u2(e))}saveEventToCache(e){this.cachedEventUids.add(u2(e)),this.lastProcessedEventTime=Date.now()}}function u2(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function A5({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function S6(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return A5(n);default:return!1}}async function T6(n,e={}){return ga(n,"GET","/v1/projects",e)}const A6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,C6=/^https?/;async function R6(n){if(n.config.emulator)return;const{authorizedDomains:e}=await T6(n);for(const t of e)try{if(N6(t))return}catch{}Zn(n,"unauthorized-domain")}function N6(n){const e=x0(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!C6.test(t))return!1;if(A6.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const I6=new Fu(3e4,6e4);function h2(){const n=Cs().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function M6(n){return new Promise((e,t)=>{function i(){h2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{h2(),t(As(n,"network-request-failed"))},timeout:I6.get()})}if(Cs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Cs().gapi?.load)i();else{const r=xk("iframefcb");return Cs()[r]=()=>{gapi.load?i():t(As(n,"network-request-failed"))},u5(`${wk()}?onload=${r}`).catch(o=>t(o))}}).catch(e=>{throw qd=null,e})}let qd=null;function k6(n){return qd=qd||M6(n),qd}const j6=new Fu(5e3,15e3),D6="__/auth/iframe",O6="emulator/auth/iframe",z6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},P6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function L6(n){const e=n.config;je(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Vy(e,O6):`https://${n.config.authDomain}/${D6}`,i={apiKey:e.apiKey,appName:n.name,v:Dl},r=P6.get(n.config.apiHost);r&&(i.eid=r);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${Mu(i).slice(1)}`}async function V6(n){const e=await k6(n),t=Cs().gapi;return je(t,n,"internal-error"),e.open({where:document.body,url:L6(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:z6,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const c=As(n,"network-request-failed"),h=Cs().setTimeout(()=>{o(c)},j6.get());function f(){Cs().clearTimeout(h),r(i)}i.ping(f).then(f,()=>{o(c)})}))}const U6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},B6=500,F6=600,H6="_blank",q6="http://localhost";class d2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function G6(n,e,t,i=B6,r=F6){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const f={...U6,width:i.toString(),height:r.toString(),top:o,left:c},m=Vi().toLowerCase();t&&(h=n5(m)?H6:t),t5(m)&&(e=e||q6,f.scrollbars="yes");const g=Object.entries(f).reduce((_,[w,S])=>`${_}${w}=${S},`,"");if(dk(m)&&h!=="_self")return $6(e||"",h),new d2(null);const v=window.open(e||"",h,g);je(v,n,"popup-blocked");try{v.focus()}catch{}return new d2(v)}function $6(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const K6="__/auth/handler",Y6="emulator/auth/handler",W6=encodeURIComponent("fac");async function f2(n,e,t,i,r,o){je(n.config.authDomain,n,"auth-domain-config-required"),je(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Dl,eventId:r};if(e instanceof f5){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",_N(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))c[g]=v}if(e instanceof qu){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(c.scopes=g.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const f=await n._getAppCheckToken(),m=f?`#${W6}=${encodeURIComponent(f)}`:"";return`${Q6(n)}?${Mu(h).slice(1)}${m}`}function Q6({config:n}){return n.emulator?Vy(n,Y6):`https://${n.authDomain}/${K6}`}const Mg="webStorageSupport";class X6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_5,this._completeRedirectFn=w6,this._overrideRedirectResult=v6}async _openPopup(e,t,i,r){lr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await f2(e,t,i,x0(),r);return G6(e,o,qy())}async _openRedirect(e,t,i,r){await this._originValidation(e);const o=await f2(e,t,i,x0(),r);return e6(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(lr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await V6(e),i=new E6(e);return t.register("authEvent",r=>(je(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Mg,{type:Mg},r=>{const o=r?.[0]?.[Mg];o!==void 0&&t(!!o),Zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=R6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return l5()||i5()||By()}}const J6=X6;var m2="@firebase/auth",p2="1.12.0";class Z6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ej(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tj(n){vl(new Ja("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;je(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:c5(n)},m=new vk(i,r,o,f);return Rk(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),vl(new Ja("auth-internal",e=>{const t=co(e.getProvider("auth").getImmediate());return(i=>new Z6(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ea(m2,p2,ej(n)),ea(m2,p2,"esm2020")}const ij=300,nj=rE("authIdTokenMaxAge")||ij;let g2=null;const sj=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>nj)return;const r=t?.token;g2!==r&&(g2=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function rj(n=hE()){const e=K0(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Ck(n,{popupRedirectResolver:J6,persistence:[c6,Xk,_5]}),i=rE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const c=sj(o.toString());$k(t,c,()=>c(t.currentUser)),Gk(t,h=>c(h))}}const r=nE("auth");return r&&Nk(t,`http://${r}`),t}function aj(){return document.getElementsByTagName("head")?.[0]??document}bk({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const o=As("internal-error");o.customData=r,t(o)},i.type="text/javascript",i.charset="UTF-8",aj().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tj("Browser");const oj={apiKey:"AIzaSyDlWowXiwgWELXeeDKlHJkoaBvEwnaI4k4",authDomain:"k21111.firebaseapp.com",projectId:"k21111",storageBucket:"k21111.firebasestorage.app",messagingSenderId:"1018659715124",appId:"1:1018659715124:web:f9808f2c3651db36f3b261",measurementId:"G-R6XPH5S6W9"},C5=uE(oj),we=kM(C5),ll=rj(C5),Dt=n=>{if(n===0)return"$0.00";if(n<0)return"-$"+Dt(Math.abs(n)).substring(1);const e=[{value:1e100,label:"G"},{value:1e33,label:"D"},{value:1e30,label:"N"},{value:1e27,label:"O"},{value:1e24,label:"S"},{value:1e21,label:"s"},{value:1e18,label:"Q"},{value:1e15,label:"q"},{value:1e12,label:"T"},{value:1e9,label:"B"},{value:1e6,label:"M"},{value:1e3,label:"K"}];for(let t=0;t<e.length;t++)if(n>=e[t].value){const i=(n/e[t].value).toFixed(2);return"$"+parseFloat(i).toString()+e[t].label}return"$"+n.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})},R5=$.createContext(void 0),lj=({children:n})=>{const[e,t]=$.useState(null),[i,r]=$.useState(!0);$.useEffect(()=>Kk(ll,async m=>{m?await o(m.uid):t(null),r(!1)}),[]);const o=async f=>{try{const m=ze(we,"users",f),g=await qS(m);if(g.exists()){const v=g.data();let _={id:g.id,...v};const w=v.lastEarningsCheck?.toDate()?v.lastEarningsCheck.toDate():new Date,S=new Date,R=S.getTime()-w.getTime(),O=Math.floor(R/(1e3*60*60*24));if(O>0&&v.ownedCompanies&&v.ownedCompanies.length>0){let U=0;if(v.ownedCompanies.forEach(N=>{U+=(parseFloat(N.dailyValue)||0)*O}),U>0){const N=(v.balance||0)+U;await pn(m,{balance:N,lastEarningsCheck:Nt()}),_.balance=N,console.log(`Corporate Earnings: $${Dt(U)}`)}}const M=v.lastResourceClaim?.toDate()||v.createdAt?.toDate()||new Date,F=Math.floor((S.getTime()-M.getTime())/864e5);if(F>0){const U=On(Je(we,"game_map"),Wn("ownerId","==",f)),E=(await yn(U)).size;if(E>0){const T=E*F,I={...v.resources||{}};Object.keys(I).forEach(z=>{I[z]=(I[z]||0)+T}),await pn(m,{resources:I,lastResourceClaim:Nt()}),_.resources=I}else await pn(m,{lastResourceClaim:Nt()})}const H=On(Je(we,"loans"),Wn("borrowerId","==",f),Wn("status","==","active")),G=await yn(H);let X=!1;for(const U of G.docs){const E=U.data().deadline?.toDate();E&&S>E&&(X=!0,await pn(ze(we,"loans",U.id),{status:"overdue"}))}X&&(_.balance||0)>0&&(await pn(m,{balance:0}),_.balance=0),t(_)}}catch(m){console.error("Critical Uplink Error:",m)}},c=async()=>{await Yk(ll)},h=async()=>{ll.currentUser&&await o(ll.currentUser.uid)};return d.jsx(R5.Provider,{value:{user:e,loading:i,refreshUser:h,logout:c},children:!i&&n})},Mi=()=>{const n=$.useContext(R5);if(!n)throw new Error("useAuth must be used within AuthProvider");return n};const cj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),uj=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),y2=n=>{const e=uj(n);return e.charAt(0).toUpperCase()+e.slice(1)},N5=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),hj=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var dj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const fj=$.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:r="",children:o,iconNode:c,...h},f)=>$.createElement("svg",{ref:f,...dj,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:N5("lucide",r),...!o&&!hj(h)&&{"aria-hidden":"true"},...h},[...c.map(([m,g])=>$.createElement(m,g)),...Array.isArray(o)?o:[o]]));const Ee=(n,e)=>{const t=$.forwardRef(({className:i,...r},o)=>$.createElement(fj,{ref:o,iconNode:e,className:N5(`lucide-${cj(y2(n))}`,`lucide-${n}`,i),...r}));return t.displayName=y2(n),t};const mj=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Fl=Ee("activity",mj);const pj=[["path",{d:"M12 6v16",key:"nqf5sj"}],["path",{d:"m19 13 2-1a9 9 0 0 1-18 0l2 1",key:"y7qv08"}],["path",{d:"M9 11h6",key:"1fldmi"}],["circle",{cx:"12",cy:"4",r:"2",key:"muu5ef"}]],$c=Ee("anchor",pj);const gj=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],yj=Ee("archive",gj);const vj=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],im=Ee("arrow-left",vj);const bj=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],nm=Ee("arrow-right-left",bj);const _j=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],wj=Ee("arrow-right",_j);const xj=[["rect",{x:"14",y:"14",width:"4",height:"6",rx:"2",key:"p02svl"}],["rect",{x:"6",y:"4",width:"4",height:"6",rx:"2",key:"xm4xkj"}],["path",{d:"M6 20h4",key:"1i6q5t"}],["path",{d:"M14 10h4",key:"ru81e7"}],["path",{d:"M6 14h2v6",key:"16z9wg"}],["path",{d:"M14 4h2v6",key:"1idq9u"}]],Ej=Ee("binary",xj);const Sj=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],v2=Ee("bot",Sj);const Tj=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],I5=Ee("brain",Tj);const Aj=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],M5=Ee("briefcase",Aj);const Cj=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],sm=Ee("building-2",Cj);const Rj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Nj=Ee("circle-check-big",Rj);const Ij=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Mj=Ee("circle-check",Ij);const kj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kg=Ee("clock",kj);const jj=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],Dj=Ee("coins",jj);const Oj=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],rm=Ee("cpu",Oj);const zj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],am=Ee("crosshair",zj);const Pj=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],k5=Ee("crown",Pj);const Lj=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],j5=Ee("database",Lj);const Vj=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],D5=Ee("factory",Vj);const Uj=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],O5=Ee("fingerprint-pattern",Uj);const Bj=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]],Fj=Ee("gamepad-2",Bj);const Hj=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],qj=Ee("gauge",Hj);const Gj=[["path",{d:"M10.5 3 8 9l4 13 4-13-2.5-6",key:"b3dvk1"}],["path",{d:"M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z",key:"7w4byz"}],["path",{d:"M2 9h20",key:"16fsjt"}]],Qa=Ee("gem",Gj);const $j=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],$y=Ee("globe",$j);const Kj=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],Yj=Ee("handshake",Kj);const Wj=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],z5=Ee("hash",Wj);const Qj=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Gd=Ee("house",Qj);const Xj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],A0=Ee("info",Xj);const Jj=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Sd=Ee("key",Jj);const Zj=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],Ky=Ee("landmark",Zj);const eD=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],C0=Ee("layers",eD);const tD=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],wf=Ee("layout-dashboard",tD);const iD=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],b2=Ee("log-out",iD);const nD=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],P5=Ee("map",nD);const sD=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Yy=Ee("message-square",sD);const rD=[["path",{d:"M5 12h14",key:"1ays0h"}]],aD=Ee("minus",rD);const oD=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],lD=Ee("monitor",oD);const cD=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],uD=Ee("newspaper",cD);const hD=[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]],dD=Ee("package-open",hD);const fD=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],_2=Ee("palette",fD);const mD=[["path",{d:"m14 13-8.381 8.38a1 1 0 0 1-3.001-3L11 9.999",key:"1lw9ds"}],["path",{d:"M15.973 4.027A13 13 0 0 0 5.902 2.373c-1.398.342-1.092 2.158.277 2.601a19.9 19.9 0 0 1 5.822 3.024",key:"ffj4ej"}],["path",{d:"M16.001 11.999a19.9 19.9 0 0 1 3.024 5.824c.444 1.369 2.26 1.676 2.603.278A13 13 0 0 0 20 8.069",key:"8tj4zw"}],["path",{d:"M18.352 3.352a1.205 1.205 0 0 0-1.704 0l-5.296 5.296a1.205 1.205 0 0 0 0 1.704l2.296 2.296a1.205 1.205 0 0 0 1.704 0l5.296-5.296a1.205 1.205 0 0 0 0-1.704z",key:"hh6h97"}]],L5=Ee("pickaxe",mD);const pD=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],jg=Ee("plane",pD);const gD=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],yD=Ee("play",gD);const vD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],V5=Ee("plus",vD);const bD=[["path",{d:"M19.07 4.93A10 10 0 0 0 6.99 3.34",key:"z3du51"}],["path",{d:"M4 6h.01",key:"oypzma"}],["path",{d:"M2.29 9.62A10 10 0 1 0 21.31 8.35",key:"qzzz0"}],["path",{d:"M16.24 7.76A6 6 0 1 0 8.23 16.67",key:"1yjesh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M17.99 11.66A6 6 0 0 1 15.77 16.67",key:"1u2y91"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"m13.41 10.59 5.66-5.66",key:"mhq4k0"}]],_D=Ee("radar",bD);const wD=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],U5=Ee("radio",wD);const xD=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ED=Ee("rotate-ccw",xD);const SD=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Wy=Ee("send",SD);const TD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],B5=Ee("shield-alert",TD);const AD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Qy=Ee("shield-check",AD);const CD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],R0=Ee("shield",CD);const RD=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],ND=Ee("shopping-cart",RD);const ID=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],F5=Ee("store",ID);const MD=[["path",{d:"m11 19-6-6",key:"s7kpr"}],["path",{d:"m5 21-2-2",key:"1kw20b"}],["path",{d:"m8 16-4 4",key:"1oqv8h"}],["path",{d:"M9.5 17.5 21 6V3h-3L6.5 14.5",key:"pkxemp"}]],om=Ee("sword",MD);const kD=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],N0=Ee("swords",kD);const jD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],lm=Ee("target",jD);const DD=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],H5=Ee("terminal",DD);const OD=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],zD=Ee("trending-down",OD);const PD=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Su=Ee("trending-up",PD);const LD=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],VD=Ee("triangle-alert",LD);const UD=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],BD=Ee("trophy",UD);const FD=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],w2=Ee("truck",FD);const HD=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],q5=Ee("upload",HD);const qD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],cm=Ee("users",qD);const GD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],G5=Ee("x",GD);const $D=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],hr=Ee("zap",$D),$5=$.createContext(void 0),KD=({children:n})=>{const[e,t]=$.useState({message:"",title:"",visible:!1}),[i,r]=$.useState(null),[o,c]=$.useState(null),[h,f]=$.useState(""),[m,g]=$.useState([]),v=$.useCallback((M,F="SYSTEM_NOTIFICATION")=>{t({message:M,title:F,visible:!0})},[]),_=$.useCallback((M,F="AUTHORIZATION_REQUIRED")=>new Promise(H=>{r({message:M,title:F,visible:!0,resolve:H})}),[]),w=$.useCallback((M,F="",H="INPUT_REQUIRED")=>(f(F),new Promise(G=>{c({message:M,defaultValue:F,title:H,visible:!0,resolve:G})})),[]),S=$.useCallback((M,F=3e3)=>{const H=Date.now();g(G=>[...G,{id:H,message:M,visible:!0}]),setTimeout(()=>{g(G=>G.filter(X=>X.id!==H))},F)},[]),R=M=>{i&&(i.resolve(M),r(null))},O=M=>{o&&(o.resolve(M),c(null),f(""))};return d.jsxs($5.Provider,{value:{showAlert:v,showConfirm:_,showPrompt:w,showToast:S},children:[n,e.visible&&d.jsx("div",{className:"terminal-modal-overlay",children:d.jsxs("div",{className:"terminal-modal card-glow",children:[d.jsx("div",{className:"scanline"}),d.jsxs("div",{className:"modal-header",children:[d.jsx(B5,{size:18,color:"var(--primary)"}),d.jsx("span",{className:"micro-label",children:e.title})]}),d.jsx("div",{className:"modal-body",children:d.jsx("p",{children:e.message})}),d.jsx("div",{className:"modal-footer",children:d.jsx("button",{className:"primary",onClick:()=>t({...e,visible:!1}),children:"ACKNOWLEDGE"})})]})}),i?.visible&&d.jsx("div",{className:"terminal-modal-overlay",children:d.jsxs("div",{className:"terminal-modal card-glow confirm",children:[d.jsx("div",{className:"scanline"}),d.jsxs("div",{className:"modal-header",children:[d.jsx(A0,{size:18,color:"var(--warning)"}),d.jsx("span",{className:"micro-label",children:i.title})]}),d.jsx("div",{className:"modal-body",children:d.jsx("p",{children:i.message})}),d.jsxs("div",{className:"modal-footer",style:{gap:"1rem"},children:[d.jsx("button",{className:"primary outline",style:{flex:1},onClick:()=>R(!1),children:"ABORT"}),d.jsx("button",{className:"primary",style:{flex:1},onClick:()=>R(!0),children:"EXECUTE"})]})]})}),o?.visible&&d.jsx("div",{className:"terminal-modal-overlay",children:d.jsxs("div",{className:"terminal-modal card-glow prompt",children:[d.jsx("div",{className:"scanline"}),d.jsxs("div",{className:"modal-header",children:[d.jsx(A0,{size:18,color:"var(--accent)"}),d.jsx("span",{className:"micro-label",children:o.title})]}),d.jsxs("div",{className:"modal-body",children:[d.jsx("p",{style:{marginBottom:"1rem"},children:o.message}),d.jsx("input",{autoFocus:!0,type:"text",className:"mono",value:h,onChange:M=>f(M.target.value),onKeyDown:M=>{M.key==="Enter"&&O(h),M.key==="Escape"&&O(null)},style:{width:"100%",background:"rgba(0,0,0,0.3)",border:"1px solid var(--accent)",padding:"0.75rem",color:"var(--text-main)",fontSize:"1rem"}})]}),d.jsxs("div",{className:"modal-footer",style:{gap:"1rem"},children:[d.jsx("button",{className:"primary outline",style:{flex:1},onClick:()=>O(null),children:"CANCEL"}),d.jsx("button",{className:"primary",style:{flex:1,background:"var(--accent)"},onClick:()=>O(h),children:"SUBMIT"})]})]})}),d.jsx("div",{className:"toast-container",children:m.map(M=>d.jsxs("div",{className:"terminal-toast",children:[d.jsx(Mj,{size:14,color:"var(--success)"}),d.jsx("span",{className:"micro-label",children:M.message})]},M.id))}),d.jsx("style",{children:`
                .terminal-modal-overlay {
                    position: fixed;
                    inset: 0;
                    background: rgba(0,0,0,0.85);
                    backdrop-filter: blur(8px);
                    z-index: 9999;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    padding: 2rem;
                    animation: fadeIn 0.2s ease-out;
                }
                .terminal-modal {
                    width: 100%;
                    max-width: 400px;
                    background: #0a0b13;
                    border: 1px solid var(--border-bright);
                    border-radius: 20px;
                    padding: 2rem;
                    position: relative;
                    overflow: hidden;
                    box-shadow: 0 0 50px rgba(0,0,0,0.5), 0 0 20px var(--primary-glow);
                }
                .terminal-modal.confirm {
                    border-color: var(--warning);
                    box-shadow: 0 0 50px rgba(0,0,0,0.5), 0 0 20px rgba(245, 158, 11, 0.2);
                }
                .modal-header {
                    display: flex;
                    align-items: center;
                    gap: 0.75rem;
                    margin-bottom: 1.5rem;
                    opacity: 0.8;
                }
                .modal-body {
                    margin-bottom: 2rem;
                }
                .modal-body p {
                    font-size: 1rem;
                    line-height: 1.6;
                    color: var(--text-main);
                    font-family: 'JetBrains Mono', monospace;
                }
                .modal-footer {
                    display: flex;
                    justify-content: flex-end;
                }
                .modal-footer button {
                    padding: 1rem 2rem;
                    font-size: 0.8rem;
                    letter-spacing: 2px;
                }

                .toast-container {
                    position: fixed;
                    top: 2rem;
                    right: 2rem;
                    z-index: 10000;
                    display: flex;
                    flex-direction: column;
                    gap: 0.75rem;
                }
                .terminal-toast {
                    background: rgba(10, 11, 19, 0.9);
                    backdrop-filter: blur(10px);
                    border: 1px solid var(--success);
                    padding: 0.75rem 1.25rem;
                    border-radius: 12px;
                    display: flex;
                    align-items: center;
                    gap: 0.75rem;
                    box-shadow: 0 5px 20px rgba(0,0,0,0.3);
                    animation: slideInRight 0.3s cubic-bezier(0, 0, 0.2, 1);
                }

                @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
                @keyframes slideInRight { 
                    from { transform: translateX(100%); opacity: 0; } 
                    to { transform: translateX(0); opacity: 1; } 
                }
                
                @media (max-width: 480px) {
                    .toast-container { right: 1rem; left: 1rem; top: 1rem; }
                    .terminal-modal { padding: 1.25rem; max-width: 90vw; }
                    .modal-footer button { padding: 0.8rem 1rem; letter-spacing: 1px; }
                }

            `})]})},$u=()=>{const n=$.useContext($5);if(!n)throw new Error("useTerminal must be used within TerminalProvider");return n},YD=()=>{const{user:n}=Mi(),[e,t]=$.useState([]),[i,r]=$.useState([]),[o,c]=$.useState(0);if($.useEffect(()=>{if(!n)return;const w=On(Je(we,"users"),wu("balance","desc"),w0(5)),S=sa(w,H=>{t(H.docs.map(G=>({id:G.id,...G.data()})))}),R=On(Je(we,"activities"),Wn("userId","==",n?.id),wu("timestamp","desc"),w0(10)),O=sa(R,H=>{r(H.docs.map(G=>G.data()))}),M=On(Je(we,"game_map"),Wn("ownerId","==",n?.id)),F=sa(M,H=>{c(H.size)});return()=>{S(),O(),F()}},[n]),!n)return d.jsx("div",{className:"page-container fade-in",style:{padding:"1rem"},children:d.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:d.jsx("p",{children:"Loading..."})})});const h=n.balance||0,f=n.ownedWeapons?.filter(w=>w.type==="Defense").reduce((w,S)=>w+(S.power||0)*(S.quantity||1),0)||0,m=Math.min(Math.floor(f/5e3*100),100),g=h>1e9?"S":h>1e8?"A":h>1e7?"B":h>1e6?"C":"D",v=n.ownedCompanies?.reduce((w,S)=>w+(S.dailyValue||0),0)||0,_=h>0?(v/h*100).toFixed(2):"0.00";return d.jsxs("div",{className:"page-container fade-in",style:{padding:"1rem"},children:[d.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{color:"var(--primary)",letterSpacing:"2px",fontSize:"0.65rem"},children:"_: _"}),d.jsx("h1",{className:"text-gradient",style:{fontSize:"1.8rem",margin:0},children:" "})]}),d.jsxs("div",{className:"system-status",style:{padding:"0.3rem 0.6rem",background:"rgba(99, 102, 241, 0.05)",borderColor:"rgba(99, 102, 241, 0.2)"},children:[d.jsx("div",{className:"status-dot"}),d.jsx("span",{className:"micro-label",style:{fontSize:"0.6rem"},children:"_OK"})]})]}),d.jsxs("div",{className:"mobile-grid-layout",style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[d.jsxs("div",{className:"card card-glow",style:{minHeight:"180px",position:"relative",overflow:"hidden",padding:"1.25rem"},children:[d.jsx("div",{className:"scanline"}),d.jsx("div",{style:{position:"absolute",top:"0.5rem",right:"0.5rem",opacity:.05},children:d.jsx(O5,{size:80})}),d.jsxs("div",{style:{position:"relative",zIndex:1},children:[d.jsx("p",{className:"micro-label",style:{letterSpacing:"1px",fontSize:"0.65rem",opacity:.7},children:"  "}),d.jsxs("h2",{className:"mono",style:{fontSize:"2.2rem",margin:"0.5rem 0",letterSpacing:"-1px",wordBreak:"break-all"},children:["$",Dt(h)]}),d.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",gap:"1rem",alignItems:"center"},children:[d.jsxs("div",{style:{flex:1},children:[d.jsx("p",{className:"micro-label",style:{opacity:.5,marginBottom:"0.2rem",fontSize:"0.6rem"},children:"  "}),d.jsxs("div",{className:"mono",style:{color:"var(--success)",fontSize:"1rem",fontWeight:"900"},children:["+",_,"%"]})]}),d.jsx("div",{style:{width:"1px",height:"30px",background:"var(--border-dim)"}}),d.jsxs("div",{style:{flex:1},children:[d.jsx("p",{className:"micro-label",style:{opacity:.5,marginBottom:"0.2rem",fontSize:"0.6rem"},children:" "}),d.jsxs("div",{className:"mono",style:{color:"var(--primary)",fontSize:"1rem",fontWeight:"900"},children:["_",g]})]})]})]})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[d.jsxs("div",{className:"card",style:{padding:"1rem",border:"1px solid var(--border-bright)",background:"linear-gradient(135deg, rgba(239, 68, 68, 0.05), transparent)"},children:[d.jsx("p",{className:"micro-label",style:{marginBottom:"0.5rem",color:"var(--danger)",fontSize:"0.6rem"},children:" "}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(lm,{size:18,color:"var(--danger)"}),d.jsx("span",{className:"mono",style:{fontWeight:"900",fontSize:"1.2rem"},children:o})]}),d.jsx("div",{style:{marginTop:"0.75rem",height:"3px",background:"rgba(239, 68, 68, 0.1)",borderRadius:"2px"},children:d.jsx("div",{style:{width:`${Math.min(o*2,100)}%`,height:"100%",background:"var(--danger)",boxShadow:"0 0 8px var(--danger)"}})})]}),d.jsxs("div",{className:"card",style:{padding:"1rem",border:"1px solid var(--border-bright)",background:"linear-gradient(135deg, rgba(99, 102, 241, 0.05), transparent)"},children:[d.jsx("p",{className:"micro-label",style:{marginBottom:"0.5rem",color:"var(--primary)",fontSize:"0.6rem"},children:" "}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(R0,{size:18,color:"var(--primary)"}),d.jsx("span",{className:"mono",style:{fontWeight:"900",fontSize:"1.2rem"},children:m})]}),d.jsx("div",{style:{marginTop:"0.75rem",height:"3px",background:"rgba(99, 102, 241, 0.1)",borderRadius:"2px"},children:d.jsx("div",{style:{width:`${m}%`,height:"100%",background:"var(--primary)",boxShadow:"0 0 8px var(--primary)"}})})]})]}),d.jsxs("div",{className:"card card-glow",style:{padding:"1.25rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.25rem"},children:[d.jsx($y,{size:16,color:"var(--warning)"}),d.jsx("h3",{className:"micro-label",style:{fontSize:"0.7rem",letterSpacing:"1px"},children:"  "})]}),d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:e.map((w,S)=>d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",background:"rgba(255,255,255,0.02)",borderRadius:"12px",border:S===0?"1px solid rgba(245, 158, 11, 0.3)":"1px solid var(--border-dim)",position:"relative"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[d.jsx("span",{className:"mono",style:{width:"15px",fontSize:"0.75rem",fontWeight:"900",color:S===0?"var(--warning)":"var(--text-micro)"},children:S+1}),d.jsx("img",{src:w.photoUrl||"https://via.placeholder.com/32",alt:"",style:{width:"32px",height:"32px",borderRadius:"8px",border:`1.5px solid ${w.color||"var(--border-dim)"}`}}),d.jsx("div",{style:{overflow:"hidden",maxWidth:"80px"},children:d.jsx("span",{style:{fontWeight:"700",fontSize:"0.85rem",display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:w.username})})]}),d.jsxs("span",{className:"mono",style:{fontWeight:"900",fontSize:"0.85rem",color:S===0?"var(--warning)":"white"},children:["$",Dt(w.balance||0)]})]},w.id))})]}),d.jsxs("div",{className:"card card-glow",style:{padding:"1.25rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.25rem"},children:[d.jsx(rm,{size:16,color:"var(--accent)"}),d.jsx("h3",{className:"micro-label",style:{fontSize:"0.7rem",letterSpacing:"1px"},children:"  "})]}),d.jsx("div",{style:{display:"flex",flexDirection:"column",maxHeight:"300px",overflowY:"auto"},className:"custom-scrollbar",children:i.length>0?i.map((w,S)=>d.jsxs("div",{style:{padding:"0.75rem 0",borderBottom:"1px solid var(--border-dim)",position:"relative"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[d.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"500",color:"var(--text-main)",paddingRight:"10px"},children:w.message}),d.jsx("span",{className:"mono",style:{fontSize:"8px",color:"var(--text-micro)",whiteSpace:"nowrap"},children:w.timestamp?.toDate()?.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),d.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:d.jsx("span",{style:{fontSize:"0.55rem",padding:"0.1rem 0.4rem",background:"rgba(255,255,255,0.05)",color:"var(--text-muted)",borderRadius:"4px"},children:w.type?.toUpperCase()||"_"})})]},S)):d.jsxs("div",{style:{textAlign:"center",padding:"2rem 1rem"},children:[d.jsx(C0,{size:32,style:{opacity:.1,marginBottom:"1rem"}}),d.jsx("p",{className:"micro-label",style:{fontSize:"0.6rem"},children:"    "})]})})]}),d.jsxs("div",{className:"card card-glow",style:{padding:"1.25rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[d.jsx(C0,{size:16,color:"var(--warning)"}),d.jsx("h3",{className:"micro-label",style:{fontSize:"0.7rem",letterSpacing:"1px"},children:"  "})]}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{color:"var(--danger)",marginBottom:"0.75rem",fontSize:"0.6rem"},children:" "}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"0.4rem"},children:n?.ownedWeapons&&n.ownedWeapons.length>0?n.ownedWeapons.map(w=>d.jsxs("div",{className:"card",style:{padding:"0.6rem 0.8rem",background:"rgba(255,255,255,0.02)",border:"1px solid var(--border-dim)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsx("span",{className:"mono",style:{fontSize:"0.75rem"},children:w.name}),d.jsxs("span",{className:"mono",style:{color:"var(--primary)",fontWeight:"900",fontSize:"0.8rem"},children:["x",w.quantity]})]},w.id)):d.jsx("p",{className:"micro-label",style:{opacity:.5,fontSize:"0.65rem"},children:"   "})})]}),d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{color:"var(--success)",marginBottom:"0.75rem",fontSize:"0.6rem"},children:" "}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.4rem"},children:n?.ownedCompanies&&n.ownedCompanies.length>0?n.ownedCompanies.map((w,S)=>d.jsx("div",{className:"card",style:{padding:"0.6rem",background:"rgba(255,255,255,0.02)",border:"1px solid var(--border-dim)",textAlign:"center"},children:d.jsx("span",{className:"mono",style:{fontSize:"0.65rem",overflow:"hidden",textOverflow:"ellipsis",display:"block"},children:w.name})},S)):d.jsx("p",{className:"micro-label",style:{opacity:.5,fontSize:"0.65rem"},children:"   "})})]}),d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{color:"var(--primary)",marginBottom:"0.75rem",fontSize:"0.6rem"},children:" "}),d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:n?.possessions&&n.possessions.length>0?n.possessions.map((w,S)=>d.jsxs("div",{className:"card",style:{padding:"0.4rem",background:"rgba(255,255,255,0.03)",border:"1px solid var(--border-bright)",display:"flex",gap:"0.6rem",alignItems:"center"},children:[d.jsx("img",{src:w.image,alt:"",style:{width:"35px",height:"35px",borderRadius:"4px",objectFit:"cover"}}),d.jsxs("div",{style:{overflow:"hidden"},children:[d.jsx("p",{className:"mono",style:{fontSize:"0.75rem",margin:0,color:"white"},children:w.name}),d.jsx("p",{className:"micro-label",style:{fontSize:"0.55rem",opacity:.5},children:w.category})]})]},S)):d.jsx("p",{className:"micro-label",style:{opacity:.5,fontSize:"0.65rem"},children:"   "})})]})]})]})]}),d.jsx("style",{children:`
                .custom-scrollbar::-webkit-scrollbar { width: 3px; }
                .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
                .custom-scrollbar::-webkit-scrollbar-thumb { background: var(--border-dim); border-radius: 10px; }
                
                @media (max-width: 768px) {
                    .page-container { padding-bottom: 100px !important; }
                }
            `})]})};function WD(n,e){return e.forEach((function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach((function(i){if(i!=="default"&&!(i in n)){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}}))})),Object.freeze(n)}function K5(n,e){return new Promise((function(t,i){let r;return QD(n).then((function(o){try{return r=o,t(new Blob([e.slice(0,2),r,e.slice(2)],{type:"image/jpeg"}))}catch(c){return i(c)}}),i)}))}const QD=n=>new Promise(((e,t)=>{const i=new FileReader;i.addEventListener("load",(({target:{result:r}})=>{const o=new DataView(r);let c=0;if(o.getUint16(c)!==65496)return t("not a valid JPEG");for(c+=2;;){const h=o.getUint16(c);if(h===65498)break;const f=o.getUint16(c+2);if(h===65505&&o.getUint32(c+4)===1165519206){const m=c+10;let g;switch(o.getUint16(m)){case 18761:g=!0;break;case 19789:g=!1;break;default:return t("TIFF header contains invalid endian")}if(o.getUint16(m+2,g)!==42)return t("TIFF header contains invalid version");const v=o.getUint32(m+4,g),_=m+v+2+12*o.getUint16(m+v,g);for(let w=m+v+2;w<_;w+=12)if(o.getUint16(w,g)==274){if(o.getUint16(w+2,g)!==3)return t("Orientation data type is invalid");if(o.getUint32(w+4,g)!==1)return t("Orientation data count is invalid");o.setUint16(w+8,1,g);break}return e(r.slice(c,c+2+f))}c+=2+f}return e(new Blob)})),i.readAsArrayBuffer(n)}));var xf={},XD={get exports(){return xf},set exports(n){xf=n}};(function(n){var e,t,i={};XD.exports=i,i.parse=function(r,o){for(var c=i.bin.readUshort,h=i.bin.readUint,f=0,m={},g=new Uint8Array(r),v=g.length-4;h(g,v)!=101010256;)v--;f=v,f+=4;var _=c(g,f+=4);c(g,f+=2);var w=h(g,f+=2),S=h(g,f+=4);f+=4,f=S;for(var R=0;R<_;R++){h(g,f),f+=4,f+=4,f+=4,h(g,f+=4),w=h(g,f+=4);var O=h(g,f+=4),M=c(g,f+=4),F=c(g,f+2),H=c(g,f+4);f+=6;var G=h(g,f+=8);f+=4,f+=M+F+H,i._readLocal(g,G,m,w,O,o)}return m},i._readLocal=function(r,o,c,h,f,m){var g=i.bin.readUshort,v=i.bin.readUint;v(r,o),g(r,o+=4),g(r,o+=2);var _=g(r,o+=2);v(r,o+=2),v(r,o+=4),o+=4;var w=g(r,o+=8),S=g(r,o+=2);o+=2;var R=i.bin.readUTF8(r,o,w);if(o+=w,o+=S,m)c[R]={size:f,csize:h};else{var O=new Uint8Array(r.buffer,o);if(_==0)c[R]=new Uint8Array(O.buffer.slice(o,o+h));else{if(_!=8)throw"unknown compression method: "+_;var M=new Uint8Array(f);i.inflateRaw(O,M),c[R]=M}}},i.inflateRaw=function(r,o){return i.F.inflate(r,o)},i.inflate=function(r,o){return r[0],r[1],i.inflateRaw(new Uint8Array(r.buffer,r.byteOffset+2,r.length-6),o)},i.deflate=function(r,o){o==null&&(o={level:6});var c=0,h=new Uint8Array(50+Math.floor(1.1*r.length));h[c]=120,h[c+1]=156,c+=2,c=i.F.deflateRaw(r,h,c,o.level);var f=i.adler(r,0,r.length);return h[c+0]=f>>>24&255,h[c+1]=f>>>16&255,h[c+2]=f>>>8&255,h[c+3]=f>>>0&255,new Uint8Array(h.buffer,0,c+4)},i.deflateRaw=function(r,o){o==null&&(o={level:6});var c=new Uint8Array(50+Math.floor(1.1*r.length)),h=i.F.deflateRaw(r,c,h,o.level);return new Uint8Array(c.buffer,0,h)},i.encode=function(r,o){o==null&&(o=!1);var c=0,h=i.bin.writeUint,f=i.bin.writeUshort,m={};for(var g in r){var v=!i._noNeed(g)&&!o,_=r[g],w=i.crc.crc(_,0,_.length);m[g]={cpr:v,usize:_.length,crc:w,file:v?i.deflateRaw(_):_}}for(var g in m)c+=m[g].file.length+30+46+2*i.bin.sizeUTF8(g);c+=22;var S=new Uint8Array(c),R=0,O=[];for(var g in m){var M=m[g];O.push(R),R=i._writeHeader(S,R,g,M,0)}var F=0,H=R;for(var g in m)M=m[g],O.push(R),R=i._writeHeader(S,R,g,M,1,O[F++]);var G=R-H;return h(S,R,101010256),R+=4,f(S,R+=4,F),f(S,R+=2,F),h(S,R+=2,G),h(S,R+=4,H),R+=4,R+=2,S.buffer},i._noNeed=function(r){var o=r.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},i._writeHeader=function(r,o,c,h,f,m){var g=i.bin.writeUint,v=i.bin.writeUshort,_=h.file;return g(r,o,f==0?67324752:33639248),o+=4,f==1&&(o+=2),v(r,o,20),v(r,o+=2,0),v(r,o+=2,h.cpr?8:0),g(r,o+=2,0),g(r,o+=4,h.crc),g(r,o+=4,_.length),g(r,o+=4,h.usize),v(r,o+=4,i.bin.sizeUTF8(c)),v(r,o+=2,0),o+=2,f==1&&(o+=2,o+=2,g(r,o+=6,m),o+=4),o+=i.bin.writeUTF8(r,o,c),f==0&&(r.set(_,o),o+=_.length),o},i.crc={table:(function(){for(var r=new Uint32Array(256),o=0;o<256;o++){for(var c=o,h=0;h<8;h++)1&c?c=3988292384^c>>>1:c>>>=1;r[o]=c}return r})(),update:function(r,o,c,h){for(var f=0;f<h;f++)r=i.crc.table[255&(r^o[c+f])]^r>>>8;return r},crc:function(r,o,c){return 4294967295^i.crc.update(4294967295,r,o,c)}},i.adler=function(r,o,c){for(var h=1,f=0,m=o,g=o+c;m<g;){for(var v=Math.min(m+5552,g);m<v;)f+=h+=r[m++];h%=65521,f%=65521}return f<<16|h},i.bin={readUshort:function(r,o){return r[o]|r[o+1]<<8},writeUshort:function(r,o,c){r[o]=255&c,r[o+1]=c>>8&255},readUint:function(r,o){return 16777216*r[o+3]+(r[o+2]<<16|r[o+1]<<8|r[o])},writeUint:function(r,o,c){r[o]=255&c,r[o+1]=c>>8&255,r[o+2]=c>>16&255,r[o+3]=c>>24&255},readASCII:function(r,o,c){for(var h="",f=0;f<c;f++)h+=String.fromCharCode(r[o+f]);return h},writeASCII:function(r,o,c){for(var h=0;h<c.length;h++)r[o+h]=c.charCodeAt(h)},pad:function(r){return r.length<2?"0"+r:r},readUTF8:function(r,o,c){for(var h,f="",m=0;m<c;m++)f+="%"+i.bin.pad(r[o+m].toString(16));try{h=decodeURIComponent(f)}catch{return i.bin.readASCII(r,o,c)}return h},writeUTF8:function(r,o,c){for(var h=c.length,f=0,m=0;m<h;m++){var g=c.charCodeAt(m);if((4294967168&g)==0)r[o+f]=g,f++;else if((4294965248&g)==0)r[o+f]=192|g>>6,r[o+f+1]=128|g>>0&63,f+=2;else if((4294901760&g)==0)r[o+f]=224|g>>12,r[o+f+1]=128|g>>6&63,r[o+f+2]=128|g>>0&63,f+=3;else{if((4292870144&g)!=0)throw"e";r[o+f]=240|g>>18,r[o+f+1]=128|g>>12&63,r[o+f+2]=128|g>>6&63,r[o+f+3]=128|g>>0&63,f+=4}}return f},sizeUTF8:function(r){for(var o=r.length,c=0,h=0;h<o;h++){var f=r.charCodeAt(h);if((4294967168&f)==0)c++;else if((4294965248&f)==0)c+=2;else if((4294901760&f)==0)c+=3;else{if((4292870144&f)!=0)throw"e";c+=4}}return c}},i.F={},i.F.deflateRaw=function(r,o,c,h){var f=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][h],m=i.F.U,g=i.F._goodIndex;i.F._hash;var v=i.F._putsE,_=0,w=c<<3,S=0,R=r.length;if(h==0){for(;_<R;)v(o,w,_+(I=Math.min(65535,R-_))==R?1:0),w=i.F._copyExact(r,_,I,o,w+8),_+=I;return w>>>3}var O=m.lits,M=m.strt,F=m.prev,H=0,G=0,X=0,U=0,N=0,E=0;for(R>2&&(M[E=i.F._hash(r,0)]=0),_=0;_<R;_++){if(N=E,_+1<R-2){E=i.F._hash(r,_+1);var T=_+1&32767;F[T]=M[E],M[E]=T}if(S<=_){(H>14e3||G>26697)&&R-_>100&&(S<_&&(O[H]=_-S,H+=2,S=_),w=i.F._writeBlock(_==R-1||S==R?1:0,O,H,U,r,X,_-X,o,w),H=G=U=0,X=_);var D=0;_<R-2&&(D=i.F._bestMatch(r,_,F,N,Math.min(f[2],R-_),f[3]));var I=D>>>16,z=65535&D;if(D!=0){z=65535&D;var k=g(I=D>>>16,m.of0);m.lhst[257+k]++;var W=g(z,m.df0);m.dhst[W]++,U+=m.exb[k]+m.dxb[W],O[H]=I<<23|_-S,O[H+1]=z<<16|k<<8|W,H+=2,S=_+I}else m.lhst[r[_]]++;G++}}for(X==_&&r.length!=0||(S<_&&(O[H]=_-S,H+=2,S=_),w=i.F._writeBlock(1,O,H,U,r,X,_-X,o,w),H=0,G=0,H=G=U=0,X=_);(7&w)!=0;)w++;return w>>>3},i.F._bestMatch=function(r,o,c,h,f,m){var g=32767&o,v=c[g],_=g-v+32768&32767;if(v==g||h!=i.F._hash(r,o-_))return 0;for(var w=0,S=0,R=Math.min(32767,o);_<=R&&--m!=0&&v!=g;){if(w==0||r[o+w]==r[o+w-_]){var O=i.F._howLong(r,o,_);if(O>w){if(S=_,(w=O)>=f)break;_+2<O&&(O=_+2);for(var M=0,F=0;F<O-2;F++){var H=o-_+F+32768&32767,G=H-c[H]+32768&32767;G>M&&(M=G,v=H)}}}_+=(g=v)-(v=c[g])+32768&32767}return w<<16|S},i.F._howLong=function(r,o,c){if(r[o]!=r[o-c]||r[o+1]!=r[o+1-c]||r[o+2]!=r[o+2-c])return 0;var h=o,f=Math.min(r.length,o+258);for(o+=3;o<f&&r[o]==r[o-c];)o++;return o-h},i.F._hash=function(r,o){return(r[o]<<8|r[o+1])+(r[o+2]<<4)&65535},i.saved=0,i.F._writeBlock=function(r,o,c,h,f,m,g,v,_){var w,S,R,O,M,F,H,G,X,U=i.F.U,N=i.F._putsF,E=i.F._putsE;U.lhst[256]++,S=(w=i.F.getTrees())[0],R=w[1],O=w[2],M=w[3],F=w[4],H=w[5],G=w[6],X=w[7];var T=32+((_+3&7)==0?0:8-(_+3&7))+(g<<3),D=h+i.F.contSize(U.fltree,U.lhst)+i.F.contSize(U.fdtree,U.dhst),I=h+i.F.contSize(U.ltree,U.lhst)+i.F.contSize(U.dtree,U.dhst);I+=14+3*H+i.F.contSize(U.itree,U.ihst)+(2*U.ihst[16]+3*U.ihst[17]+7*U.ihst[18]);for(var z=0;z<286;z++)U.lhst[z]=0;for(z=0;z<30;z++)U.dhst[z]=0;for(z=0;z<19;z++)U.ihst[z]=0;var k=T<D&&T<I?0:D<I?1:2;if(N(v,_,r),N(v,_+1,k),_+=3,k==0){for(;(7&_)!=0;)_++;_=i.F._copyExact(f,m,g,v,_)}else{var W,K;if(k==1&&(W=U.fltree,K=U.fdtree),k==2){i.F.makeCodes(U.ltree,S),i.F.revCodes(U.ltree,S),i.F.makeCodes(U.dtree,R),i.F.revCodes(U.dtree,R),i.F.makeCodes(U.itree,O),i.F.revCodes(U.itree,O),W=U.ltree,K=U.dtree,E(v,_,M-257),E(v,_+=5,F-1),E(v,_+=5,H-4),_+=4;for(var j=0;j<H;j++)E(v,_+3*j,U.itree[1+(U.ordr[j]<<1)]);_+=3*H,_=i.F._codeTiny(G,U.itree,v,_),_=i.F._codeTiny(X,U.itree,v,_)}for(var P=m,ne=0;ne<c;ne+=2){for(var J=o[ne],re=J>>>23,V=P+(8388607&J);P<V;)_=i.F._writeLit(f[P++],W,v,_);if(re!=0){var q=o[ne+1],ee=q>>16,Q=q>>8&255,te=255&q;E(v,_=i.F._writeLit(257+Q,W,v,_),re-U.of0[Q]),_+=U.exb[Q],N(v,_=i.F._writeLit(te,K,v,_),ee-U.df0[te]),_+=U.dxb[te],P+=re}}_=i.F._writeLit(256,W,v,_)}return _},i.F._copyExact=function(r,o,c,h,f){var m=f>>>3;return h[m]=c,h[m+1]=c>>>8,h[m+2]=255-h[m],h[m+3]=255-h[m+1],m+=4,h.set(new Uint8Array(r.buffer,o,c),m),f+(c+4<<3)},i.F.getTrees=function(){for(var r=i.F.U,o=i.F._hufTree(r.lhst,r.ltree,15),c=i.F._hufTree(r.dhst,r.dtree,15),h=[],f=i.F._lenCodes(r.ltree,h),m=[],g=i.F._lenCodes(r.dtree,m),v=0;v<h.length;v+=2)r.ihst[h[v]]++;for(v=0;v<m.length;v+=2)r.ihst[m[v]]++;for(var _=i.F._hufTree(r.ihst,r.itree,7),w=19;w>4&&r.itree[1+(r.ordr[w-1]<<1)]==0;)w--;return[o,c,_,f,g,w,h,m]},i.F.getSecond=function(r){for(var o=[],c=0;c<r.length;c+=2)o.push(r[c+1]);return o},i.F.nonZero=function(r){for(var o="",c=0;c<r.length;c+=2)r[c+1]!=0&&(o+=(c>>1)+",");return o},i.F.contSize=function(r,o){for(var c=0,h=0;h<o.length;h++)c+=o[h]*r[1+(h<<1)];return c},i.F._codeTiny=function(r,o,c,h){for(var f=0;f<r.length;f+=2){var m=r[f],g=r[f+1];h=i.F._writeLit(m,o,c,h);var v=m==16?2:m==17?3:7;m>15&&(i.F._putsE(c,h,g,v),h+=v)}return h},i.F._lenCodes=function(r,o){for(var c=r.length;c!=2&&r[c-1]==0;)c-=2;for(var h=0;h<c;h+=2){var f=r[h+1],m=h+3<c?r[h+3]:-1,g=h+5<c?r[h+5]:-1,v=h==0?-1:r[h-1];if(f==0&&m==f&&g==f){for(var _=h+5;_+2<c&&r[_+2]==f;)_+=2;(w=Math.min(_+1-h>>>1,138))<11?o.push(17,w-3):o.push(18,w-11),h+=2*w-2}else if(f==v&&m==f&&g==f){for(_=h+5;_+2<c&&r[_+2]==f;)_+=2;var w=Math.min(_+1-h>>>1,6);o.push(16,w-3),h+=2*w-2}else o.push(f,0)}return c>>>1},i.F._hufTree=function(r,o,c){var h=[],f=r.length,m=o.length,g=0;for(g=0;g<m;g+=2)o[g]=0,o[g+1]=0;for(g=0;g<f;g++)r[g]!=0&&h.push({lit:g,f:r[g]});var v=h.length,_=h.slice(0);if(v==0)return 0;if(v==1){var w=h[0].lit;return _=w==0?1:0,o[1+(w<<1)]=1,o[1+(_<<1)]=1,1}h.sort((function(G,X){return G.f-X.f}));var S=h[0],R=h[1],O=0,M=1,F=2;for(h[0]={lit:-1,f:S.f+R.f,l:S,r:R,d:0};M!=v-1;)S=O!=M&&(F==v||h[O].f<h[F].f)?h[O++]:h[F++],R=O!=M&&(F==v||h[O].f<h[F].f)?h[O++]:h[F++],h[M++]={lit:-1,f:S.f+R.f,l:S,r:R};var H=i.F.setDepth(h[M-1],0);for(H>c&&(i.F.restrictDepth(_,c,H),H=c),g=0;g<v;g++)o[1+(_[g].lit<<1)]=_[g].d;return H},i.F.setDepth=function(r,o){return r.lit!=-1?(r.d=o,o):Math.max(i.F.setDepth(r.l,o+1),i.F.setDepth(r.r,o+1))},i.F.restrictDepth=function(r,o,c){var h=0,f=1<<c-o,m=0;for(r.sort((function(v,_){return _.d==v.d?v.f-_.f:_.d-v.d})),h=0;h<r.length&&r[h].d>o;h++){var g=r[h].d;r[h].d=o,m+=f-(1<<c-g)}for(m>>>=c-o;m>0;)(g=r[h].d)<o?(r[h].d++,m-=1<<o-g-1):h++;for(;h>=0;h--)r[h].d==o&&m<0&&(r[h].d--,m++);m!=0&&console.log("debt left")},i.F._goodIndex=function(r,o){var c=0;return o[16|c]<=r&&(c|=16),o[8|c]<=r&&(c|=8),o[4|c]<=r&&(c|=4),o[2|c]<=r&&(c|=2),o[1|c]<=r&&(c|=1),c},i.F._writeLit=function(r,o,c,h){return i.F._putsF(c,h,o[r<<1]),h+o[1+(r<<1)]},i.F.inflate=function(r,o){var c=Uint8Array;if(r[0]==3&&r[1]==0)return o||new c(0);var h=i.F,f=h._bitsF,m=h._bitsE,g=h._decodeTiny,v=h.makeCodes,_=h.codes2map,w=h._get17,S=h.U,R=o==null;R&&(o=new c(r.length>>>2<<3));for(var O,M,F=0,H=0,G=0,X=0,U=0,N=0,E=0,T=0,D=0;F==0;)if(F=f(r,D,1),H=f(r,D+1,2),D+=3,H!=0){if(R&&(o=i.F._check(o,T+(1<<17))),H==1&&(O=S.flmap,M=S.fdmap,N=511,E=31),H==2){G=m(r,D,5)+257,X=m(r,D+5,5)+1,U=m(r,D+10,4)+4,D+=14;for(var I=0;I<38;I+=2)S.itree[I]=0,S.itree[I+1]=0;var z=1;for(I=0;I<U;I++){var k=m(r,D+3*I,3);S.itree[1+(S.ordr[I]<<1)]=k,k>z&&(z=k)}D+=3*U,v(S.itree,z),_(S.itree,z,S.imap),O=S.lmap,M=S.dmap,D=g(S.imap,(1<<z)-1,G+X,r,D,S.ttree);var W=h._copyOut(S.ttree,0,G,S.ltree);N=(1<<W)-1;var K=h._copyOut(S.ttree,G,X,S.dtree);E=(1<<K)-1,v(S.ltree,W),_(S.ltree,W,O),v(S.dtree,K),_(S.dtree,K,M)}for(;;){var j=O[w(r,D)&N];D+=15&j;var P=j>>>4;if(!(P>>>8))o[T++]=P;else{if(P==256)break;var ne=T+P-254;if(P>264){var J=S.ldef[P-257];ne=T+(J>>>3)+m(r,D,7&J),D+=7&J}var re=M[w(r,D)&E];D+=15&re;var V=re>>>4,q=S.ddef[V],ee=(q>>>4)+f(r,D,15&q);for(D+=15&q,R&&(o=i.F._check(o,T+(1<<17)));T<ne;)o[T]=o[T++-ee],o[T]=o[T++-ee],o[T]=o[T++-ee],o[T]=o[T++-ee];T=ne}}}else{(7&D)!=0&&(D+=8-(7&D));var Q=4+(D>>>3),te=r[Q-4]|r[Q-3]<<8;R&&(o=i.F._check(o,T+te)),o.set(new c(r.buffer,r.byteOffset+Q,te),T),D=Q+te<<3,T+=te}return o.length==T?o:o.slice(0,T)},i.F._check=function(r,o){var c=r.length;if(o<=c)return r;var h=new Uint8Array(Math.max(c<<1,o));return h.set(r,0),h},i.F._decodeTiny=function(r,o,c,h,f,m){for(var g=i.F._bitsE,v=i.F._get17,_=0;_<c;){var w=r[v(h,f)&o];f+=15&w;var S=w>>>4;if(S<=15)m[_]=S,_++;else{var R=0,O=0;S==16?(O=3+g(h,f,2),f+=2,R=m[_-1]):S==17?(O=3+g(h,f,3),f+=3):S==18&&(O=11+g(h,f,7),f+=7);for(var M=_+O;_<M;)m[_]=R,_++}}return f},i.F._copyOut=function(r,o,c,h){for(var f=0,m=0,g=h.length>>>1;m<c;){var v=r[m+o];h[m<<1]=0,h[1+(m<<1)]=v,v>f&&(f=v),m++}for(;m<g;)h[m<<1]=0,h[1+(m<<1)]=0,m++;return f},i.F.makeCodes=function(r,o){for(var c,h,f,m,g=i.F.U,v=r.length,_=g.bl_count,w=0;w<=o;w++)_[w]=0;for(w=1;w<v;w+=2)_[r[w]]++;var S=g.next_code;for(c=0,_[0]=0,h=1;h<=o;h++)c=c+_[h-1]<<1,S[h]=c;for(f=0;f<v;f+=2)(m=r[f+1])!=0&&(r[f]=S[m],S[m]++)},i.F.codes2map=function(r,o,c){for(var h=r.length,f=i.F.U.rev15,m=0;m<h;m+=2)if(r[m+1]!=0)for(var g=m>>1,v=r[m+1],_=g<<4|v,w=o-v,S=r[m]<<w,R=S+(1<<w);S!=R;)c[f[S]>>>15-o]=_,S++},i.F.revCodes=function(r,o){for(var c=i.F.U.rev15,h=15-o,f=0;f<r.length;f+=2){var m=r[f]<<o-r[f+1];r[f]=c[m]>>>h}},i.F._putsE=function(r,o,c){c<<=7&o;var h=o>>>3;r[h]|=c,r[h+1]|=c>>>8},i.F._putsF=function(r,o,c){c<<=7&o;var h=o>>>3;r[h]|=c,r[h+1]|=c>>>8,r[h+2]|=c>>>16},i.F._bitsE=function(r,o,c){return(r[o>>>3]|r[1+(o>>>3)]<<8)>>>(7&o)&(1<<c)-1},i.F._bitsF=function(r,o,c){return(r[o>>>3]|r[1+(o>>>3)]<<8|r[2+(o>>>3)]<<16)>>>(7&o)&(1<<c)-1},i.F._get17=function(r,o){return(r[o>>>3]|r[1+(o>>>3)]<<8|r[2+(o>>>3)]<<16)>>>(7&o)},i.F._get25=function(r,o){return(r[o>>>3]|r[1+(o>>>3)]<<8|r[2+(o>>>3)]<<16|r[3+(o>>>3)]<<24)>>>(7&o)},i.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),(function(){for(var r=i.F.U,o=0;o<32768;o++){var c=o;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,r.rev15[o]=(c>>>16|c<<16)>>>17}function h(f,m,g){for(;m--!=0;)f.push(0,g)}for(o=0;o<32;o++)r.ldef[o]=r.of0[o]<<3|r.exb[o],r.ddef[o]=r.df0[o]<<4|r.dxb[o];h(r.fltree,144,8),h(r.fltree,112,9),h(r.fltree,24,7),h(r.fltree,8,8),i.F.makeCodes(r.fltree,9),i.F.codes2map(r.fltree,9,r.flmap),i.F.revCodes(r.fltree,9),h(r.fdtree,32,5),i.F.makeCodes(r.fdtree,5),i.F.codes2map(r.fdtree,5,r.fdmap),i.F.revCodes(r.fdtree,5),h(r.itree,19,0),h(r.ltree,286,0),h(r.dtree,30,0),h(r.ttree,320,0)})()})();var JD=WD({__proto__:null,default:xf},[xf]);const Yn=(function(){var n={nextZero(g,v){for(;g[v]!=0;)v++;return v},readUshort:(g,v)=>g[v]<<8|g[v+1],writeUshort(g,v,_){g[v]=_>>8&255,g[v+1]=255&_},readUint:(g,v)=>16777216*g[v]+(g[v+1]<<16|g[v+2]<<8|g[v+3]),writeUint(g,v,_){g[v]=_>>24&255,g[v+1]=_>>16&255,g[v+2]=_>>8&255,g[v+3]=255&_},readASCII(g,v,_){let w="";for(let S=0;S<_;S++)w+=String.fromCharCode(g[v+S]);return w},writeASCII(g,v,_){for(let w=0;w<_.length;w++)g[v+w]=_.charCodeAt(w)},readBytes(g,v,_){const w=[];for(let S=0;S<_;S++)w.push(g[v+S]);return w},pad:g=>g.length<2?`0${g}`:g,readUTF8(g,v,_){let w,S="";for(let R=0;R<_;R++)S+=`%${n.pad(g[v+R].toString(16))}`;try{w=decodeURIComponent(S)}catch{return n.readASCII(g,v,_)}return w}};function e(g,v,_,w){const S=v*_,R=o(w),O=Math.ceil(v*R/8),M=new Uint8Array(4*S),F=new Uint32Array(M.buffer),{ctype:H}=w,{depth:G}=w,X=n.readUshort;if(H==6){const J=S<<2;if(G==8)for(var U=0;U<J;U+=4)M[U]=g[U],M[U+1]=g[U+1],M[U+2]=g[U+2],M[U+3]=g[U+3];if(G==16)for(U=0;U<J;U++)M[U]=g[U<<1]}else if(H==2){const J=w.tabs.tRNS;if(J==null){if(G==8)for(U=0;U<S;U++){var N=3*U;F[U]=255<<24|g[N+2]<<16|g[N+1]<<8|g[N]}if(G==16)for(U=0;U<S;U++)N=6*U,F[U]=255<<24|g[N+4]<<16|g[N+2]<<8|g[N]}else{var E=J[0];const re=J[1],V=J[2];if(G==8)for(U=0;U<S;U++){var T=U<<2;N=3*U,F[U]=255<<24|g[N+2]<<16|g[N+1]<<8|g[N],g[N]==E&&g[N+1]==re&&g[N+2]==V&&(M[T+3]=0)}if(G==16)for(U=0;U<S;U++)T=U<<2,N=6*U,F[U]=255<<24|g[N+4]<<16|g[N+2]<<8|g[N],X(g,N)==E&&X(g,N+2)==re&&X(g,N+4)==V&&(M[T+3]=0)}}else if(H==3){const J=w.tabs.PLTE,re=w.tabs.tRNS,V=re?re.length:0;if(G==1)for(var D=0;D<_;D++){var I=D*O,z=D*v;for(U=0;U<v;U++){T=z+U<<2;var k=3*(W=g[I+(U>>3)]>>7-((7&U)<<0)&1);M[T]=J[k],M[T+1]=J[k+1],M[T+2]=J[k+2],M[T+3]=W<V?re[W]:255}}if(G==2)for(D=0;D<_;D++)for(I=D*O,z=D*v,U=0;U<v;U++)T=z+U<<2,k=3*(W=g[I+(U>>2)]>>6-((3&U)<<1)&3),M[T]=J[k],M[T+1]=J[k+1],M[T+2]=J[k+2],M[T+3]=W<V?re[W]:255;if(G==4)for(D=0;D<_;D++)for(I=D*O,z=D*v,U=0;U<v;U++)T=z+U<<2,k=3*(W=g[I+(U>>1)]>>4-((1&U)<<2)&15),M[T]=J[k],M[T+1]=J[k+1],M[T+2]=J[k+2],M[T+3]=W<V?re[W]:255;if(G==8)for(U=0;U<S;U++){var W;T=U<<2,k=3*(W=g[U]),M[T]=J[k],M[T+1]=J[k+1],M[T+2]=J[k+2],M[T+3]=W<V?re[W]:255}}else if(H==4){if(G==8)for(U=0;U<S;U++){T=U<<2;var K=g[j=U<<1];M[T]=K,M[T+1]=K,M[T+2]=K,M[T+3]=g[j+1]}if(G==16)for(U=0;U<S;U++){var j;T=U<<2,K=g[j=U<<2],M[T]=K,M[T+1]=K,M[T+2]=K,M[T+3]=g[j+2]}}else if(H==0)for(E=w.tabs.tRNS?w.tabs.tRNS:-1,D=0;D<_;D++){const J=D*O,re=D*v;if(G==1)for(var P=0;P<v;P++){var ne=(K=255*(g[J+(P>>>3)]>>>7-(7&P)&1))==255*E?0:255;F[re+P]=ne<<24|K<<16|K<<8|K}else if(G==2)for(P=0;P<v;P++)ne=(K=85*(g[J+(P>>>2)]>>>6-((3&P)<<1)&3))==85*E?0:255,F[re+P]=ne<<24|K<<16|K<<8|K;else if(G==4)for(P=0;P<v;P++)ne=(K=17*(g[J+(P>>>1)]>>>4-((1&P)<<2)&15))==17*E?0:255,F[re+P]=ne<<24|K<<16|K<<8|K;else if(G==8)for(P=0;P<v;P++)ne=(K=g[J+P])==E?0:255,F[re+P]=ne<<24|K<<16|K<<8|K;else if(G==16)for(P=0;P<v;P++)K=g[J+(P<<1)],ne=X(g,J+(P<<1))==E?0:255,F[re+P]=ne<<24|K<<16|K<<8|K}return M}function t(g,v,_,w){const S=o(g),R=Math.ceil(_*S/8),O=new Uint8Array((R+1+g.interlace)*w);return v=g.tabs.CgBI?r(v,O):i(v,O),g.interlace==0?v=c(v,g,0,_,w):g.interlace==1&&(v=(function(F,H){const G=H.width,X=H.height,U=o(H),N=U>>3,E=Math.ceil(G*U/8),T=new Uint8Array(X*E);let D=0;const I=[0,0,4,0,2,0,1],z=[0,4,0,2,0,1,0],k=[8,8,8,4,4,2,2],W=[8,8,4,4,2,2,1];let K=0;for(;K<7;){const P=k[K],ne=W[K];let J=0,re=0,V=I[K];for(;V<X;)V+=P,re++;let q=z[K];for(;q<G;)q+=ne,J++;const ee=Math.ceil(J*U/8);c(F,H,D,J,re);let Q=0,te=I[K];for(;te<X;){let fe=z[K],ye=D+Q*ee<<3;for(;fe<G;){var j;if(U==1&&(j=(j=F[ye>>3])>>7-(7&ye)&1,T[te*E+(fe>>3)]|=j<<7-((7&fe)<<0)),U==2&&(j=(j=F[ye>>3])>>6-(7&ye)&3,T[te*E+(fe>>2)]|=j<<6-((3&fe)<<1)),U==4&&(j=(j=F[ye>>3])>>4-(7&ye)&15,T[te*E+(fe>>1)]|=j<<4-((1&fe)<<2)),U>=8){const Ne=te*E+fe*N;for(let Ae=0;Ae<N;Ae++)T[Ne+Ae]=F[(ye>>3)+Ae]}ye+=U,fe+=ne}Q++,te+=P}J*re!=0&&(D+=re*(1+ee)),K+=1}return T})(v,g)),v}function i(g,v){return r(new Uint8Array(g.buffer,2,g.length-6),v)}var r=(function(){const g={H:{}};return g.H.N=function(v,_){const w=Uint8Array;let S,R,O=0,M=0,F=0,H=0,G=0,X=0,U=0,N=0,E=0;if(v[0]==3&&v[1]==0)return _||new w(0);const T=g.H,D=T.b,I=T.e,z=T.R,k=T.n,W=T.A,K=T.Z,j=T.m,P=_==null;for(P&&(_=new w(v.length>>>2<<5));O==0;)if(O=D(v,E,1),M=D(v,E+1,2),E+=3,M!=0){if(P&&(_=g.H.W(_,N+(1<<17))),M==1&&(S=j.J,R=j.h,X=511,U=31),M==2){F=I(v,E,5)+257,H=I(v,E+5,5)+1,G=I(v,E+10,4)+4,E+=14;let J=1;for(var ne=0;ne<38;ne+=2)j.Q[ne]=0,j.Q[ne+1]=0;for(ne=0;ne<G;ne++){const q=I(v,E+3*ne,3);j.Q[1+(j.X[ne]<<1)]=q,q>J&&(J=q)}E+=3*G,k(j.Q,J),W(j.Q,J,j.u),S=j.w,R=j.d,E=z(j.u,(1<<J)-1,F+H,v,E,j.v);const re=T.V(j.v,0,F,j.C);X=(1<<re)-1;const V=T.V(j.v,F,H,j.D);U=(1<<V)-1,k(j.C,re),W(j.C,re,S),k(j.D,V),W(j.D,V,R)}for(;;){const J=S[K(v,E)&X];E+=15&J;const re=J>>>4;if(!(re>>>8))_[N++]=re;else{if(re==256)break;{let V=N+re-254;if(re>264){const fe=j.q[re-257];V=N+(fe>>>3)+I(v,E,7&fe),E+=7&fe}const q=R[K(v,E)&U];E+=15&q;const ee=q>>>4,Q=j.c[ee],te=(Q>>>4)+D(v,E,15&Q);for(E+=15&Q;N<V;)_[N]=_[N++-te],_[N]=_[N++-te],_[N]=_[N++-te],_[N]=_[N++-te];N=V}}}}else{(7&E)!=0&&(E+=8-(7&E));const J=4+(E>>>3),re=v[J-4]|v[J-3]<<8;P&&(_=g.H.W(_,N+re)),_.set(new w(v.buffer,v.byteOffset+J,re),N),E=J+re<<3,N+=re}return _.length==N?_:_.slice(0,N)},g.H.W=function(v,_){const w=v.length;if(_<=w)return v;const S=new Uint8Array(w<<1);return S.set(v,0),S},g.H.R=function(v,_,w,S,R,O){const M=g.H.e,F=g.H.Z;let H=0;for(;H<w;){const G=v[F(S,R)&_];R+=15&G;const X=G>>>4;if(X<=15)O[H]=X,H++;else{let U=0,N=0;X==16?(N=3+M(S,R,2),R+=2,U=O[H-1]):X==17?(N=3+M(S,R,3),R+=3):X==18&&(N=11+M(S,R,7),R+=7);const E=H+N;for(;H<E;)O[H]=U,H++}}return R},g.H.V=function(v,_,w,S){let R=0,O=0;const M=S.length>>>1;for(;O<w;){const F=v[O+_];S[O<<1]=0,S[1+(O<<1)]=F,F>R&&(R=F),O++}for(;O<M;)S[O<<1]=0,S[1+(O<<1)]=0,O++;return R},g.H.n=function(v,_){const w=g.H.m,S=v.length;let R,O,M,F;const H=w.j;for(var G=0;G<=_;G++)H[G]=0;for(G=1;G<S;G+=2)H[v[G]]++;const X=w.K;for(R=0,H[0]=0,O=1;O<=_;O++)R=R+H[O-1]<<1,X[O]=R;for(M=0;M<S;M+=2)F=v[M+1],F!=0&&(v[M]=X[F],X[F]++)},g.H.A=function(v,_,w){const S=v.length,R=g.H.m.r;for(let O=0;O<S;O+=2)if(v[O+1]!=0){const M=O>>1,F=v[O+1],H=M<<4|F,G=_-F;let X=v[O]<<G;const U=X+(1<<G);for(;X!=U;)w[R[X]>>>15-_]=H,X++}},g.H.l=function(v,_){const w=g.H.m.r,S=15-_;for(let R=0;R<v.length;R+=2){const O=v[R]<<_-v[R+1];v[R]=w[O]>>>S}},g.H.M=function(v,_,w){w<<=7&_;const S=_>>>3;v[S]|=w,v[S+1]|=w>>>8},g.H.I=function(v,_,w){w<<=7&_;const S=_>>>3;v[S]|=w,v[S+1]|=w>>>8,v[S+2]|=w>>>16},g.H.e=function(v,_,w){return(v[_>>>3]|v[1+(_>>>3)]<<8)>>>(7&_)&(1<<w)-1},g.H.b=function(v,_,w){return(v[_>>>3]|v[1+(_>>>3)]<<8|v[2+(_>>>3)]<<16)>>>(7&_)&(1<<w)-1},g.H.Z=function(v,_){return(v[_>>>3]|v[1+(_>>>3)]<<8|v[2+(_>>>3)]<<16)>>>(7&_)},g.H.i=function(v,_){return(v[_>>>3]|v[1+(_>>>3)]<<8|v[2+(_>>>3)]<<16|v[3+(_>>>3)]<<24)>>>(7&_)},g.H.m=(function(){const v=Uint16Array,_=Uint32Array;return{K:new v(16),j:new v(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new v(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new _(32),J:new v(512),_:[],h:new v(32),$:[],w:new v(32768),C:[],v:[],d:new v(32768),D:[],u:new v(512),Q:[],r:new v(32768),s:new _(286),Y:new _(30),a:new _(19),t:new _(15e3),k:new v(65536),g:new v(32768)}})(),(function(){const v=g.H.m;for(var _=0;_<32768;_++){let S=_;S=(2863311530&S)>>>1|(1431655765&S)<<1,S=(3435973836&S)>>>2|(858993459&S)<<2,S=(4042322160&S)>>>4|(252645135&S)<<4,S=(4278255360&S)>>>8|(16711935&S)<<8,v.r[_]=(S>>>16|S<<16)>>>17}function w(S,R,O){for(;R--!=0;)S.push(0,O)}for(_=0;_<32;_++)v.q[_]=v.S[_]<<3|v.T[_],v.c[_]=v.p[_]<<4|v.z[_];w(v._,144,8),w(v._,112,9),w(v._,24,7),w(v._,8,8),g.H.n(v._,9),g.H.A(v._,9,v.J),g.H.l(v._,9),w(v.$,32,5),g.H.n(v.$,5),g.H.A(v.$,5,v.h),g.H.l(v.$,5),w(v.Q,19,0),w(v.C,286,0),w(v.D,30,0),w(v.v,320,0)})(),g.H.N})();function o(g){return[1,null,3,1,2,null,4][g.ctype]*g.depth}function c(g,v,_,w,S){let R=o(v);const O=Math.ceil(w*R/8);let M,F;R=Math.ceil(R/8);let H=g[_],G=0;if(H>1&&(g[_]=[0,0,1][H-2]),H==3)for(G=R;G<O;G++)g[G+1]=g[G+1]+(g[G+1-R]>>>1)&255;for(let X=0;X<S;X++)if(M=_+X*O,F=M+X+1,H=g[F-1],G=0,H==0)for(;G<O;G++)g[M+G]=g[F+G];else if(H==1){for(;G<R;G++)g[M+G]=g[F+G];for(;G<O;G++)g[M+G]=g[F+G]+g[M+G-R]}else if(H==2)for(;G<O;G++)g[M+G]=g[F+G]+g[M+G-O];else if(H==3){for(;G<R;G++)g[M+G]=g[F+G]+(g[M+G-O]>>>1);for(;G<O;G++)g[M+G]=g[F+G]+(g[M+G-O]+g[M+G-R]>>>1)}else{for(;G<R;G++)g[M+G]=g[F+G]+h(0,g[M+G-O],0);for(;G<O;G++)g[M+G]=g[F+G]+h(g[M+G-R],g[M+G-O],g[M+G-R-O])}return g}function h(g,v,_){const w=g+v-_,S=w-g,R=w-v,O=w-_;return S*S<=R*R&&S*S<=O*O?g:R*R<=O*O?v:_}function f(g,v,_){_.width=n.readUint(g,v),v+=4,_.height=n.readUint(g,v),v+=4,_.depth=g[v],v++,_.ctype=g[v],v++,_.compress=g[v],v++,_.filter=g[v],v++,_.interlace=g[v],v++}function m(g,v,_,w,S,R,O,M,F){const H=Math.min(v,S),G=Math.min(_,R);let X=0,U=0;for(let K=0;K<G;K++)for(let j=0;j<H;j++)if(O>=0&&M>=0?(X=K*v+j<<2,U=(M+K)*S+O+j<<2):(X=(-M+K)*v-O+j<<2,U=K*S+j<<2),F==0)w[U]=g[X],w[U+1]=g[X+1],w[U+2]=g[X+2],w[U+3]=g[X+3];else if(F==1){var N=g[X+3]*.00392156862745098,E=g[X]*N,T=g[X+1]*N,D=g[X+2]*N,I=w[U+3]*(1/255),z=w[U]*I,k=w[U+1]*I,W=w[U+2]*I;const P=1-N,ne=N+I*P,J=ne==0?0:1/ne;w[U+3]=255*ne,w[U+0]=(E+z*P)*J,w[U+1]=(T+k*P)*J,w[U+2]=(D+W*P)*J}else if(F==2)N=g[X+3],E=g[X],T=g[X+1],D=g[X+2],I=w[U+3],z=w[U],k=w[U+1],W=w[U+2],N==I&&E==z&&T==k&&D==W?(w[U]=0,w[U+1]=0,w[U+2]=0,w[U+3]=0):(w[U]=E,w[U+1]=T,w[U+2]=D,w[U+3]=N);else if(F==3){if(N=g[X+3],E=g[X],T=g[X+1],D=g[X+2],I=w[U+3],z=w[U],k=w[U+1],W=w[U+2],N==I&&E==z&&T==k&&D==W)continue;if(N<220&&I>20)return!1}return!0}return{decode:function(v){const _=new Uint8Array(v);let w=8;const S=n,R=S.readUshort,O=S.readUint,M={tabs:{},frames:[]},F=new Uint8Array(_.length);let H,G=0,X=0;const U=[137,80,78,71,13,10,26,10];for(var N=0;N<8;N++)if(_[N]!=U[N])throw"The input is not a PNG file!";for(;w<_.length;){const K=S.readUint(_,w);w+=4;const j=S.readASCII(_,w,4);if(w+=4,j=="IHDR")f(_,w,M);else if(j=="iCCP"){for(var E=w;_[E]!=0;)E++;S.readASCII(_,w,E-w),_[E+1];const P=_.slice(E+2,w+K);let ne=null;try{ne=i(P)}catch{ne=r(P)}M.tabs[j]=ne}else if(j=="CgBI")M.tabs[j]=_.slice(w,w+4);else if(j=="IDAT"){for(N=0;N<K;N++)F[G+N]=_[w+N];G+=K}else if(j=="acTL")M.tabs[j]={num_frames:O(_,w),num_plays:O(_,w+4)},H=new Uint8Array(_.length);else if(j=="fcTL"){X!=0&&((W=M.frames[M.frames.length-1]).data=t(M,H.slice(0,X),W.rect.width,W.rect.height),X=0);const P={x:O(_,w+12),y:O(_,w+16),width:O(_,w+4),height:O(_,w+8)};let ne=R(_,w+22);ne=R(_,w+20)/(ne==0?100:ne);const J={rect:P,delay:Math.round(1e3*ne),dispose:_[w+24],blend:_[w+25]};M.frames.push(J)}else if(j=="fdAT"){for(N=0;N<K-4;N++)H[X+N]=_[w+N+4];X+=K-4}else if(j=="pHYs")M.tabs[j]=[S.readUint(_,w),S.readUint(_,w+4),_[w+8]];else if(j=="cHRM")for(M.tabs[j]=[],N=0;N<8;N++)M.tabs[j].push(S.readUint(_,w+4*N));else if(j=="tEXt"||j=="zTXt"){M.tabs[j]==null&&(M.tabs[j]={});var T=S.nextZero(_,w),D=S.readASCII(_,w,T-w),I=w+K-T-1;if(j=="tEXt")k=S.readASCII(_,T+1,I);else{var z=i(_.slice(T+2,T+2+I));k=S.readUTF8(z,0,z.length)}M.tabs[j][D]=k}else if(j=="iTXt"){M.tabs[j]==null&&(M.tabs[j]={}),T=0,E=w,T=S.nextZero(_,E),D=S.readASCII(_,E,T-E);const P=_[E=T+1];var k;_[E+1],E+=2,T=S.nextZero(_,E),S.readASCII(_,E,T-E),E=T+1,T=S.nextZero(_,E),S.readUTF8(_,E,T-E),I=K-((E=T+1)-w),P==0?k=S.readUTF8(_,E,I):(z=i(_.slice(E,E+I)),k=S.readUTF8(z,0,z.length)),M.tabs[j][D]=k}else if(j=="PLTE")M.tabs[j]=S.readBytes(_,w,K);else if(j=="hIST"){const P=M.tabs.PLTE.length/3;for(M.tabs[j]=[],N=0;N<P;N++)M.tabs[j].push(R(_,w+2*N))}else if(j=="tRNS")M.ctype==3?M.tabs[j]=S.readBytes(_,w,K):M.ctype==0?M.tabs[j]=R(_,w):M.ctype==2&&(M.tabs[j]=[R(_,w),R(_,w+2),R(_,w+4)]);else if(j=="gAMA")M.tabs[j]=S.readUint(_,w)/1e5;else if(j=="sRGB")M.tabs[j]=_[w];else if(j=="bKGD")M.ctype==0||M.ctype==4?M.tabs[j]=[R(_,w)]:M.ctype==2||M.ctype==6?M.tabs[j]=[R(_,w),R(_,w+2),R(_,w+4)]:M.ctype==3&&(M.tabs[j]=_[w]);else if(j=="IEND")break;w+=K,S.readUint(_,w),w+=4}var W;return X!=0&&((W=M.frames[M.frames.length-1]).data=t(M,H.slice(0,X),W.rect.width,W.rect.height)),M.data=t(M,F,M.width,M.height),delete M.compress,delete M.interlace,delete M.filter,M},toRGBA8:function(v){const _=v.width,w=v.height;if(v.tabs.acTL==null)return[e(v.data,_,w,v).buffer];const S=[];v.frames[0].data==null&&(v.frames[0].data=v.data);const R=_*w*4,O=new Uint8Array(R),M=new Uint8Array(R),F=new Uint8Array(R);for(let G=0;G<v.frames.length;G++){const X=v.frames[G],U=X.rect.x,N=X.rect.y,E=X.rect.width,T=X.rect.height,D=e(X.data,E,T,v);if(G!=0)for(var H=0;H<R;H++)F[H]=O[H];if(X.blend==0?m(D,E,T,O,_,w,U,N,0):X.blend==1&&m(D,E,T,O,_,w,U,N,1),S.push(O.buffer.slice(0)),X.dispose!=0){if(X.dispose==1)m(M,E,T,O,_,w,U,N,0);else if(X.dispose==2)for(H=0;H<R;H++)O[H]=F[H]}}return S},_paeth:h,_copyTile:m,_bin:n}})();(function(){const{_copyTile:n}=Yn,{_bin:e}=Yn,t=Yn._paeth;var i={table:(function(){const E=new Uint32Array(256);for(let T=0;T<256;T++){let D=T;for(let I=0;I<8;I++)1&D?D=3988292384^D>>>1:D>>>=1;E[T]=D}return E})(),update(E,T,D,I){for(let z=0;z<I;z++)E=i.table[255&(E^T[D+z])]^E>>>8;return E},crc:(E,T,D)=>4294967295^i.update(4294967295,E,T,D)};function r(E,T,D,I){T[D]+=E[0]*I>>4,T[D+1]+=E[1]*I>>4,T[D+2]+=E[2]*I>>4,T[D+3]+=E[3]*I>>4}function o(E){return Math.max(0,Math.min(255,E))}function c(E,T){const D=E[0]-T[0],I=E[1]-T[1],z=E[2]-T[2],k=E[3]-T[3];return D*D+I*I+z*z+k*k}function h(E,T,D,I,z,k,W){W==null&&(W=1);const K=I.length,j=[];for(var P=0;P<K;P++){const te=I[P];j.push([te>>>0&255,te>>>8&255,te>>>16&255,te>>>24&255])}for(P=0;P<K;P++){let te=4294967295;for(var ne=0,J=0;J<K;J++){var re=c(j[P],j[J]);J!=P&&re<te&&(te=re,ne=J)}}const V=new Uint32Array(z.buffer),q=new Int16Array(T*D*4),ee=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(P=0;P<ee.length;P++)ee[P]=255*((ee[P]+.5)/16-.5);for(let te=0;te<D;te++)for(let fe=0;fe<T;fe++){var Q;P=4*(te*T+fe),W!=2?Q=[o(E[P]+q[P]),o(E[P+1]+q[P+1]),o(E[P+2]+q[P+2]),o(E[P+3]+q[P+3])]:(re=ee[4*(3&te)+(3&fe)],Q=[o(E[P]+re),o(E[P+1]+re),o(E[P+2]+re),o(E[P+3]+re)]),ne=0;let ye=16777215;for(J=0;J<K;J++){const We=c(Q,j[J]);We<ye&&(ye=We,ne=J)}const Ne=j[ne],Ae=[Q[0]-Ne[0],Q[1]-Ne[1],Q[2]-Ne[2],Q[3]-Ne[3]];W==1&&(fe!=T-1&&r(Ae,q,P+4,7),te!=D-1&&(fe!=0&&r(Ae,q,P+4*T-4,3),r(Ae,q,P+4*T,5),fe!=T-1&&r(Ae,q,P+4*T+4,1))),k[P>>2]=ne,V[P>>2]=I[ne]}}function f(E,T,D,I,z){z==null&&(z={});const{crc:k}=i,W=e.writeUint,K=e.writeUshort,j=e.writeASCII;let P=8;const ne=E.frames.length>1;let J,re=!1,V=33+(ne?20:0);if(z.sRGB!=null&&(V+=13),z.pHYs!=null&&(V+=21),z.iCCP!=null&&(J=pako.deflate(z.iCCP),V+=21+J.length+4),E.ctype==3){for(var q=E.plte.length,ee=0;ee<q;ee++)E.plte[ee]>>>24!=255&&(re=!0);V+=8+3*q+4+(re?8+1*q+4:0)}for(var Q=0;Q<E.frames.length;Q++)ne&&(V+=38),V+=(Ne=E.frames[Q]).cimg.length+12,Q!=0&&(V+=4);V+=12;const te=new Uint8Array(V),fe=[137,80,78,71,13,10,26,10];for(ee=0;ee<8;ee++)te[ee]=fe[ee];if(W(te,P,13),P+=4,j(te,P,"IHDR"),P+=4,W(te,P,T),P+=4,W(te,P,D),P+=4,te[P]=E.depth,P++,te[P]=E.ctype,P++,te[P]=0,P++,te[P]=0,P++,te[P]=0,P++,W(te,P,k(te,P-17,17)),P+=4,z.sRGB!=null&&(W(te,P,1),P+=4,j(te,P,"sRGB"),P+=4,te[P]=z.sRGB,P++,W(te,P,k(te,P-5,5)),P+=4),z.iCCP!=null){const Ae=13+J.length;W(te,P,Ae),P+=4,j(te,P,"iCCP"),P+=4,j(te,P,"ICC profile"),P+=11,P+=2,te.set(J,P),P+=J.length,W(te,P,k(te,P-(Ae+4),Ae+4)),P+=4}if(z.pHYs!=null&&(W(te,P,9),P+=4,j(te,P,"pHYs"),P+=4,W(te,P,z.pHYs[0]),P+=4,W(te,P,z.pHYs[1]),P+=4,te[P]=z.pHYs[2],P++,W(te,P,k(te,P-13,13)),P+=4),ne&&(W(te,P,8),P+=4,j(te,P,"acTL"),P+=4,W(te,P,E.frames.length),P+=4,W(te,P,z.loop!=null?z.loop:0),P+=4,W(te,P,k(te,P-12,12)),P+=4),E.ctype==3){for(W(te,P,3*(q=E.plte.length)),P+=4,j(te,P,"PLTE"),P+=4,ee=0;ee<q;ee++){const Ae=3*ee,We=E.plte[ee],tt=255&We,xt=We>>>8&255,Gi=We>>>16&255;te[P+Ae+0]=tt,te[P+Ae+1]=xt,te[P+Ae+2]=Gi}if(P+=3*q,W(te,P,k(te,P-3*q-4,3*q+4)),P+=4,re){for(W(te,P,q),P+=4,j(te,P,"tRNS"),P+=4,ee=0;ee<q;ee++)te[P+ee]=E.plte[ee]>>>24&255;P+=q,W(te,P,k(te,P-q-4,q+4)),P+=4}}let ye=0;for(Q=0;Q<E.frames.length;Q++){var Ne=E.frames[Q];ne&&(W(te,P,26),P+=4,j(te,P,"fcTL"),P+=4,W(te,P,ye++),P+=4,W(te,P,Ne.rect.width),P+=4,W(te,P,Ne.rect.height),P+=4,W(te,P,Ne.rect.x),P+=4,W(te,P,Ne.rect.y),P+=4,K(te,P,I[Q]),P+=2,K(te,P,1e3),P+=2,te[P]=Ne.dispose,P++,te[P]=Ne.blend,P++,W(te,P,k(te,P-30,30)),P+=4);const Ae=Ne.cimg;W(te,P,(q=Ae.length)+(Q==0?0:4)),P+=4;const We=P;j(te,P,Q==0?"IDAT":"fdAT"),P+=4,Q!=0&&(W(te,P,ye++),P+=4),te.set(Ae,P),P+=q,W(te,P,k(te,We,P-We)),P+=4}return W(te,P,0),P+=4,j(te,P,"IEND"),P+=4,W(te,P,k(te,P-4,4)),P+=4,te.buffer}function m(E,T,D){for(let I=0;I<E.frames.length;I++){const z=E.frames[I];z.rect.width;const k=z.rect.height,W=new Uint8Array(k*z.bpl+k);z.cimg=w(z.img,k,z.bpp,z.bpl,W,T,D)}}function g(E,T,D,I,z){const k=z[0],W=z[1],K=z[2],j=z[3],P=z[4],ne=z[5];let J=6,re=8,V=255;for(var q=0;q<E.length;q++){const It=new Uint8Array(E[q]);for(var ee=It.length,Q=0;Q<ee;Q+=4)V&=It[Q+3]}const te=V!=255,fe=(function(ot,st,Be,Qe,lt,gi){const St=[];for(var Ve=0;Ve<ot.length;Ve++){const Yt=new Uint8Array(ot[Ve]),ki=new Uint32Array(Yt.buffer);var Ut;let yi=0,Bt=0,mt=st,Wt=Be,At=Qe?1:0;if(Ve!=0){const uo=gi||Qe||Ve==1||St[Ve-2].dispose!=0?1:2;let ts=0,ya=1e9;for(let ji=0;ji<uo;ji++){var $i=new Uint8Array(ot[Ve-1-ji]);const Ms=new Uint32Array(ot[Ve-1-ji]);let ct=st,ai=Be,vi=-1,bi=-1;for(let wn=0;wn<Be;wn++)for(let ci=0;ci<st;ci++)ki[Tt=wn*st+ci]!=Ms[Tt]&&(ci<ct&&(ct=ci),ci>vi&&(vi=ci),wn<ai&&(ai=wn),wn>bi&&(bi=wn));vi==-1&&(ct=ai=vi=bi=0),lt&&((1&ct)==1&&ct--,(1&ai)==1&&ai--);const ho=(vi-ct+1)*(bi-ai+1);ho<ya&&(ya=ho,ts=ji,yi=ct,Bt=ai,mt=vi-ct+1,Wt=bi-ai+1)}$i=new Uint8Array(ot[Ve-1-ts]),ts==1&&(St[Ve-1].dispose=2),Ut=new Uint8Array(mt*Wt*4),n($i,st,Be,Ut,mt,Wt,-yi,-Bt,0),At=n(Yt,st,Be,Ut,mt,Wt,-yi,-Bt,3)?1:0,At==1?_(Yt,st,Be,Ut,{x:yi,y:Bt,width:mt,height:Wt}):n(Yt,st,Be,Ut,mt,Wt,-yi,-Bt,0)}else Ut=Yt.slice(0);St.push({rect:{x:yi,y:Bt,width:mt,height:Wt},img:Ut,blend:At,dispose:0})}if(Qe)for(Ve=0;Ve<St.length;Ve++){if((Pn=St[Ve]).blend==1)continue;const Yt=Pn.rect,ki=St[Ve-1].rect,yi=Math.min(Yt.x,ki.x),Bt=Math.min(Yt.y,ki.y),mt={x:yi,y:Bt,width:Math.max(Yt.x+Yt.width,ki.x+ki.width)-yi,height:Math.max(Yt.y+Yt.height,ki.y+ki.height)-Bt};St[Ve-1].dispose=1,Ve-1!=0&&v(ot,st,Be,St,Ve-1,mt,lt),v(ot,st,Be,St,Ve,mt,lt)}let es=0;if(ot.length!=1)for(var Tt=0;Tt<St.length;Tt++){var Pn;es+=(Pn=St[Tt]).rect.width*Pn.rect.height}return St})(E,T,D,k,W,K),ye={},Ne=[],Ae=[];if(I!=0){const It=[];for(Q=0;Q<fe.length;Q++)It.push(fe[Q].img.buffer);const ot=(function(lt){let gi=0;for(var St=0;St<lt.length;St++)gi+=lt[St].byteLength;const Ve=new Uint8Array(gi);let Ut=0;for(St=0;St<lt.length;St++){const $i=new Uint8Array(lt[St]),es=$i.length;for(let Tt=0;Tt<es;Tt+=4){let Pn=$i[Tt],Yt=$i[Tt+1],ki=$i[Tt+2];const yi=$i[Tt+3];yi==0&&(Pn=Yt=ki=0),Ve[Ut+Tt]=Pn,Ve[Ut+Tt+1]=Yt,Ve[Ut+Tt+2]=ki,Ve[Ut+Tt+3]=yi}Ut+=es}return Ve.buffer})(It),st=R(ot,I);for(Q=0;Q<st.plte.length;Q++)Ne.push(st.plte[Q].est.rgba);let Be=0;for(Q=0;Q<fe.length;Q++){const Qe=(tt=fe[Q]).img.length;var We=new Uint8Array(st.inds.buffer,Be>>2,Qe>>2);Ae.push(We);const lt=new Uint8Array(st.abuf,Be,Qe);ne&&h(tt.img,tt.rect.width,tt.rect.height,Ne,lt,We),tt.img.set(lt),Be+=Qe}}else for(q=0;q<fe.length;q++){var tt=fe[q];const It=new Uint32Array(tt.img.buffer);var xt=tt.rect.width;for(ee=It.length,We=new Uint8Array(ee),Ae.push(We),Q=0;Q<ee;Q++){const ot=It[Q];if(Q!=0&&ot==It[Q-1])We[Q]=We[Q-1];else if(Q>xt&&ot==It[Q-xt])We[Q]=We[Q-xt];else{let st=ye[ot];if(st==null&&(ye[ot]=st=Ne.length,Ne.push(ot),Ne.length>=300))break;We[Q]=st}}}const Gi=Ne.length;for(Gi<=256&&P==0&&(re=Gi<=2?1:Gi<=4?2:Gi<=16?4:8,re=Math.max(re,j)),q=0;q<fe.length;q++){(tt=fe[q]).rect.x,tt.rect.y,xt=tt.rect.width;const It=tt.rect.height;let ot=tt.img;new Uint32Array(ot.buffer);let st=4*xt,Be=4;if(Gi<=256&&P==0){st=Math.ceil(re*xt/8);var Vt=new Uint8Array(st*It);const Qe=Ae[q];for(let lt=0;lt<It;lt++){Q=lt*st;const gi=lt*xt;if(re==8)for(var ft=0;ft<xt;ft++)Vt[Q+ft]=Qe[gi+ft];else if(re==4)for(ft=0;ft<xt;ft++)Vt[Q+(ft>>1)]|=Qe[gi+ft]<<4-4*(1&ft);else if(re==2)for(ft=0;ft<xt;ft++)Vt[Q+(ft>>2)]|=Qe[gi+ft]<<6-2*(3&ft);else if(re==1)for(ft=0;ft<xt;ft++)Vt[Q+(ft>>3)]|=Qe[gi+ft]<<7-1*(7&ft)}ot=Vt,J=3,Be=1}else if(te==0&&fe.length==1){Vt=new Uint8Array(xt*It*3);const Qe=xt*It;for(Q=0;Q<Qe;Q++){const lt=3*Q,gi=4*Q;Vt[lt]=ot[gi],Vt[lt+1]=ot[gi+1],Vt[lt+2]=ot[gi+2]}ot=Vt,J=2,Be=3,st=3*xt}tt.img=ot,tt.bpl=st,tt.bpp=Be}return{ctype:J,depth:re,plte:Ne,frames:fe}}function v(E,T,D,I,z,k,W){const K=Uint8Array,j=Uint32Array,P=new K(E[z-1]),ne=new j(E[z-1]),J=z+1<E.length?new K(E[z+1]):null,re=new K(E[z]),V=new j(re.buffer);let q=T,ee=D,Q=-1,te=-1;for(let ye=0;ye<k.height;ye++)for(let Ne=0;Ne<k.width;Ne++){const Ae=k.x+Ne,We=k.y+ye,tt=We*T+Ae,xt=V[tt];xt==0||I[z-1].dispose==0&&ne[tt]==xt&&(J==null||J[4*tt+3]!=0)||(Ae<q&&(q=Ae),Ae>Q&&(Q=Ae),We<ee&&(ee=We),We>te&&(te=We))}Q==-1&&(q=ee=Q=te=0),W&&((1&q)==1&&q--,(1&ee)==1&&ee--),k={x:q,y:ee,width:Q-q+1,height:te-ee+1};const fe=I[z];fe.rect=k,fe.blend=1,fe.img=new Uint8Array(k.width*k.height*4),I[z-1].dispose==0?(n(P,T,D,fe.img,k.width,k.height,-k.x,-k.y,0),_(re,T,D,fe.img,k)):n(re,T,D,fe.img,k.width,k.height,-k.x,-k.y,0)}function _(E,T,D,I,z){n(E,T,D,I,z.width,z.height,-z.x,-z.y,2)}function w(E,T,D,I,z,k,W){const K=[];let j,P=[0,1,2,3,4];k!=-1?P=[k]:(T*I>5e5||D==1)&&(P=[0]),W&&(j={level:0});const ne=JD;for(var J=0;J<P.length;J++){for(let q=0;q<T;q++)S(z,E,q,I,D,P[J]);K.push(ne.deflate(z,j))}let re,V=1e9;for(J=0;J<K.length;J++)K[J].length<V&&(re=J,V=K[J].length);return K[re]}function S(E,T,D,I,z,k){const W=D*I;let K=W+D;if(E[K]=k,K++,k==0)if(I<500)for(var j=0;j<I;j++)E[K+j]=T[W+j];else E.set(new Uint8Array(T.buffer,W,I),K);else if(k==1){for(j=0;j<z;j++)E[K+j]=T[W+j];for(j=z;j<I;j++)E[K+j]=T[W+j]-T[W+j-z]+256&255}else if(D==0){for(j=0;j<z;j++)E[K+j]=T[W+j];if(k==2)for(j=z;j<I;j++)E[K+j]=T[W+j];if(k==3)for(j=z;j<I;j++)E[K+j]=T[W+j]-(T[W+j-z]>>1)+256&255;if(k==4)for(j=z;j<I;j++)E[K+j]=T[W+j]-t(T[W+j-z],0,0)+256&255}else{if(k==2)for(j=0;j<I;j++)E[K+j]=T[W+j]+256-T[W+j-I]&255;if(k==3){for(j=0;j<z;j++)E[K+j]=T[W+j]+256-(T[W+j-I]>>1)&255;for(j=z;j<I;j++)E[K+j]=T[W+j]+256-(T[W+j-I]+T[W+j-z]>>1)&255}if(k==4){for(j=0;j<z;j++)E[K+j]=T[W+j]+256-t(0,T[W+j-I],0)&255;for(j=z;j<I;j++)E[K+j]=T[W+j]+256-t(T[W+j-z],T[W+j-I],T[W+j-z-I])&255}}}function R(E,T){const D=new Uint8Array(E),I=D.slice(0),z=new Uint32Array(I.buffer),k=O(I,T),W=k[0],K=k[1],j=D.length,P=new Uint8Array(j>>2);let ne;if(D.length<2e7)for(var J=0;J<j;J+=4)ne=M(W,re=D[J]*(1/255),V=D[J+1]*(1/255),q=D[J+2]*(1/255),ee=D[J+3]*(1/255)),P[J>>2]=ne.ind,z[J>>2]=ne.est.rgba;else for(J=0;J<j;J+=4){var re=D[J]*.00392156862745098,V=D[J+1]*(1/255),q=D[J+2]*(1/255),ee=D[J+3]*(1/255);for(ne=W;ne.left;)ne=F(ne.est,re,V,q,ee)<=0?ne.left:ne.right;P[J>>2]=ne.ind,z[J>>2]=ne.est.rgba}return{abuf:I.buffer,inds:P,plte:K}}function O(E,T,D){D==null&&(D=1e-4);const I=new Uint32Array(E.buffer),z={i0:0,i1:E.length,bst:null,est:null,tdst:0,left:null,right:null};z.bst=X(E,z.i0,z.i1),z.est=U(z.bst);const k=[z];for(;k.length<T;){let K=0,j=0;for(var W=0;W<k.length;W++)k[W].est.L>K&&(K=k[W].est.L,j=W);if(K<D)break;const P=k[j],ne=H(E,I,P.i0,P.i1,P.est.e,P.est.eMq255);if(P.i0>=ne||P.i1<=ne){P.est.L=0;continue}const J={i0:P.i0,i1:ne,bst:null,est:null,tdst:0,left:null,right:null};J.bst=X(E,J.i0,J.i1),J.est=U(J.bst);const re={i0:ne,i1:P.i1,bst:null,est:null,tdst:0,left:null,right:null};for(re.bst={R:[],m:[],N:P.bst.N-J.bst.N},W=0;W<16;W++)re.bst.R[W]=P.bst.R[W]-J.bst.R[W];for(W=0;W<4;W++)re.bst.m[W]=P.bst.m[W]-J.bst.m[W];re.est=U(re.bst),P.left=J,P.right=re,k[j]=J,k.push(re)}for(k.sort(((K,j)=>j.bst.N-K.bst.N)),W=0;W<k.length;W++)k[W].ind=W;return[z,k]}function M(E,T,D,I,z){if(E.left==null)return E.tdst=(function(J,re,V,q,ee){const Q=re-J[0],te=V-J[1],fe=q-J[2],ye=ee-J[3];return Q*Q+te*te+fe*fe+ye*ye})(E.est.q,T,D,I,z),E;const k=F(E.est,T,D,I,z);let W=E.left,K=E.right;k>0&&(W=E.right,K=E.left);const j=M(W,T,D,I,z);if(j.tdst<=k*k)return j;const P=M(K,T,D,I,z);return P.tdst<j.tdst?P:j}function F(E,T,D,I,z){const{e:k}=E;return k[0]*T+k[1]*D+k[2]*I+k[3]*z-E.eMq}function H(E,T,D,I,z,k){for(I-=4;D<I;){for(;G(E,D,z)<=k;)D+=4;for(;G(E,I,z)>k;)I-=4;if(D>=I)break;const W=T[D>>2];T[D>>2]=T[I>>2],T[I>>2]=W,D+=4,I-=4}for(;G(E,D,z)>k;)D-=4;return D+4}function G(E,T,D){return E[T]*D[0]+E[T+1]*D[1]+E[T+2]*D[2]+E[T+3]*D[3]}function X(E,T,D){const I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],z=[0,0,0,0],k=D-T>>2;for(let W=T;W<D;W+=4){const K=E[W]*.00392156862745098,j=E[W+1]*(1/255),P=E[W+2]*(1/255),ne=E[W+3]*(1/255);z[0]+=K,z[1]+=j,z[2]+=P,z[3]+=ne,I[0]+=K*K,I[1]+=K*j,I[2]+=K*P,I[3]+=K*ne,I[5]+=j*j,I[6]+=j*P,I[7]+=j*ne,I[10]+=P*P,I[11]+=P*ne,I[15]+=ne*ne}return I[4]=I[1],I[8]=I[2],I[9]=I[6],I[12]=I[3],I[13]=I[7],I[14]=I[11],{R:I,m:z,N:k}}function U(E){const{R:T}=E,{m:D}=E,{N:I}=E,z=D[0],k=D[1],W=D[2],K=D[3],j=I==0?0:1/I,P=[T[0]-z*z*j,T[1]-z*k*j,T[2]-z*W*j,T[3]-z*K*j,T[4]-k*z*j,T[5]-k*k*j,T[6]-k*W*j,T[7]-k*K*j,T[8]-W*z*j,T[9]-W*k*j,T[10]-W*W*j,T[11]-W*K*j,T[12]-K*z*j,T[13]-K*k*j,T[14]-K*W*j,T[15]-K*K*j],ne=P,J=N;let re=[Math.random(),Math.random(),Math.random(),Math.random()],V=0,q=0;if(I!=0)for(let Q=0;Q<16&&(re=J.multVec(ne,re),q=Math.sqrt(J.dot(re,re)),re=J.sml(1/q,re),!(Q!=0&&Math.abs(q-V)<1e-9));Q++)V=q;const ee=[z*j,k*j,W*j,K*j];return{Cov:P,q:ee,e:re,L:V,eMq255:J.dot(J.sml(255,ee),re),eMq:J.dot(re,ee),rgba:(Math.round(255*ee[3])<<24|Math.round(255*ee[2])<<16|Math.round(255*ee[1])<<8|Math.round(255*ee[0])<<0)>>>0}}var N={multVec:(E,T)=>[E[0]*T[0]+E[1]*T[1]+E[2]*T[2]+E[3]*T[3],E[4]*T[0]+E[5]*T[1]+E[6]*T[2]+E[7]*T[3],E[8]*T[0]+E[9]*T[1]+E[10]*T[2]+E[11]*T[3],E[12]*T[0]+E[13]*T[1]+E[14]*T[2]+E[15]*T[3]],dot:(E,T)=>E[0]*T[0]+E[1]*T[1]+E[2]*T[2]+E[3]*T[3],sml:(E,T)=>[E*T[0],E*T[1],E*T[2],E*T[3]]};Yn.encode=function(T,D,I,z,k,W,K){z==null&&(z=0),K==null&&(K=!1);const j=g(T,D,I,z,[!1,!1,!1,0,K,!1]);return m(j,-1),f(j,D,I,k,W)},Yn.encodeLL=function(T,D,I,z,k,W,K,j){const P={ctype:0+(z==1?0:2)+(k==0?0:4),depth:W,frames:[]},ne=(z+k)*W,J=ne*D;for(let re=0;re<T.length;re++)P.frames.push({rect:{x:0,y:0,width:D,height:I},img:new Uint8Array(T[re]),blend:0,dispose:1,bpp:Math.ceil(ne/8),bpl:Math.ceil(J/8)});return m(P,0,!0),f(P,D,I,K,j)},Yn.encode.compress=g,Yn.encode.dither=h,Yn.quantize=R,Yn.quantize.getKDtree=O,Yn.quantize.getNearest=M})();const Y5={toArrayBuffer(n,e){const t=n.width,i=n.height,r=t<<2,o=n.getContext("2d").getImageData(0,0,t,i),c=new Uint32Array(o.data.buffer),h=(32*t+31)/32<<2,f=h*i,m=122+f,g=new ArrayBuffer(m),v=new DataView(g),_=1<<20;let w,S,R,O,M=_,F=0,H=0,G=0;function X(E){v.setUint16(H,E,!0),H+=2}function U(E){v.setUint32(H,E,!0),H+=4}function N(E){H+=E}X(19778),U(m),N(4),U(122),U(108),U(t),U(-i>>>0),X(1),X(32),U(3),U(f),U(2835),U(2835),N(8),U(16711680),U(65280),U(255),U(4278190080),U(1466527264),(function E(){for(;F<i&&M>0;){for(O=122+F*h,w=0;w<r;)M--,S=c[G++],R=S>>>24,v.setUint32(O+w,S<<8|R),w+=4;F++}G<c.length?(M=_,setTimeout(E,Y5._dly)):e(g)})()},toBlob(n,e){this.toArrayBuffer(n,(t=>{e(new Blob([t],{type:"image/bmp"}))}))},_dly:9};var tn={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},ZD={[tn.CHROME]:16384,[tn.FIREFOX]:11180,[tn.DESKTOP_SAFARI]:16384,[tn.IE]:8192,[tn.IOS]:4096,[tn.ETC]:8192};const Xy=typeof window<"u",W5=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Ef=Xy&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),e9=(Xy||W5)&&(Ef&&Ef.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Q5=(Xy||W5)&&(Ef&&Ef.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Jy(n,e,t=Date.now()){return new Promise((i=>{const r=n.split(","),o=r[0].match(/:(.*?);/)[1],c=globalThis.atob(r[1]);let h=c.length;const f=new Uint8Array(h);for(;h--;)f[h]=c.charCodeAt(h);const m=new Blob([f],{type:o});m.name=e,m.lastModified=t,i(m)}))}function X5(n){return new Promise(((e,t)=>{const i=new Q5;i.onload=()=>e(i.result),i.onerror=r=>t(r),i.readAsDataURL(n)}))}function J5(n){return new Promise(((e,t)=>{const i=new Image;i.onload=()=>e(i),i.onerror=r=>t(r),i.src=n}))}function Ya(){if(Ya.cachedResult!==void 0)return Ya.cachedResult;let n=tn.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?n=tn.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?n=tn.IOS:/Safari/i.test(e)?n=tn.DESKTOP_SAFARI:/Firefox/i.test(e)?n=tn.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(n=tn.IE),Ya.cachedResult=n,Ya.cachedResult}function Z5(n,e){const t=Ya(),i=ZD[t];let r=n,o=e,c=r*o;const h=r>o?o/r:r/o;for(;c>i*i;){const f=(i+r)/2,m=(i+o)/2;f<m?(o=m,r=m*h):(o=f*h,r=f),c=r*o}return{width:r,height:o}}function um(n,e){let t,i;try{if(t=new OffscreenCanvas(n,e),i=t.getContext("2d"),i===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),i=t.getContext("2d")}return t.width=n,t.height=e,[t,i]}function eT(n,e){const{width:t,height:i}=Z5(n.width,n.height),[r,o]=um(t,i);return e&&/jpe?g/.test(e)&&(o.fillStyle="white",o.fillRect(0,0,r.width,r.height)),o.drawImage(n,0,0,r.width,r.height),r}function $d(){return $d.cachedResult!==void 0||($d.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),$d.cachedResult}function Sf(n,e={}){return new Promise((function(t,i){let r,o;var c=function(){try{return o=eT(r,e.fileType||n.type),t([r,o])}catch(f){return i(f)}},h=function(f){try{var m=function(g){try{throw g}catch(v){return i(v)}};try{let g;return X5(n).then((function(v){try{return g=v,J5(g).then((function(_){try{return r=_,(function(){try{return c()}catch(w){return i(w)}})()}catch(w){return m(w)}}),m)}catch(_){return m(_)}}),m)}catch(g){m(g)}}catch(g){return i(g)}};try{if($d()||[tn.DESKTOP_SAFARI,tn.MOBILE_SAFARI].includes(Ya()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(n).then((function(f){try{return r=f,c()}catch{return h()}}),h)}catch{h()}}))}function Tf(n,e,t,i,r=1){return new Promise((function(o,c){let h;if(e==="image/png"){let v,_,w;return v=n.getContext("2d"),{data:_}=v.getImageData(0,0,n.width,n.height),w=Yn.encode([_.buffer],n.width,n.height,4096*r),h=new Blob([w],{type:e}),h.name=t,h.lastModified=i,f.call(this)}{let v=function(){return f.call(this)};var m=v;if(e==="image/bmp")return new Promise((_=>Y5.toBlob(n,_))).then((function(_){try{return h=_,h.name=t,h.lastModified=i,v.call(this)}catch(w){return c(w)}}).bind(this),c);{let _=function(){return v.call(this)};var g=_;if(typeof OffscreenCanvas=="function"&&n instanceof OffscreenCanvas)return n.convertToBlob({type:e,quality:r}).then((function(w){try{return h=w,h.name=t,h.lastModified=i,_.call(this)}catch(S){return c(S)}}).bind(this),c);{let w;return w=n.toDataURL(e,r),Jy(w,t,i).then((function(S){try{return h=S,_.call(this)}catch(R){return c(R)}}).bind(this),c)}}}function f(){return o(h)}}))}function ws(n){n.width=0,n.height=0}function cl(){return new Promise((function(n,e){let t,i,r,o;return cl.cachedResult!==void 0?n(cl.cachedResult):Jy("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(c){try{return t=c,Sf(t).then((function(h){try{return i=h[1],Tf(i,t.type,t.name,t.lastModified).then((function(f){try{return r=f,ws(i),Sf(r).then((function(m){try{return o=m[0],cl.cachedResult=o.width===1&&o.height===2,n(cl.cachedResult)}catch(g){return e(g)}}),e)}catch(m){return e(m)}}),e)}catch(f){return e(f)}}),e)}catch(h){return e(h)}}),e)}))}function tT(n){return new Promise(((e,t)=>{const i=new Q5;i.onload=r=>{const o=new DataView(r.target.result);if(o.getUint16(0,!1)!=65496)return e(-2);const c=o.byteLength;let h=2;for(;h<c;){if(o.getUint16(h+2,!1)<=8)return e(-1);const f=o.getUint16(h,!1);if(h+=2,f==65505){if(o.getUint32(h+=2,!1)!=1165519206)return e(-1);const m=o.getUint16(h+=6,!1)==18761;h+=o.getUint32(h+4,m);const g=o.getUint16(h,m);h+=2;for(let v=0;v<g;v++)if(o.getUint16(h+12*v,m)==274)return e(o.getUint16(h+12*v+8,m))}else{if((65280&f)!=65280)break;h+=o.getUint16(h,!1)}}return e(-1)},i.onerror=r=>t(r),i.readAsArrayBuffer(n)}))}function iT(n,e){const{width:t}=n,{height:i}=n,{maxWidthOrHeight:r}=e;let o,c=n;return isFinite(r)&&(t>r||i>r)&&([c,o]=um(t,i),t>i?(c.width=r,c.height=i/t*r):(c.width=t/i*r,c.height=r),o.drawImage(n,0,0,c.width,c.height),ws(n)),c}function nT(n,e){const{width:t}=n,{height:i}=n,[r,o]=um(t,i);switch(e>4&&e<9?(r.width=i,r.height=t):(r.width=t,r.height=i),e){case 2:o.transform(-1,0,0,1,t,0);break;case 3:o.transform(-1,0,0,-1,t,i);break;case 4:o.transform(1,0,0,-1,0,i);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,i,0);break;case 7:o.transform(0,-1,-1,0,i,t);break;case 8:o.transform(0,-1,1,0,0,t)}return o.drawImage(n,0,0,t,i),ws(n),r}function x2(n,e,t=0){return new Promise((function(i,r){let o,c,h,f,m,g,v,_,w,S,R,O,M,F,H,G,X,U,N,E;function T(I=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;o+=I,e.onProgress(Math.min(o,100))}function D(I){if(e.signal&&e.signal.aborted)throw e.signal.reason;o=Math.min(Math.max(I,o),100),e.onProgress(o)}return o=t,c=e.maxIteration||10,h=1024*e.maxSizeMB*1024,T(),Sf(n,e).then((function(I){try{return[,f]=I,T(),m=iT(f,e),T(),new Promise((function(z,k){var W;if(!(W=e.exifOrientation))return tT(n).then((function(j){try{return W=j,K.call(this)}catch(P){return k(P)}}).bind(this),k);function K(){return z(W)}return K.call(this)})).then((function(z){try{return g=z,T(),cl().then((function(k){try{return v=k?m:nT(m,g),T(),_=e.initialQuality||1,w=e.fileType||n.type,Tf(v,w,n.name,n.lastModified,_).then((function(W){try{{let ne=function(){if(c--&&(H>h||H>M)){let re,V;return re=E?.95*N.width:N.width,V=E?.95*N.height:N.height,[X,U]=um(re,V),U.drawImage(N,0,0,re,V),_*=w==="image/png"?.85:.95,Tf(X,w,n.name,n.lastModified,_).then((function(q){try{return G=q,ws(N),N=X,H=G.size,D(Math.min(99,Math.floor((F-H)/(F-h)*100))),ne}catch(ee){return r(ee)}}),r)}return[1]},J=function(){return ws(N),ws(X),ws(m),ws(v),ws(f),D(100),i(G)};var j=ne,P=J;if(S=W,T(),R=S.size>h,O=S.size>n.size,!R&&!O)return D(100),i(S);var K;return M=n.size,F=S.size,H=F,N=v,E=!e.alwaysKeepResolution&&R,(K=(function(re){for(;re;){if(re.then)return void re.then(K,r);try{if(re.pop){if(re.length)return re.pop()?J.call(this):re;re=ne}else re=re.call(this)}catch(V){return r(V)}}}).bind(this))(ne)}}catch(ne){return r(ne)}}).bind(this),r)}catch(W){return r(W)}}).bind(this),r)}catch(k){return r(k)}}).bind(this),r)}catch(z){return r(z)}}).bind(this),r)}))}const t9=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Dg;function i9(n,e){return new Promise(((t,i)=>{Dg||(Dg=(function(c){const h=[];return h.push(c),URL.createObjectURL(new Blob(h))})(t9));const r=new Worker(Dg);r.addEventListener("message",(function(c){if(e.signal&&e.signal.aborted)r.terminate();else if(c.data.progress===void 0){if(c.data.error)return i(new Error(c.data.error)),void r.terminate();t(c.data.file),r.terminate()}else e.onProgress(c.data.progress)})),r.addEventListener("error",i),e.signal&&e.signal.addEventListener("abort",(()=>{i(e.signal.reason),r.terminate()})),r.postMessage({file:n,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})}))}function Ti(n,e){return new Promise((function(t,i){let r,o,c,h,f,m;if(r={...e},c=0,{onProgress:h}=r,r.maxSizeMB=r.maxSizeMB||Number.POSITIVE_INFINITY,f=typeof r.useWebWorker!="boolean"||r.useWebWorker,delete r.useWebWorker,r.onProgress=w=>{c=w,typeof h=="function"&&h(c)},!(n instanceof Blob||n instanceof e9))return i(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(n.type))return i(new Error("The file given is not an image"));if(m=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!f||typeof Worker!="function"||m)return x2(n,r).then((function(w){try{return o=w,_.call(this)}catch(S){return i(S)}}).bind(this),i);var g=(function(){try{return _.call(this)}catch(w){return i(w)}}).bind(this),v=function(w){try{return x2(n,r).then((function(S){try{return o=S,g()}catch(R){return i(R)}}),i)}catch(S){return i(S)}};try{return r.libURL=r.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",i9(n,r).then((function(w){try{return o=w,g()}catch{return v()}}),v)}catch{v()}function _(){try{o.name=n.name,o.lastModified=n.lastModified}catch{}try{r.preserveExif&&n.type==="image/jpeg"&&(!r.fileType||r.fileType&&r.fileType===n.type)&&(o=K5(n,o))}catch{}return t(o)}}))}Ti.getDataUrlFromFile=X5,Ti.getFilefromDataUrl=Jy,Ti.loadImage=J5,Ti.drawImageInCanvas=eT,Ti.drawFileInCanvas=Sf,Ti.canvasToFile=Tf,Ti.getExifOrientation=tT,Ti.handleMaxWidthOrHeight=iT,Ti.followExifOrientation=nT,Ti.cleanupCanvasMemory=ws,Ti.isAutoOrientationInBrowser=cl,Ti.approximateBelowMaximumCanvasSizeOfBrowser=Z5,Ti.copyExifWithoutOrientation=K5,Ti.getBrowserName=Ya,Ti.version="2.0.2";const n9=["#6366f1","#a855f7","#06b6d4","#f43f5e","#10b981","#f59e0b"],s9=()=>{const[n,e]=$.useState(!1),[t,i]=$.useState({username:"",email:"",password:"",confirmPassword:"",color:""}),[r,o]=$.useState("en"),[c,h]=$.useState(""),[f,m]=$.useState(""),[g,v]=$.useState(!1),_=U0(),w=async R=>{const O=R.target.files[0];if(O)try{const F=await Ti(O,{maxSizeMB:.1,maxWidthOrHeight:400,useWebWorker:!0}),H=new FileReader;H.readAsDataURL(F),H.onloadend=()=>h(H.result)}catch{m("BIOMETRIC_DATA_ERROR")}},S=async()=>{m(""),v(!0);try{if(n){if(t.password!==t.confirmPassword)throw new Error("VERIFICATION_FAILED: PASSWORDS_MISMATCH");if(t.password.length<6)throw new Error("SECURITY_BREACH: KEY_LENGTH_MIN_6");if(!t.color)throw new Error("IDENTITY_CONFLICT: THEME_COLOR_REQUIRED");if(!t.username)throw new Error("DESIGNATION_REQUIRED");const O=(await Hk(ll,t.email,t.password)).user.uid,M={username:t.username,color:t.color,photoUrl:c||null,balance:99e9,createdAt:Nt(),ownedCompanies:[],ownedWeapons:[],lastEarningsCheck:Nt(),resources:{Gold:0,Iron:0,Coal:0,Oil:0,Copper:0,Silver:0,Uranium:0,Wood:0,Stone:0,Food:0,Water:0,Steel:0,Plastic:0,Glass:0,Paper:0,Cloth:0,Leather:0,Rubber:0,Silicon:0,Aluminum:0},language:r};await GS(ze(we,"users",O),M),_("/")}else await qk(ll,t.email,t.password),_("/")}catch(R){let O=R.message;R.code==="auth/email-already-in-use"&&(O="IDENTITY_EXISTS: UPLINK_CONFLICT"),R.code==="auth/invalid-credential"&&(O="ACCESS_DENIED: INVALID_CREDENTIALS"),m(O||"NETWORK_UPLINK_FAILURE")}v(!1)};return d.jsxs("div",{className:"login-page",children:[d.jsx("div",{className:"orb orb-1"}),d.jsx("div",{className:"orb orb-2"}),d.jsxs("div",{className:"login-container fade-in",children:[d.jsxs("div",{style:{textAlign:"center",marginBottom:"2.5rem"},children:[d.jsx("div",{className:"login-icon-box",children:d.jsx(rm,{size:40,color:"var(--primary)"})}),d.jsx("p",{className:"micro-label",style:{color:"var(--primary)",marginBottom:"0.5rem"},children:"Global Access Terminal"}),d.jsx("h1",{className:"text-gradient",style:{fontSize:"2.2rem"},children:n?"New Identity":"Sovereign Login"})]}),d.jsx("div",{className:"card card-glow",style:{padding:"2.5rem"},children:d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{marginBottom:"0.5rem"},children:"Link Identity (Email)"}),d.jsx("input",{placeholder:"IDENTITY@NETWORK.SOV",value:t.email,onChange:R=>i({...t,email:R.target.value}),className:"mono"})]}),n&&d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{marginBottom:"0.5rem"},children:"Designation (Username)"}),d.jsx("input",{placeholder:"ENTER_NAME",value:t.username,onChange:R=>i({...t,username:R.target.value}),className:"mono"})]}),d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{marginBottom:"0.5rem"},children:"Access Key (Password)"}),d.jsx("input",{type:"password",placeholder:"******",value:t.password,onChange:R=>i({...t,password:R.target.value}),className:"mono"})]}),n&&d.jsxs("div",{className:"fade-in",style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{marginBottom:"0.5rem"},children:"Verify Access Key"}),d.jsx("input",{type:"password",placeholder:"******",value:t.confirmPassword,onChange:R=>i({...t,confirmPassword:R.target.value}),className:"mono"})]}),d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{marginBottom:"0.5rem"},children:"Neural Snapshot"}),d.jsxs("label",{className:"upload-btn",children:[c?d.jsx("img",{src:c,alt:"Preview",style:{width:"40px",height:"40px",borderRadius:"10px",objectFit:"cover"}}):d.jsx(q5,{size:20}),d.jsx("span",{className:"micro-label",children:c?"IDENTITY CAPTURED":"UPLOAD BIOMETRIC"}),d.jsx("input",{type:"file",accept:"image/*",onChange:w,style:{display:"none"}})]})]}),d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{marginBottom:"0.75rem"},children:"Aura Frequency"}),d.jsx("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"center"},children:n9.map(R=>d.jsx("div",{onClick:()=>i({...t,color:R}),style:{backgroundColor:R,border:t.color===R?"2px solid white":"1px solid transparent",width:"32px",height:"32px",borderRadius:"8px",cursor:"pointer",boxShadow:t.color===R?`0 0 15px ${R}`:"none",transition:"var(--transition)"}},R))})]}),d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{marginBottom:"0.75rem"},children:"Interface Language"}),d.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:["en","fr","ar"].map(R=>d.jsx("button",{onClick:()=>o(R),style:{flex:1,padding:"0.5rem",background:r===R?"var(--primary)":"rgba(255,255,255,0.05)",border:r===R?"1px solid var(--primary)":"1px solid var(--border-dim)",color:r===R?"white":"var(--text-muted)",borderRadius:"8px",cursor:"pointer",fontSize:"0.8rem",fontWeight:"700"},children:R.toUpperCase()},R))})]})]}),f&&d.jsxs("div",{className:"error-alert",children:[d.jsx(Qy,{size:16}),d.jsx("span",{children:f})]}),d.jsx("button",{onClick:S,disabled:g,className:"primary",style:{margin:"1rem 0",padding:"1.2rem"},children:g?"INITIALIZING...":n?"ESTABLISH IDENTITY":"RESTORE ACCESS"}),d.jsxs("div",{style:{textAlign:"center",marginTop:"1rem"},children:[d.jsx("p",{className:"micro-label",style:{marginBottom:"0.5rem"},children:n?"Protocol exists?":"Protocol missing?"}),d.jsx("button",{onClick:()=>e(!n),style:{background:"transparent",border:"none",color:"var(--primary)",padding:0},children:d.jsx("span",{className:"micro-label",style:{color:"var(--primary)",cursor:"pointer"},children:n?" RETURN TO GATE":" INITIATE NEW IDENTITY"})})]})]})})]}),d.jsx("style",{children:`
                .login-page {
                    min-height: 100vh;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    background: var(--bg);
                    padding: 2rem;
                    position: relative;
                    overflow: hidden;
                }
                .orb {
                    position: absolute;
                    width: 400px;
                    height: 400px;
                    border-radius: 50%;
                    filter: blur(80px);
                    opacity: 0.15;
                    z-index: 0;
                }
                .orb-1 { top: -10%; left: -10%; background: var(--primary); }
                .orb-2 { bottom: -10%; right: -10%; background: var(--accent); }
                
                .login-container {
                    width: 100%;
                    max-width: 450px;
                    position: relative;
                    z-index: 1;
                }
                .login-icon-box {
                    width: 80px;
                    height: 80px;
                    background: var(--surface);
                    border: 1px solid var(--border-bright);
                    border-radius: 20px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    margin: 0 auto 1.5rem;
                    box-shadow: 0 0 30px var(--primary-glow);
                }
                .upload-btn {
                    display: flex;
                    align-items: center;
                    gap: 1rem;
                    background: var(--surface);
                    border: 1px solid var(--border-bright);
                    padding: 0.75rem 1rem;
                    border-radius: 12px;
                    cursor: pointer;
                    transition: var(--transition);
                }
                .upload-btn:hover {
                    border-color: var(--primary);
                    background: var(--surface-soft);
                }
                .error-alert {
                    background: rgba(239, 68, 68, 0.1);
                    border-left: 3px solid var(--danger);
                    padding: 1rem;
                    border-radius: 8px;
                    display: flex;
                    align-items: center;
                    gap: 0.75rem;
                    color: var(--danger);
                    font-size: 0.85rem;
                    font-weight: 600;
                    font-family: 'JetBrains Mono', monospace;
                }
                @media (max-width: 480px) {
                    .login-page { padding: 1rem; }
                }
            `})]})},r9=()=>{const{user:n,refreshUser:e}=Mi(),[t,i]=$.useState([]),[r,o]=$.useState(""),[c,h]=$.useState(""),[f,m]=$.useState({type:"",text:""}),[g,v]=$.useState(!1);$.useEffect(()=>{(async()=>{const S=await yn(Je(we,"users"));i(S.docs.filter(R=>R.id!==n?.id).map(R=>({id:R.id,...R.data()})))})()},[n]);const _=async()=>{const w=Number(c);if(w<=0)return m({type:"error",text:"__:      ."});if(w>(n?.balance||0))return m({type:"error",text:"__:    ."});if(!r)return m({type:"error",text:"_:   ."});v(!0);try{await Jn(we,async S=>{const R=ze(we,"users",n.id),O=ze(we,"users",r),M=await S.get(O);if(!M.exists())throw new Error("    .");const F=M.data()?.username,H=(n?.balance||0)-w;S.update(R,{balance:H}),S.update(O,{balance:(M.data()?.balance||0)+w}),S.set(ze(Je(we,"activities")),{userId:n?.id,message:`  : -$${w.toLocaleString()} -> ${F}`,timestamp:Nt(),type:"debit"}),S.set(ze(Je(we,"activities")),{userId:r,message:`  : +$${w.toLocaleString()} <- ${n?.username}`,timestamp:Nt(),type:"credit"}),S.set(ze(Je(we,"news")),{type:"uplink",username:n?.username,userColor:n?.color,content:`  ${n?.username}      ${t.find(G=>G.id===r)?.username}.`,value:w,timestamp:Nt()})}),m({type:"success",text:`_:   $${w.toLocaleString()}  ${t.find(S=>S.id===r)?.username}.`}),h(""),e(),o("")}catch(S){m({type:"error",text:"_:   . "+S.message})}v(!1)};return d.jsxs("div",{className:"page-container fade-in",style:{padding:"1rem"},children:[d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"2rem"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{color:"var(--primary)",letterSpacing:"2px",fontSize:"0.6rem"},children:"_: __"}),d.jsx("h1",{className:"text-gradient",style:{fontSize:"1.8rem",margin:0},children:" "})]}),d.jsx("div",{className:"card",style:{padding:"0.4rem 0.8rem",width:"fit-content",background:"rgba(255,255,255,0.02)",border:"1px solid var(--border-bright)",borderRadius:"10px"},children:d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem"},children:[d.jsx(Fl,{size:12,color:"var(--primary)",className:"pulse"}),d.jsx("span",{className:"micro-label",style:{fontSize:"0.55rem"},children:" : 128-"})]})})]}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[d.jsxs("div",{className:"card card-glow",style:{padding:"1.5rem",border:"1px solid var(--border-bright)",position:"relative",overflow:"hidden",borderRadius:"24px"},children:[d.jsx("div",{className:"scanline"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.6rem",marginBottom:"1.5rem"},children:[d.jsx(Wy,{size:18,color:"var(--primary)"}),d.jsx("h3",{className:"micro-label",style:{fontSize:"0.75rem"},children:" "})]}),d.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",padding:"2rem 1rem",borderRadius:"20px",border:"1px solid var(--border-dim)",textAlign:"center"},children:[d.jsx("p",{className:"micro-label",style:{marginBottom:"0.5rem",opacity:.5,fontSize:"0.6rem"},children:"   ($)"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[d.jsx("span",{className:"mono",style:{fontSize:"1.5rem",opacity:.3,marginRight:"5px"},children:"$"}),d.jsx("input",{type:"number",placeholder:"0.00",value:c,onChange:w=>h(w.target.value),className:"mono",style:{background:"transparent",border:"none",fontSize:"2.5rem",textAlign:"center",width:"100%",fontWeight:"900",color:"white",outline:"none"}})]})]}),d.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{opacity:.5,marginBottom:"0.2rem",fontSize:"0.55rem"},children:"  "}),d.jsxs("span",{className:"mono",style:{color:"var(--success)",fontWeight:"bold",fontSize:"0.9rem"},children:["$",(n?.balance||0).toLocaleString()]})]}),d.jsxs("div",{style:{textAlign:"right"},children:[d.jsx("p",{className:"micro-label",style:{opacity:.5,marginBottom:"0.2rem",fontSize:"0.55rem"},children:" "}),d.jsx("span",{className:"mono",style:{opacity:.6,fontSize:"0.8rem"},children:"$0.00 ()"})]})]})]}),d.jsxs("div",{className:"card card-glow",style:{padding:"1.5rem",border:"1px solid var(--border-dim)",borderRadius:"24px",maxHeight:"400px",display:"flex",flexDirection:"column"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.6rem",marginBottom:"1.25rem"},children:[d.jsx(cm,{size:18,color:"var(--accent)"}),d.jsx("h3",{className:"micro-label",style:{fontSize:"0.75rem"},children:"  "})]}),d.jsx("div",{className:"custom-scrollbar",style:{flex:1,overflowY:"auto"},children:d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.map(w=>d.jsxs("div",{onClick:()=>o(w.id),style:{padding:"0.75rem",borderRadius:"16px",background:r===w.id?"rgba(99, 102, 241, 0.15)":"rgba(255,255,255,0.02)",cursor:"pointer",display:"flex",alignItems:"center",transition:"0.2s",border:`1.5px solid ${r===w.id?"var(--primary)":"transparent"}`},children:[d.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:w.color,overflow:"hidden",flexShrink:0},children:w.photoUrl?d.jsx("img",{src:w.photoUrl,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}):d.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"900",fontSize:"14px"},children:w.username?.charAt(0).toUpperCase()})}),d.jsxs("div",{style:{marginLeft:"1rem",minWidth:0},children:[d.jsx("p",{className:"mono",style:{fontSize:"0.85rem",marginBottom:"0.1rem",color:"white",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:w.username}),d.jsxs("p",{className:"micro-label",style:{fontSize:"0.5rem",opacity:.4},children:["ID: ",w.id.substring(0,8).toUpperCase()]})]}),r===w.id&&d.jsx(hr,{size:14,color:"var(--primary)",style:{marginLeft:"auto"}})]},w.id))})})]}),f.text&&d.jsxs("div",{className:"fade-in",style:{padding:"1rem",borderRadius:"12px",background:f.type==="error"?"rgba(239, 68, 68, 0.1)":"rgba(16, 185, 129, 0.1)",border:`1px solid ${f.type==="error"?"var(--danger)":"var(--success)"}`,color:f.type==="error"?"var(--danger)":"var(--success)",display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.75rem",fontWeight:"600"},children:[d.jsx(Qy,{size:16}),d.jsx("span",{children:f.text})]})]}),d.jsx("div",{style:{marginTop:"2rem",paddingBottom:"100px"},children:d.jsxs("button",{onClick:_,disabled:g||!r||!c,className:`primary ${!r||!c?"disabled":""}`,style:{width:"100%",padding:"1.25rem",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",borderRadius:"16px"},children:[g?"__...":"   ",d.jsx(nm,{size:20})]})}),d.jsx("style",{children:`
                @media (max-width: 768px) {
                    .page-container { padding-bottom: 120px !important; }
                }
                .custom-scrollbar::-webkit-scrollbar { width: 3px; }
            `})]})},a9=JSON.parse(`[{"id":1,"name":"NVIDIA","category":"Semiconductors / AI","price":4579000000000,"description":"Most Valuable Company (AI Chips Leader)","image":"https://upload.wikimedia.org/wikipedia/commons/2/21/Nvidia_logo.svg"},{"id":2,"name":"Apple","category":"Technology","price":4010000000000,"description":"Consumer Electronics Giant","image":"https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg"},{"id":3,"name":"Alphabet (Google)","category":"Technology","price":3810000000000,"description":"Internet & Advertising Leader","image":"https://upload.wikimedia.org/wikipedia/commons/3/3e/Google_2015_logo.svg"},{"id":4,"name":"Microsoft","category":"Technology","price":3620000000000,"description":"Software & Cloud Computing","image":"https://upload.wikimedia.org/wikipedia/commons/4/44/Microsoft_logo.svg"},{"id":5,"name":"Amazon","category":"E-Commerce / Cloud","price":2430000000000,"description":"Most Valuable E-Commerce Company","image":"https://upload.wikimedia.org/wikipedia/commons/a/a9/Amazon_logo.svg"},{"id":6,"name":"Meta Platforms (Facebook)","category":"Social Media","price":1680000000000,"description":"Social Media & Metaverse","image":"https://upload.wikimedia.org/wikipedia/commons/7/78/Meta_Logo.png"},{"id":7,"name":"Broadcom","category":"Semiconductors","price":1820000000000,"description":"Semiconductor & Infrastructure","image":"https://upload.wikimedia.org/wikipedia/commons/8/8c/Broadcom_logo.svg"},{"id":8,"name":"Tesla","category":"Automobile","price":1560000000000,"description":"Electric Vehicles & Autonomy","image":"https://upload.wikimedia.org/wikipedia/commons/b/bd/Tesla_Motors.svg"},{"id":9,"name":"Taiwan Semiconductor (TSMC)","category":"Semiconductors","price":1490000000000,"description":"Most Valuable Semiconductor Foundry","image":"https://upload.wikimedia.org/wikipedia/commons/9/9c/TSMC_logo.svg"},{"id":10,"name":"Berkshire Hathaway","category":"Conglomerate","price":1100000000000,"description":"Most Valuable Conglomerate (Estimated Top 10)","image":"https://upload.wikimedia.org/wikipedia/commons/9/9f/Berkshire_Hathaway_logo.svg"},{"id":11,"name":"Eli Lilly","category":"Pharmaceutical","price":900000000000,"description":"Pharma Leader (Weight-loss Drugs)","image":"https://upload.wikimedia.org/wikipedia/commons/9/9e/Eli_Lilly_and_Company.svg"},{"id":12,"name":"JPMorgan Chase","category":"Financial Services","price":850000000000,"description":"Largest Bank","image":"https://upload.wikimedia.org/wikipedia/commons/d/d4/JPMorgan_Chase.svg"},{"id":13,"name":"Walmart","category":"Retailer","price":700000000000,"description":"Largest Retailer","image":"https://upload.wikimedia.org/wikipedia/commons/c/ca/Walmart_logo.svg"},{"id":14,"name":"Visa","category":"Financial Services","price":600000000000,"description":"Payment Network","image":"https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg"},{"id":15,"name":"Mastercard","category":"Financial Services","price":550000000000,"description":"Payment Network","image":"https://upload.wikimedia.org/wikipedia/commons/b/bc/Mastercard-logo.svg"},{"id":16,"name":"Netflix","category":"Digital Media","price":500000000000,"description":"Streaming Leader","image":"https://upload.wikimedia.org/wikipedia/commons/0/08/Netflix_2015_logo.svg"},{"id":17,"name":"Oracle","category":"Software","price":450000000000,"description":"Cloud & Database","image":"https://upload.wikimedia.org/wikipedia/commons/5/50/Oracle_logo.svg"},{"id":18,"name":"Samsung","category":"Conglomerate","price":400000000000,"description":"Electronics Giant","image":"https://upload.wikimedia.org/wikipedia/commons/2/24/Samsung_Logo.svg"},{"id":19,"name":"Procter & Gamble","category":"Consumer Goods","price":380000000000,"description":"Consumer Products","image":"https://upload.wikimedia.org/wikipedia/commons/1/13/Procter_&_Gamble_logo.svg"},{"id":20,"name":"Johnson & Johnson","category":"Pharmaceutical","price":360000000000,"description":"Healthcare","image":"https://upload.wikimedia.org/wikipedia/commons/4/40/Johnson_and_Johnson_logo.svg"},{"id":21,"name":"Huawei","category":"Phones","price":1000000000000,"description":"Phones (Kept from original for game balance)","image":"https://upload.wikimedia.org/wikipedia/commons/5/5c/Huawei_Standard_logo.svg"},{"id":22,"name":"Dell","category":"Computer Hardware","price":150700000000,"description":"Computer Hardware","image":"https://upload.wikimedia.org/wikipedia/commons/4/43/Dell_logo.svg"},{"id":23,"name":"LG","category":"Electronics","price":171600000000,"description":"Electronics","image":"https://upload.wikimedia.org/wikipedia/commons/5/59/LG_logo_(2015).svg"},{"id":24,"name":"Sony","category":"Conglomerate","price":636000000000,"description":"Conglomerate","image":"https://upload.wikimedia.org/wikipedia/commons/c/ce/Sony_logo.svg"},{"id":25,"name":"Toyota","category":"Automobile","price":2115700000000,"description":"Most Valuable Automobile Company (Updated)","image":"https://upload.wikimedia.org/wikipedia/commons/1/1f/Toyota_logo_2019.svg"},{"id":26,"name":"Ferrari","category":"Supercars","price":301300000000,"description":"Supercars","image":"https://upload.wikimedia.org/wikipedia/en/6/67/Ferrari_logo.svg"},{"id":27,"name":"Porsche","category":"Cars","price":254400000000,"description":"Cars","image":"https://upload.wikimedia.org/wikipedia/en/1/12/Porsche_logo.svg"},{"id":28,"name":"BMW","category":"Cars","price":683300000000,"description":"Cars","image":"https://upload.wikimedia.org/wikipedia/commons/4/44/BMW.svg"},{"id":29,"name":"Mercedes (Daimler)","category":"Cars","price":600000000000,"description":"Luxury Cars (Estimated)","image":"https://upload.wikimedia.org/wikipedia/commons/9/90/Mercedes-Benz_Star_2022.svg"},{"id":30,"name":"McDonald's","category":"Fast Food","price":1214800000000,"description":"Most Valuable Fast Food Company (Updated)","image":"https://upload.wikimedia.org/wikipedia/commons/3/36/McDonald%27s_Golden_Arches.svg"},{"id":31,"name":"Starbucks","category":"Beverage","price":801600000000,"description":"Beverage","image":"https://upload.wikimedia.org/wikipedia/en/d/d3/Starbucks_Corporation_Logo_2011.svg"},{"id":32,"name":"Coca Cola","category":"Beverages","price":1860400000000,"description":"Most Valuable Beverage Company (Updated)","image":"https://upload.wikimedia.org/wikipedia/commons/c/ce/Coca-Cola_logo.svg"},{"id":33,"name":"PepsiCo","category":"Beverages","price":1559000000000,"description":"Beverages","image":"https://upload.wikimedia.org/wikipedia/commons/a/a9/Pepsi_logo_2023.svg"},{"id":34,"name":"Nestle","category":"Food","price":2387100000000,"description":"Most Valuable Food Company (Updated)","image":"https://upload.wikimedia.org/wikipedia/commons/4/47/Nestl%C3%A9.svg"},{"id":35,"name":"Unilever","category":"Consumer Goods","price":1554600000000,"description":"Consumer Goods","image":"https://upload.wikimedia.org/wikipedia/commons/4/4e/Unilever_logo.svg"},{"id":36,"name":"LVMH","category":"Luxury Products","price":1513600000000,"description":"Most Valuable Luxury Goods Company (Updated)","image":"https://upload.wikimedia.org/wikipedia/commons/6/6f/LVMH_logo.svg"},{"id":37,"name":"Hermes","category":"Luxury Products","price":576800000000,"description":"Luxury Products","image":"https://upload.wikimedia.org/wikipedia/commons/9/9f/Herm%C3%A8s_logo.svg"},{"id":38,"name":"Nike","category":"Sportswear","price":1046900000000,"description":"Most Valuable Sports Company (Updated)","image":"https://upload.wikimedia.org/wikipedia/commons/a/a6/Logo_NIKE.svg"},{"id":39,"name":"Adidas","category":"Sportswear","price":452500000000,"description":"Sportswear","image":"https://upload.wikimedia.org/wikipedia/commons/3/3c/Adidas_Logo.svg"},{"id":40,"name":"Disney","category":"Entertainment","price":1559600000000,"description":"Most Valuable Media Company (Updated)","image":"https://upload.wikimedia.org/wikipedia/commons/3/3c/Disney_wordmark.svg"},{"id":41,"name":"Netflix","category":"Digital Media","price":1393700000000,"description":"Digital Media (Updated)","image":"https://upload.wikimedia.org/wikipedia/commons/0/08/Netflix_2015_logo.svg"},{"id":42,"name":"Nintendo","category":"Video Games","price":617100000000,"description":"Most Valuable Game Company","image":"https://upload.wikimedia.org/wikipedia/commons/4/4e/Nintendo.svg"},{"id":43,"name":"Electronic Arts","category":"Gaming","price":382000000000,"description":"Gaming","image":"https://upload.wikimedia.org/wikipedia/commons/9/9a/EA_logo_2020.svg"},{"id":44,"name":"Hasbro","category":"Toys","price":119400000000,"description":"Most Valuable Toy Company","image":"https://upload.wikimedia.org/wikipedia/commons/7/7e/Hasbro_logo.svg"},{"id":45,"name":"Mattel","category":"Toys","price":56500000000,"description":"Toys","image":"https://upload.wikimedia.org/wikipedia/commons/0/0e/Mattel_logo.svg"},{"id":46,"name":"L'Oreal","category":"Cosmetics","price":1238200000000,"description":"Cosmetics","image":"https://upload.wikimedia.org/wikipedia/commons/5/5f/L%27Or%C3%A9al_Logo.svg"},{"id":47,"name":"Estee Lauder","category":"Cosmetics","price":527400000000,"description":"Cosmetics","image":"https://upload.wikimedia.org/wikipedia/commons/0/0c/Est%C3%A9e_Lauder_Companies.svg"},{"id":48,"name":"Marriott","category":"Hotels","price":507600000000,"description":"Most Valuable Hotel Chain","image":"https://upload.wikimedia.org/wikipedia/commons/1/18/Marriott_Logo.svg"},{"id":49,"name":"Royal Caribbean","category":"Cruises","price":264600000000,"description":"Most Valuable Cruise Company","image":"https://upload.wikimedia.org/wikipedia/commons/5/5f/Royal_Caribbean_International_logo.svg"},{"id":50,"name":"Expedia","category":"Travel","price":164900000000,"description":"Travel","image":"https://upload.wikimedia.org/wikipedia/commons/6/69/Expedia_2023_logo.svg"},{"id":51,"name":"Ford","category":"Cars","price":422400000000,"description":"Cars","image":"https://upload.wikimedia.org/wikipedia/commons/3/3e/Ford_logo_flat.svg"},{"id":52,"name":"General Motors","category":"Automobile","price":538800000000,"description":"Automobile","image":"https://upload.wikimedia.org/wikipedia/commons/9/9f/General_Motors_2021.svg"},{"id":53,"name":"Honda","category":"Cars","price":621000000000,"description":"Cars","image":"https://upload.wikimedia.org/wikipedia/commons/3/3a/Honda.svg"},{"id":54,"name":"Volkswagen","category":"Automobile","price":983300000000,"description":"Automobile","image":"https://upload.wikimedia.org/wikipedia/commons/6/6d/Volkswagen_logo_2019.svg"},{"id":55,"name":"Rolls Royce","category":"Luxury Cars","price":199000000000,"description":"Luxury Cars","image":"https://upload.wikimedia.org/wikipedia/en/b/b3/Rolls-Royce_Motor_Cars_logo.svg"},{"id":56,"name":"Harley Davidson","category":"Motorbikes","price":74700000000,"description":"Motorbikes","image":"https://upload.wikimedia.org/wikipedia/commons/7/7e/Harley-Davidson_logo.svg"},{"id":57,"name":"Yamaha","category":"Musical Instruments","price":91200000000,"description":"Musical Instruments","image":"https://upload.wikimedia.org/wikipedia/commons/5/5d/Yamaha_logo.svg"},{"id":58,"name":"Prada","category":"Luxury Accessories","price":104500000000,"description":"Luxury Accessories","image":"https://upload.wikimedia.org/wikipedia/commons/6/6e/Prada_logo.svg"},{"id":59,"name":"Tiffany & Co","category":"Jewellery","price":126000000000,"description":"Jewellery","image":"https://upload.wikimedia.org/wikipedia/commons/1/1d/Tiffany_%26_Co._logo.svg"},{"id":60,"name":"H&M","category":"Apparel","price":242300000000,"description":"Apparel","image":"https://upload.wikimedia.org/wikipedia/commons/5/5d/H%26M-Logo.svg"},{"id":61,"name":"Gap","category":"Apparel","price":134500000000,"description":"Apparel","image":"https://upload.wikimedia.org/wikipedia/commons/6/69/Gap_logo.svg"},{"id":62,"name":"Tesco","category":"Groceries","price":241000000000,"description":"Groceries","image":"https://upload.wikimedia.org/wikipedia/commons/5/5d/Tesco_Logo.svg"},{"id":63,"name":"Kellogg","category":"Cereals","price":241500000000,"description":"Cereals","image":"https://upload.wikimedia.org/wikipedia/commons/3/3f/Kellogg%27s-Logo.svg"},{"id":64,"name":"Hershey","category":"Chocolate","price":209400000000,"description":"Chocolate","image":"https://upload.wikimedia.org/wikipedia/commons/5/58/Hershey%27s_logo.svg"},{"id":65,"name":"Carlsberg","category":"Beer","price":183400000000,"description":"Beer","image":"https://upload.wikimedia.org/wikipedia/commons/7/7f/Carlsberg_Group_logo.svg"},{"id":66,"name":"Heineken","category":"Alcohol","price":604800000000,"description":"Alcohol","image":"https://upload.wikimedia.org/wikipedia/commons/0/0d/Heineken_logo.svg"},{"id":67,"name":"Anheuser-Busch InBev","category":"Brewing","price":1806600000000,"description":"Most Valuable Brewing Company (Updated)","image":"https://upload.wikimedia.org/wikipedia/commons/8/8b/Anheuser-Busch_InBev_Logo.svg"},{"id":68,"name":"Colgate","category":"Toothpaste","price":609900000000,"description":"Toothpaste","image":"https://upload.wikimedia.org/wikipedia/commons/3/3c/Colgate_logo.svg"},{"id":69,"name":"Clorox","category":"Cleaning Products","price":171200000000,"description":"Cleaning Products","image":"https://upload.wikimedia.org/wikipedia/commons/6/6b/Clorox_Logo.svg"},{"id":70,"name":"Del Monte","category":"Food","price":163000000000,"description":"Food","image":"https://upload.wikimedia.org/wikipedia/commons/9/9a/Del_Monte_logo.svg"},{"id":71,"name":"Canon","category":"Cameras","price":486700000000,"description":"Cameras","image":"https://upload.wikimedia.org/wikipedia/commons/3/31/Canon_logo.svg"},{"id":72,"name":"Xerox","category":"Printers","price":76500000000,"description":"Printers","image":"https://upload.wikimedia.org/wikipedia/commons/5/5f/Xerox_logo.svg"},{"id":73,"name":"Panasonic","category":"Electronics","price":373000000000,"description":"Electronics","image":"https://upload.wikimedia.org/wikipedia/commons/9/9f/Panasonic_logo_(Blue).svg"},{"id":74,"name":"Toshiba","category":"Electronics","price":189000000000,"description":"Electronics","image":"https://upload.wikimedia.org/wikipedia/commons/2/20/Toshiba_logo.svg"},{"id":75,"name":"Sharp","category":"Electronic Appliances","price":160500000000,"description":"Electronic Appliances","image":"https://upload.wikimedia.org/wikipedia/commons/1/1e/Logo_of_the_Sharp_Corporation.svg"},{"id":76,"name":"Acer","category":"Computer Hardware","price":28200000000,"description":"Computer Hardware","image":"https://upload.wikimedia.org/wikipedia/commons/7/7e/Acer_2011.svg"},{"id":77,"name":"Motorola","category":"Telecommunications","price":174800000000,"description":"Telecommunications","image":"https://upload.wikimedia.org/wikipedia/commons/3/3c/Motorola_new_logo.svg"},{"id":78,"name":"Nokia","category":"Phones","price":331900000000,"description":"Phones","image":"https://upload.wikimedia.org/wikipedia/commons/8/81/Nokia_2023.svg"},{"id":79,"name":"Snapchat (Snap)","category":"Social Media","price":216900000000,"description":"Social Media","image":"https://upload.wikimedia.org/wikipedia/commons/7/7f/Snapchat_logo.svg"},{"id":80,"name":"eBay","category":"E-Commerce","price":436600000000,"description":"E-Commerce","image":"https://upload.wikimedia.org/wikipedia/commons/1/1b/EBay_logo.svg"},{"id":81,"name":"PayPal","category":"Online Financial Services","price":950500000000,"description":"Online Financial Services","image":"https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg"},{"id":82,"name":"Salesforce","category":"Cloud Computing","price":905300000000,"description":"Cloud Computing","image":"https://upload.wikimedia.org/wikipedia/commons/f/f9/Salesforce.com_logo.svg"},{"id":83,"name":"Adobe","category":"Software","price":1069800000000,"description":"Software Programmes","image":"https://upload.wikimedia.org/wikipedia/commons/7/7c/Adobe_Corporate_logo.svg"},{"id":84,"name":"Autodesk","category":"3D Software","price":264000000000,"description":"3D Software","image":"https://upload.wikimedia.org/wikipedia/commons/3/3b/Autodesk_logo.svg"},{"id":85,"name":"FedEx","category":"Delivery Services","price":647400000000,"description":"Delivery Services","image":"https://upload.wikimedia.org/wikipedia/commons/5/5f/FedEx_Express_logo.svg"},{"id":86,"name":"United Airlines","category":"Airlines","price":200000000000,"description":"Airlines","image":"https://upload.wikimedia.org/wikipedia/commons/4/49/United_Airlines_Logo_-_2019.svg"},{"id":87,"name":"Delta Airlines","category":"Airline","price":380600000000,"description":"Airline","image":"https://upload.wikimedia.org/wikipedia/commons/7/78/Delta_logo.svg"},{"id":88,"name":"Boeing","category":"Aircraft","price":2042300000000,"description":"Most Valuable Aircraft Company (Updated)","image":"https://upload.wikimedia.org/wikipedia/commons/6/67/Boeing_full_logo.svg"},{"id":89,"name":"Airbus","category":"Aircrafts","price":969600000000,"description":"Aircrafts","image":"https://upload.wikimedia.org/wikipedia/commons/9/9f/Airbus_Logo_2017.png"},{"id":90,"name":"Lockheed Martin","category":"Defence","price":977200000000,"description":"Defence","image":"https://upload.wikimedia.org/wikipedia/commons/8/8b/Lockheed_Martin_logo.svg"},{"id":91,"name":"Caterpillar","category":"Construction Equipment","price":905500000000,"description":"Most Valuable Construction Manufacturer","image":"https://upload.wikimedia.org/wikipedia/commons/3/3f/Caterpillar_logo.svg"},{"id":92,"name":"Bridgestone","category":"Tires","price":328900000000,"description":"Tires","image":"https://upload.wikimedia.org/wikipedia/commons/5/5f/Bridgestone_logo.svg"},{"id":93,"name":"ArcelorMittal","category":"Steel","price":330600000000,"description":"Most Valuable Steel Producer","image":"https://upload.wikimedia.org/wikipedia/commons/3/3f/ArcelorMittal_logo.svg"},{"id":94,"name":"BHP","category":"Mining","price":1125100000000,"description":"Most Valuable Mining Company (Updated)","image":"https://upload.wikimedia.org/wikipedia/commons/9/9a/BHP_logo.svg"},{"id":95,"name":"Exxon Mobil","category":"Oil","price":3186600000000,"description":"Most Valuable Public Oil Company (Updated)","image":"https://upload.wikimedia.org/wikipedia/commons/6/6f/Exxon_Mobil_Logo.svg"},{"id":96,"name":"Shell","category":"Oil","price":2716200000000,"description":"Oil (Updated)","image":"https://upload.wikimedia.org/wikipedia/commons/5/5f/Shell_logo.svg"},{"id":97,"name":"Chevron","category":"Oil","price":2176000000000,"description":"Oil","image":"https://upload.wikimedia.org/wikipedia/commons/1/11/Chevron_Logo.svg"},{"id":98,"name":"BP","category":"Oil","price":1305500000000,"description":"Oil","image":"https://upload.wikimedia.org/wikipedia/commons/0/0d/BP_Helios_logo.svg"},{"id":99,"name":"BASF","category":"Chemicals","price":958200000000,"description":"The Chemical Company","image":"https://upload.wikimedia.org/wikipedia/commons/4/4a/BASF-Logo_bw.svg"},{"id":100,"name":"DowDuPont","category":"Chemicals","price":1634300000000,"description":"Most Valuable Chemical Company (Updated)","image":"https://upload.wikimedia.org/wikipedia/commons/9/9b/Dow_Chemical_Company_logo.svg"}]`),o9=a9.map(n=>({...n,value:n.price,description:n.description||"      ."})),l9=()=>{const{user:n,refreshUser:e}=Mi(),{showAlert:t,showConfirm:i,showToast:r}=$u(),[o,c]=$.useState(null),[h,f]=$.useState(7),[m,g]=$.useState(!1),[v,_]=$.useState(""),[w,S]=$.useState("desc"),R=H=>n?.ownedCompanies?.filter(G=>G.id===H).length||0,O=async()=>{if(!o||!n)return;const H=o.value,G=H/5,X=(n.balance||0)-H;if(X<0)return t("_:     .");if(await i(`_:     ${o.name}  : ${Dt(H)}`)){g(!0);try{const N=ze(we,"users",n.id);await pn(N,{balance:X,ownedCompanies:Py({id:o.id,name:o.name,dailyValue:G,purchasedAt:Nt()})}),await e(),r(`_:   ${o.name} .`),c(null)}catch{t("_:    .")}g(!1)}},M=o9.filter(H=>H.name.toLowerCase().includes(v.toLowerCase())).sort((H,G)=>w==="desc"?G.value-H.value:H.value-G.value),F=()=>{S(H=>H==="desc"?"asc":"desc")};if(o){const H=o.value/5,G=(n?.balance||0)-o.value,X=G+H*h;return d.jsxs("div",{className:"page-container fade-in",style:{padding:"0.75rem"},children:[d.jsxs("button",{onClick:()=>c(null),className:"micro-label",style:{background:"transparent",display:"flex",alignItems:"center",gap:"0.4rem",marginBottom:"1.5rem",border:"none",color:"var(--primary)",cursor:"pointer"},children:[d.jsx(im,{size:14})," _ // _"]}),d.jsxs("div",{className:"card card-glow",style:{padding:0,overflow:"hidden",border:"1px solid var(--primary)",borderRadius:"20px"},children:[d.jsxs("div",{style:{height:"160px",width:"100%",background:"linear-gradient(135deg, #050508 0%, #0a1120 100%)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:[d.jsx("div",{style:{position:"absolute",inset:0,opacity:.1,backgroundImage:"radial-gradient(var(--primary) 1px, transparent 1px)",backgroundSize:"20px 20px"}}),d.jsx("div",{className:"scanline"}),d.jsx(sm,{size:60,color:"var(--primary)",style:{opacity:.5}}),d.jsx("div",{style:{position:"absolute",top:"1rem",right:"1rem",textAlign:"right"},children:d.jsx("span",{className:"status-badge connected",style:{fontSize:"0.5rem",padding:"0.2rem 0.5rem"},children:"__1"})})]}),d.jsxs("div",{style:{padding:"1.25rem"},children:[d.jsxs("div",{style:{marginBottom:"1.5rem"},children:[d.jsx("p",{className:"micro-label",style:{color:"var(--primary)",fontSize:"0.6rem"},children:"___"}),d.jsx("h1",{className:"text-gradient",style:{fontSize:"1.6rem",margin:"0.25rem 0"},children:o.name}),d.jsx("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:d.jsx("span",{className:"micro-label",style:{background:"var(--surface-soft)",padding:"0.3rem 0.6rem",borderRadius:"4px"},children:o.category})})]}),d.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",padding:"1rem",borderRadius:"12px",marginBottom:"1.5rem"},children:[d.jsx("p",{className:"micro-label",style:{marginBottom:"0.25rem"},children:"_"}),d.jsx("h2",{className:"mono",style:{fontSize:"1.5rem",margin:0},children:Dt(o.value)})]}),d.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",lineHeight:"1.6",marginBottom:"1.5rem"},children:o.description}),d.jsxs("div",{className:"card",style:{background:"rgba(255,255,255,0.02)",border:"1px solid var(--border-bright)",padding:"1.25rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.25rem"},children:[d.jsx(Su,{size:16,color:"var(--primary)"}),d.jsx("h3",{className:"micro-label",style:{fontSize:"0.65rem"},children:"__"})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[d.jsxs("div",{className:"intel-item",children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.55rem"},children:"/ (A)"}),d.jsxs("p",{className:"mono",style:{color:"var(--success)",fontSize:"0.9rem"},children:["+",Dt(H)]})]}),d.jsxs("div",{className:"intel-item",children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.55rem"},children:"_ (B)"}),d.jsx("p",{className:"mono",style:{color:G<0?"var(--danger)":"var(--text-main)",fontSize:"0.9rem"},children:Dt(G)})]})]}),d.jsxs("div",{style:{marginBottom:"1.5rem",background:"rgba(0,0,0,0.2)",padding:"1rem",borderRadius:"10px"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem",alignItems:"center"},children:[d.jsx("label",{className:"micro-label",style:{fontSize:"0.6rem"},children:"  (n)"}),d.jsxs("span",{className:"mono",style:{color:"var(--primary)",fontWeight:"900",fontSize:"0.9rem"},children:[h," "]})]}),d.jsx("input",{type:"range",min:"0",max:"90",value:h,onChange:U=>f(Number(U.target.value)),style:{height:"5px",width:"100%"}})]}),d.jsxs("div",{style:{borderTop:"1px solid var(--border-bright)",paddingTop:"1rem",display:"flex",justifyContent:"space-between"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{opacity:.5,fontSize:"0.55rem"},children:"  "}),d.jsx("p",{className:"mono",style:{fontSize:"1.2rem",fontWeight:"900",color:"var(--primary)"},children:Dt(X)})]}),d.jsxs("div",{style:{textAlign:"right"},children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.55rem"},children:" "}),d.jsxs("p",{className:"mono",style:{color:"var(--success)",fontSize:"0.9rem"},children:["+",(H*h/o.value*100).toFixed(1),"%"]})]})]})]}),d.jsx("button",{onClick:O,disabled:G<0||m,className:"primary",style:{width:"100%",marginTop:"1.5rem",padding:"1.1rem",fontSize:"0.9rem",fontWeight:"900"},children:m?"  ...":G<0?" :   ":`  (${Dt(o.value)})`})]})]})]})}return d.jsxs("div",{className:"page-container fade-in",style:{padding:"0.75rem"},children:[d.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{color:"var(--primary)",letterSpacing:"2px",fontSize:"0.6rem"},children:"_: _"}),d.jsx("h1",{className:"text-gradient",style:{fontSize:"1.6rem",margin:0},children:" "})]}),d.jsx("div",{className:"system-status",style:{padding:"0.3rem 0.6rem"},children:d.jsx("span",{className:"micro-label",style:{fontSize:"0.5rem"},children:"_"})})]}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1.5rem"},children:[d.jsx("div",{className:"card",style:{padding:"0.6rem 1rem",background:"rgba(255,255,255,0.03)",border:"1px solid var(--border-bright)",borderRadius:"12px"},children:d.jsx("input",{type:"text",placeholder:"  ...",value:v,onChange:H=>_(H.target.value),style:{width:"100%",background:"transparent",border:"none",color:"white",fontSize:"0.85rem",outline:"none"}})}),d.jsxs("button",{onClick:F,className:"card",style:{padding:"0.7rem",background:"rgba(99, 102, 241, 0.1)",border:"1px solid var(--primary)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",borderRadius:"12px"},children:[d.jsx(Su,{size:14}),d.jsx("span",{className:"micro-label",children:w==="desc"?"  ":"  "})]})]}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem"},children:M.map(H=>d.jsxs("div",{className:"card card-glow",onClick:()=>c(H),style:{padding:0,overflow:"hidden",border:R(H.id)>0?"1px solid var(--success)":"1px solid var(--border-dim)",borderRadius:"16px",display:"flex"},children:[d.jsx("div",{style:{width:"100px",background:"linear-gradient(135deg, #0a1120, #1e293b)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",flexShrink:0},children:R(H.id)>0?d.jsx("div",{style:{background:"var(--success)",width:"24px",height:"24px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 0 10px var(--success)"},children:d.jsx(z5,{size:12,color:"white"})}):d.jsx($y,{size:24,color:"var(--primary)",style:{opacity:.3}})}),d.jsxs("div",{style:{padding:"1rem",flex:1,minWidth:0},children:[d.jsx("h3",{style:{margin:0,fontSize:"0.95rem",color:"white",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:H.name.toUpperCase()}),d.jsx("p",{className:"micro-label",style:{fontSize:"0.55rem",opacity:.5,marginTop:"0.2rem"},children:H.category}),d.jsxs("div",{style:{marginTop:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsx("span",{className:"mono",style:{fontSize:"1rem",fontWeight:"900",color:"var(--primary)"},children:Dt(H.value)}),R(H.id)>0&&d.jsxs("span",{className:"micro-label",style:{color:"var(--success)",fontSize:"0.55rem"},children:[": ",R(H.id)]})]})]})]},H.id))}),d.jsx("style",{children:`
                input[type="range"] { -webkit-appearance: none; background: rgba(255,255,255,0.1); border-radius: 5px; }
                input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: 15px; height: 15px; background: var(--primary); border-radius: 50%; cursor: pointer; box-shadow: 0 0 10px var(--primary); }
                @media (max-width: 768px) {
                    .page-container { padding-bottom: 100px !important; }
                }
            `})]})},c9=JSON.parse('[{"id":"sonic_pistol","name":"Sonic Pistol","type":"Attack","power":100,"price":1000,"description":"Short-range sound wave emitter.","image":"https://image2url.com/r2/bucket3/images/1766910623376-152aa72f-4fa6-4b94-88cc-682f9697d8e6.png"},{"id":"kevlar_vest","name":"Kevlar Vest","type":"Defense","power":100,"price":1000,"description":"Basic ballistic protection.","image":"https://image2url.com/r2/bucket3/images/1766910709766-ec2c8d61-d1e7-40d9-8272-6d5bef5a30a7.png"},{"id":"laser_carbine","name":"Laser Carbine","type":"Attack","power":500,"price":7500,"description":"High-precision light beam rifle.","image":"https://image2url.com/r2/bucket3/images/1766910934121-32ce26a6-d825-4fda-b0c0-87f6dc31a2cf.png"},{"id":"alloy_shield","name":"Titanium Shield","type":"Defense","power":500,"price":7500,"description":"Heavy-duty metallic barrier.","image":"https://image2url.com/r2/bucket3/images/1766911060549-4321e40f-2eb0-401c-be67-5083f2e804fb.png"},{"id":"plasma_grenade","name":"Plasma Grenade","type":"Attack","power":2500,"price":50000,"description":"Localized superheated gas explosion.","image":"https://image2url.com/r2/bucket3/images/1766911210168-fb95ddfe-b4e4-472d-8b1e-8df4a5ea0300.png"},{"id":"nano_mesh","name":"Nano-Silk Mesh","type":"Defense","power":2500,"price":50000,"description":"Micro-weave armor for high mobility.","image":"https://image2url.com/r2/bucket3/images/1766911301011-f0482ef8-d40f-4629-9884-9185c4b06117.png"},{"id":"railgun_mk2","name":"Railgun Mk II","type":"Attack","power":5000,"price":250000,"description":"Electromagnetic slug launcher.","image":"https://image2url.com/r2/bucket3/images/1766911409935-d4cb4370-b5cc-4a14-8847-4889f1c2f21c.png"},{"id":"energy_field","name":"Energy Field","type":"Defense","power":5000,"price":250000,"description":"Basic electromagnetic bubble.","image":"https://image2url.com/r2/bucket3/images/1766911574919-614ded40-e1b9-47df-b95f-d274a6590212.png"},{"id":"vortex_blade","name":"Vortex Blade","type":"Attack","power":5000,"price":1500000,"description":"A blade that bends space-time.","image":"https://image2url.com/r2/bucket3/images/1766911798947-3b84fe7f-a628-4ec1-96a5-dbf6844169a7.png"},{"id":"phase_armor","name":"Phase Armor","type":"Defense","power":5000,"price":1500000,"description":"Allows physical attacks to pass through.","image":"https://image2url.com/r2/bucket3/images/1766912091227-9e16be07-7c6f-49b8-b8bf-b8ea47c51860.png"},{"id":"ion_cannon","name":"Ion Cannon","type":"Attack","power":5000,"price":10000000,"description":"Orbital beam for massive destruction.","image":"https://image2url.com/r2/bucket3/images/1766912276927-9f196277-7e82-42d7-9060-a58da4bd69d8.png"},{"id":"gravity_well","name":"Gravity Well","type":"Defense","power":5000,"price":10000000,"description":"Bends incoming projectiles away.","image":""},{"id":"matter_disruptor","name":"Matter Disruptor","type":"Attack","power":5000,"price":50000000,"description":"Breaks atomic bonds instantly.","image":""},{"id":"molecular_gate","name":"Molecular Gate","type":"Defense","power":5000,"price":50000000,"description":"Hardens molecular structure on impact.","image":""},{"id":"supernova_launcher","name":"Supernova Launcher","type":"Attack","power":5000,"price":250000000,"description":"Miniature star collapse force.","image":""},{"id":"stellar_plate","name":"Stellar Plating","type":"Defense","power":5000,"price":250000000,"description":"Armor forged in the heart of a star.","image":""},{"id":"blackhole_bomb","name":"Black Hole Bomb","type":"Attack","power":5000,"price":1000000000,"description":"Absolute erasure of existence.","image":""},{"id":"event_horizon","name":"Event Horizon","type":"Defense","power":5000,"price":1000000000,"description":"Void shield that absorbs all energy.","image":""},{"id":"omega_ray","name":"Omega Ray","type":"Attack","power":5000,"price":5000000000,"description":"The ultimate offensive beam.","image":""},{"id":"god_barrier","name":"Aegis of the Ancients","type":"Defense","power":5000,"price":5000000000,"description":"Indestructible divine protection.","image":""},{"id":"quantum_scythe","name":"Quantum Scythe","type":"Attack","power":5000,"price":25000000000,"description":"Cuts through realities.","image":""},{"id":"multiverse_cloak","name":"Multiverse Cloak","type":"Defense","power":5000,"price":25000000000,"description":"Shifts user between dimensions.","image":""},{"id":"antimatter_rifle","name":"Antimatter Rifle","type":"Attack","power":1500,"price":25000,"description":"Fires antimatter pellets.","image":""},{"id":"carbon_fiber_shield","name":"Carbon Shield","type":"Defense","power":1500,"price":25000,"description":"Ultra-light impact absorption.","image":""},{"id":"fusion_sabre","name":"Fusion Sabre","type":"Attack","power":5000,"price":180000,"description":"Nuclear-powered energy blade.","image":""},{"id":"reactor_plating","name":"Reactor Plating","type":"Defense","power":5000,"price":180000,"description":"Hardened skin against energy heat.","image":""},{"id":"thunderbolt_missile","name":"Thunderbolt","type":"Attack","power":5000,"price":850000,"description":"Lightning-fast cruise missile.","image":""},{"id":"tesla_coil_array","name":"Tesla Array","type":"Defense","power":5000,"price":850000,"description":"Zaps incoming threats with electricity.","image":""},{"id":"warp_blaster","name":"Warp Blaster","type":"Attack","power":5000,"price":4500000,"description":"Fires projectiles through subspace.","image":""},{"id":"subspace_barrier","name":"Subspace Wall","type":"Defense","power":5000,"price":4500000,"description":"Hides territory in a hidden fold.","image":""},{"id":"glitch_cannon","name":"System Glitch","type":"Attack","power":5000,"price":22000000,"description":"Corrupts enemy combat data.","image":""},{"id":"firewall_max","name":"Firewall Max","type":"Defense","power":5000,"price":22000000,"description":"Digital protection against glitches.","image":""},{"id":"void_launcher","name":"Void Launcher","type":"Attack","power":5000,"price":125000000,"description":"Fires spheres of pure nothingness.","image":""},{"id":"vacuum_seal","name":"Vacuum Seal","type":"Defense","power":5000,"price":125000000,"description":"Protects against void pressure.","image":""},{"id":"nebula_gas","name":"Nebula Cloud","type":"Attack","power":5000,"price":600000000,"description":"Corrosive interstellar gas.","image":""},{"id":"gas_filter_pro","name":"Nebula Filter","type":"Defense","power":5000,"price":600000000,"description":"Neutralizes acidic gas attacks.","image":""},{"id":"quasar_drill","name":"Quasar Drill","type":"Attack","power":5000,"price":3500000000,"description":"High-speed rotational energy beam.","image":""},{"id":"centrifuge_hull","name":"Kinetic Hull","type":"Defense","power":5000,"price":3500000000,"description":"Spins fast to deflect energy beams.","image":""},{"id":"big_bang_fist","name":"The Big Bang","type":"Attack","power":5000,"price":100000000000,"description":"Creation through destruction.","image":""},{"id":"eternal_fortress","name":"Eternal Fortress","type":"Defense","power":5000,"price":100000000000,"description":"Existence-level defensive shell.","image":""}]'),u9=c9,h9=()=>{const{user:n,refreshUser:e}=Mi(),[t,i]=$.useState(null),[r,o]=$.useState(1),[c,h]=$.useState(!1),f=async()=>{if(!t||!n)return;const m=t.price*r,g=n.balance-m;if(g<0)return alert(" :      .");if(window.confirm(` :   ${r}   ${t.name}  : $${m.toLocaleString()}`)){h(!0);try{const v=ze(we,"users",n.id);await pn(v,{balance:g,ownedWeapons:Py({id:t.id,name:t.name,type:t.type,power:t.power,quantity:r,purchasedAt:new Date})}),await Jf(Je(we,"activities"),{userId:n.id,message:`:   ${r}x ${t.name} ( : ${t.power})`,timestamp:Nt(),type:"purchase"}),await e(),i(null),o(1)}catch{alert(" :      .")}h(!1)}};if(t){const m=t.price*r,g=(n?.balance||0)-m;return d.jsxs("div",{className:"page-container fade-in",style:{padding:"0.75rem"},children:[d.jsxs("button",{onClick:()=>{i(null),o(1)},className:"micro-label",style:{background:"transparent",display:"flex",alignItems:"center",gap:"0.4rem",marginBottom:"1.5rem",border:"none",color:"var(--danger)",cursor:"pointer"},children:[d.jsx(im,{size:14})," _ // __"]}),d.jsxs("div",{className:"card card-glow",style:{padding:0,overflow:"hidden",border:"1px solid var(--danger)",borderRadius:"20px"},children:[d.jsxs("div",{style:{height:"200px",width:"100%",background:"linear-gradient(135deg, #050508 0%, #1a0808 100%)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[d.jsx("div",{style:{position:"absolute",inset:0,opacity:.1,backgroundImage:"repeating-linear-gradient(0deg, var(--danger) 0px, transparent 1px, transparent 15px)",backgroundSize:"100% 15px"}}),t.type==="Attack"?d.jsx(am,{size:80,color:"var(--danger)",style:{opacity:.6,filter:"drop-shadow(0 0 10px var(--danger))"}}):d.jsx(R0,{size:80,color:"var(--primary)",style:{opacity:.6,filter:"drop-shadow(0 0 10px var(--primary))"}}),d.jsxs("div",{style:{position:"absolute",bottom:"1rem",right:"1rem",textAlign:"right"},children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.5rem"},children:"_"}),d.jsx("div",{style:{display:"flex",gap:"2px",alignItems:"flex-end"},children:[1,2,3,4,5].map(v=>d.jsx("div",{style:{width:3,height:3*v,background:v<5?"var(--danger)":"rgba(255,255,255,0.1)"}},v))})]})]}),d.jsxs("div",{style:{padding:"1.5rem"},children:[d.jsxs("div",{style:{marginBottom:"1.5rem"},children:[d.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginBottom:"0.75rem"},children:[d.jsx("span",{className:`status-badge ${t.type==="Attack"?"neutral":""}`,style:{fontSize:"0.55rem",padding:"0.2rem 0.5rem"},children:t.type==="Attack"?"__":"__"}),d.jsxs("span",{className:"micro-label",style:{background:"rgba(255,255,255,0.05)",padding:"0.2rem 0.5rem",borderRadius:"4px",border:"1px solid var(--border-dim)",fontSize:"0.55rem"},children:[": ",t.id.toUpperCase()]})]}),d.jsx("h1",{className:"text-gradient",style:{fontSize:"1.6rem",margin:0},children:t.name}),d.jsxs("div",{style:{marginTop:"0.75rem",background:"rgba(255,255,255,0.02)",padding:"0.75rem",borderRadius:"10px"},children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.55rem",marginBottom:"0.2rem"},children:"   "}),d.jsxs("h2",{className:"mono",style:{fontSize:"1.4rem",margin:0},children:["$",t.price.toLocaleString()]})]})]}),d.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",lineHeight:"1.6",marginBottom:"1.5rem"},children:t.description}),d.jsxs("div",{className:"card",style:{background:"rgba(255,255,255,0.02)",border:"1px solid var(--border-bright)",padding:"1.25rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[d.jsx(Ej,{size:16,color:"var(--danger)"}),d.jsx("h3",{className:"micro-label",style:{fontSize:"0.7rem"},children:"  "})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[d.jsxs("div",{className:"intel-item",children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.5rem"},children:" "}),d.jsxs("p",{className:"mono",style:{color:"var(--warning)",fontSize:"0.9rem"},children:[t.power.toLocaleString()," PWR"]})]}),d.jsxs("div",{className:"intel-item",children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.5rem"},children:" "}),d.jsx("p",{className:"mono",style:{color:"var(--danger)",fontSize:"0.9rem"},children:""})]})]}),d.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",padding:"1.25rem",borderRadius:"15px",border:"1px solid var(--border-dim)"},children:[d.jsx("label",{className:"micro-label",style:{marginBottom:"0.5rem",display:"block",textAlign:"center",fontSize:"0.6rem"},children:"   (n)"}),d.jsx("input",{type:"number",min:"1",value:r,onChange:v=>o(Math.max(1,parseInt(v.target.value)||0)),className:"mono",style:{fontSize:"1.8rem",padding:"0.5rem",background:"transparent",border:"none",borderBottom:"2px solid var(--danger)",textAlign:"center",width:"100%",color:"var(--danger)",outline:"none"}}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"1.25rem"},children:[d.jsx("span",{className:"micro-label",style:{fontSize:"0.55rem"},children:"   (B)"}),d.jsxs("span",{className:"mono",style:{fontSize:"1.1rem",fontWeight:"900"},children:["$",m.toLocaleString()]})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"0.5rem",opacity:.6},children:[d.jsx("span",{className:"micro-label",style:{fontSize:"0.55rem"},children:"  (C)"}),d.jsxs("span",{className:"mono",style:{color:g<0?"var(--danger)":"var(--success)",fontSize:"1rem"},children:["$",g.toLocaleString()]})]})]})]}),d.jsx("button",{onClick:f,disabled:g<0||c,className:"primary",style:{width:"100%",marginTop:"1.5rem",padding:"1.1rem",background:g<0?"var(--surface-soft)":"linear-gradient(135deg, #450a0a, #ef4444)",boxShadow:g<0?"none":"0 0 30px rgba(239, 68, 68, 0.3)",border:"1px solid white",fontSize:"0.9rem",fontWeight:"900"},children:c?"  ...":g<0?"  :  ":`  ($${m.toLocaleString()})`})]})]})]})}return d.jsxs("div",{className:"page-container fade-in",style:{padding:"0.75rem"},children:[d.jsxs("div",{style:{marginBottom:"2rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{color:"var(--danger)",letterSpacing:"2px",fontSize:"0.6rem"},children:"_: _"}),d.jsx("h1",{className:"text-gradient",style:{fontSize:"1.8rem",margin:0},children:"  "})]}),d.jsxs("div",{className:"system-status",style:{background:"rgba(239, 68, 68, 0.05)",borderColor:"rgba(239, 68, 68, 0.2)",width:"fit-content"},children:[d.jsx("div",{className:"status-dot",style:{background:"var(--danger)",boxShadow:"0 0 8px var(--danger)"}}),d.jsx("span",{className:"micro-label",style:{color:"var(--danger)",fontSize:"0.55rem"},children:"  "})]})]}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem"},children:u9.map(m=>d.jsxs("div",{className:"card card-glow",onClick:()=>i(m),style:{padding:0,overflow:"hidden",border:"1px solid var(--border-dim)",borderRadius:"16px"},children:[d.jsxs("div",{style:{height:"140px",width:"100%",background:"linear-gradient(135deg, #0a0b10, #161824)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[d.jsx("div",{className:"scanline",style:{opacity:.1}}),m.type==="Attack"?d.jsx(lm,{size:40,color:"var(--danger)",style:{opacity:.3}}):d.jsx(R0,{size:40,color:"var(--primary)",style:{opacity:.3}}),d.jsx("div",{style:{position:"absolute",top:"10px",right:"10px"},children:d.jsx("span",{className:`status-badge ${m.type==="Attack"?"neutral":""}`,style:{fontSize:"0.5rem",padding:"0.2rem 0.4rem"},children:m.type==="Attack"?"":""})})]}),d.jsxs("div",{style:{padding:"1rem"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem",alignItems:"flex-start"},children:[d.jsx("h3",{style:{margin:0,fontSize:"1rem",color:"white"},children:m.name}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:"var(--warning)"},children:[d.jsx(hr,{size:10})," ",d.jsx("span",{className:"mono",style:{fontSize:"0.75rem",fontWeight:"bold"},children:m.power.toLocaleString()})]})]}),d.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.75rem",margin:"0 0 1rem",lineHeight:"1.4"},children:m.description}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderTop:"1px solid rgba(255,255,255,0.05)",paddingTop:"1rem"},children:[d.jsxs("div",{children:[d.jsx("span",{className:"micro-label",style:{display:"block",opacity:.5,fontSize:"0.5rem"},children:" "}),d.jsxs("span",{className:"mono",style:{fontWeight:"900",fontSize:"1.1rem",color:"white"},children:["$",m.price.toLocaleString()]})]}),d.jsx("div",{className:"icon-action",style:{background:"var(--surface-soft)",color:"var(--danger)",width:"32px",height:"32px",border:"1px solid var(--border-bright)"},children:d.jsx(om,{size:16})})]})]})]},m.id))}),d.jsx("style",{children:`
                @media (max-width: 768px) {
                    .page-container { padding-bottom: 110px !important; }
                }
            `})]})},d9=({url:n,name:e,size:t=140,color:i="gray"})=>d.jsxs("div",{className:"pulse-disk-container",style:{width:t,height:t,position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:[d.jsx("div",{className:"disk-ring-base",style:{position:"absolute",inset:0,borderRadius:"50%",border:`1px solid ${i}33`}}),d.jsx("div",{className:"disk-ring-outer",style:{position:"absolute",inset:0,borderRadius:"50%",border:`1px dashed ${i}66`,animation:"spin 30s linear infinite"}}),d.jsx("div",{className:"disk-ring-inner",style:{position:"absolute",inset:"5px",borderRadius:"50%",border:`2px solid ${i}`,opacity:.5}}),d.jsx("div",{className:"disk-core",style:{width:"calc(100% - 20px)",height:"calc(100% - 20px)",borderRadius:"50%",overflow:"hidden",border:"3px solid rgba(0,0,0,0.5)",background:"var(--surface-soft)",zIndex:5},children:n?d.jsx("img",{src:n,style:{width:"100%",height:"100%",objectFit:"cover"},alt:""}):d.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:i,color:"white",fontWeight:"900",fontSize:t/3},children:e?.charAt(0).toUpperCase()})}),d.jsx("div",{className:"status-indicator",style:{position:"absolute",bottom:"10%",right:"10%",width:"12px",height:"12px",borderRadius:"50%",border:"2px solid #000",zIndex:10,backgroundColor:i,boxShadow:`0 0 10px ${i}`}})]}),f9=()=>{const{user:n,refreshUser:e}=Mi(),[t,i]=$.useState([]),[r,o]=$.useState(null),[c,h]=$.useState(!0),[f,m]=$.useState(""),[g,v]=$.useState("#6366f1"),[_,w]=$.useState("en"),[S,R]=$.useState(null),[O,M]=$.useState(!1);$.useEffect(()=>{(async()=>{const E=(await yn(Je(we,"users"))).docs.map(T=>({id:T.id,...T.data()}));if(i(E),!r&&E.length>0){const T=E.find(D=>D.id===n?.id)||E[0];o(T.id)}h(!1)})()},[n,r]);const F=t.find(U=>U.id===r),H=n?.id===F?.id;$.useEffect(()=>{F&&H&&(m(F.username||""),v(F.color||"#6366f1"),w(F.language||"en"),R(F.photoUrl||null))},[F,H]);const G=async U=>{const N=U.target.files?.[0];if(N)try{const E=await Ti(N,{maxSizeMB:.1,maxWidthOrHeight:400}),T=new FileReader;T.readAsDataURL(E),T.onloadend=()=>R(T.result)}catch(E){console.error(E)}},X=async()=>{if(!(!n||!H)){M(!0);try{await pn(ze(we,"users",n.id),{username:f,color:g,language:_,photoUrl:S}),await e();const U=await yn(Je(we,"users"));i(U.docs.map(N=>({id:N.id,...N.data()}))),alert("   :   .")}catch{alert("  :     .")}M(!1)}};return c?d.jsxs("div",{className:"page-container",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"60vh"},children:[d.jsx("div",{className:"neural-loader"}),d.jsx("p",{className:"micro-label",style:{marginLeft:"1rem",letterSpacing:"2px"},children:"   ..."})]}):d.jsxs("div",{className:"page-container fade-in",style:{padding:"1rem"},children:[d.jsxs("div",{className:"accounts-layout",style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[d.jsxs("div",{className:"network-directory-section",children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[d.jsx($y,{size:16,color:"var(--primary)"}),d.jsx("p",{className:"micro-label",style:{color:"var(--primary)",letterSpacing:"1px"},children:"  "})]}),d.jsx("div",{className:"card custom-scrollbar",style:{display:"flex",flexDirection:"row",overflowX:"auto",gap:"0.75rem",padding:"0.75rem",background:"rgba(10,11,19,0.5)",border:"1px solid var(--border-dim)"},children:t.map(U=>d.jsxs("div",{onClick:()=>o(U.id),style:{cursor:"pointer",minWidth:"60px",textAlign:"center",padding:"0.5rem",borderRadius:"12px",background:r===U.id?"rgba(99, 102, 241, 0.15)":"transparent",border:`1px solid ${r===U.id?"var(--primary)":"transparent"}`,transition:"0.2s"},children:[d.jsx("div",{style:{width:"45px",height:"45px",margin:"0 auto",borderRadius:"10px",background:U.color,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"900",overflow:"hidden",fontSize:"14px"},children:U.photoUrl?d.jsx("img",{src:U.photoUrl,style:{width:"100%",height:"100%",objectFit:"cover"},alt:""}):U.username?.charAt(0).toUpperCase()}),d.jsx("span",{className:"mono",style:{fontSize:"0.6rem",display:"block",marginTop:"0.4rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:U.username})]},U.id))})]}),d.jsx("div",{className:"identity-detail-section",children:d.jsxs("div",{className:"card card-glow",style:{position:"relative",overflow:"hidden",borderRadius:"24px",border:"1px solid var(--border-bright)",paddingBottom:"2rem"},children:[d.jsx("div",{className:"scanline"}),d.jsx("div",{style:{height:"120px",background:`linear-gradient(to bottom, ${F?.color}22, transparent)`,position:"absolute",top:0,left:0,right:0}}),d.jsxs("div",{style:{position:"absolute",top:"1rem",left:"1rem",display:"flex",alignItems:"center",gap:"0.4rem"},children:[d.jsx(Fl,{size:12,color:F?.color,className:"pulse"}),d.jsx("p",{className:"micro-label",style:{color:F?.color,fontSize:"0.6rem"},children:"_"})]}),d.jsxs("div",{style:{padding:"3rem 1.25rem 1rem",position:"relative"},children:[d.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",marginBottom:"2.5rem"},children:[d.jsx(d9,{url:H?S:F.photoUrl,name:F.username,size:130,color:H?g:F.color}),d.jsxs("div",{style:{marginTop:"1.5rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.4rem",marginBottom:"0.25rem"},children:[d.jsx(O5,{size:14,color:"var(--primary)"}),d.jsx("p",{className:"micro-label",style:{opacity:.5,fontSize:"0.6rem"},children:"  "})]}),d.jsx("h1",{className:"text-gradient",style:{margin:0,fontSize:"1.8rem",fontWeight:"900",wordBreak:"break-all"},children:F.username.toUpperCase()}),d.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",marginTop:"0.75rem"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{opacity:.4,fontSize:"0.55rem"},children:"_"}),d.jsx("p",{className:"mono",style:{fontSize:"0.7rem"},children:"REGION_01_SOL"})]}),d.jsx("div",{style:{width:"1px",background:"var(--border-dim)",height:"20px"}}),d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{opacity:.4,fontSize:"0.55rem"},children:"_"}),d.jsx("p",{className:"mono",style:{fontSize:"0.7rem"},children:F.id.substring(0,8).toUpperCase()})]})]})]})]}),H?d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[d.jsxs("div",{className:"card",style:{background:"rgba(0,0,0,0.3)",border:"1px solid var(--border-dim)",padding:"1.25rem"},children:[d.jsxs("div",{style:{marginBottom:"1.5rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",marginBottom:"0.5rem"},children:[d.jsx(rm,{size:12,color:"var(--primary)"}),d.jsx("p",{className:"micro-label",children:"  "})]}),d.jsx("input",{value:f,onChange:U=>m(U.target.value),className:"mono",style:{fontSize:"1rem",padding:"0.8rem",width:"100%",background:"rgba(0,0,0,0.4)",border:"1px solid var(--border-bright)",borderRadius:"8px",color:"white"}})]}),d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",marginBottom:"0.5rem"},children:[d.jsx(hr,{size:12,color:"var(--warning)"}),d.jsx("p",{className:"micro-label",children:"  "})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[d.jsx("input",{type:"color",value:g,onChange:U=>v(U.target.value),style:{height:"45px",width:"45px",padding:"0",border:"none",background:"transparent",cursor:"pointer"}}),d.jsx("span",{className:"mono",style:{fontSize:"0.9rem",opacity:.6},children:g.toUpperCase()})]})]})]}),d.jsx("div",{className:"card",style:{background:"rgba(0,0,0,0.3)",border:"1px solid var(--border-dim)",padding:"1.5rem",textAlign:"center"},children:d.jsxs("label",{style:{cursor:"pointer"},children:[d.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"15px",background:"var(--primary-glow)",color:"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:d.jsx(q5,{size:24})}),d.jsx("p",{className:"micro-label",style:{fontSize:"0.65rem"},children:"   "}),d.jsx("p",{className:"mono",style:{fontSize:"0.6rem",opacity:.4},children:" : 100KB"}),d.jsx("input",{type:"file",hidden:!0,onChange:G,accept:"image/*"})]})}),d.jsx("button",{onClick:X,disabled:O,className:"primary",style:{padding:"1.25rem",fontSize:"0.9rem",width:"100%"},children:O?"  ...":"   "})]}):d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[d.jsxs("div",{className:"card",style:{background:"rgba(255,255,255,0.02)",padding:"1rem",border:"1px solid var(--border-dim)"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[d.jsx(M5,{size:16,color:"var(--primary)"}),d.jsx("p",{className:"micro-label",style:{fontSize:"0.65rem"},children:" "})]}),d.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem"},children:F.ownedCompanies?.length>0?F.ownedCompanies.map(U=>d.jsx("div",{style:{padding:"0.4rem 0.75rem",background:"rgba(255,255,255,0.03)",border:"1px solid var(--border-dim)",borderRadius:"6px"},children:d.jsx("span",{className:"mono",style:{fontSize:"0.65rem"},children:U.name.toUpperCase()})},U.id)):d.jsx("p",{className:"mono",style:{fontSize:"0.7rem",opacity:.3},children:"   "})})]}),d.jsxs("div",{className:"card",style:{background:"rgba(255,255,255,0.02)",padding:"1rem",border:"1px solid var(--border-dim)"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[d.jsx(B5,{size:16,color:"var(--danger)"}),d.jsx("p",{className:"micro-label",style:{fontSize:"0.65rem"},children:" "})]}),d.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem"},children:F.ownedWeapons?.length>0?F.ownedWeapons.map((U,N)=>d.jsx("div",{style:{padding:"0.4rem 0.75rem",background:"rgba(239, 68, 68, 0.05)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"6px"},children:d.jsxs("span",{className:"mono",style:{color:"var(--danger)",fontSize:"0.65rem"},children:[U.name," (x",U.quantity,")"]})},N)):d.jsx("p",{className:"mono",style:{fontSize:"0.7rem",opacity:.3},children:"  "})})]}),d.jsxs("div",{className:"card",style:{background:"rgba(255,255,255,0.02)",padding:"1rem",border:"1px solid var(--border-dim)"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[d.jsx(dD,{size:16,color:"var(--warning)"}),d.jsx("p",{className:"micro-label",style:{fontSize:"0.65rem"},children:" "})]}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:F.resources?Object.entries(F.resources).map(([U,N])=>d.jsxs("div",{style:{padding:"0.75rem",textAlign:"center",background:"rgba(0,0,0,0.2)",border:"1px solid var(--border-dim)",borderRadius:"8px"},children:[d.jsx("p",{className:"micro-label",style:{opacity:.5,fontSize:"0.55rem"},children:U.toUpperCase()}),d.jsx("p",{className:"mono",style:{fontSize:"0.85rem",fontWeight:"900"},children:Dt(Number(N))})]},U)):d.jsx("p",{className:"mono",style:{fontSize:"0.7rem",opacity:.3},children:" "})})]}),d.jsxs("div",{className:"card",style:{background:"rgba(255,255,255,0.02)",padding:"1rem",border:"1px solid var(--border-dim)"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[d.jsx(Qa,{size:16,color:"var(--primary)"}),d.jsx("p",{className:"micro-label",style:{fontSize:"0.65rem"},children:" "})]}),d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:F?.possessions?.length>0?F.possessions.map((U,N)=>d.jsxs("div",{style:{padding:"0.5rem",background:"rgba(255,255,255,0.03)",border:"1px solid var(--border-bright)",borderRadius:"8px",display:"flex",gap:"0.75rem",alignItems:"center"},children:[d.jsx("img",{src:U.image,alt:"",style:{width:"40px",height:"40px",borderRadius:"4px",objectFit:"cover"}}),d.jsxs("div",{style:{overflow:"hidden"},children:[d.jsx("p",{className:"mono",style:{fontSize:"0.75rem",margin:0,color:"white",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:U.name}),d.jsx("p",{className:"micro-label",style:{fontSize:"0.55rem",opacity:.5},children:U.category})]})]},N)):d.jsx("p",{className:"mono",style:{fontSize:"0.7rem",opacity:.3},children:"   "})})]})]})]})]})})]}),d.jsx("style",{children:`
                @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
                .custom-scrollbar::-webkit-scrollbar { height: 3px; width: 3px; }
                .custom-scrollbar::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 10px; }
                
                @media (max-width: 768px) {
                    .page-container { padding-bottom: 100px !important; }
                }
            `})]})},E2=({url:n,name:e,size:t=32,color:i="gray"})=>d.jsxs("div",{className:"chat-profile-wrapper",style:{width:t,height:t,position:"relative",flexShrink:0},children:[d.jsx("div",{className:"status-dot",style:{background:"var(--success)",border:"1.5px solid var(--surface)",width:"8px",height:"8px",position:"absolute",top:"-1px",right:"-1px",borderRadius:"50%",zIndex:2}}),n?d.jsx("img",{src:n,alt:e,style:{width:"100%",height:"100%",borderRadius:"8px",objectFit:"cover",border:`1px solid ${i}`}}):d.jsx("div",{style:{width:"100%",height:"100%",borderRadius:"8px",background:i,display:"flex",alignItems:"center",justifyContent:"center",fontSize:t*.4,fontWeight:"900",color:"white",border:`1px solid ${i}66`},children:e?.charAt(0).toUpperCase()})]}),m9=()=>{const{user:n}=Mi(),[e,t]=$.useState([]),[i,r]=$.useState(""),o=$.useRef(null);$.useEffect(()=>{const h=On(Je(we,"chats"),wu("createdAt","asc"));return sa(h,m=>{t(m.docs.map(g=>({id:g.id,...g.data()}))),setTimeout(()=>o.current?.scrollIntoView({behavior:"smooth"}),100)})},[]);const c=async h=>{if(h.preventDefault(),!(!i.trim()||!n))try{await Jf(Je(we,"chats"),{text:i,createdAt:Nt(),uid:n.id,username:n.username,photoUrl:n.photoUrl||null,color:n.color}),r("")}catch(f){console.error("__",f)}};return d.jsxs("div",{className:"page-container",style:{height:"calc(100vh - var(--header-height) - 80px)",display:"flex",flexDirection:"column",padding:"0.75rem"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.2rem"},children:[d.jsx("div",{className:"pulse-indicator",style:{background:"var(--danger)",width:"6px",height:"6px"}}),d.jsx("p",{className:"micro-label",style:{color:"var(--danger)",fontSize:"0.55rem",letterSpacing:"1px"},children:"___142.8"})]}),d.jsx("h1",{className:"text-gradient",style:{fontSize:"1.4rem",margin:0},children:" "})]}),d.jsx("div",{className:"card",style:{padding:"0.4rem 0.75rem",background:"rgba(255,255,255,0.02)",border:"1px solid var(--border-bright)",borderRadius:"10px"},children:d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem"},children:[d.jsx(z5,{size:12,color:"var(--primary)"}),d.jsx("span",{className:"micro-label",style:{fontSize:"0.6rem"},children:"_"})]})})]}),d.jsxs("div",{className:"card card-glow",style:{flex:1,display:"flex",flexDirection:"column",padding:0,overflow:"hidden",border:"1px solid var(--border-bright)",background:"rgba(5, 6, 12, 0.8)",borderRadius:"20px"},children:[d.jsx("div",{className:"scanline",style:{opacity:.05}}),d.jsxs("div",{className:"custom-scrollbar",style:{flex:1,overflowY:"auto",padding:"1rem",display:"flex",flexDirection:"column",gap:"1rem"},children:[d.jsx("div",{style:{textAlign:"center",padding:"0.5rem",borderBottom:"1px solid var(--border-dim)",marginBottom:"0.5rem"},children:d.jsx("p",{className:"micro-label",style:{opacity:.3,letterSpacing:"1px",fontSize:"0.55rem"},children:"-- __ --"})}),e.map((h,f)=>{const m=h.uid===n?.id,g=e[f-1],v=!g||g.uid!==h.uid;return d.jsxs("div",{style:{display:"flex",justifyContent:m?"flex-end":"flex-start",gap:"0.6rem",marginTop:v?"0.4rem":"-0.6rem"},children:[!m&&v&&d.jsx(E2,{url:h.photoUrl,name:h.username,size:32,color:h.color}),!m&&!v&&d.jsx("div",{style:{width:"32px"}}),d.jsxs("div",{style:{maxWidth:"85%"},children:[v&&!m&&d.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem",marginBottom:"0.2rem",marginLeft:"0.4rem"},children:[d.jsx("span",{className:"mono",style:{color:h.color,fontSize:"0.7rem",fontWeight:"900"},children:h.username}),d.jsxs("span",{className:"micro-label",style:{fontSize:"0.5rem",opacity:.3},children:["ID_",h.uid.substring(0,4)]})]}),d.jsxs("div",{style:{background:m?"rgba(99, 102, 241, 0.15)":"rgba(255, 255, 255, 0.05)",color:"white",padding:"0.75rem 1rem",borderRadius:"16px",borderBottomRightRadius:m?0:"16px",borderBottomLeftRadius:m?"16px":0,border:`1px solid ${m?"rgba(99, 102, 241, 0.3)":"rgba(255, 255, 255, 0.1)"}`,position:"relative"},children:[d.jsx("div",{style:{fontSize:"0.85rem",lineHeight:"1.4",opacity:.95,wordBreak:"break-word"},children:h.text}),d.jsx("div",{style:{textAlign:m?"right":"left",opacity:.3,fontSize:"0.55rem",marginTop:"0.3rem",fontFamily:"JetBrains Mono"},children:h.createdAt?.toDate()?.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),m&&v&&d.jsx(E2,{url:h.photoUrl,name:h.username,size:32,color:h.color}),m&&!v&&d.jsx("div",{style:{width:"32px"}})]},h.id)}),d.jsx("div",{ref:o})]}),d.jsxs("form",{onSubmit:c,style:{padding:"0.75rem 1rem",background:"rgba(10, 11, 20, 0.95)",borderTop:"1px solid var(--border-bright)",display:"flex",gap:"0.75rem",alignItems:"center"},children:[d.jsx("div",{style:{color:"var(--primary)",opacity:.5},children:d.jsx(H5,{size:18})}),d.jsx("input",{value:i,onChange:h=>r(h.target.value),placeholder:"___...",className:"mono",style:{flex:1,fontSize:"0.85rem",background:"transparent",border:"none",padding:"0.4rem 0",color:"var(--text-main)",outline:"none"}}),d.jsx("button",{type:"submit",disabled:!i.trim(),style:{padding:"0.6rem",borderRadius:"12px",background:i.trim()?"var(--primary)":"rgba(255,255,255,0.02)",border:"none",color:"white",display:"flex",alignItems:"center",justifyContent:"center",transition:"0.2s"},children:d.jsx(Wy,{size:18})})]})]}),d.jsx("style",{children:`
                .chat-profile-wrapper { position: relative; }
                .pulse-indicator { width: 8px; height: 8px; border-radius: 50%; position: relative; }
                .pulse-indicator::after { content: ''; position: absolute; inset: -3px; border-radius: 50%; border: 1.5px solid currentColor; animation: ripple 2s infinite; }
                @keyframes ripple { 0% { transform: scale(1); opacity: 1; } 100% { transform: scale(2.5); opacity: 0; } }
                .custom-scrollbar::-webkit-scrollbar { width: 3px; }
                @media (max-width: 768px) {
                    .page-container { height: calc(100vh - var(--header-height) - 100px) !important; }
                }
            `})]})};function wt(n){var e=n.width,t=n.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(t<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:t}}function Xa(n,e){return n.width===e.width&&n.height===e.height}var p9=(function(){function n(e){var t=this;this._resolutionListener=function(){return t._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return n.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(n.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),n.prototype.subscribe=function(e){var t=this,i={next:e};return this._observers.push(i),{unsubscribe:function(){t._observers=t._observers.filter(function(r){return r!==i})}}},n.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},n.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},n.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},n.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(t){return t.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},n})();function g9(n){return new p9(n)}var y9=(function(){function n(e,t,i){var r;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=wt({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=t??(function(o){return o}),this._allowResizeObserver=(r=i?.allowResizeObserver)!==null&&r!==void 0?r:!0,this._chooseAndInitObserver()}return n.prototype.dispose=function(){var e,t;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(t=this._devicePixelRatioObservable)===null||t===void 0||t.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(n.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bitmapSize",{get:function(){return wt({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),n.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=wt(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},n.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},n.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(t){return t!==e})},Object.defineProperty(n.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),n.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},n.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(t){return t!==e})},n.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},n.prototype._resizeBitmap=function(e){var t=this.bitmapSize;Xa(t,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(t,e))},n.prototype._emitBitmapSizeChanged=function(e,t){var i=this;this._bitmapSizeChangedListeners.forEach(function(r){return r.call(i,e,t)})},n.prototype._suggestNewBitmapSize=function(e){var t=this._suggestedBitmapSize,i=wt(this._transformBitmapSize(e,this._canvasElementClientSize)),r=Xa(this.bitmapSize,i)?null:i;t===null&&r===null||t!==null&&r!==null&&Xa(t,r)||(this._suggestedBitmapSize=r,this._emitSuggestedBitmapSizeChanged(t,r))},n.prototype._emitSuggestedBitmapSizeChanged=function(e,t){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(r){return r.call(i,e,t)})},n.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}b9().then(function(t){return t?e._initResizeObserver():e._initDevicePixelRatioObservable()})},n.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var t=S2(this._canvasElement);if(t===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=g9(t),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},n.prototype._invalidateBitmapSize=function(){var e,t;if(this._canvasElement!==null){var i=S2(this._canvasElement);if(i!==null){var r=(t=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&t!==void 0?t:i.devicePixelRatio,o=this._canvasElement.getClientRects(),c=o[0]!==void 0?_9(o[0],r):wt({width:this._canvasElementClientSize.width*r,height:this._canvasElementClientSize.height*r});this._suggestNewBitmapSize(c)}}},n.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(t){var i=t.find(function(c){return c.target===e._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var r=i.devicePixelContentBoxSize[0],o=wt({width:r.inlineSize,height:r.blockSize});e._suggestNewBitmapSize(o)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},n})();function v9(n,e){return new y9(n,e.transform,e.options)}function S2(n){return n.ownerDocument.defaultView}function b9(){return new Promise(function(n){var e=new ResizeObserver(function(t){n(t.every(function(i){return"devicePixelContentBoxSize"in i})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function _9(n,e){return wt({width:Math.round(n.left*e+n.width*e)-Math.round(n.left*e),height:Math.round(n.top*e+n.height*e)-Math.round(n.top*e)})}var w9=(function(){function n(e,t,i){if(t.width===0||t.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=t,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=e}return n.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},n.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(n.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),n})();function no(n,e){var t=n.canvasElementClientSize;if(t.width===0||t.height===0)return null;var i=n.bitmapSize;if(i.width===0||i.height===0)return null;var r=n.canvasElement.getContext("2d",e);return r===null?null:new w9(r,t,i)}const sT={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var T2,A2;function Al(n,e){const t={0:[],1:[n.lineWidth,n.lineWidth],2:[2*n.lineWidth,2*n.lineWidth],3:[6*n.lineWidth,6*n.lineWidth],4:[n.lineWidth,4*n.lineWidth]}[e];n.setLineDash(t)}function rT(n,e,t,i){n.beginPath();const r=n.lineWidth%2?.5:0;n.moveTo(t,e+r),n.lineTo(i,e+r),n.stroke()}function Ri(n,e){if(!n)throw new Error("Assertion failed"+(e?": "+e:""))}function sn(n){if(n===void 0)throw new Error("Value is undefined");return n}function ve(n){if(n===null)throw new Error("Value is null");return n}function Xr(n){return ve(sn(n))}(function(n){n[n.Simple=0]="Simple",n[n.WithSteps=1]="WithSteps",n[n.Curved=2]="Curved"})(T2||(T2={})),(function(n){n[n.Solid=0]="Solid",n[n.Dotted=1]="Dotted",n[n.Dashed=2]="Dashed",n[n.LargeDashed=3]="LargeDashed",n[n.SparseDotted=4]="SparseDotted"})(A2||(A2={}));class $t{constructor(){this.t=[]}i(e,t,i){const r={h:e,l:t,o:i===!0};this.t.push(r)}_(e){const t=this.t.findIndex((i=>e===i.h));t>-1&&this.t.splice(t,1)}u(e){this.t=this.t.filter((t=>t.l!==e))}p(e,t,i){const r=[...this.t];this.t=this.t.filter((o=>!o.o)),r.forEach((o=>o.h(e,t,i)))}v(){return this.t.length>0}m(){this.t=[]}}function bn(n,...e){for(const t of e)for(const i in t)t[i]!==void 0&&Object.prototype.hasOwnProperty.call(t,i)&&!["__proto__","constructor","prototype"].includes(i)&&(typeof t[i]!="object"||n[i]===void 0||Array.isArray(t[i])?n[i]=t[i]:bn(n[i],t[i]));return n}function Cl(n){return typeof n=="number"&&isFinite(n)}function Tu(n){return typeof n=="number"&&n%1==0}function Ku(n){return typeof n=="string"}function Td(n){return typeof n=="boolean"}function Zs(n){const e=n;if(!e||typeof e!="object")return e;let t,i,r;for(i in t=Array.isArray(e)?[]:{},e)e.hasOwnProperty(i)&&(r=e[i],t[i]=r&&typeof r=="object"?Zs(r):r);return t}function C2(n){return n!==null}function I0(n){return n===null?void 0:n}const aT="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Af(n,e,t){return e===void 0&&(e=aT),`${t=t!==void 0?`${t} `:""}${n}px ${e}`}class x9{constructor(e){this.M={S:1,C:5,k:NaN,P:"",T:"",R:"",D:"",I:0,V:0,B:0,A:0,L:0},this.O=e}N(){const e=this.M,t=this.F(),i=this.W();return e.k===t&&e.T===i||(e.k=t,e.T=i,e.P=Af(t,i),e.A=2.5/12*t,e.I=e.A,e.V=t/12*e.C,e.B=t/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function Og(n){return n<0?0:n>255?255:Math.round(n)||0}function R2(n){return .199*n[0]+.687*n[1]+.114*n[2]}class E9{constructor(e,t){this.q=new Map,this.j=e,t&&(this.q=t)}Y(e,t){if(e==="transparent")return e;const i=this.K(e),r=i[3];return`rgba(${i[0]}, ${i[1]}, ${i[2]}, ${t*r})`}Z(e){const t=this.K(e);return{G:`rgb(${t[0]}, ${t[1]}, ${t[2]})`,X:R2(t)>160?"black":"white"}}J(e){return R2(this.K(e))}tt(e,t,i){const[r,o,c,h]=this.K(e),[f,m,g,v]=this.K(t),_=[Og(r+i*(f-r)),Og(o+i*(m-o)),Og(c+i*(g-c)),(w=h+i*(v-h),w<=0||w>1?Math.min(Math.max(w,0),1):Math.round(1e4*w)/1e4)];var w;return`rgba(${_[0]}, ${_[1]}, ${_[2]}, ${_[3]})`}K(e){const t=this.q.get(e);if(t)return t;const i=(function(c){const h=document.createElement("div");h.style.display="none",document.body.appendChild(h),h.style.color=c;const f=window.getComputedStyle(h).color;return document.body.removeChild(h),f})(e),r=i.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!r){if(this.j.length)for(const c of this.j){const h=c(e);if(h)return this.q.set(e,h),h}throw new Error(`Failed to parse color: ${e}`)}const o=[parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10),r[4]?parseFloat(r[4]):1];return this.q.set(e,o),o}}class S9{constructor(){this.it=[]}st(e){this.it=e}nt(e,t,i){this.it.forEach((r=>{r.nt(e,t,i)}))}}class Hl{nt(e,t,i){e.useBitmapCoordinateSpace((r=>this.et(r,t,i)))}}class T9 extends Hl{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:t,verticalPixelRatio:i}){if(this.rt===null||this.rt.lt===null)return;const r=this.rt.lt,o=this.rt,c=Math.max(1,Math.floor(t))%2/2,h=f=>{e.beginPath();for(let m=r.to-1;m>=r.from;--m){const g=o.ot[m],v=Math.round(g._t*t)+c,_=g.ut*i,w=f*i+c;e.moveTo(v,_),e.arc(v,_,w,0,2*Math.PI)}e.fill()};o.ct>0&&(e.fillStyle=o.dt,h(o.ft+o.ct)),e.fillStyle=o.vt,h(o.ft)}}function A9(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const C9={from:0,to:1};class R9{constructor(e,t,i){this.Mt=new S9,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=t,this.yt=i,this.Mt.st(this.bt)}kt(e){this.Pt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}Pt(){const e=this.yt.Dt();e.length!==this.bt.length&&(this.St=e.map(A9),this.bt=this.St.map((t=>{const i=new T9;return i.ht(t),i})),this.Mt.st(this.bt))}Rt(){const e=this.Ct.N().mode===2||!this.Ct.It(),t=this.yt.Vt(),i=this.Ct.Bt(),r=this.O.Et();this.Pt(),t.forEach(((o,c)=>{const h=this.St[c],f=o.At(i),m=o.Lt();!e&&f!==null&&o.It()&&m!==null?(h.vt=f.zt,h.ft=f.ft,h.ct=f.Ot,h.ot[0].gt=f.gt,h.ot[0].ut=o.Ft().Nt(f.gt,m.Wt),h.dt=f.Ht??this.O.Ut(h.ot[0].ut/o.Ft().$t()),h.ot[0].wt=i,h.ot[0]._t=r.qt(i),h.lt=C9):h.lt=null}))}}class N9 extends Hl{constructor(e){super(),this.jt=e}et({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:r}){if(this.jt===null)return;const o=this.jt.Yt.It,c=this.jt.Kt.It;if(!o&&!c)return;const h=Math.round(this.jt._t*i),f=Math.round(this.jt.ut*r);e.lineCap="butt",o&&h>=0&&(e.lineWidth=Math.floor(this.jt.Yt.ct*i),e.strokeStyle=this.jt.Yt.R,e.fillStyle=this.jt.Yt.R,Al(e,this.jt.Yt.Zt),(function(m,g,v,_){m.beginPath();const w=m.lineWidth%2?.5:0;m.moveTo(g+w,v),m.lineTo(g+w,_),m.stroke()})(e,h,0,t.height)),c&&f>=0&&(e.lineWidth=Math.floor(this.jt.Kt.ct*r),e.strokeStyle=this.jt.Kt.R,e.fillStyle=this.jt.Kt.R,Al(e,this.jt.Kt.Zt),rT(e,f,0,t.width))}}class I9{constructor(e,t){this.xt=!0,this.Gt={Yt:{ct:1,Zt:0,R:"",It:!1},Kt:{ct:1,Zt:0,R:"",It:!1},_t:0,ut:0},this.Xt=new N9(this.Gt),this.Jt=e,this.yt=t}kt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Xt}Rt(){const e=this.Jt.It(),t=this.yt.Qt().N().crosshair,i=this.Gt;if(t.mode===2)return i.Kt.It=!1,void(i.Yt.It=!1);i.Kt.It=e&&this.Jt.ti(this.yt),i.Yt.It=e&&this.Jt.ii(),i.Kt.ct=t.horzLine.width,i.Kt.Zt=t.horzLine.style,i.Kt.R=t.horzLine.color,i.Yt.ct=t.vertLine.width,i.Yt.Zt=t.vertLine.style,i.Yt.R=t.vertLine.color,i._t=this.Jt.si(),i.ut=this.Jt.ni()}}function M9(n,e,t,i,r,o){n.fillRect(e+o,t,i-2*o,o),n.fillRect(e+o,t+r-o,i-2*o,o),n.fillRect(e,t,o,r),n.fillRect(e+i-o,t,o,r)}function hm(n,e,t,i,r,o){n.save(),n.globalCompositeOperation="copy",n.fillStyle=o,n.fillRect(e,t,i,r),n.restore()}function N2(n,e,t,i,r,o){n.beginPath(),n.roundRect?n.roundRect(e,t,i,r,o):(n.lineTo(e+i-o[1],t),o[1]!==0&&n.arcTo(e+i,t,e+i,t+o[1],o[1]),n.lineTo(e+i,t+r-o[2]),o[2]!==0&&n.arcTo(e+i,t+r,e+i-o[2],t+r,o[2]),n.lineTo(e+o[3],t+r),o[3]!==0&&n.arcTo(e,t+r,e,t+r-o[3],o[3]),n.lineTo(e,t+o[0]),o[0]!==0&&n.arcTo(e,t,e+o[0],t,o[0]))}function I2(n,e,t,i,r,o,c=0,h=[0,0,0,0],f=""){if(n.save(),!c||!f||f===o)return N2(n,e,t,i,r,h),n.fillStyle=o,n.fill(),void n.restore();const m=c/2;var g;N2(n,e+m,t+m,i-c,r-c,(g=-m,h.map((v=>v===0?v:v+g)))),o!=="transparent"&&(n.fillStyle=o,n.fill()),f!=="transparent"&&(n.lineWidth=c,n.strokeStyle=f,n.closePath(),n.stroke()),n.restore()}function oT(n,e,t,i,r,o,c){n.save(),n.globalCompositeOperation="copy";const h=n.createLinearGradient(0,0,0,r);h.addColorStop(0,o),h.addColorStop(1,c),n.fillStyle=h,n.fillRect(e,t,i,r),n.restore()}class M2{constructor(e,t){this.ht(e,t)}ht(e,t){this.jt=e,this.ei=t}$t(e,t){return this.jt.It?e.k+e.A+e.I:0}nt(e,t,i,r){if(!this.jt.It||this.jt.ri.length===0)return;const o=this.jt.R,c=this.ei.G,h=e.useBitmapCoordinateSpace((f=>{const m=f.context;m.font=t.P;const g=this.hi(f,t,i,r),v=g.ai;return g.li?I2(m,v.oi,v._i,v.ui,v.ci,c,v.di,[v.ft,0,0,v.ft],c):I2(m,v.fi,v._i,v.ui,v.ci,c,v.di,[0,v.ft,v.ft,0],c),this.jt.pi&&(m.fillStyle=o,m.fillRect(v.fi,v.mi,v.wi-v.fi,v.gi)),this.jt.Mi&&(m.fillStyle=t.D,m.fillRect(g.li?v.bi-v.di:0,v._i,v.di,v.Si-v._i)),g}));e.useMediaCoordinateSpace((({context:f})=>{const m=h.xi;f.font=t.P,f.textAlign=h.li?"right":"left",f.textBaseline="middle",f.fillStyle=o,f.fillText(this.jt.ri,m.Ci,(m._i+m.Si)/2+m.yi)}))}hi(e,t,i,r){const{context:o,bitmapSize:c,mediaSize:h,horizontalPixelRatio:f,verticalPixelRatio:m}=e,g=this.jt.pi||!this.jt.ki?t.C:0,v=this.jt.Pi?t.S:0,_=t.A+this.ei.Ti,w=t.I+this.ei.Ri,S=t.V,R=t.B,O=this.jt.ri,M=t.k,F=i.Di(o,O),H=Math.ceil(i.Ii(o,O)),G=M+_+w,X=t.S+S+R+H+g,U=Math.max(1,Math.floor(m));let N=Math.round(G*m);N%2!=U%2&&(N+=1);const E=v>0?Math.max(1,Math.floor(v*f)):0,T=Math.round(X*f),D=Math.round(g*f),I=this.ei.Vi??this.ei.Bi??this.ei.Ei,z=Math.round(I*m)-Math.floor(.5*m),k=Math.floor(z+U/2-N/2),W=k+N,K=r==="right",j=K?h.width-v:v,P=K?c.width-E:E;let ne,J,re;return K?(ne=P-T,J=P-D,re=j-g-S-v):(ne=P+T,J=P+D,re=j+g+S),{li:K,ai:{_i:k,mi:z,Si:W,ui:T,ci:N,ft:2*f,di:E,oi:ne,fi:P,wi:J,gi:U,bi:c.width},xi:{_i:k/m,Si:W/m,Ci:re,yi:F}}}}class dm{constructor(e){this.Ai={Ei:0,G:"#000",Ri:0,Ti:0},this.Li={ri:"",It:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,Pi:!1},this.zi={ri:"",It:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,Pi:!0},this.xt=!0,this.Oi=new(e||M2)(this.Li,this.Ai),this.Ni=new(e||M2)(this.zi,this.Ai)}ri(){return this.Fi(),this.Li.ri}Ei(){return this.Fi(),this.Ai.Ei}kt(){this.xt=!0}$t(e,t=!1){return Math.max(this.Oi.$t(e,t),this.Ni.$t(e,t))}Wi(){return this.Ai.Vi??null}Hi(){return this.Ai.Vi??this.Ai.Bi??this.Ei()}Ui(e){this.Ai.Bi=e??void 0}$i(){return this.Fi(),this.Li.It||this.zi.It}qi(){return this.Fi(),this.Li.It}Tt(e){return this.Fi(),this.Li.pi=this.Li.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Oi}ji(){return this.Fi(),this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Ni}Fi(){this.xt&&(this.Li.pi=!0,this.zi.pi=!1,this.Yi(this.Li,this.zi,this.Ai))}}class k9 extends dm{constructor(e,t,i){super(),this.Jt=e,this.Ki=t,this.Zi=i}Yi(e,t,i){if(e.It=!1,this.Jt.N().mode===2)return;const r=this.Jt.N().horzLine;if(!r.labelVisible)return;const o=this.Ki.Lt();if(!this.Jt.It()||this.Ki.Gi()||o===null)return;const c=this.Ki.Xi().Z(r.labelBackgroundColor);i.G=c.G,e.R=c.X;const h=2/12*this.Ki.k();i.Ti=h,i.Ri=h;const f=this.Zi(this.Ki);i.Ei=f.Ei,e.ri=this.Ki.Ji(f.gt,o),e.It=!0}}const j9=/[1-9]/g;class lT{constructor(){this.jt=null}ht(e){this.jt=e}nt(e,t){if(this.jt===null||this.jt.It===!1||this.jt.ri.length===0)return;const i=e.useMediaCoordinateSpace((({context:_})=>(_.font=t.P,Math.round(t.Qi.Ii(_,ve(this.jt).ri,j9)))));if(i<=0)return;const r=t.ts,o=i+2*r,c=o/2,h=this.jt.ss;let f=this.jt.Ei,m=Math.floor(f-c)+.5;m<0?(f+=Math.abs(0-m),m=Math.floor(f-c)+.5):m+o>h&&(f-=Math.abs(h-(m+o)),m=Math.floor(f-c)+.5);const g=m+o,v=Math.ceil(0+t.S+t.C+t.A+t.k+t.I);e.useBitmapCoordinateSpace((({context:_,horizontalPixelRatio:w,verticalPixelRatio:S})=>{const R=ve(this.jt);_.fillStyle=R.G;const O=Math.round(m*w),M=Math.round(0*S),F=Math.round(g*w),H=Math.round(v*S),G=Math.round(2*w);if(_.beginPath(),_.moveTo(O,M),_.lineTo(O,H-G),_.arcTo(O,H,O+G,H,G),_.lineTo(F-G,H),_.arcTo(F,H,F,H-G,G),_.lineTo(F,M),_.fill(),R.pi){const X=Math.round(R.Ei*w),U=M,N=Math.round((U+t.C)*S);_.fillStyle=R.R;const E=Math.max(1,Math.floor(w)),T=Math.floor(.5*w);_.fillRect(X-T,U,E,N-U)}})),e.useMediaCoordinateSpace((({context:_})=>{const w=ve(this.jt),S=0+t.S+t.C+t.A+t.k/2;_.font=t.P,_.textAlign="left",_.textBaseline="middle",_.fillStyle=w.R;const R=t.Qi.Di(_,"Apr0");_.translate(m+r,S+R),_.fillText(w.ri,0,0)}))}}class D9{constructor(e,t,i){this.xt=!0,this.Xt=new lT,this.Gt={It:!1,G:"#4c525e",R:"white",ri:"",ss:0,Ei:NaN,pi:!0},this.Ct=e,this.ns=t,this.Zi=i}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Xt.ht(this.Gt),this.Xt}Rt(){const e=this.Gt;if(e.It=!1,this.Ct.N().mode===2)return;const t=this.Ct.N().vertLine;if(!t.labelVisible)return;const i=this.ns.Et();if(i.Gi())return;e.ss=i.ss();const r=this.Zi();if(r===null)return;e.Ei=r.Ei;const o=i.es(this.Ct.Bt());e.ri=i.rs(ve(o)),e.It=!0;const c=this.ns.Xi().Z(t.labelBackgroundColor);e.G=c.G,e.R=c.X,e.pi=i.N().ticksVisible}}class cT{constructor(){this.hs=null,this.ls=0}_s(){return this.ls}us(e){this.ls=e}Ft(){return this.hs}cs(e){this.hs=e}ds(e){return[]}fs(){return[]}It(){return!0}}var k2;(function(n){n[n.Normal=0]="Normal",n[n.Magnet=1]="Magnet",n[n.Hidden=2]="Hidden",n[n.MagnetOHLC=3]="MagnetOHLC"})(k2||(k2={}));class O9 extends cT{constructor(e,t){super(),this.yt=null,this.ps=NaN,this.vs=0,this.ws=!1,this.gs=new Map,this.Ms=!1,this.bs=new WeakMap,this.Ss=new WeakMap,this.xs=NaN,this.Cs=NaN,this.ys=NaN,this.ks=NaN,this.ns=e,this.Ps=t,this.Ts=((r,o)=>c=>{const h=o(),f=r();if(c===ve(this.yt).Rs())return{gt:f,Ei:h};{const m=ve(c.Lt());return{gt:c.Ds(h,m),Ei:h}}})((()=>this.ps),(()=>this.Cs));const i=((r,o)=>()=>{const c=this.ns.Et().Is(r()),h=o();return c&&Number.isFinite(h)?{wt:c,Ei:h}:null})((()=>this.vs),(()=>this.si()));this.Vs=new D9(this,e,i)}N(){return this.Ps}Bs(e,t){this.ys=e,this.ks=t}Es(){this.ys=NaN,this.ks=NaN}As(){return this.ys}Ls(){return this.ks}zs(e,t,i){this.Ms||(this.Ms=!0),this.ws=!0,this.Os(e,t,i)}Bt(){return this.vs}si(){return this.xs}ni(){return this.Cs}It(){return this.ws}Ns(){this.ws=!1,this.Fs(),this.ps=NaN,this.xs=NaN,this.Cs=NaN,this.yt=null,this.Es(),this.Ws()}Hs(e){if(!this.Ps.doNotSnapToHiddenSeriesIndices)return e;const t=this.ns,i=t.Et();let r=null,o=null;for(const m of t.Us()){const g=m.qs().$s(e,-1);if(g){if(g.js===e)return e;(r===null||g.js>r)&&(r=g.js)}const v=m.qs().$s(e,1);if(v){if(v.js===e)return e;(o===null||v.js<o)&&(o=v.js)}}const c=[r,o].filter(C2);if(c.length===0)return e;const h=i.qt(e),f=c.map((m=>Math.abs(h-i.qt(m))));return c[f.indexOf(Math.min(...f))]}Ys(e){let t=this.bs.get(e);t||(t=new I9(this,e),this.bs.set(e,t));let i=this.Ss.get(e);return i||(i=new R9(this.ns,this,e),this.Ss.set(e,i)),[t,i]}ti(e){return e===this.yt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ks(e,t){this.ws&&this.yt===e||this.gs.clear();const i=[];return this.yt===e&&i.push(this.Zs(this.gs,t,this.Ts)),i}fs(){return this.ws?[this.Vs]:[]}Gs(){return this.yt}Ws(){this.ns.Xs().forEach((e=>{this.bs.get(e)?.kt(),this.Ss.get(e)?.kt()})),this.gs.forEach((e=>e.kt())),this.Vs.kt()}Js(e){return e&&!e.Rs().Gi()?e.Rs():null}Os(e,t,i){this.Qs(e,t,i)&&this.Ws()}Qs(e,t,i){const r=this.xs,o=this.Cs,c=this.ps,h=this.vs,f=this.yt,m=this.Js(i);this.vs=e,this.xs=isNaN(e)?NaN:this.ns.Et().qt(e),this.yt=i;const g=m!==null?m.Lt():null;return m!==null&&g!==null?(this.ps=t,this.Cs=m.Nt(t,g)):(this.ps=NaN,this.Cs=NaN),r!==this.xs||o!==this.Cs||h!==this.vs||c!==this.ps||f!==this.yt}Fs(){const e=this.ns.tn().map((i=>i.qs().sn())).filter(C2),t=e.length===0?null:Math.max(...e);this.vs=t!==null?t:NaN}Zs(e,t,i){let r=e.get(t);return r===void 0&&(r=new k9(this,t,i),e.set(t,r)),r}}function fm(n){return n==="left"||n==="right"}class Ai{constructor(e){this.nn=new Map,this.en=[],this.rn=e}hn(e,t){const i=(function(r,o){return r===void 0?o:{an:Math.max(r.an,o.an),ln:r.ln||o.ln}})(this.nn.get(e),t);this.nn.set(e,i)}_n(){return this.rn}un(e){const t=this.nn.get(e);return t===void 0?{an:this.rn}:{an:Math.max(this.rn,t.an),ln:t.ln}}cn(){this.dn(),this.en=[{fn:0}]}pn(e){this.dn(),this.en=[{fn:1,Wt:e}]}vn(e){this.mn(),this.en.push({fn:5,Wt:e})}dn(){this.mn(),this.en.push({fn:6})}wn(){this.dn(),this.en=[{fn:4}]}gn(e){this.dn(),this.en.push({fn:2,Wt:e})}Mn(e){this.dn(),this.en.push({fn:3,Wt:e})}bn(){return this.en}Sn(e){for(const t of e.en)this.xn(t);this.rn=Math.max(this.rn,e.rn),e.nn.forEach(((t,i)=>{this.hn(i,t)}))}static Cn(){return new Ai(2)}static yn(){return new Ai(3)}xn(e){switch(e.fn){case 0:this.cn();break;case 1:this.pn(e.Wt);break;case 2:this.gn(e.Wt);break;case 3:this.Mn(e.Wt);break;case 4:this.wn();break;case 5:this.vn(e.Wt);break;case 6:this.mn()}}mn(){const e=this.en.findIndex((t=>t.fn===5));e!==-1&&this.en.splice(e,1)}}class uT{formatTickmarks(e){return e.map((t=>this.format(t)))}}const j2=".";function er(n,e){if(!Cl(n))return"n/a";if(!Tu(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?n.toString():("0000000000000000"+n.toString()).slice(-e)}class mm extends uT{constructor(e,t){if(super(),t||(t=1),Cl(e)&&Tu(e)||(e=100),e<0)throw new TypeError("invalid base");this.Ki=e,this.kn=t,this.Pn()}format(e){const t=e<0?"":"";return e=Math.abs(e),t+this.Tn(e)}Pn(){if(this.Rn=0,this.Ki>0&&this.kn>0){let e=this.Ki;for(;e>1;)e/=10,this.Rn++}}Tn(e){const t=this.Ki/this.kn;let i=Math.floor(e),r="";const o=this.Rn!==void 0?this.Rn:NaN;if(t>1){let c=+(Math.round(e*t)-i*t).toFixed(this.Rn);c>=t&&(c-=t,i+=1),r=j2+er(+c.toFixed(this.Rn)*this.kn,o)}else i=Math.round(i*t)/t,o>0&&(r=j2+er(0,o));return i.toFixed(0)+r}}class hT extends mm{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class z9 extends uT{constructor(e){super(),this.Dn=e}format(e){let t="";return e<0&&(t="-",e=-e),e<995?t+this.In(e):e<999995?t+this.In(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),t+this.In(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),t+this.In(e/1e9)+"B")}In(e){let t;const i=Math.pow(10,this.Dn);return t=(e=Math.round(e*i)/i)>=1e-15&&e<1?e.toFixed(this.Dn).replace(/\.?0+$/,""):String(e),t.replace(/(\.[1-9]*)0+$/,((r,o)=>o))}}const P9=/[2-9]/g;class Cf{constructor(e=50){this.Vn=0,this.Bn=1,this.En=1,this.An={},this.Ln=new Map,this.zn=e}On(){this.Vn=0,this.Ln.clear(),this.Bn=1,this.En=1,this.An={}}Ii(e,t,i){return this.Nn(e,t,i).width}Di(e,t,i){const r=this.Nn(e,t,i);return((r.actualBoundingBoxAscent||0)-(r.actualBoundingBoxDescent||0))/2}Nn(e,t,i){const r=i||P9,o=String(t).replace(r,"0");if(this.Ln.has(o))return sn(this.Ln.get(o)).Fn;if(this.Vn===this.zn){const h=this.An[this.En];delete this.An[this.En],this.Ln.delete(h),this.En++,this.Vn--}e.save(),e.textBaseline="middle";const c=e.measureText(o);return e.restore(),c.width===0&&t.length||(this.Ln.set(o,{Fn:c,Wn:this.Bn}),this.An[this.Bn]=o,this.Vn++,this.Bn++),c}}class L9{constructor(e){this.Hn=null,this.M=null,this.Un="right",this.$n=e}qn(e,t,i){this.Hn=e,this.M=t,this.Un=i}nt(e){this.M!==null&&this.Hn!==null&&this.Hn.nt(e,this.M,this.$n,this.Un)}}class dT{constructor(e,t,i){this.jn=e,this.$n=new Cf(50),this.Yn=t,this.O=i,this.F=-1,this.Xt=new L9(this.$n)}Tt(){const e=this.O.Kn(this.Yn);if(e===null)return null;const t=e.Zn(this.Yn)?e.Gn():this.Yn.Ft();if(t===null)return null;const i=e.Xn(t);if(i==="overlay")return null;const r=this.O.Jn();return r.k!==this.F&&(this.F=r.k,this.$n.On()),this.Xt.qn(this.jn.ji(),r,i),this.Xt}}class V9 extends Hl{constructor(){super(...arguments),this.jt=null}ht(e){this.jt=e}Qn(e,t){if(!this.jt?.It)return null;const{ut:i,ct:r,te:o}=this.jt;return t>=i-r-7&&t<=i+r+7?{ie:this.jt,te:o}:null}et({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:r}){if(this.jt===null||this.jt.It===!1)return;const o=Math.round(this.jt.ut*r);o<0||o>t.height||(e.lineCap="butt",e.strokeStyle=this.jt.R,e.lineWidth=Math.floor(this.jt.ct*i),Al(e,this.jt.Zt),rT(e,o,0,t.width))}}class Zy{constructor(e){this.se={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Zt:0,It:!1},this.ne=new V9,this.xt=!0,this.ee=e,this.re=e.Qt(),this.ne.ht(this.se)}kt(){this.xt=!0}Tt(){return this.ee.It()?(this.xt&&(this.he(),this.xt=!1),this.ne):null}}class U9 extends Zy{constructor(e){super(e)}he(){this.se.It=!1;const e=this.ee.Ft(),t=e.ae().ae;if(t!==2&&t!==3)return;const i=this.ee.N();if(!i.baseLineVisible||!this.ee.It())return;const r=this.ee.Lt();r!==null&&(this.se.It=!0,this.se.ut=e.Nt(r.Wt,r.Wt),this.se.R=i.baseLineColor,this.se.ct=i.baseLineWidth,this.se.Zt=i.baseLineStyle)}}class B9 extends Hl{constructor(){super(...arguments),this.jt=null}ht(e){this.jt=e}le(){return this.jt}et({context:e,horizontalPixelRatio:t,verticalPixelRatio:i}){const r=this.jt;if(r===null)return;const o=Math.max(1,Math.floor(t)),c=o%2/2,h=Math.round(r.oe.x*t)+c,f=r.oe.y*i;e.fillStyle=r._e,e.beginPath();const m=Math.max(2,1.5*r.ue)*t;e.arc(h,f,m,0,2*Math.PI,!1),e.fill(),e.fillStyle=r.ce,e.beginPath(),e.arc(h,f,r.ft*t,0,2*Math.PI,!1),e.fill(),e.lineWidth=o,e.strokeStyle=r.de,e.beginPath(),e.arc(h,f,r.ft*t+o/2,0,2*Math.PI,!1),e.stroke()}}const F9=[{fe:0,pe:.25,ve:4,me:10,we:.25,ge:0,Me:.4,be:.8},{fe:.25,pe:.525,ve:10,me:14,we:0,ge:0,Me:.8,be:0},{fe:.525,pe:1,ve:14,me:14,we:0,ge:0,Me:0,be:0}];class H9{constructor(e){this.Xt=new B9,this.xt=!0,this.Se=!0,this.xe=performance.now(),this.Ce=this.xe-1,this.ye=e}ke(){this.Ce=this.xe-1,this.kt()}Pe(){if(this.kt(),this.ye.N().lastPriceAnimation===2){const e=performance.now(),t=this.Ce-e;if(t>0)return void(t<650&&(this.Ce+=2600));this.xe=e,this.Ce=e+2600}}kt(){this.xt=!0}Te(){this.Se=!0}It(){return this.ye.N().lastPriceAnimation!==0}Re(){switch(this.ye.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Ce}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.Se=!1):this.Se&&(this.De(),this.Se=!1),this.Xt}Rt(){this.Xt.ht(null);const e=this.ye.Qt().Et(),t=e.Ie(),i=this.ye.Lt();if(t===null||i===null)return;const r=this.ye.Ve(!0);if(r.Be||!t.Ee(r.js))return;const o={x:e.qt(r.js),y:this.ye.Ft().Nt(r.gt,i.Wt)},c=r.R,h=this.ye.N().lineWidth,f=this.Ae(this.Le(),c);this.Xt.ht({_e:c,ue:h,ce:f.ce,de:f.de,ft:f.ft,oe:o})}De(){const e=this.Xt.le();if(e!==null){const t=this.Ae(this.Le(),e._e);e.ce=t.ce,e.de=t.de,e.ft=t.ft}}Le(){return this.Re()?performance.now()-this.xe:2599}ze(e,t,i,r){const o=i+(r-i)*t;return this.ye.Qt().Xi().Y(e,o)}Ae(e,t){const i=e%2600/2600;let r;for(const m of F9)if(i>=m.fe&&i<=m.pe){r=m;break}Ri(r!==void 0,"Last price animation internal logic error");const o=(i-r.fe)/(r.pe-r.fe);return{ce:this.ze(t,o,r.we,r.ge),de:this.ze(t,o,r.Me,r.be),ft:(c=o,h=r.ve,f=r.me,h+(f-h)*c)};var c,h,f}}class q9 extends Zy{constructor(e){super(e)}he(){const e=this.se;e.It=!1;const t=this.ee.N();if(!t.priceLineVisible||!this.ee.It())return;const i=this.ee.Ve(t.priceLineSource===0);i.Be||(e.It=!0,e.ut=i.Ei,e.R=this.ee.Oe(i.R),e.ct=t.priceLineWidth,e.Zt=t.priceLineStyle)}}class G9 extends dm{constructor(e){super(),this.Jt=e}Yi(e,t,i){e.It=!1,t.It=!1;const r=this.Jt;if(!r.It())return;const o=r.N(),c=o.lastValueVisible,h=r.Ne()!=="",f=o.seriesLastValueMode===0,m=r.Ve(!1);if(m.Be)return;c&&(e.ri=this.Fe(m,c,f),e.It=e.ri.length!==0),(h||f)&&(t.ri=this.We(m,c,h,f),t.It=t.ri.length>0);const g=r.Oe(m.R),v=this.Jt.Qt().Xi().Z(g);i.G=v.G,i.Ei=m.Ei,t.Ht=r.Qt().Ut(m.Ei/r.Ft().$t()),e.Ht=g,e.R=v.X,t.R=v.X}We(e,t,i,r){let o="";const c=this.Jt.Ne();return i&&c.length!==0&&(o+=`${c} `),t&&r&&(o+=this.Jt.Ft().He()?e.Ue:e.$e),o.trim()}Fe(e,t,i){return t?i?this.Jt.Ft().He()?e.$e:e.Ue:e.ri:""}}function D2(n,e,t,i){const r=Number.isFinite(e),o=Number.isFinite(t);return r&&o?n(e,t):r||o?r?e:t:i}class qi{constructor(e,t){this.qe=e,this.je=t}Ye(e){return e!==null&&this.qe===e.qe&&this.je===e.je}Ke(){return new qi(this.qe,this.je)}Ze(){return this.qe}Ge(){return this.je}Xe(){return this.je-this.qe}Gi(){return this.je===this.qe||Number.isNaN(this.je)||Number.isNaN(this.qe)}Sn(e){return e===null?this:new qi(D2(Math.min,this.Ze(),e.Ze(),-1/0),D2(Math.max,this.Ge(),e.Ge(),1/0))}Je(e){if(!Cl(e)||this.je-this.qe===0)return;const t=.5*(this.je+this.qe);let i=this.je-t,r=this.qe-t;i*=e,r*=e,this.je=t+i,this.qe=t+r}Qe(e){Cl(e)&&(this.je+=e,this.qe+=e)}tr(){return{minValue:this.qe,maxValue:this.je}}static ir(e){return e===null?null:new qi(e.minValue,e.maxValue)}}class Rf{constructor(e,t){this.sr=e,this.nr=t||null}er(){return this.sr}rr(){return this.nr}tr(){return{priceRange:this.sr===null?null:this.sr.tr(),margins:this.nr||void 0}}static ir(e){return e===null?null:new Rf(qi.ir(e.priceRange),e.margins)}}const $9=[2,4,8,16,32,64,128,256,512],K9="Custom series with conflation reducer must have a priceValueBuilder method";class Y9 extends Zy{constructor(e,t){super(e),this.hr=t}he(){const e=this.se;e.It=!1;const t=this.hr.N();if(!this.ee.It()||!t.lineVisible)return;const i=this.hr.ar();i!==null&&(e.It=!0,e.ut=i,e.R=t.color,e.ct=t.lineWidth,e.Zt=t.lineStyle,e.te=this.hr.N().id)}}class W9 extends dm{constructor(e,t){super(),this.ye=e,this.hr=t}Yi(e,t,i){e.It=!1,t.It=!1;const r=this.hr.N(),o=r.axisLabelVisible,c=r.title!=="",h=this.ye;if(!o||!h.It())return;const f=this.hr.ar();if(f===null)return;c&&(t.ri=r.title,t.It=!0),t.Ht=h.Qt().Ut(f/h.Ft().$t()),e.ri=this.lr(r.price),e.It=!0;const m=this.ye.Qt().Xi().Z(r.axisLabelColor||r.color);i.G=m.G;const g=r.axisLabelTextColor||m.X;e.R=g,t.R=g,i.Ei=f}lr(e){const t=this.ye.Lt();return t===null?"":this.ye.Ft().Ji(e,t.Wt)}}class Q9{constructor(e,t){this.ye=e,this.Ps=t,this._r=new Y9(e,this),this.jn=new W9(e,this),this.ur=new dT(this.jn,e,e.Qt())}cr(e){bn(this.Ps,e),this.kt(),this.ye.Qt().dr()}N(){return this.Ps}pr(){return this._r}vr(){return this.ur}mr(){return this.jn}kt(){this._r.kt(),this.jn.kt()}ar(){const e=this.ye,t=e.Ft();if(e.Qt().Et().Gi()||t.Gi())return null;const i=e.Lt();return i===null?null:t.Nt(this.Ps.price,i.Wt)}}class X9{constructor(){this.wr=new WeakMap}gr(e,t,i){const r=1/t*i;if(e>=r)return 1;const o=r/e,c=Math.pow(2,Math.floor(Math.log2(o)));return Math.min(c,512)}Mr(e,t,i,r=!1,o){if(e.length===0||t<=1)return e;const c=this.br(t);if(c<=1)return e;const h=this.Sr(e);let f=h.Cr.get(c);return f!==void 0||(f=this.yr(e,c,i,r,o,h.Cr),h.Cr.set(c,f)),f}kr(e,t,i,r,o=!1,c){if(i<1||e.length===0)return e;const h=this.Sr(e),f=h.Cr.get(i);if(!f)return this.Mr(e,i,r,o,c);const m=this.Pr(e,t,i,f,o,r,c);return h.Cr.set(i,m),m}br(e){if(e<=2)return 2;for(const t of $9)if(e<=t)return t;return 512}Tr(e){if(e.length===0)return 0;const t=e[0],i=e[e.length-1];return 31*e.length+17*t.js+13*i.js}yr(e,t,i,r=!1,o,c=new Map){if(t===2)return this.Rr(e,2,i,r,o);const h=t/2;let f=c.get(h);return f||(f=this.yr(e,h,i,r,o,c),c.set(h,f)),this.Dr(f,i,r,o)}Rr(e,t,i,r=!1,o){const c=this.Ir(e,t,i,r,o);return this.Vr(c,r)}Dr(e,t,i=!1,r){const o=this.Ir(e,2,t,i,r);return this.Vr(o,i)}Ir(e,t,i,r=!1,o){const c=[];for(let h=0;h<e.length;h+=t)if(e.length-h>=t){const f=this.Br(e[h],e[h+1],i,r,o);f.Er=!1,c.push(f)}else if(c.length===0)c.push(this.Ar(e[h],!0));else{const f=c[c.length-1];c[c.length-1]=this.Lr(f,e[h],i,r,o)}return c}zr(e,t){return(e??1)+(t??1)}Br(e,t,i,r=!1,o){if(!r||!i||!o){const m=e.Wt[1]>t.Wt[1]?e.Wt[1]:t.Wt[1],g=e.Wt[2]<t.Wt[2]?e.Wt[2]:t.Wt[2];return{Or:e.js,Nr:t.js,Fr:e.wt,Wr:t.wt,Hr:e.Wt[0],Ur:m,$r:g,qr:t.Wt[3],jr:this.zr(e.jr,t.jr),Yr:void 0,Er:!1}}const c=i(this.Kr(e,o),this.Kr(t,o)),h=o(c),f=h.length?h[h.length-1]:0;return{Or:e.js,Nr:t.js,Fr:e.wt,Wr:t.wt,Hr:e.Wt[0],Ur:Math.max(e.Wt[1],f),$r:Math.min(e.Wt[2],f),qr:f,jr:this.zr(e.jr,t.jr),Yr:c,Er:!1}}Lr(e,t,i,r=!1,o){if(!r||!i||!o)return{Or:e.Or,Nr:t.js,Fr:e.Fr,Wr:t.wt,Hr:e.Hr,Ur:e.Ur>t.Wt[1]?e.Ur:t.Wt[1],$r:e.$r<t.Wt[2]?e.$r:t.Wt[2],qr:t.Wt[3],jr:e.jr+(t.jr??1),Yr:e.Yr,Er:!1};const c=e.Yr,h=this.Kr(t,o),f=c?{data:c,index:e.Or,originalTime:e.Fr,time:e.Fr,priceValues:o(c)}:null,m=f?i(f,h):h.data,g=f?o(m):h.priceValues,v=g.length?g[g.length-1]:0;return{Or:e.Or,Nr:t.js,Fr:e.Fr,Wr:t.wt,Hr:e.Hr,Ur:Math.max(e.Ur,v),$r:Math.min(e.$r,v),qr:v,jr:e.jr+(t.jr??1),Yr:m,Er:!1}}Zr(e,t,i,r,o,c,h=!1,f){const m=t===r?o:e[t];if(i-t==1)return this.Ar(m,!0);const g=t+1===r?o:e[t+1];let v=this.Br(m,g,c,h,f);for(let _=t+2;_<i;_++){const w=_===r?o:e[_];v=this.Lr(v,w,c,h,f)}return v}Kr(e,t){const i=e.le??{};return{data:e.le,index:e.js,originalTime:e.Gr,time:e.wt,priceValues:t(i)}}Xr(e,t=!1){const i=t===!0,r=!!e.Yr;return{js:e.Or,wt:e.Fr,Gr:e.Fr,Wt:[i?e.qr:e.Hr,e.Ur,e.$r,e.qr],jr:e.jr,le:i?r?e.Yr:{wt:e.Fr}:void 0}}Vr(e,t=!1){return e.map((i=>this.Xr(i,t)))}Pr(e,t,i,r,o=!1,c,h){if(r.length===0)return r;const f=e.length-1,m=Math.floor(f/i)*i;if(Math.min(m+i,e.length)-m<i&&e.length>i){const g=e.slice();return g[g.length-1]=t,this.Mr(g,i,c,o,h)}if(Math.floor((f-1)/i)===Math.floor(f/i)||r.length===1){const g=Math.min(m+i,e.length),v=g-m;if(v<=0)return r;const _=v===1?this.Ar(m===f?t:e[m],!0):this.Zr(e,m,g,f,t,c,o,h);return r[r.length-1]=this.Xr(_,o),r}{const g=e.slice();return g[g.length-1]=t,this.Mr(g,i,c,o,h)}}Ar(e,t=!1){return{Or:e.js,Nr:e.js,Fr:e.wt,Wr:e.wt,Hr:e.Wt[0],Ur:e.Wt[1],$r:e.Wt[2],qr:e.Wt[3],jr:e.jr??1,Yr:e.le,Er:t}}Sr(e){const t=this.Jr(e),i=this.Tr(e);return t.Qr!==i&&(t.Cr.clear(),t.Qr=i),t}Jr(e){let t=this.wr.get(e);return t===void 0&&(t={Qr:this.Tr(e),Cr:new Map},this.wr.set(e,t)),t}}class J9 extends cT{constructor(e){super(),this.ns=e}Qt(){return this.ns}}const Z9={Bar:(n,e,t,i)=>{const r=e.upColor,o=e.downColor,c=ve(n(t,i)),h=Xr(c.Wt[0])<=Xr(c.Wt[3]);return{th:c.R??(h?r:o)}},Candlestick:(n,e,t,i)=>{const r=e.upColor,o=e.downColor,c=e.borderUpColor,h=e.borderDownColor,f=e.wickUpColor,m=e.wickDownColor,g=ve(n(t,i)),v=Xr(g.Wt[0])<=Xr(g.Wt[3]);return{th:g.R??(v?r:o),ih:g.Ht??(v?c:h),sh:g.nh??(v?f:m)}},Custom:(n,e,t,i)=>({th:ve(n(t,i)).R??e.color}),Area:(n,e,t,i)=>{const r=ve(n(t,i));return{th:r.vt??e.lineColor,vt:r.vt??e.lineColor,eh:r.eh??e.topColor,rh:r.rh??e.bottomColor}},Baseline:(n,e,t,i)=>{const r=ve(n(t,i));return{th:r.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,hh:r.hh??e.topLineColor,ah:r.ah??e.bottomLineColor,oh:r.oh??e.topFillColor1,_h:r._h??e.topFillColor2,uh:r.uh??e.bottomFillColor1,dh:r.dh??e.bottomFillColor2}},Line:(n,e,t,i)=>{const r=ve(n(t,i));return{th:r.R??e.color,vt:r.R??e.color}},Histogram:(n,e,t,i)=>({th:ve(n(t,i)).R??e.color})};class eO{constructor(e){this.fh=(t,i)=>i!==void 0?i.Wt:this.ye.qs().ph(t),this.ye=e,this.mh=Z9[e.wh()]}gh(e,t){return this.mh(this.fh,this.ye.N(),e,t)}}function fT(n,e,t,i,r=0,o=e.length){let c=o-r;for(;0<c;){const h=c>>1,f=r+h;i(e[f],t)===n?(r=f+1,c-=h+1):c=h}return r}const Rl=fT.bind(null,!0),mT=fT.bind(null,!1);var O2;(function(n){n[n.NearestLeft=-1]="NearestLeft",n[n.None=0]="None",n[n.NearestRight=1]="NearestRight"})(O2||(O2={}));const qr=30;class tO{constructor(){this.Mh=[],this.bh=new Map,this.Sh=new Map,this.xh=[]}Ch(){return this.yh()>0?this.Mh[this.Mh.length-1]:null}kh(){return this.yh()>0?this.Ph(0):null}sn(){return this.yh()>0?this.Ph(this.Mh.length-1):null}yh(){return this.Mh.length}Gi(){return this.yh()===0}Ee(e){return this.Th(e,0)!==null}ph(e){return this.$s(e)}$s(e,t=0){const i=this.Th(e,t);return i===null?null:{...this.Rh(i),js:this.Ph(i)}}Dh(){return this.Mh}Ih(e,t,i){if(this.Gi())return null;let r=null;for(const o of i)r=Ad(r,this.Vh(e,t,o));return r}ht(e){this.Sh.clear(),this.bh.clear(),this.Mh=e,this.xh=e.map((t=>t.js))}Bh(){return this.xh}Ph(e){return this.Mh[e].js}Rh(e){return this.Mh[e]}Th(e,t){const i=this.Eh(e);if(i===null&&t!==0)switch(t){case-1:return this.Ah(e);case 1:return this.Lh(e);default:throw new TypeError("Unknown search mode")}return i}Ah(e){let t=this.zh(e);return t>0&&(t-=1),t!==this.Mh.length&&this.Ph(t)<e?t:null}Lh(e){const t=this.Oh(e);return t!==this.Mh.length&&e<this.Ph(t)?t:null}Eh(e){const t=this.zh(e);return t===this.Mh.length||e<this.Mh[t].js?null:t}zh(e){return Rl(this.Mh,e,((t,i)=>t.js<i))}Oh(e){return mT(this.Mh,e,((t,i)=>t.js>i))}Nh(e,t,i){let r=null;for(let o=e;o<t;o++){const c=this.Mh[o].Wt[i];Number.isNaN(c)||(r===null?r={Fh:c,Wh:c}:(c<r.Fh&&(r.Fh=c),c>r.Wh&&(r.Wh=c)))}return r}Vh(e,t,i){if(this.Gi())return null;let r=null;const o=ve(this.kh()),c=ve(this.sn()),h=Math.max(e,o),f=Math.min(t,c),m=Math.ceil(h/qr)*qr,g=Math.max(m,Math.floor(f/qr)*qr);{const _=this.zh(h),w=this.Oh(Math.min(f,m,t));r=Ad(r,this.Nh(_,w,i))}let v=this.bh.get(i);v===void 0&&(v=new Map,this.bh.set(i,v));for(let _=Math.max(m+1,h);_<g;_+=qr){const w=Math.floor(_/qr);let S=v.get(w);if(S===void 0){const R=this.zh(w*qr),O=this.Oh((w+1)*qr-1);S=this.Nh(R,O,i),v.set(w,S)}r=Ad(r,S)}{const _=this.zh(g),w=this.Oh(f);r=Ad(r,this.Nh(_,w,i))}return r}}function Ad(n,e){return n===null?e:e===null?n:{Fh:Math.min(n.Fh,e.Fh),Wh:Math.max(n.Wh,e.Wh)}}function zg(){return new tO}const Nf={setLineStyle:Al};class iO{constructor(e){this.Hh=e}nt(e,t,i){this.Hh.draw(e,Nf)}Uh(e,t,i){this.Hh.drawBackground?.(e,Nf)}}class nO{constructor(e){this.Ln=null,this.$h=e}Tt(){const e=this.$h.renderer();if(e===null)return null;if(this.Ln?.qh===e)return this.Ln.jh;const t=new iO(e);return this.Ln={qh:e,jh:t},t}Yh(){return this.$h.zOrder?.()??"normal"}}class pT{constructor(e){this.Kh=null,this.Zh=e}Gh(){return this.Zh}Ws(){this.Zh.updateAllViews?.()}Ys(){const e=this.Zh.paneViews?.()??[];if(this.Kh?.qh===e)return this.Kh.jh;const t=e.map((i=>new nO(i)));return this.Kh={qh:e,jh:t},t}Qn(e,t){return this.Zh.hitTest?.(e,t)??null}}let sO=class extends pT{ds(){return[]}};class rO{constructor(e){this.Hh=e}nt(e,t,i){this.Hh.draw(e,Nf)}Uh(e,t,i){this.Hh.drawBackground?.(e,Nf)}}class z2{constructor(e){this.Ln=null,this.$h=e}Tt(){const e=this.$h.renderer();if(e===null)return null;if(this.Ln?.qh===e)return this.Ln.jh;const t=new rO(e);return this.Ln={qh:e,jh:t},t}Yh(){return this.$h.zOrder?.()??"normal"}}function gT(n){return{ri:n.text(),Ei:n.coordinate(),Vi:n.fixedCoordinate?.(),R:n.textColor(),G:n.backColor(),It:n.visible?.()??!0,pi:n.tickVisible?.()??!0}}class aO{constructor(e,t){this.Xt=new lT,this.Xh=e,this.Jh=t}Tt(){return this.Xt.ht({ss:this.Jh.ss(),...gT(this.Xh)}),this.Xt}}class oO extends dm{constructor(e,t){super(),this.Xh=e,this.Ki=t}Yi(e,t,i){const r=gT(this.Xh);i.G=r.G,e.R=r.R;const o=2/12*this.Ki.k();i.Ti=o,i.Ri=o,i.Ei=r.Ei,i.Vi=r.Vi,e.ri=r.ri,e.It=r.It,e.pi=r.pi}}class lO extends pT{constructor(e,t){super(e),this.Qh=null,this.ta=null,this.ia=null,this.sa=null,this.ye=t}fs(){const e=this.Zh.timeAxisViews?.()??[];if(this.Qh?.qh===e)return this.Qh.jh;const t=this.ye.Qt().Et(),i=e.map((r=>new aO(r,t)));return this.Qh={qh:e,jh:i},i}Ks(){const e=this.Zh.priceAxisViews?.()??[];if(this.ta?.qh===e)return this.ta.jh;const t=this.ye.Ft(),i=e.map((r=>new oO(r,t)));return this.ta={qh:e,jh:i},i}na(){const e=this.Zh.priceAxisPaneViews?.()??[];if(this.ia?.qh===e)return this.ia.jh;const t=e.map((i=>new z2(i)));return this.ia={qh:e,jh:t},t}ea(){const e=this.Zh.timeAxisPaneViews?.()??[];if(this.sa?.qh===e)return this.sa.jh;const t=e.map((i=>new z2(i)));return this.sa={qh:e,jh:t},t}ra(e,t){return this.Zh.autoscaleInfo?.(e,t)??null}}function Pg(n,e,t,i){n.forEach((r=>{e(r).forEach((o=>{o.Yh()===t&&i.push(o)}))}))}function Lg(n){return n.Ys()}function cO(n){return n.na()}function uO(n){return n.ea()}const hO=["Area","Line","Baseline"];class pm extends J9{constructor(e,t,i,r,o){super(e),this.jt=zg(),this._r=new q9(this),this.ha=[],this.aa=new U9(this),this.la=null,this.oa=null,this._a=null,this.ua=[],this.ca=new X9,this.da=new Map,this.fa=null,this.Ps=i,this.pa=t;const c=new G9(this);if(this.gs=[c],this.ur=new dT(c,this,e),hO.includes(this.pa)&&(this.la=new H9(this)),this.va(),this.$h=r(this,this.Qt(),o),this.pa==="Custom"){const h=this.$h;h.ma&&this.wa(h.ma)}}m(){this._a!==null&&clearTimeout(this._a)}Oe(e){return this.Ps.priceLineColor||e}Ve(e){const t={Be:!0},i=this.Ft();if(this.Qt().Et().Gi()||i.Gi()||this.jt.Gi())return t;const r=this.Qt().Et().Ie(),o=this.Lt();if(r===null||o===null)return t;let c,h;if(e){const v=this.jt.Ch();if(v===null)return t;c=v,h=v.js}else{const v=this.jt.$s(r.bi(),-1);if(v===null||(c=this.jt.ph(v.js),c===null))return t;h=v.js}const f=c.Wt[3],m=this.ga().gh(h,{Wt:c}),g=i.Nt(f,o.Wt);return{Be:!1,gt:f,ri:i.Ji(f,o.Wt),Ue:i.Ma(f),$e:i.ba(f,o.Wt),R:m.th,Ei:g,js:h}}ga(){return this.oa!==null||(this.oa=new eO(this)),this.oa}N(){return this.Ps}cr(e){const t=this.Qt(),{priceScaleId:i,visible:r,priceFormat:o}=e;i!==void 0&&i!==this.Ps.priceScaleId&&t.Sa(this,i),r!==void 0&&r!==this.Ps.visible&&t.xa();const c=e.conflationThresholdFactor!==void 0;bn(this.Ps,e),c&&(this.da.clear(),this.Qt().dr()),o!==void 0&&(this.va(),t.Ca()),t.ya(this),t.ka(),this.$h.kt("options")}ht(e,t){this.jt.ht(e),this.da.clear();const i=this.Qt().Et().N();i.enableConflation&&i.precomputeConflationOnInit&&this.Pa(i.precomputeConflationPriority),this.$h.kt("data"),this.la!==null&&(t&&t.Ta?this.la.Pe():e.length===0&&this.la.ke());const r=this.Qt().Kn(this);this.Qt().Ra(r),this.Qt().ya(this),this.Qt().ka(),this.Qt().dr()}Da(e){const t=new Q9(this,e);return this.ha.push(t),this.Qt().ya(this),t}Ia(e){const t=this.ha.indexOf(e);t!==-1&&this.ha.splice(t,1),this.Qt().ya(this)}Va(){return this.ha}wh(){return this.pa}Lt(){const e=this.Ba();return e===null?null:{Wt:e.Wt[3],Ea:e.wt}}Ba(){const e=this.Qt().Et().Ie();if(e===null)return null;const t=e.Aa();return this.jt.$s(t,1)}qs(){return this.jt}wa(e){this.fa=e,this.da.clear()}La(){return!!this.Qt().Et().N().enableConflation&&this.za()>1}kr(e){if(!this.La())return;const t=this.za();if(!this.da.has(t))return;const i=this.pa==="Custom",r=i&&this.fa||void 0,o=i&&this.$h.Oa?f=>{const m=f,g=this.$h.Oa(m);return Array.isArray(g)?g:[typeof g=="number"?g:0]}:void 0,c=this.ca.kr(this.jt.Dh(),e,t,r,i,o),h=zg();h.ht(c),this.da.set(t,h)}Na(){const e=this.Qt().Et().N().enableConflation;if(this.pa==="Custom"&&this.fa===null)return this.jt;if(!e)return this.jt;const t=this.za(),i=this.da.get(t);return i||(this.Fa(t),this.da.get(t)??this.jt)}Wa(e){const t=this.jt.ph(e);return t===null?null:this.pa==="Bar"||this.pa==="Candlestick"||this.pa==="Custom"?{Hr:t.Wt[0],Ur:t.Wt[1],$r:t.Wt[2],qr:t.Wt[3]}:t.Wt[3]}Ha(e){const t=[];Pg(this.ua,Lg,"top",t);const i=this.la;return i!==null&&i.It()&&(this._a===null&&i.Re()&&(this._a=setTimeout((()=>{this._a=null,this.Qt().Ua()}),0)),i.Te(),t.unshift(i)),t}Ys(){const e=[];this.$a()||e.push(this.aa),e.push(this.$h,this._r);const t=this.ha.map((i=>i.pr()));return e.push(...t),Pg(this.ua,Lg,"normal",e),e}qa(){return this.ja(Lg,"bottom")}Ya(e){return this.ja(cO,e)}Ka(e){return this.ja(uO,e)}Za(e,t){return this.ua.map((i=>i.Qn(e,t))).filter((i=>i!==null))}ds(){return[this.ur,...this.ha.map((e=>e.vr()))]}Ks(e,t){if(t!==this.hs&&!this.$a())return[];const i=[...this.gs];for(const r of this.ha)i.push(r.mr());return this.ua.forEach((r=>{i.push(...r.Ks())})),i}fs(){const e=[];return this.ua.forEach((t=>{e.push(...t.fs())})),e}ra(e,t){if(this.Ps.autoscaleInfoProvider!==void 0){const i=this.Ps.autoscaleInfoProvider((()=>{const r=this.Ga(e,t);return r===null?null:r.tr()}));return Rf.ir(i)}return this.Ga(e,t)}qh(){const e=this.Ps.priceFormat;return e.base??1/e.minMove}Xa(){return this.Ja}Ws(){this.$h.kt();for(const e of this.gs)e.kt();for(const e of this.ha)e.kt();this._r.kt(),this.aa.kt(),this.la?.kt(),this.ua.forEach((e=>e.Ws()))}Ft(){return ve(super.Ft())}At(e){if(!((this.pa==="Line"||this.pa==="Area"||this.pa==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const t=this.jt.ph(e);return t===null?null:{gt:t.Wt[3],ft:this.Qa(),Ht:this.tl(),Ot:this.il(),zt:this.sl(e)}}Ne(){return this.Ps.title}It(){return this.Ps.visible}nl(e){this.ua.push(new lO(e,this))}el(e){this.ua=this.ua.filter((t=>t.Gh()!==e))}rl(){if(this.pa==="Custom")return e=>this.$h.Oa(e)}hl(){if(this.pa==="Custom")return e=>this.$h.al(e)}ll(){return this.jt.Bh()}$a(){return!fm(this.Ft().ol())}Ga(e,t){if(!Tu(e)||!Tu(t)||this.jt.Gi())return null;const i=this.pa==="Line"||this.pa==="Area"||this.pa==="Baseline"||this.pa==="Histogram"?[3]:[2,1],r=this.jt.Ih(e,t,i);let o=r!==null?new qi(r.Fh,r.Wh):null,c=null;if(this.wh()==="Histogram"){const h=this.Ps.base,f=new qi(h,h);o=o!==null?o.Sn(f):f}return this.ua.forEach((h=>{const f=h.ra(e,t);if(f?.priceRange){const m=new qi(f.priceRange.minValue,f.priceRange.maxValue);o=o!==null?o.Sn(m):m}f?.margins&&(c=f.margins)})),new Rf(o,c)}Qa(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}tl(){switch(this.pa){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}il(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}sl(e){switch(this.pa){case"Line":case"Area":case"Baseline":{const t=this.Ps.crosshairMarkerBackgroundColor;if(t.length!==0)return t}}return this.ga().gh(e).th}va(){switch(this.Ps.priceFormat.type){case"custom":{const e=this.Ps.priceFormat.formatter;this.Ja={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(t=>t.map(e))};break}case"volume":this.Ja=new z9(this.Ps.priceFormat.precision);break;case"percent":this.Ja=new hT(this.Ps.priceFormat.precision);break;default:{const e=Math.pow(10,this.Ps.priceFormat.precision);this.Ja=new mm(e,this.Ps.priceFormat.minMove*e)}}this.hs!==null&&this.hs._l()}ja(e,t){const i=[];return Pg(this.ua,e,t,i),i}za(){const{ul:e,cl:t,dl:i}=this.fl();return this.ca.gr(e,t,i)}fl(){const e=this.Qt().Et(),t=e.ul(),i=window.devicePixelRatio||1,r=e.N().conflationThresholdFactor;return{ul:t,cl:i,dl:this.Ps.conflationThresholdFactor??r??1}}pl(e){const t=this.jt.Dh();let i;if(this.pa==="Custom"&&this.fa!==null){const o=this.rl();if(!o)throw new Error(K9);i=this.ca.Mr(t,e,this.fa,!0,(c=>o(c)))}else i=this.ca.Mr(t,e);const r=zg();return r.ht(i),r}Fa(e){const t=this.pl(e);this.da.set(e,t)}Pa(e){if(this.pa==="Custom"&&(this.fa===null||!this.rl()))return;this.da.clear();const t=this.Qt().Et().vl();for(const i of t){const r=()=>{this.ml(i)},o=typeof window=="object"&&window||typeof self=="object"&&self;o?.gl?.wl?o.gl.wl((()=>{r()}),{Ml:e}):Promise.resolve().then((()=>r()))}}ml(e){if(this.da.has(e)||this.jt.Dh().length===0)return;const t=this.pl(e);this.da.set(e,t)}}const dO=[3],fO=[0,1,2,3];class mO{constructor(e){this.Ps=e}bl(e,t,i){let r=e;if(this.Ps.mode===0)return r;const o=i.Rs(),c=o.Lt();if(c===null)return r;const h=o.Nt(e,c),f=i.Sl().filter((g=>g instanceof pm)).reduce(((g,v)=>{if(i.Zn(v)||!v.It())return g;const _=v.Ft(),w=v.qs();if(_.Gi()||!w.Ee(t))return g;const S=w.ph(t);if(S===null)return g;const R=Xr(v.Lt()),O=this.Ps.mode===3?fO:dO;return g.concat(O.map((M=>_.Nt(S.Wt[M],R.Wt))))}),[]);if(f.length===0)return r;f.sort(((g,v)=>Math.abs(g-h)-Math.abs(v-h)));const m=f[0];return r=o.Ds(m,c),r}}function ou(n,e,t){return Math.min(Math.max(n,e),t)}function Cd(n,e,t){return e-n<=t}class pO extends Hl{constructor(){super(...arguments),this.jt=null}ht(e){this.jt=e}et({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:r}){if(this.jt===null)return;const o=Math.max(1,Math.floor(i));e.lineWidth=o,(function(c,h){c.save(),c.lineWidth%2&&c.translate(.5,.5),h(),c.restore()})(e,(()=>{const c=ve(this.jt);if(c.xl){e.strokeStyle=c.Cl,Al(e,c.yl),e.beginPath();for(const h of c.kl){const f=Math.round(h.Pl*i);e.moveTo(f,-o),e.lineTo(f,t.height+o)}e.stroke()}if(c.Tl){e.strokeStyle=c.Rl,Al(e,c.Dl),e.beginPath();for(const h of c.Il){const f=Math.round(h.Pl*r);e.moveTo(-o,f),e.lineTo(t.width+o,f)}e.stroke()}}))}}class gO{constructor(e){this.Xt=new pO,this.xt=!0,this.yt=e}kt(){this.xt=!0}Tt(){if(this.xt){const e=this.yt.Qt().N().grid,t={Tl:e.horzLines.visible,xl:e.vertLines.visible,Rl:e.horzLines.color,Cl:e.vertLines.color,Dl:e.horzLines.style,yl:e.vertLines.style,Il:this.yt.Rs().Vl(),kl:(this.yt.Qt().Et().Vl()||[]).map((i=>({Pl:i.coord})))};this.Xt.ht(t),this.xt=!1}return this.Xt}}class yO{constructor(e){this.$h=new gO(e)}pr(){return this.$h}}const Vg={Bl:4,El:1e-4};function ul(n,e){const t=100*(n-e)/e;return e<0?-t:t}function vO(n,e){const t=ul(n.Ze(),e),i=ul(n.Ge(),e);return new qi(t,i)}function lu(n,e){const t=100*(n-e)/e+100;return e<0?-t:t}function bO(n,e){const t=lu(n.Ze(),e),i=lu(n.Ge(),e);return new qi(t,i)}function If(n,e){const t=Math.abs(n);if(t<1e-15)return 0;const i=Math.log10(t+e.El)+e.Bl;return n<0?-i:i}function cu(n,e){const t=Math.abs(n);if(t<1e-15)return 0;const i=Math.pow(10,t-e.Bl)-e.El;return n<0?-i:i}function Kc(n,e){if(n===null)return null;const t=If(n.Ze(),e),i=If(n.Ge(),e);return new qi(t,i)}function hl(n,e){if(n===null)return null;const t=cu(n.Ze(),e),i=cu(n.Ge(),e);return new qi(t,i)}function Ug(n){if(n===null)return Vg;const e=Math.abs(n.Ge()-n.Ze());if(e>=1||e<1e-15)return Vg;const t=Math.ceil(Math.abs(Math.log10(e))),i=Vg.Bl+t;return{Bl:i,El:1/Math.pow(10,i)}}class Bg{constructor(e,t){if(this.Al=e,this.Ll=t,(function(i){if(i<0)return!1;if(i>1e18)return!0;for(let r=i;r>1;r/=10)if(r%10!=0)return!1;return!0})(this.Al))this.zl=[2,2.5,2];else{this.zl=[];for(let i=this.Al;i!==1;){if(i%2==0)this.zl.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.zl.push(2,2.5),i/=5}if(this.zl.length>100)throw new Error("something wrong with base")}}}Ol(e,t,i){const r=this.Al===0?0:1/this.Al;let o=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-t)))),c=0,h=this.Ll[0];for(;;){const v=Cd(o,r,1e-14)&&o>r+1e-14,_=Cd(o,i*h,1e-14),w=Cd(o,1,1e-14);if(!(v&&_&&w))break;o/=h,h=this.Ll[++c%this.Ll.length]}if(o<=r+1e-14&&(o=r),o=Math.max(1,o),this.zl.length>0&&(f=o,m=1,g=1e-14,Math.abs(f-m)<g))for(c=0,h=this.zl[0];Cd(o,i*h,1e-14)&&o>r+1e-14;)o/=h,h=this.zl[++c%this.zl.length];var f,m,g;return o}}class P2{constructor(e,t,i,r){this.Nl=[],this.Ki=e,this.Al=t,this.Fl=i,this.Wl=r}Ol(e,t){if(e<t)throw new Error("high < low");const i=this.Ki.$t(),r=(e-t)*this.Hl()/i,o=new Bg(this.Al,[2,2.5,2]),c=new Bg(this.Al,[2,2,2.5]),h=new Bg(this.Al,[2.5,2,2]),f=[];return f.push(o.Ol(e,t,r),c.Ol(e,t,r),h.Ol(e,t,r)),(function(m){if(m.length<1)throw Error("array is empty");let g=m[0];for(let v=1;v<m.length;++v)m[v]<g&&(g=m[v]);return g})(f)}Ul(){const e=this.Ki,t=e.Lt();if(t===null)return void(this.Nl=[]);const i=e.$t(),r=this.Fl(i-1,t),o=this.Fl(0,t),c=this.Ki.N().entireTextOnly?this.$l()/2:0,h=c,f=i-1-c,m=Math.max(r,o),g=Math.min(r,o);if(m===g)return void(this.Nl=[]);const v=this.Ol(m,g);if(this.ql(t,v,m,g,h,f),e.jl()&&this.Yl(v,g,m)){const S=this.Ki.Kl();this.Zl(t,v,h,f,S,2*S)}const _=this.Nl.map((S=>S.Gl)),w=this.Ki.Xl(_);for(let S=0;S<this.Nl.length;S++)this.Nl[S].Jl=w[S]}Vl(){return this.Nl}$l(){return this.Ki.k()}Hl(){return Math.ceil(2.5*this.$l())}ql(e,t,i,r,o,c){const h=this.Nl,f=this.Ki;let m=i%t;m+=m<0?t:0;const g=i>=r?1:-1;let v=null,_=0;for(let w=i-m;w>r;w-=t){const S=this.Wl(w,e,!0);v!==null&&Math.abs(S-v)<this.Hl()||S<o||S>c||(_<h.length?(h[_].Pl=S,h[_].Jl=f.Ql(w),h[_].Gl=w):h.push({Pl:S,Jl:f.Ql(w),Gl:w}),_++,v=S,f.io()&&(t=this.Ol(w*g,r)))}h.length=_}Zl(e,t,i,r,o,c){const h=this.Nl,f=this.so(e,i,o,c),m=this.so(e,r,-c,-o),g=this.Wl(0,e,!0)-this.Wl(t,e,!0);h.length>0&&h[0].Pl-f.Pl<g/2&&h.shift(),h.length>0&&m.Pl-h[h.length-1].Pl<g/2&&h.pop(),h.unshift(f),h.push(m)}so(e,t,i,r){const o=(i+r)/2,c=this.Fl(t+i,e),h=this.Fl(t+r,e),f=Math.min(c,h),m=Math.max(c,h),g=Math.max(.1,this.Ol(m,f)),v=this.Fl(t+o,e),_=v-v%g,w=this.Wl(_,e,!0);return{Jl:this.Ki.Ql(_),Pl:w,Gl:_}}Yl(e,t,i){let r=Xr(this.Ki.er());return this.Ki.io()&&(r=hl(r,this.Ki.no())),r.Ze()-t<e&&i-r.Ge()<e}}function yT(n){return n.slice().sort(((e,t)=>ve(e._s())-ve(t._s())))}var L2;(function(n){n[n.Normal=0]="Normal",n[n.Logarithmic=1]="Logarithmic",n[n.Percentage=2]="Percentage",n[n.IndexedTo100=3]="IndexedTo100"})(L2||(L2={}));const V2=new hT,U2=new mm(100,1);class _O{constructor(e,t,i,r,o){this.eo=0,this.ro=null,this.sr=null,this.ho=null,this.ao={lo:!1,oo:null},this._o=!1,this.uo=0,this.co=0,this.do=new $t,this.fo=new $t,this.po=[],this.vo=null,this.mo=null,this.wo=null,this.Mo=null,this.bo=null,this.Ja=U2,this.So=Ug(null),this.xo=e,this.Ps=t,this.Co=i,this.yo=r,this.ko=o,this.Po=new P2(this,100,this.To.bind(this),this.Ro.bind(this))}ol(){return this.xo}N(){return this.Ps}cr(e){if(bn(this.Ps,e),this._l(),e.mode!==void 0&&this.Do({ae:e.mode}),e.scaleMargins!==void 0){const t=sn(e.scaleMargins.top),i=sn(e.scaleMargins.bottom);if(t<0||t>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${t}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(t+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${t+i}`);this.Io(),this.wo=null}}Vo(){return this.Ps.autoScale}Bo(){return this._o}io(){return this.Ps.mode===1}He(){return this.Ps.mode===2}Eo(){return this.Ps.mode===3}no(){return this.So}ae(){return{ln:this.Ps.autoScale,Ao:this.Ps.invertScale,ae:this.Ps.mode}}Do(e){const t=this.ae();let i=null;e.ln!==void 0&&(this.Ps.autoScale=e.ln),e.ae!==void 0&&(this.Ps.mode=e.ae,e.ae!==2&&e.ae!==3||(this.Ps.autoScale=!0),this.ao.lo=!1),t.ae===1&&e.ae!==t.ae&&((function(o,c){if(o===null)return!1;const h=cu(o.Ze(),c),f=cu(o.Ge(),c);return isFinite(h)&&isFinite(f)})(this.sr,this.So)?(i=hl(this.sr,this.So),i!==null&&this.Lo(i)):this.Ps.autoScale=!0),e.ae===1&&e.ae!==t.ae&&(i=Kc(this.sr,this.So),i!==null&&this.Lo(i));const r=t.ae!==this.Ps.mode;r&&(t.ae===2||this.He())&&this._l(),r&&(t.ae===3||this.Eo())&&this._l(),e.Ao!==void 0&&t.Ao!==e.Ao&&(this.Ps.invertScale=e.Ao,this.zo()),this.fo.p(t,this.ae())}Oo(){return this.fo}k(){return this.Co.fontSize}$t(){return this.eo}No(e){this.eo!==e&&(this.eo=e,this.Io(),this.wo=null)}Fo(){if(this.ro)return this.ro;const e=this.$t()-this.Wo()-this.Ho();return this.ro=e,e}er(){return this.Uo(),this.sr}Lo(e,t){const i=this.sr;(t||i===null&&e!==null||i!==null&&!i.Ye(e))&&(this.wo=null,this.sr=e)}$o(e){this.Lo(e),this.qo(e!==null)}Gi(){return this.Uo(),this.eo===0||!this.sr||this.sr.Gi()}jo(e){return this.Ao()?e:this.$t()-1-e}Nt(e,t){return this.He()?e=ul(e,t):this.Eo()&&(e=lu(e,t)),this.Ro(e,t)}Yo(e,t,i){this.Uo();const r=this.Ho(),o=ve(this.er()),c=o.Ze(),h=o.Ge(),f=this.Fo()-1,m=this.Ao(),g=f/(h-c),v=i===void 0?0:i.from,_=i===void 0?e.length:i.to,w=this.Ko();for(let S=v;S<_;S++){const R=e[S],O=R.gt;if(isNaN(O))continue;let M=O;w!==null&&(M=w(R.gt,t));const F=r+g*(M-c),H=m?F:this.eo-1-F;R.ut=H}}Zo(e,t,i){this.Uo();const r=this.Ho(),o=ve(this.er()),c=o.Ze(),h=o.Ge(),f=this.Fo()-1,m=this.Ao(),g=f/(h-c),v=i===void 0?0:i.from,_=i===void 0?e.length:i.to,w=this.Ko();for(let S=v;S<_;S++){const R=e[S];let O=R.Hr,M=R.Ur,F=R.$r,H=R.qr;w!==null&&(O=w(R.Hr,t),M=w(R.Ur,t),F=w(R.$r,t),H=w(R.qr,t));let G=r+g*(O-c),X=m?G:this.eo-1-G;R.Go=X,G=r+g*(M-c),X=m?G:this.eo-1-G,R.Xo=X,G=r+g*(F-c),X=m?G:this.eo-1-G,R.Jo=X,G=r+g*(H-c),X=m?G:this.eo-1-G,R.Qo=X}}Ds(e,t){const i=this.To(e,t);return this.t_(i,t)}t_(e,t){let i=e;return this.He()?i=(function(r,o){return o<0&&(r=-r),r/100*o+o})(i,t):this.Eo()&&(i=(function(r,o){return r-=100,o<0&&(r=-r),r/100*o+o})(i,t)),i}Sl(){return this.po}Dt(){return this.mo||(this.mo=yT(this.po)),this.mo}i_(e){this.po.indexOf(e)===-1&&(this.po.push(e),this._l(),this.s_())}n_(e){const t=this.po.indexOf(e);if(t===-1)throw new Error("source is not attached to scale");this.po.splice(t,1),this.po.length===0&&(this.Do({ln:!0}),this.Lo(null)),this._l(),this.s_()}Lt(){let e=null;for(const t of this.po){const i=t.Lt();i!==null&&(e===null||i.Ea<e.Ea)&&(e=i)}return e===null?null:e.Wt}Ao(){return this.Ps.invertScale}Vl(){const e=this.Lt()===null;if(this.wo!==null&&(e||this.wo.e_===e))return this.wo.Vl;this.Po.Ul();const t=this.Po.Vl();return this.wo={Vl:t,e_:e},this.do.p(),t}r_(){return this.do}h_(e){this.He()||this.Eo()||this.Mo===null&&this.ho===null&&(this.Gi()||(this.Mo=this.eo-e,this.ho=ve(this.er()).Ke()))}a_(e){if(this.He()||this.Eo()||this.Mo===null)return;this.Do({ln:!1}),(e=this.eo-e)<0&&(e=0);let t=(this.Mo+.2*(this.eo-1))/(e+.2*(this.eo-1));const i=ve(this.ho).Ke();t=Math.max(t,.1),i.Je(t),this.Lo(i)}l_(){this.He()||this.Eo()||(this.Mo=null,this.ho=null)}o_(e){this.Vo()||this.bo===null&&this.ho===null&&(this.Gi()||(this.bo=e,this.ho=ve(this.er()).Ke()))}__(e){if(this.Vo()||this.bo===null)return;const t=ve(this.er()).Xe()/(this.Fo()-1);let i=e-this.bo;this.Ao()&&(i*=-1);const r=i*t,o=ve(this.ho).Ke();o.Qe(r),this.Lo(o,!0),this.wo=null}u_(){this.Vo()||this.bo!==null&&(this.bo=null,this.ho=null)}Xa(){return this.Ja||this._l(),this.Ja}Ji(e,t){switch(this.Ps.mode){case 2:return this.c_(ul(e,t));case 3:return this.Xa().format(lu(e,t));default:return this.lr(e)}}Ql(e){switch(this.Ps.mode){case 2:return this.c_(e);case 3:return this.Xa().format(e);default:return this.lr(e)}}Xl(e){switch(this.Ps.mode){case 2:return this.d_(e);case 3:return this.Xa().formatTickmarks(e);default:return this.f_(e)}}Ma(e){return this.lr(e,ve(this.vo).Xa())}ba(e,t){return e=ul(e,t),this.c_(e,V2)}p_(){return this.po}v_(e){this.ao={oo:e,lo:!1}}Ws(){this.po.forEach((e=>e.Ws()))}jl(){return this.Ps.ensureEdgeTickMarksVisible&&this.Vo()}Kl(){return this.k()/2}_l(){this.wo=null;let e=1/0;this.vo=null;for(const i of this.po)i._s()<e&&(e=i._s(),this.vo=i);let t=100;this.vo!==null&&(t=Math.round(this.vo.qh())),this.Ja=U2,this.He()?(this.Ja=V2,t=100):this.Eo()?(this.Ja=new mm(100,1),t=100):this.vo!==null&&(this.Ja=this.vo.Xa()),this.Po=new P2(this,t,this.To.bind(this),this.Ro.bind(this)),this.Po.Ul()}s_(){this.mo=null}m_(){return this.vo===null||this.He()||this.Eo()?1:1/this.vo.qh()}Xi(){return this.ko}qo(e){this._o=e}Wo(){return this.Ao()?this.Ps.scaleMargins.bottom*this.$t()+this.co:this.Ps.scaleMargins.top*this.$t()+this.uo}Ho(){return this.Ao()?this.Ps.scaleMargins.top*this.$t()+this.uo:this.Ps.scaleMargins.bottom*this.$t()+this.co}Uo(){this.ao.lo||(this.ao.lo=!0,this.w_())}Io(){this.ro=null}Ro(e,t){if(this.Uo(),this.Gi())return 0;e=this.io()&&e?If(e,this.So):e;const i=ve(this.er()),r=this.Ho()+(this.Fo()-1)*(e-i.Ze())/i.Xe();return this.jo(r)}To(e,t){if(this.Uo(),this.Gi())return 0;const i=this.jo(e),r=ve(this.er()),o=r.Ze()+r.Xe()*((i-this.Ho())/(this.Fo()-1));return this.io()?cu(o,this.So):o}zo(){this.wo=null,this.Po.Ul()}w_(){if(this.Bo()&&!this.Vo())return;const e=this.ao.oo;if(e===null)return;let t=null;const i=this.p_();let r=0,o=0;for(const f of i){if(!f.It())continue;const m=f.Lt();if(m===null)continue;const g=f.ra(e.Aa(),e.bi());let v=g&&g.er();if(v!==null){switch(this.Ps.mode){case 1:v=Kc(v,this.So);break;case 2:v=vO(v,m.Wt);break;case 3:v=bO(v,m.Wt)}if(t=t===null?v:t.Sn(ve(v)),g!==null){const _=g.rr();_!==null&&(r=Math.max(r,_.above),o=Math.max(o,_.below))}}}if(this.jl()&&(r=Math.max(r,this.Kl()),o=Math.max(o,this.Kl())),r===this.uo&&o===this.co||(this.uo=r,this.co=o,this.wo=null,this.Io()),t!==null){if(t.Ze()===t.Ge()){const f=5*this.m_();this.io()&&(t=hl(t,this.So)),t=new qi(t.Ze()-f,t.Ge()+f),this.io()&&(t=Kc(t,this.So))}if(this.io()){const f=hl(t,this.So),m=Ug(f);if(c=m,h=this.So,c.Bl!==h.Bl||c.El!==h.El){const g=this.ho!==null?hl(this.ho,this.So):null;this.So=m,t=Kc(f,m),g!==null&&(this.ho=Kc(g,m))}}this.Lo(t)}else this.sr===null&&(this.Lo(new qi(-.5,.5)),this.So=Ug(null));var c,h}Ko(){return this.He()?ul:this.Eo()?lu:this.io()?e=>If(e,this.So):null}g_(e,t,i){return t===void 0?(i===void 0&&(i=this.Xa()),i.format(e)):t(e)}M_(e,t,i){return t===void 0?(i===void 0&&(i=this.Xa()),i.formatTickmarks(e)):t(e)}lr(e,t){return this.g_(e,this.yo.priceFormatter,t)}f_(e,t){const i=this.yo.priceFormatter;return this.M_(e,this.yo.tickmarksPriceFormatter??(i?r=>r.map(i):void 0),t)}c_(e,t){return this.g_(e,this.yo.percentageFormatter,t)}d_(e,t){const i=this.yo.percentageFormatter;return this.M_(e,this.yo.tickmarksPercentageFormatter??(i?r=>r.map(i):void 0),t)}}function B2(n){return n instanceof pm}class F2{constructor(e,t){this.po=[],this.b_=new Map,this.eo=0,this.S_=0,this.x_=1,this.mo=null,this.C_=!1,this.y_=new $t,this.ua=[],this.Jh=e,this.ns=t,this.k_=new yO(this);const i=t.N();this.P_=this.T_("left",i.leftPriceScale),this.R_=this.T_("right",i.rightPriceScale),this.P_.Oo().i(this.D_.bind(this,this.P_),this),this.R_.Oo().i(this.D_.bind(this,this.R_),this),this.I_(i)}I_(e){if(e.leftPriceScale&&this.P_.cr(e.leftPriceScale),e.rightPriceScale&&this.R_.cr(e.rightPriceScale),e.localization&&(this.P_._l(),this.R_._l()),e.overlayPriceScales){const t=Array.from(this.b_.values());for(const i of t){const r=ve(i[0].Ft());r.cr(e.overlayPriceScales),e.localization&&r._l()}}}V_(e){switch(e){case"left":return this.P_;case"right":return this.R_}return this.b_.has(e)?sn(this.b_.get(e))[0].Ft():null}m(){this.Qt().B_().u(this),this.P_.Oo().u(this),this.R_.Oo().u(this),this.po.forEach((e=>{e.m&&e.m()})),this.ua=this.ua.filter((e=>{const t=e.Gh();return t.detached&&t.detached(),!1})),this.y_.p()}E_(){return this.x_}A_(e){this.x_=e}Qt(){return this.ns}ss(){return this.S_}$t(){return this.eo}L_(e){this.S_=e,this.z_()}No(e){this.eo=e,this.P_.No(e),this.R_.No(e),this.po.forEach((t=>{if(this.Zn(t)){const i=t.Ft();i!==null&&i.No(e)}})),this.z_()}O_(e){this.C_=e}N_(){return this.C_}F_(){return this.po.filter(B2)}Sl(){return this.po}Zn(e){const t=e.Ft();return t===null||this.P_!==t&&this.R_!==t}i_(e,t,i){this.W_(e,t,i?e._s():this.po.length)}n_(e,t){const i=this.po.indexOf(e);Ri(i!==-1,"removeDataSource: invalid data source"),this.po.splice(i,1),t||this.po.forEach(((c,h)=>c.us(h)));const r=ve(e.Ft()).ol();if(this.b_.has(r)){const c=sn(this.b_.get(r)),h=c.indexOf(e);h!==-1&&(c.splice(h,1),c.length===0&&this.b_.delete(r))}const o=e.Ft();o&&o.Sl().indexOf(e)>=0&&(o.n_(e),this.H_(o)),this.mo=null}Xn(e){return e===this.P_?"left":e===this.R_?"right":"overlay"}U_(){return this.P_}q_(){return this.R_}j_(e,t){e.h_(t)}Y_(e,t){e.a_(t),this.z_()}K_(e){e.l_()}Z_(e,t){e.o_(t)}G_(e,t){e.__(t),this.z_()}X_(e){e.u_()}z_(){this.po.forEach((e=>{e.Ws()}))}Rs(){let e=null;return this.ns.N().rightPriceScale.visible&&this.R_.Sl().length!==0?e=this.R_:this.ns.N().leftPriceScale.visible&&this.P_.Sl().length!==0?e=this.P_:this.po.length!==0&&(e=this.po[0].Ft()),e===null&&(e=this.R_),e}Gn(){let e=null;return this.ns.N().rightPriceScale.visible?e=this.R_:this.ns.N().leftPriceScale.visible&&(e=this.P_),e}H_(e){e!==null&&e.Vo()&&this.J_(e)}Q_(e){const t=this.Jh.Ie();e.Do({ln:!0}),t!==null&&e.v_(t),this.z_()}tu(){this.J_(this.P_),this.J_(this.R_)}iu(){this.H_(this.P_),this.H_(this.R_),this.po.forEach((e=>{this.Zn(e)&&this.H_(e.Ft())})),this.z_(),this.ns.dr()}Dt(){return this.mo===null&&(this.mo=yT(this.po)),this.mo}su(e,t){t=ou(t,0,this.po.length-1);const i=this.po.indexOf(e);Ri(i!==-1,"setSeriesOrder: invalid data source"),this.po.splice(i,1),this.po.splice(t,0,e),this.po.forEach(((r,o)=>r.us(o))),this.mo=null;for(const r of[this.P_,this.R_])r.s_(),r._l();this.ns.dr()}Vt(){return this.Dt().filter(B2)}nu(){return this.y_}eu(){return this.k_}nl(e){this.ua.push(new sO(e))}el(e){this.ua=this.ua.filter((t=>t.Gh()!==e)),e.detached&&e.detached(),this.ns.dr()}ru(){return this.ua}Za(e,t){return this.ua.map((i=>i.Qn(e,t))).filter((i=>i!==null))}J_(e){const t=e.p_();if(t&&t.length>0&&!this.Jh.Gi()){const i=this.Jh.Ie();i!==null&&e.v_(i)}e.Ws()}W_(e,t,i){let r=this.V_(t);if(r===null&&(r=this.T_(t,this.ns.N().overlayPriceScales)),this.po.splice(i,0,e),!fm(t)){const o=this.b_.get(t)||[];o.push(e),this.b_.set(t,o)}e.us(i),r.i_(e),e.cs(r),this.H_(r),this.mo=null}D_(e,t,i){t.ae!==i.ae&&this.J_(e)}T_(e,t){const i={visible:!0,autoScale:!0,...Zs(t)},r=new _O(e,i,this.ns.N().layout,this.ns.N().localization,this.ns.Xi());return r.No(this.$t()),r}}function Rd(n){return{hu:n.hu,au:{te:n.lu.externalId},ou:n.lu.cursorStyle}}function wO(n,e,t,i){for(const r of n){const o=r.Tt(i);if(o!==null&&o.Qn){const c=o.Qn(e,t);if(c!==null)return{_u:r,au:c}}}return null}function xO(n){return n.Ys!==void 0}function vT(n,e,t){const i=[n,...n.Dt()],r=(function(o,c,h){let f,m;for(const _ of o){const w=_.Za?.(c,h)??[];for(const S of w)g=S.zOrder,v=f?.zOrder,(!v||g==="top"&&v!=="top"||g==="normal"&&v==="bottom")&&(f=S,m=_)}var g,v;return f&&m?{lu:f,hu:m}:null})(i,e,t);if(r?.lu.zOrder==="top")return Rd(r);for(const o of i){if(r&&r.hu===o&&r.lu.zOrder!=="bottom"&&!r.lu.isBackground)return Rd(r);if(xO(o)){const c=wO(o.Ys(n),e,t,n);if(c!==null)return{hu:o,_u:c._u,au:c.au}}if(r&&r.hu===o&&r.lu.zOrder!=="bottom"&&r.lu.isBackground)return Rd(r)}return r?.lu?Rd(r):null}class EO{constructor(e,t,i=50){this.Vn=0,this.Bn=1,this.En=1,this.Ln=new Map,this.An=new Map,this.uu=e,this.cu=t,this.zn=i}du(e){const t=e.time,i=this.cu.cacheKey(t),r=this.Ln.get(i);if(r!==void 0)return r.fu;if(this.Vn===this.zn){const c=this.An.get(this.En);this.An.delete(this.En),this.Ln.delete(sn(c)),this.En++,this.Vn--}const o=this.uu(e);return this.Ln.set(i,{fu:o,Wn:this.Bn}),this.An.set(this.Bn,i),this.Vn++,this.Bn++,o}}class uu{constructor(e,t){Ri(e<=t,"right should be >= left"),this.pu=e,this.vu=t}Aa(){return this.pu}bi(){return this.vu}mu(){return this.vu-this.pu+1}Ee(e){return this.pu<=e&&e<=this.vu}Ye(e){return this.pu===e.Aa()&&this.vu===e.bi()}}function H2(n,e){return n===null||e===null?n===e:n.Ye(e)}class SO{constructor(){this.wu=new Map,this.Ln=null,this.gu=!1}Mu(e){this.gu=e,this.Ln=null}bu(e,t){this.Su(t),this.Ln=null;for(let i=t;i<e.length;++i){const r=e[i];let o=this.wu.get(r.timeWeight);o===void 0&&(o=[],this.wu.set(r.timeWeight,o)),o.push({index:i,time:r.time,weight:r.timeWeight,originalTime:r.originalTime})}}xu(e,t,i,r,o){const c=Math.ceil(t/e);return this.Ln!==null&&this.Ln.Cu===c&&o===this.Ln.yu&&i===this.Ln.ku||(this.Ln={yu:o,ku:i,Vl:this.Pu(c,i,r),Cu:c}),this.Ln.Vl}Su(e){if(e===0)return void this.wu.clear();const t=[];this.wu.forEach(((i,r)=>{e<=i[0].index?t.push(r):i.splice(Rl(i,e,(o=>o.index<e)),1/0)}));for(const i of t)this.wu.delete(i)}Pu(e,t,i){let r=[];const o=c=>!t||i.has(c.index);for(const c of Array.from(this.wu.keys()).sort(((h,f)=>f-h))){if(!this.wu.get(c))continue;const h=r;r=[];const f=h.length;let m=0;const g=sn(this.wu.get(c)),v=g.length;let _=1/0,w=-1/0;for(let S=0;S<v;S++){const R=g[S],O=R.index;for(;m<f;){const M=h[m],F=M.index;if(!(F<O&&o(M))){_=F;break}m++,r.push(M),w=F,_=1/0}if(_-O>=e&&O-w>=e&&o(R))r.push(R),w=O;else if(this.gu)return h}for(;m<f;m++)o(h[m])&&r.push(h[m])}return r}}class gl{constructor(e){this.Tu=e}Ru(){return this.Tu===null?null:new uu(Math.floor(this.Tu.Aa()),Math.ceil(this.Tu.bi()))}Du(){return this.Tu}static Iu(){return new gl(null)}}function TO(n,e){return n.weight>e.weight?n:e}class AO{constructor(e,t,i,r){this.S_=0,this.Vu=null,this.Bu=[],this.bo=null,this.Mo=null,this.Eu=new SO,this.Au=new Map,this.Lu=gl.Iu(),this.zu=!0,this.Ou=new $t,this.Nu=new $t,this.Fu=new $t,this.Wu=null,this.Hu=null,this.Uu=new Map,this.$u=-1,this.qu=[],this.ju=1,this.Ps=t,this.yo=i,this.Yu=t.rightOffset,this.Ku=t.barSpacing,this.ns=e,this.Zu(t),this.cu=r,this.Gu(),this.Eu.Mu(t.uniformDistribution),this.Xu(),this.Ju()}N(){return this.Ps}Qu(e){bn(this.yo,e),this.tc(),this.Gu()}cr(e,t){bn(this.Ps,e),this.Ps.fixLeftEdge&&this.sc(),this.Ps.fixRightEdge&&this.nc(),e.barSpacing!==void 0&&this.ns.gn(e.barSpacing),e.rightOffset!==void 0&&this.ns.Mn(e.rightOffset),this.Zu(e),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ns.gn(e.barSpacing??this.Ku),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.Ju(),this.tc(),this.Gu(),e.enableConflation===void 0&&e.conflationThresholdFactor===void 0||this.Xu(),this.Fu.p()}Is(e){return this.Bu[e]?.time??null}es(e){return this.Bu[e]??null}ec(e,t){if(this.Bu.length<1)return null;if(this.cu.key(e)>this.cu.key(this.Bu[this.Bu.length-1].time))return t?this.Bu.length-1:null;const i=Rl(this.Bu,this.cu.key(e),((r,o)=>this.cu.key(r.time)<o));return this.cu.key(e)<this.cu.key(this.Bu[i].time)?t?i:null:i}Gi(){return this.S_===0||this.Bu.length===0||this.Vu===null}rc(){return this.Bu.length>0}Ie(){return this.hc(),this.Lu.Ru()}ac(){return this.hc(),this.Lu.Du()}lc(){const e=this.Ie();if(e===null)return null;const t={from:e.Aa(),to:e.bi()};return this.oc(t)}oc(e){const t=Math.round(e.from),i=Math.round(e.to),r=ve(this._c()),o=ve(this.uc());return{from:ve(this.es(Math.max(r,t))),to:ve(this.es(Math.min(o,i)))}}cc(e){return{from:ve(this.ec(e.from,!0)),to:ve(this.ec(e.to,!0))}}ss(){return this.S_}L_(e){if(!isFinite(e)||e<=0||this.S_===e)return;const t=this.ac(),i=this.S_;if(this.S_=e,this.zu=!0,this.Ps.lockVisibleTimeRangeOnResize&&i!==0){const r=this.Ku*e/i;this.Ku=r}if(this.Ps.fixLeftEdge&&t!==null&&t.Aa()<=0){const r=i-e;this.Yu-=Math.round(r/this.Ku)+1,this.zu=!0}this.dc(),this.fc()}qt(e){if(this.Gi()||!Tu(e))return 0;const t=this.vc()+this.Yu-e;return this.S_-(t+.5)*this.Ku-1}mc(e,t){const i=this.vc(),r=t===void 0?0:t.from,o=t===void 0?e.length:t.to;for(let c=r;c<o;c++){const h=e[c].wt,f=i+this.Yu-h,m=this.S_-(f+.5)*this.Ku-1;e[c]._t=m}}wc(e,t){const i=Math.ceil(this.gc(e));return t&&this.Ps.ignoreWhitespaceIndices&&!this.Mc(i)?this.bc(i):i}Mn(e){this.zu=!0,this.Yu=e,this.fc(),this.ns.Sc(),this.ns.dr()}ul(){return this.Ku}gn(e){const t=this.Ku;if(this.xc(e),this.Ps.rightOffsetPixels!==void 0&&t!==0){const i=this.Yu*t/this.Ku;this.Yu=i}this.fc(),this.ns.Sc(),this.ns.dr()}Cc(){return this.Yu}Vl(){if(this.Gi())return null;if(this.Hu!==null)return this.Hu;const e=this.Ku,t=5*(this.ns.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),i=Math.round(t/e),r=ve(this.Ie()),o=Math.max(r.Aa(),r.Aa()-i),c=Math.max(r.bi(),r.bi()-i),h=this.Eu.xu(e,t,this.Ps.ignoreWhitespaceIndices,this.Uu,this.$u),f=this._c()+i,m=this.uc()-i,g=this.yc(),v=this.Ps.fixLeftEdge||g,_=this.Ps.fixRightEdge||g;let w=0;for(const S of h){if(!(o<=S.index&&S.index<=c))continue;let R;w<this.qu.length?(R=this.qu[w],R.coord=this.qt(S.index),R.label=this.kc(S),R.weight=S.weight):(R={needAlignCoordinate:!1,coord:this.qt(S.index),label:this.kc(S),weight:S.weight},this.qu.push(R)),this.Ku>t/2&&!g?R.needAlignCoordinate=!1:R.needAlignCoordinate=v&&S.index<=f||_&&S.index>=m,w++}return this.qu.length=w,this.Hu=this.qu,this.qu}Pc(){let e;this.zu=!0,this.gn(this.Ps.barSpacing),e=this.Ps.rightOffsetPixels!==void 0?this.Ps.rightOffsetPixels/this.ul():this.Ps.rightOffset,this.Mn(e)}Tc(e){this.zu=!0,this.Vu=e,this.fc(),this.sc()}Rc(e,t){const i=this.gc(e),r=this.ul(),o=r+t*(r/10);this.gn(o),this.Ps.rightBarStaysOnScroll||this.Mn(this.Cc()+(i-this.gc(e)))}h_(e){this.bo&&this.u_(),this.Mo===null&&this.Wu===null&&(this.Gi()||(this.Mo=e,this.Dc()))}a_(e){if(this.Wu===null)return;const t=ou(this.S_-e,0,this.S_),i=ou(this.S_-ve(this.Mo),0,this.S_);t!==0&&i!==0&&this.gn(this.Wu.ul*t/i)}l_(){this.Mo!==null&&(this.Mo=null,this.Ic())}o_(e){this.bo===null&&this.Wu===null&&(this.Gi()||(this.bo=e,this.Dc()))}__(e){if(this.bo===null)return;const t=(this.bo-e)/this.ul();this.Yu=ve(this.Wu).Cc+t,this.zu=!0,this.fc()}u_(){this.bo!==null&&(this.bo=null,this.Ic())}Vc(){this.Bc(this.Ps.rightOffset)}Bc(e,t=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(t)||t<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const i=this.Yu,r=performance.now();this.ns.vn({Ec:o=>(o-r)/t>=1,Ac:o=>{const c=(o-r)/t;return c>=1?e:i+(e-i)*c}})}kt(e,t){this.zu=!0,this.Bu=e,this.Eu.bu(e,t),this.fc()}Lc(){return this.Ou}zc(){return this.Nu}Oc(){return this.Fu}vc(){return this.Vu||0}Nc(e,t){const i=e.mu(),r=t&&this.Ps.rightOffsetPixels||0;this.xc((this.S_-r)/i),this.Yu=e.bi()-this.vc(),t&&(this.Yu=r?r/this.ul():this.Ps.rightOffset),this.fc(),this.zu=!0,this.ns.Sc(),this.ns.dr()}Fc(){const e=this._c(),t=this.uc();if(e===null||t===null)return;const i=!this.Ps.rightOffsetPixels&&this.Ps.rightOffset||0;this.Nc(new uu(e,t+i),!0)}Wc(e){const t=new uu(e.from,e.to);this.Nc(t)}rs(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.cu.formatHorzItem(e.time)}Ju(){if(!this.Ps.ignoreWhitespaceIndices)return;this.Uu.clear();const e=this.ns.tn();for(const t of e)for(const i of t.ll())this.Uu.set(i,!0);this.$u++}Hc(){return this.ju}vl(){const e=1/(window.devicePixelRatio||1),t=this.Ps.minBarSpacing;if(t>=e)return[1];const i=[1];let r=2;for(;r<=512;)t<e/r&&i.push(r),r*=2;return i}yc(){const e=this.ns.N().handleScroll,t=this.ns.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||t.axisDoubleClickReset.time||t.axisPressedMouseMove.time||t.mouseWheel||t.pinch)}_c(){return this.Bu.length===0?null:0}uc(){return this.Bu.length===0?null:this.Bu.length-1}Uc(e){return(this.S_-1-e)/this.Ku}gc(e){const t=this.Uc(e),i=this.vc()+this.Yu-t;return Math.round(1e6*i)/1e6}xc(e){const t=this.Ku;this.Ku=e,this.dc(),t!==this.Ku&&(this.zu=!0,this.$c(),this.Xu())}hc(){if(!this.zu)return;if(this.zu=!1,this.Gi())return void this.qc(gl.Iu());const e=this.vc(),t=this.S_/this.Ku,i=this.Yu+e,r=new uu(i-t+1,i);this.qc(new gl(r))}dc(){const e=ou(this.Ku,this.jc(),this.Yc());this.Ku!==e&&(this.Ku=e,this.zu=!0)}Yc(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.S_}jc(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.Bu.length!==0?this.S_/this.Bu.length:this.Ps.minBarSpacing}Xu(){if(!this.Ps.enableConflation)return void(this.ju=1);const e=1/(window.devicePixelRatio||1)*(this.Ps.conflationThresholdFactor??1);if(this.Ku>=e)return void(this.ju=1);const t=e/this.Ku,i=Math.pow(2,Math.floor(Math.log2(t)));this.ju=Math.min(i,512)}fc(){const e=this.Kc();e!==null&&this.Yu<e&&(this.Yu=e,this.zu=!0);const t=this.Zc();this.Yu>t&&(this.Yu=t,this.zu=!0)}Kc(){const e=this._c(),t=this.Vu;return e===null||t===null?null:e-t-1+(this.Ps.fixLeftEdge?this.S_/this.Ku:Math.min(2,this.Bu.length))}Zc(){return this.Ps.fixRightEdge?0:this.S_/this.Ku-Math.min(2,this.Bu.length)}Dc(){this.Wu={ul:this.ul(),Cc:this.Cc()}}Ic(){this.Wu=null}kc(e){let t=this.Au.get(e.weight);return t===void 0&&(t=new EO((i=>this.Gc(i)),this.cu),this.Au.set(e.weight,t)),t.du(e)}Gc(e){return this.cu.formatTickmark(e,this.yo)}qc(e){const t=this.Lu;this.Lu=e,H2(t.Ru(),this.Lu.Ru())||this.Ou.p(),H2(t.Du(),this.Lu.Du())||this.Nu.p(),this.$c()}$c(){this.Hu=null}tc(){this.$c(),this.Au.clear()}Gu(){this.cu.updateFormatter(this.yo)}sc(){if(!this.Ps.fixLeftEdge)return;const e=this._c();if(e===null)return;const t=this.Ie();if(t===null)return;const i=t.Aa()-e;if(i<0){const r=this.Yu-i-1;this.Mn(r)}this.dc()}nc(){this.fc(),this.dc()}Mc(e){return!this.Ps.ignoreWhitespaceIndices||this.Uu.get(e)||!1}bc(e){const t=(function*(r){const o=Math.round(r),c=o<r;let h=1;for(;;)c?(yield o+h,yield o-h):(yield o-h,yield o+h),h++})(e),i=this.uc();for(;i;){const r=t.next().value;if(this.Uu.get(r))return r;if(r<0||r>i)break}return e}Zu(e){if(e.rightOffsetPixels!==void 0){const t=e.rightOffsetPixels/(e.barSpacing||this.Ku);this.ns.Mn(t)}}}var q2,G2,$2,M0,K2;(function(n){n[n.OnTouchEnd=0]="OnTouchEnd",n[n.OnNextTap=1]="OnNextTap"})(q2||(q2={}));class CO{constructor(e,t,i){this.Xc=[],this.Jc=[],this.Qc=null,this.S_=0,this.td=null,this.sd=new $t,this.nd=new $t,this.ed=null,this.rd=e,this.Ps=t,this.cu=i,this.ko=new E9(this.Ps.layout.colorParsers),this.hd=new x9(this),this.Jh=new AO(this,t.timeScale,this.Ps.localization,i),this.Ct=new O9(this,t.crosshair),this.ad=new mO(t.crosshair),t.addDefaultPane&&(this.ld(0),this.Xc[0].A_(2)),this.od=this._d(0),this.ud=this._d(1)}Ca(){this.dd(Ai.yn())}dr(){this.dd(Ai.Cn())}Ua(){this.dd(new Ai(1))}ya(e){const t=this.fd(e);this.dd(t)}pd(){return this.td}vd(e){if(this.td?.hu===e?.hu&&this.td?.au?.te===e?.au?.te)return;const t=this.td;this.td=e,t!==null&&this.ya(t.hu),e!==null&&e.hu!==t?.hu&&this.ya(e.hu)}N(){return this.Ps}cr(e){bn(this.Ps,e),this.Xc.forEach((t=>t.I_(e))),e.timeScale!==void 0&&this.Jh.cr(e.timeScale),e.localization!==void 0&&this.Jh.Qu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.sd.p(),this.od=this._d(0),this.ud=this._d(1),this.Ca()}md(e,t,i=0){const r=this.Xc[i];if(r===void 0)return;if(e==="left")return bn(this.Ps,{leftPriceScale:t}),r.I_({leftPriceScale:t}),this.sd.p(),void this.Ca();if(e==="right")return bn(this.Ps,{rightPriceScale:t}),r.I_({rightPriceScale:t}),this.sd.p(),void this.Ca();const o=this.wd(e,i);o!==null&&(o.Ft.cr(t),this.sd.p())}wd(e,t){const i=this.Xc[t];if(i===void 0)return null;const r=i.V_(e);return r!==null?{Gs:i,Ft:r}:null}Et(){return this.Jh}Xs(){return this.Xc}gd(){return this.Ct}Md(){return this.nd}bd(e,t){e.No(t),this.Sc()}L_(e){this.S_=e,this.Jh.L_(this.S_),this.Xc.forEach((t=>t.L_(e))),this.Sc()}Sd(e){this.Xc.length!==1&&(Ri(e>=0&&e<this.Xc.length,"Invalid pane index"),this.Xc.splice(e,1),this.Ca())}xd(e,t){if(this.Xc.length<2)return;Ri(e>=0&&e<this.Xc.length,"Invalid pane index");const i=this.Xc[e],r=this.Xc.reduce(((v,_)=>v+_.E_()),0),o=this.Xc.reduce(((v,_)=>v+_.$t()),0),c=o-30*(this.Xc.length-1);t=Math.min(c,Math.max(30,t));const h=r/o,f=i.$t();i.A_(t*h);let m=t-f,g=this.Xc.length-1;for(const v of this.Xc)if(v!==i){const _=Math.min(c,Math.max(30,v.$t()-m/g));m-=v.$t()-_,g-=1;const w=_*h;v.A_(w)}this.Ca()}Cd(e,t){Ri(e>=0&&e<this.Xc.length&&t>=0&&t<this.Xc.length,"Invalid pane index");const i=this.Xc[e],r=this.Xc[t];this.Xc[e]=r,this.Xc[t]=i,this.Ca()}yd(e,t){if(Ri(e>=0&&e<this.Xc.length&&t>=0&&t<this.Xc.length,"Invalid pane index"),e===t)return;const[i]=this.Xc.splice(e,1);this.Xc.splice(t,0,i),this.Ca()}j_(e,t,i){e.j_(t,i)}Y_(e,t,i){e.Y_(t,i),this.ka(),this.dd(this.kd(e,2))}K_(e,t){e.K_(t),this.dd(this.kd(e,2))}Z_(e,t,i){t.Vo()||e.Z_(t,i)}G_(e,t,i){t.Vo()||(e.G_(t,i),this.ka(),this.dd(this.kd(e,2)))}X_(e,t){t.Vo()||(e.X_(t),this.dd(this.kd(e,2)))}Q_(e,t){e.Q_(t),this.dd(this.kd(e,2))}Pd(e){this.Jh.h_(e)}Td(e,t){const i=this.Et();if(i.Gi()||t===0)return;const r=i.ss();e=Math.max(1,Math.min(e,r)),i.Rc(e,t),this.Sc()}Rd(e){this.Dd(0),this.Id(e),this.Vd()}Bd(e){this.Jh.a_(e),this.Sc()}Ed(){this.Jh.l_(),this.dr()}Dd(e){this.Jh.o_(e)}Id(e){this.Jh.__(e),this.Sc()}Vd(){this.Jh.u_(),this.dr()}tn(){return this.Jc}Us(){return this.Qc===null&&(this.Qc=this.Jc.filter((e=>e.It()))),this.Qc}xa(){this.Qc=null}Ad(e,t,i,r,o){this.Ct.Bs(e,t);let c=NaN,h=this.Jh.wc(e,!0);const f=this.Jh.Ie();f!==null&&(h=Math.min(Math.max(f.Aa(),h),f.bi())),h=this.Ct.Hs(h);const m=r.Rs(),g=m.Lt();if(g!==null&&(c=m.Ds(t,g)),c=this.ad.bl(c,h,r),this.Ct.zs(h,c,r),this.Ua(),!o){const v=vT(r,e,t);this.vd(v&&{hu:v.hu,au:v.au,ou:v.ou||null}),this.nd.p(this.Ct.Bt(),{x:e,y:t},i)}}Ld(e,t,i){const r=i.Rs(),o=r.Lt(),c=r.Nt(e,ve(o)),h=this.Jh.ec(t,!0),f=this.Jh.qt(ve(h));this.Ad(f,c,null,i,!0)}zd(e){this.gd().Ns(),this.Ua(),e||this.nd.p(null,null,null)}ka(){const e=this.Ct.Gs();if(e!==null){const t=this.Ct.As(),i=this.Ct.Ls();this.Ad(t,i,null,e)}this.Ct.Ws()}Od(e,t,i){const r=this.Jh.Is(0);t!==void 0&&i!==void 0&&this.Jh.kt(t,i);const o=this.Jh.Is(0),c=this.Jh.vc(),h=this.Jh.Ie();if(h!==null&&r!==null&&o!==null){const f=h.Ee(c),m=this.cu.key(r)>this.cu.key(o),g=e!==null&&e>c&&!m,v=this.Jh.N().allowShiftVisibleRangeOnWhitespaceReplacement,_=f&&(i!==void 0||v)&&this.Jh.N().shiftVisibleRangeOnNewBar;if(g&&!_){const w=e-c;this.Jh.Mn(this.Jh.Cc()-w)}}this.Jh.Tc(e)}Ra(e){e!==null&&e.iu()}Kn(e){if((function(i){return i instanceof F2})(e))return e;const t=this.Xc.find((i=>i.Dt().includes(e)));return t===void 0?null:t}Sc(){this.Xc.forEach((e=>e.iu())),this.ka()}m(){this.Xc.forEach((e=>e.m())),this.Xc.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Nd(){return this.hd}Jn(){return this.hd.N()}B_(){return this.sd}Fd(e,t){const i=this.ld(t);this.Wd(e,i),this.Jc.push(e),this.xa(),this.Jc.length===1?this.Ca():this.dr()}Hd(e){const t=this.Kn(e),i=this.Jc.indexOf(e);Ri(i!==-1,"Series not found");const r=ve(t);this.Jc.splice(i,1),r.n_(e),e.m&&e.m(),this.xa(),this.Jh.Ju(),this.Ud(r)}Sa(e,t){const i=ve(this.Kn(e));i.n_(e,!0),i.i_(e,t,!0)}Fc(){const e=Ai.Cn();e.cn(),this.dd(e)}$d(e){const t=Ai.Cn();t.pn(e),this.dd(t)}wn(){const e=Ai.Cn();e.wn(),this.dd(e)}gn(e){const t=Ai.Cn();t.gn(e),this.dd(t)}Mn(e){const t=Ai.Cn();t.Mn(e),this.dd(t)}vn(e){const t=Ai.Cn();t.vn(e),this.dd(t)}dn(){const e=Ai.Cn();e.dn(),this.dd(e)}qd(){return this.Ps.rightPriceScale.visible?"right":"left"}jd(e,t){if(Ri(t>=0,"Index should be greater or equal to 0"),t===this.Yd(e))return;const i=ve(this.Kn(e));i.n_(e);const r=this.ld(t);this.Wd(e,r),i.Sl().length===0&&this.Ud(i),this.Ca()}Kd(){return this.ud}$(){return this.od}Ut(e){const t=this.ud,i=this.od;if(t===i)return t;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.ed===null||this.ed.eh!==i||this.ed.rh!==t)this.ed={eh:i,rh:t,Zd:new Map};else{const o=this.ed.Zd.get(e);if(o!==void 0)return o}const r=this.ko.tt(i,t,e/100);return this.ed.Zd.set(e,r),r}Gd(e){return this.Xc.indexOf(e)}Xi(){return this.ko}Xd(){return this.Jd()}Jd(e){const t=new F2(this.Jh,this);this.Xc.push(t);const i=e??this.Xc.length-1,r=Ai.yn();return r.hn(i,{an:0,ln:!0}),this.dd(r),t}ld(e){return Ri(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.Xc.length,e))<this.Xc.length?this.Xc[e]:this.Jd(e)}Yd(e){return this.Xc.findIndex((t=>t.F_().includes(e)))}kd(e,t){const i=new Ai(t);if(e!==null){const r=this.Xc.indexOf(e);i.hn(r,{an:t})}return i}fd(e,t){return t===void 0&&(t=2),this.kd(this.Kn(e),t)}dd(e){this.rd&&this.rd(e),this.Xc.forEach((t=>t.eu().pr().kt()))}Wd(e,t){const i=e.N().priceScaleId,r=i!==void 0?i:this.qd();t.i_(e,r),fm(r)||e.cr(e.N())}_d(e){const t=this.Ps.layout;return t.background.type==="gradient"?e===0?t.background.topColor:t.background.bottomColor:t.background.color}Ud(e){!e.N_()&&e.Sl().length===0&&this.Xc.length>1&&this.Xc.splice(this.Gd(e),1)}}function bT(n){if(n>=1)return 0;let e=0;for(;e<8;e++){const t=Math.round(n);if(Math.abs(t-n)<1e-8)return e;n*=10}return e}function k0(n){return!Cl(n)&&!Ku(n)}function _T(n){return Cl(n)}(function(n){n[n.Disabled=0]="Disabled",n[n.Continuous=1]="Continuous",n[n.OnDataUpdate=2]="OnDataUpdate"})(G2||(G2={})),(function(n){n[n.LastBar=0]="LastBar",n[n.LastVisible=1]="LastVisible"})($2||($2={})),(function(n){n.Solid="solid",n.VerticalGradient="gradient"})(M0||(M0={})),(function(n){n[n.Year=0]="Year",n[n.Month=1]="Month",n[n.DayOfMonth=2]="DayOfMonth",n[n.Time=3]="Time",n[n.TimeWithSeconds=4]="TimeWithSeconds"})(K2||(K2={}));const Y2=n=>n.getUTCFullYear();function RO(n,e,t){return e.replace(/yyyy/g,(i=>er(Y2(i),4))(n)).replace(/yy/g,(i=>er(Y2(i)%100,2))(n)).replace(/MMMM/g,((i,r)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(r,{month:"long"}))(n,t)).replace(/MMM/g,((i,r)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(r,{month:"short"}))(n,t)).replace(/MM/g,(i=>er((r=>r.getUTCMonth()+1)(i),2))(n)).replace(/dd/g,(i=>er((r=>r.getUTCDate())(i),2))(n))}class wT{constructor(e="yyyy-MM-dd",t="default"){this.Qd=e,this.tf=t}du(e){return RO(e,this.Qd,this.tf)}}class NO{constructor(e){this.if=e||"%h:%m:%s"}du(e){return this.if.replace("%h",er(e.getUTCHours(),2)).replace("%m",er(e.getUTCMinutes(),2)).replace("%s",er(e.getUTCSeconds(),2))}}const IO={sf:"yyyy-MM-dd",nf:"%h:%m:%s",ef:" ",rf:"default"};class MO{constructor(e={}){const t={...IO,...e};this.hf=new wT(t.sf,t.rf),this.af=new NO(t.nf),this.lf=t.ef}du(e){return`${this.hf.du(e)}${this.lf}${this.af.du(e)}`}}function Nd(n){return 60*n*60*1e3}function Fg(n){return 60*n*1e3}const Id=[{_f:(W2=1,1e3*W2),uf:10},{_f:Fg(1),uf:20},{_f:Fg(5),uf:21},{_f:Fg(30),uf:22},{_f:Nd(1),uf:30},{_f:Nd(3),uf:31},{_f:Nd(6),uf:32},{_f:Nd(12),uf:33}];var W2;function Q2(n,e){if(n.getUTCFullYear()!==e.getUTCFullYear())return 70;if(n.getUTCMonth()!==e.getUTCMonth())return 60;if(n.getUTCDate()!==e.getUTCDate())return 50;for(let t=Id.length-1;t>=0;--t)if(Math.floor(e.getTime()/Id[t]._f)!==Math.floor(n.getTime()/Id[t]._f))return Id[t].uf;return 0}function Hg(n){let e=n;if(Ku(n)&&(e=e1(n)),!k0(e))throw new Error("time must be of type BusinessDay");const t=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{cf:Math.round(t.getTime()/1e3),df:e}}function X2(n){if(!_T(n))throw new Error("time must be of type isUTCTimestamp");return{cf:n}}function e1(n){const e=new Date(n);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${n}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function J2(n){Ku(n.time)&&(n.time=e1(n.time))}class Z2{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?(function(t){t.forEach(J2)})(e):J2(e)}createConverterToInternalObj(e){return ve((function(t){return t.length===0?null:k0(t[0].time)||Ku(t[0].time)?Hg:X2})(e))}key(e){return typeof e=="object"&&"cf"in e?e.cf:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const t=e;return t.df===void 0?new Date(1e3*t.cf).getTime():new Date(Date.UTC(t.df.year,t.df.month-1,t.df.day)).getTime()}convertHorzItemToInternal(e){return _T(t=e)?X2(t):k0(t)?Hg(t):Hg(e1(t));var t}updateFormatter(e){if(!this.Ps)return;const t=e.dateFormat;this.Ps.timeScale.timeVisible?this.ff=new MO({sf:t,nf:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",ef:"   ",rf:e.locale}):this.ff=new wT(t,e.locale)}formatHorzItem(e){const t=e;return this.ff.du(new Date(1e3*t.cf))}formatTickmark(e,t){const i=(function(o,c,h){switch(o){case 0:case 10:return c?h?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return c?3:2;case 50:return 2;case 60:return 1;case 70:return 0}})(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),r=this.Ps.timeScale;if(r.tickMarkFormatter!==void 0){const o=r.tickMarkFormatter(e.originalTime,i,t.locale);if(o!==null)return o}return(function(o,c,h){const f={};switch(c){case 0:f.year="numeric";break;case 1:f.month="short";break;case 2:f.day="numeric";break;case 3:f.hour12=!1,f.hour="2-digit",f.minute="2-digit";break;case 4:f.hour12=!1,f.hour="2-digit",f.minute="2-digit",f.second="2-digit"}const m=o.df===void 0?new Date(1e3*o.cf):new Date(Date.UTC(o.df.year,o.df.month-1,o.df.day));return new Date(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate(),m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()).toLocaleString(h,f)})(e.time,i,t.locale)}maxTickMarkWeight(e){let t=e.reduce(TO,e[0]).weight;return t>30&&t<50&&(t=30),t}fillWeightsForPoints(e,t){(function(i,r=0){if(i.length===0)return;let o=r===0?null:i[r-1].time.cf,c=o!==null?new Date(1e3*o):null,h=0;for(let f=r;f<i.length;++f){const m=i[f],g=new Date(1e3*m.time.cf);c!==null&&(m.timeWeight=Q2(g,c)),h+=m.time.cf-(o||m.time.cf),o=m.time.cf,c=g}if(r===0&&i.length>1){const f=Math.ceil(h/(i.length-1)),m=new Date(1e3*(i[0].time.cf-f));i[0].timeWeight=Q2(new Date(1e3*i[0].time.cf),m)}})(e,t)}static pf(e){return bn({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Nl=typeof window<"u";function ex(){return!!Nl&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function qg(){return!!Nl&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function j0(n){return n+n%2}function kO(n){Nl&&window.chrome!==void 0&&n.addEventListener("mousedown",(e=>{if(e.button===1)return e.preventDefault(),!1}))}class gm{constructor(e,t,i){this.vf=0,this.mf=null,this.wf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.gf=0,this.Mf=null,this.bf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.Sf=null,this.xf=!1,this.Cf=null,this.yf=null,this.kf=!1,this.Pf=!1,this.Tf=!1,this.Rf=null,this.Df=null,this.If=null,this.Vf=null,this.Bf=null,this.Ef=null,this.Af=null,this.Lf=0,this.zf=!1,this.Of=!1,this.Nf=!1,this.Ff=0,this.Wf=null,this.Hf=!qg(),this.Uf=r=>{this.$f(r)},this.qf=r=>{if(this.jf(r)){const o=this.Yf(r);if(++this.gf,this.Mf&&this.gf>1){const{Kf:c}=this.Zf(bs(r),this.bf);c<30&&!this.Tf&&this.Gf(o,this.Jf.Xf),this.Qf()}}else{const o=this.Yf(r);if(++this.vf,this.mf&&this.vf>1){const{Kf:c}=this.Zf(bs(r),this.wf);c<5&&!this.Pf&&this.tp(o,this.Jf.ip),this.sp()}}},this.np=e,this.Jf=t,this.Ps=i,this.ep()}m(){this.Rf!==null&&(this.Rf(),this.Rf=null),this.Df!==null&&(this.Df(),this.Df=null),this.Vf!==null&&(this.Vf(),this.Vf=null),this.Bf!==null&&(this.Bf(),this.Bf=null),this.Ef!==null&&(this.Ef(),this.Ef=null),this.If!==null&&(this.If(),this.If=null),this.rp(),this.sp()}hp(e){this.Vf&&this.Vf();const t=this.ap.bind(this);if(this.Vf=()=>{this.np.removeEventListener("mousemove",t)},this.np.addEventListener("mousemove",t),this.jf(e))return;const i=this.Yf(e);this.tp(i,this.Jf.lp),this.Hf=!0}sp(){this.mf!==null&&clearTimeout(this.mf),this.vf=0,this.mf=null,this.wf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Qf(){this.Mf!==null&&clearTimeout(this.Mf),this.gf=0,this.Mf=null,this.bf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}ap(e){if(this.Nf||this.yf!==null||this.jf(e))return;const t=this.Yf(e);this.tp(t,this.Jf.op),this.Hf=!0}_p(e){const t=Gg(e.changedTouches,ve(this.Wf));if(t===null||(this.Ff=Md(e),this.Af!==null)||this.Of)return;this.zf=!0;const i=this.Zf(bs(t),ve(this.yf)),{up:r,cp:o,Kf:c}=i;if(this.kf||!(c<5)){if(!this.kf){const h=.5*r,f=o>=h&&!this.Ps.dp(),m=h>o&&!this.Ps.fp();f||m||(this.Of=!0),this.kf=!0,this.Tf=!0,this.rp(),this.Qf()}if(!this.Of){const h=this.Yf(e,t);this.Gf(h,this.Jf.pp),Zo(e)}}}vp(e){if(e.button!==0)return;const t=this.Zf(bs(e),ve(this.Cf)),{Kf:i}=t;if(i>=5&&(this.Pf=!0,this.sp()),this.Pf){const r=this.Yf(e);this.tp(r,this.Jf.mp)}}Zf(e,t){const i=Math.abs(t._t-e._t),r=Math.abs(t.ut-e.ut);return{up:i,cp:r,Kf:i+r}}wp(e){let t=Gg(e.changedTouches,ve(this.Wf));if(t===null&&e.touches.length===0&&(t=e.changedTouches[0]),t===null)return;this.Wf=null,this.Ff=Md(e),this.rp(),this.yf=null,this.Ef&&(this.Ef(),this.Ef=null);const i=this.Yf(e,t);if(this.Gf(i,this.Jf.gp),++this.gf,this.Mf&&this.gf>1){const{Kf:r}=this.Zf(bs(t),this.bf);r<30&&!this.Tf&&this.Gf(i,this.Jf.Xf),this.Qf()}else this.Tf||(this.Gf(i,this.Jf.Mp),this.Jf.Mp&&Zo(e));this.gf===0&&Zo(e),e.touches.length===0&&this.xf&&(this.xf=!1,Zo(e))}$f(e){if(e.button!==0)return;const t=this.Yf(e);if(this.Cf=null,this.Nf=!1,this.Bf&&(this.Bf(),this.Bf=null),ex()&&this.np.ownerDocument.documentElement.removeEventListener("mouseleave",this.Uf),!this.jf(e))if(this.tp(t,this.Jf.bp),++this.vf,this.mf&&this.vf>1){const{Kf:i}=this.Zf(bs(e),this.wf);i<5&&!this.Pf&&this.tp(t,this.Jf.ip),this.sp()}else this.Pf||this.tp(t,this.Jf.Sp)}rp(){this.Sf!==null&&(clearTimeout(this.Sf),this.Sf=null)}xp(e){if(this.Wf!==null)return;const t=e.changedTouches[0];this.Wf=t.identifier,this.Ff=Md(e);const i=this.np.ownerDocument.documentElement;this.Tf=!1,this.kf=!1,this.Of=!1,this.yf=bs(t),this.Ef&&(this.Ef(),this.Ef=null);{const o=this._p.bind(this),c=this.wp.bind(this);this.Ef=()=>{i.removeEventListener("touchmove",o),i.removeEventListener("touchend",c)},i.addEventListener("touchmove",o,{passive:!1}),i.addEventListener("touchend",c,{passive:!1}),this.rp(),this.Sf=setTimeout(this.Cp.bind(this,e),240)}const r=this.Yf(e,t);this.Gf(r,this.Jf.yp),this.Mf||(this.gf=0,this.Mf=setTimeout(this.Qf.bind(this),500),this.bf=bs(t))}kp(e){if(e.button!==0)return;const t=this.np.ownerDocument.documentElement;ex()&&t.addEventListener("mouseleave",this.Uf),this.Pf=!1,this.Cf=bs(e),this.Bf&&(this.Bf(),this.Bf=null);{const r=this.vp.bind(this),o=this.$f.bind(this);this.Bf=()=>{t.removeEventListener("mousemove",r),t.removeEventListener("mouseup",o)},t.addEventListener("mousemove",r),t.addEventListener("mouseup",o)}if(this.Nf=!0,this.jf(e))return;const i=this.Yf(e);this.tp(i,this.Jf.Pp),this.mf||(this.vf=0,this.mf=setTimeout(this.sp.bind(this),500),this.wf=bs(e))}ep(){this.np.addEventListener("mouseenter",this.hp.bind(this)),this.np.addEventListener("touchcancel",this.rp.bind(this));{const e=this.np.ownerDocument,t=i=>{this.Jf.Tp&&(i.composed&&this.np.contains(i.composedPath()[0])||i.target&&this.np.contains(i.target)||this.Jf.Tp())};this.Df=()=>{e.removeEventListener("touchstart",t)},this.Rf=()=>{e.removeEventListener("mousedown",t)},e.addEventListener("mousedown",t),e.addEventListener("touchstart",t,{passive:!0})}qg()&&(this.If=()=>{this.np.removeEventListener("dblclick",this.qf)},this.np.addEventListener("dblclick",this.qf)),this.np.addEventListener("mouseleave",this.Rp.bind(this)),this.np.addEventListener("touchstart",this.xp.bind(this),{passive:!0}),kO(this.np),this.np.addEventListener("mousedown",this.kp.bind(this)),this.Dp(),this.np.addEventListener("touchmove",(()=>{}),{passive:!1})}Dp(){this.Jf.Ip===void 0&&this.Jf.Vp===void 0&&this.Jf.Bp===void 0||(this.np.addEventListener("touchstart",(e=>this.Ep(e.touches)),{passive:!0}),this.np.addEventListener("touchmove",(e=>{if(e.touches.length===2&&this.Af!==null&&this.Jf.Vp!==void 0){const t=tx(e.touches[0],e.touches[1])/this.Lf;this.Jf.Vp(this.Af,t),Zo(e)}}),{passive:!1}),this.np.addEventListener("touchend",(e=>{this.Ep(e.touches)})))}Ep(e){e.length===1&&(this.zf=!1),e.length!==2||this.zf||this.xf?this.Ap():this.Lp(e)}Lp(e){const t=this.np.getBoundingClientRect()||{left:0,top:0};this.Af={_t:(e[0].clientX-t.left+(e[1].clientX-t.left))/2,ut:(e[0].clientY-t.top+(e[1].clientY-t.top))/2},this.Lf=tx(e[0],e[1]),this.Jf.Ip!==void 0&&this.Jf.Ip(),this.rp()}Ap(){this.Af!==null&&(this.Af=null,this.Jf.Bp!==void 0&&this.Jf.Bp())}Rp(e){if(this.Vf&&this.Vf(),this.jf(e)||!this.Hf)return;const t=this.Yf(e);this.tp(t,this.Jf.zp),this.Hf=!qg()}Cp(e){const t=Gg(e.touches,ve(this.Wf));if(t===null)return;const i=this.Yf(e,t);this.Gf(i,this.Jf.Op),this.Tf=!0,this.xf=!0}jf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Md(e)<this.Ff+500}Gf(e,t){t&&t.call(this.Jf,e)}tp(e,t){t&&t.call(this.Jf,e)}Yf(e,t){const i=t||e,r=this.np.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-r.left,localY:i.clientY-r.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Np:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Fp:e.type,Wp:i.target,_u:e.view,Hp:()=>{e.type!=="touchstart"&&Zo(e)}}}}function tx(n,e){const t=n.clientX-e.clientX,i=n.clientY-e.clientY;return Math.sqrt(t*t+i*i)}function Zo(n){n.cancelable&&n.preventDefault()}function bs(n){return{_t:n.pageX,ut:n.pageY}}function Md(n){return n.timeStamp||performance.now()}function Gg(n,e){for(let t=0;t<n.length;++t)if(n[t].identifier===e)return n[t];return null}class jO{constructor(e,t,i){this.Up=null,this.$p=null,this.qp=!0,this.jp=null,this.Yp=e,this.Kp=e.Zp()[t],this.Gp=e.Zp()[i],this.Xp=document.createElement("tr"),this.Xp.style.height="1px",this.Jp=document.createElement("td"),this.Jp.style.position="relative",this.Jp.style.padding="0",this.Jp.style.margin="0",this.Jp.setAttribute("colspan","3"),this.Qp(),this.Xp.appendChild(this.Jp),this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(this.Up=null,this.$p=null)}m(){this.$p!==null&&this.$p.m()}iv(){return this.Xp}sv(){return wt({width:this.Kp.sv().width,height:1})}nv(){return wt({width:this.Kp.nv().width,height:1*window.devicePixelRatio})}ev(e,t,i){const r=this.nv();e.fillStyle=this.Yp.N().layout.panes.separatorColor,e.fillRect(t,i,r.width,r.height)}kt(){this.Qp(),this.Yp.N().layout.panes.enableResize!==this.qp&&(this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(this.Up!==null&&(this.Jp.removeChild(this.Up.rv),this.Jp.removeChild(this.Up.hv),this.Up=null),this.$p!==null&&(this.$p.m(),this.$p=null)))}tv(){const e=document.createElement("div"),t=e.style;t.position="fixed",t.display="none",t.zIndex="49",t.top="0",t.left="0",t.width="100%",t.height="100%",t.cursor="row-resize",this.Jp.appendChild(e);const i=document.createElement("div"),r=i.style;r.position="absolute",r.zIndex="50",r.top="-4px",r.height="9px",r.width="100%",r.backgroundColor="",r.cursor="row-resize",this.Jp.appendChild(i);const o={lp:this.av.bind(this),zp:this.lv.bind(this),Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this)};this.$p=new gm(i,o,{dp:()=>!1,fp:()=>!0}),this.Up={hv:i,rv:e}}Qp(){this.Jp.style.background=this.Yp.N().layout.panes.separatorColor}av(e){this.Up!==null&&(this.Up.hv.style.backgroundColor=this.Yp.N().layout.panes.separatorHoverColor)}lv(e){this.Up!==null&&this.jp===null&&(this.Up.hv.style.backgroundColor="")}ov(e){if(this.Up===null)return;const t=this.Kp.cv().E_()+this.Gp.cv().E_(),i=t/(this.Kp.sv().height+this.Gp.sv().height),r=30*i;t<=2*r||(this.jp={dv:e.pageY,fv:this.Kp.cv().E_(),pv:t-r,vv:t,mv:i,wv:r},this.Up.rv.style.display="block")}_v(e){const t=this.jp;if(t===null)return;const i=(e.pageY-t.dv)*t.mv,r=ou(t.fv+i,t.wv,t.pv);this.Kp.cv().A_(r),this.Gp.cv().A_(t.vv-r),this.Yp.Qt().Ca()}uv(e){this.jp!==null&&this.Up!==null&&(this.jp=null,this.Up.rv.style.display="none")}}function $g(n,e){return n.gv-e.gv}function Kg(n,e,t){const i=(n.gv-e.gv)/(n.wt-e.wt);return Math.sign(i)*Math.min(Math.abs(i),t)}class DO{constructor(e,t,i,r){this.Mv=null,this.bv=null,this.Sv=null,this.xv=null,this.Cv=null,this.yv=0,this.kv=0,this.Pv=e,this.Tv=t,this.Rv=i,this.kn=r}Dv(e,t){if(this.Mv!==null){if(this.Mv.wt===t)return void(this.Mv.gv=e);if(Math.abs(this.Mv.gv-e)<this.kn)return}this.xv=this.Sv,this.Sv=this.bv,this.bv=this.Mv,this.Mv={wt:t,gv:e}}fe(e,t){if(this.Mv===null||this.bv===null||t-this.Mv.wt>50)return;let i=0;const r=Kg(this.Mv,this.bv,this.Tv),o=$g(this.Mv,this.bv),c=[r],h=[o];if(i+=o,this.Sv!==null){const m=Kg(this.bv,this.Sv,this.Tv);if(Math.sign(m)===Math.sign(r)){const g=$g(this.bv,this.Sv);if(c.push(m),h.push(g),i+=g,this.xv!==null){const v=Kg(this.Sv,this.xv,this.Tv);if(Math.sign(v)===Math.sign(r)){const _=$g(this.Sv,this.xv);c.push(v),h.push(_),i+=_}}}}let f=0;for(let m=0;m<c.length;++m)f+=h[m]/i*c[m];Math.abs(f)<this.Pv||(this.Cv={gv:e,wt:t},this.kv=f,this.yv=(function(m,g){const v=Math.log(g);return Math.log(1*v/-m)/v})(Math.abs(f),this.Rv))}Ac(e){const t=ve(this.Cv),i=e-t.wt;return t.gv+this.kv*(Math.pow(this.Rv,i)-1)/Math.log(this.Rv)}Ec(e){return this.Cv===null||this.Iv(e)===this.yv}Iv(e){const t=e-ve(this.Cv).wt;return Math.min(t,this.yv)}}class OO{constructor(e,t){this.Vv=void 0,this.Bv=void 0,this.Ev=void 0,this.ws=!1,this.Av=e,this.Lv=t,this.zv()}kt(){this.zv()}Ov(){this.Vv&&this.Av.removeChild(this.Vv),this.Bv&&this.Av.removeChild(this.Bv),this.Vv=void 0,this.Bv=void 0}Nv(){return this.ws!==this.Fv()||this.Ev!==this.Wv()}Wv(){return this.Lv.Qt().Xi().J(this.Lv.N().layout.textColor)>160?"dark":"light"}Fv(){return this.Lv.N().layout.attributionLogo}Hv(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}zv(){this.Nv()&&(this.Ov(),this.ws=this.Fv(),this.ws&&(this.Ev=this.Wv(),this.Bv=document.createElement("style"),this.Bv.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Vv=document.createElement("a"),this.Vv.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Hv()}`,this.Vv.title="Charting by TradingView",this.Vv.id="tv-attr-logo",this.Vv.target="_blank",this.Vv.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Vv.toggleAttribute("data-dark",this.Ev==="dark"),this.Av.appendChild(this.Bv),this.Av.appendChild(this.Vv)))}}function so(n,e){const t=ve(n.ownerDocument).createElement("canvas");n.appendChild(t);const i=v9(t,{options:{allowResizeObserver:!0},transform:(r,o)=>({width:Math.max(r.width,o.width),height:Math.max(r.height,o.height)})});return i.resizeCanvasElement(e),i}function ro(n){n.width=1,n.height=1,n.getContext("2d")?.clearRect(0,0,1,1)}function D0(n,e,t,i){n.Uh&&n.Uh(e,t,i)}function Kd(n,e,t,i){n.nt(e,t,i)}function O0(n,e,t,i){const r=n(t,i);for(const o of r){const c=o.Tt(i);c!==null&&e(c)}}function Yg(n,e){return t=>(function(i){return i.Ft!==void 0})(t)?(t.Ft()?.ol()??"")!==e?[]:t.Ya?.(n)??[]:[]}function ix(n,e,t,i){if(!n.length)return;let r=0;const o=n[0].$t(i,!0);let c=e===1?t/2-(n[0].Hi()-o/2):n[0].Hi()-o/2-t/2;c=Math.max(0,c);for(let h=1;h<n.length;h++){const f=n[h],m=n[h-1],g=m.$t(i,!1),v=f.Hi(),_=m.Hi();if(e===1?v>_-g:v<_+g){const w=_-g*e;f.Ui(w);const S=w-e*g/2;if((e===1?S<0:S>t)&&c>0){const R=e===1?-1-S:S-t,O=Math.min(R,c);for(let M=r;M<n.length;M++)n[M].Ui(n[M].Hi()+e*O);c-=O}}else r=h,c=e===1?_-g-v:v-(_+g)}}class nx{constructor(e,t,i,r){this.Ki=null,this.Uv=null,this.$v=!1,this.qv=new Cf(200),this.jv=null,this.Yv=0,this.Kv=!1,this.Zv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.Xv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.yt=e,this.Ps=t,this.Co=t.layout,this.hd=i,this.Jv=r==="left",this.Qv=Yg("normal",r),this.tm=Yg("top",r),this.im=Yg("bottom",r),this.Jp=document.createElement("div"),this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.Jp.style.width="25px",this.Jp.style.left="0",this.Jp.style.position="relative",this.sm=so(this.Jp,wt({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const o=this.sm.canvasElement;o.style.position="absolute",o.style.zIndex="1",o.style.left="0",o.style.top="0",this.nm=so(this.Jp,wt({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const c=this.nm.canvasElement;c.style.position="absolute",c.style.zIndex="2",c.style.left="0",c.style.top="0";const h={Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),Tp:this.rm.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this),ip:this.hm.bind(this),Xf:this.hm.bind(this),lp:this.am.bind(this),zp:this.lv.bind(this)};this.$p=new gm(this.nm.canvasElement,h,{dp:()=>!this.Ps.handleScroll.vertTouchDrag,fp:()=>!0})}m(){this.$p.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),ro(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),ro(this.sm.canvasElement),this.sm.dispose(),this.Ki!==null&&this.Ki.r_().u(this),this.Ki=null}iv(){return this.Jp}k(){return this.Co.fontSize}lm(){const e=this.hd.N();return this.jv!==e.P&&(this.qv.On(),this.jv=e.P),e}om(){if(this.Ki===null)return 0;let e=0;const t=this.lm(),i=ve(this.sm.canvasElement.getContext("2d",{colorSpace:this.yt.Gv().N().layout.colorSpace}));i.save();const r=this.Ki.Vl();i.font=this._m(),r.length>0&&(e=Math.max(this.qv.Ii(i,r[0].Jl),this.qv.Ii(i,r[r.length-1].Jl)));const o=this.um();for(let m=o.length;m--;){const g=this.qv.Ii(i,o[m].ri());g>e&&(e=g)}const c=this.Ki.Lt();if(c!==null&&this.Uv!==null&&(h=this.Ps.crosshair).mode!==2&&h.horzLine.visible&&h.horzLine.labelVisible){const m=this.Ki.Ds(1,c),g=this.Ki.Ds(this.Uv.height-2,c);e=Math.max(e,this.qv.Ii(i,this.Ki.Ji(Math.floor(Math.min(m,g))+.11111111111111,c)),this.qv.Ii(i,this.Ki.Ji(Math.ceil(Math.max(m,g))-.11111111111111,c)))}var h;i.restore();const f=e||34;return j0(Math.ceil(t.S+t.C+t.V+t.B+5+f))}dm(e){this.Uv!==null&&Xa(this.Uv,e)||(this.Uv=e,this.Kv=!0,this.sm.resizeCanvasElement(e),this.nm.resizeCanvasElement(e),this.Kv=!1,this.Jp.style.width=`${e.width}px`,this.Jp.style.height=`${e.height}px`)}fm(){return ve(this.Uv).width}cs(e){this.Ki!==e&&(this.Ki!==null&&this.Ki.r_().u(this),this.Ki=e,e.r_().i(this.do.bind(this),this))}Ft(){return this.Ki}On(){const e=this.yt.cv();this.yt.Gv().Qt().Q_(e,ve(this.Ft()))}pm(e){if(this.Uv===null)return;const t={colorSpace:this.yt.Gv().N().layout.colorSpace};if(e!==1){this.vm(),this.sm.applySuggestedBitmapSize();const r=no(this.sm,t);r!==null&&(r.useBitmapCoordinateSpace((o=>{this.wm(o),this.gm(o)})),this.yt.Mm(r,this.im),this.bm(r),this.yt.Mm(r,this.Qv),this.Sm(r))}this.nm.applySuggestedBitmapSize();const i=no(this.nm,t);i!==null&&(i.useBitmapCoordinateSpace((({context:r,bitmapSize:o})=>{r.clearRect(0,0,o.width,o.height)})),this.xm(i),this.yt.Mm(i,this.tm))}nv(){return this.sm.bitmapSize}ev(e,t,i,r){const o=this.nv();if(o.width>0&&o.height>0&&(e.drawImage(this.sm.canvasElement,t,i),r)){const c=this.nm.canvasElement;e.drawImage(c,t,i)}}kt(){this.Ki?.Vl()}ov(e){if(this.Ki===null||this.Ki.Gi()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.yt.Gv().Qt(),i=this.yt.cv();this.$v=!0,t.j_(i,this.Ki,e.localY)}_v(e){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.yt.Gv().Qt(),i=this.yt.cv(),r=this.Ki;t.Y_(i,r,e.localY)}rm(){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.yt.Gv().Qt(),t=this.yt.cv(),i=this.Ki;this.$v&&(this.$v=!1,e.K_(t,i))}uv(e){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.yt.Gv().Qt(),i=this.yt.cv();this.$v=!1,t.K_(i,this.Ki)}hm(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.On()}am(e){this.Ki!==null&&(!this.yt.Gv().Qt().N().handleScale.axisPressedMouseMove.price||this.Ki.He()||this.Ki.Eo()||this.Cm(1))}lv(e){this.Cm(0)}um(){const e=[],t=this.Ki===null?void 0:this.Ki;return(i=>{for(let r=0;r<i.length;++r){const o=i[r].Ks(this.yt.cv(),t);for(let c=0;c<o.length;c++)e.push(o[c])}})(this.yt.cv().Dt()),e}wm({context:e,bitmapSize:t}){const{width:i,height:r}=t,o=this.yt.cv().Qt(),c=o.$(),h=o.Kd();c===h?hm(e,0,0,i,r,c):oT(e,0,0,i,r,c,h)}gm({context:e,bitmapSize:t,horizontalPixelRatio:i}){if(this.Uv===null||this.Ki===null||!this.Ki.N().borderVisible)return;e.fillStyle=this.Ki.N().borderColor;const r=Math.max(1,Math.floor(this.lm().S*i));let o;o=this.Jv?t.width-r:0,e.fillRect(o,0,r,t.height)}bm(e){if(this.Uv===null||this.Ki===null)return;const t=this.Ki.Vl(),i=this.Ki.N(),r=this.lm(),o=this.Jv?this.Uv.width-r.C:0;i.borderVisible&&i.ticksVisible&&e.useBitmapCoordinateSpace((({context:c,horizontalPixelRatio:h,verticalPixelRatio:f})=>{c.fillStyle=i.borderColor;const m=Math.max(1,Math.floor(f)),g=Math.floor(.5*f),v=Math.round(r.C*h);c.beginPath();for(const _ of t)c.rect(Math.floor(o*h),Math.round(_.Pl*f)-g,v,m);c.fill()})),e.useMediaCoordinateSpace((({context:c})=>{c.font=this._m(),c.fillStyle=i.textColor??this.Co.textColor,c.textAlign=this.Jv?"right":"left",c.textBaseline="middle";const h=this.Jv?Math.round(o-r.V):Math.round(o+r.C+r.V),f=t.map((m=>this.qv.Di(c,m.Jl)));for(let m=t.length;m--;){const g=t[m];c.fillText(g.Jl,h,g.Pl+f[m])}}))}vm(){if(this.Uv===null||this.Ki===null)return;let e=this.Uv.height/2;const t=[],i=this.Ki.Dt().slice(),r=this.yt.cv(),o=this.lm();this.Ki===r.Gn()&&this.yt.cv().Dt().forEach((f=>{r.Zn(f)&&i.push(f)}));const c=this.Ki.Sl()[0],h=this.Ki;i.forEach((f=>{const m=f.Ks(r,h);m.forEach((g=>{g.$i()&&g.Wi()===null&&(g.Ui(null),t.push(g))})),c===f&&m.length>0&&(e=m[0].Ei())})),this.Ki.N().alignLabels&&this.ym(t,o,e)}ym(e,t,i){if(this.Uv===null)return;const r=e.filter((c=>c.Ei()<=i)),o=e.filter((c=>c.Ei()>i));r.sort(((c,h)=>h.Ei()-c.Ei())),r.length&&o.length&&o.push(r[0]),o.sort(((c,h)=>c.Ei()-h.Ei()));for(const c of e){const h=Math.floor(c.$t(t)/2),f=c.Ei();f>-h&&f<h&&c.Ui(h),f>this.Uv.height-h&&f<this.Uv.height+h&&c.Ui(this.Uv.height-h)}ix(r,1,this.Uv.height,t),ix(o,-1,this.Uv.height,t)}Sm(e){if(this.Uv===null)return;const t=this.um(),i=this.lm(),r=this.Jv?"right":"left";t.forEach((o=>{o.qi()&&o.Tt(ve(this.Ki)).nt(e,i,this.qv,r)}))}xm(e){if(this.Uv===null||this.Ki===null)return;const t=this.yt.Gv().Qt(),i=[],r=this.yt.cv(),o=t.gd().Ks(r,this.Ki);o.length&&i.push(o);const c=this.lm(),h=this.Jv?"right":"left";i.forEach((f=>{f.forEach((m=>{m.Tt(ve(this.Ki)).nt(e,c,this.qv,h)}))}))}Cm(e){this.Jp.style.cursor=e===1?"ns-resize":"default"}do(){const e=this.om();this.Yv<e&&this.yt.Gv().Qt().Ca(),this.Yv=e}_m(){return Af(this.Co.fontSize,this.Co.fontFamily)}}function zO(n,e){return n.qa?.(e)??[]}function sx(n,e){return n.Ys?.(e)??[]}function rx(n,e){return n.ds?.(e)??[]}function PO(n,e){return n.Ha?.(e)??[]}class t1{constructor(e,t){this.Uv=wt({width:0,height:0}),this.km=null,this.Pm=null,this.Tm=null,this.Rm=null,this.Dm=!1,this.Im=new $t,this.Vm=new $t,this.Bm=0,this.Em=!1,this.Am=null,this.Lm=!1,this.zm=null,this.Om=null,this.Kv=!1,this.Zv=()=>{this.Kv||this.Nm===null||this.ns().dr()},this.Xv=()=>{this.Kv||this.Nm===null||this.ns().dr()},this.Lv=e,this.Nm=t,this.Nm.nu().i(this.Fm.bind(this),this,!0),this.Wm=document.createElement("td"),this.Wm.style.padding="0",this.Wm.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.Hm=document.createElement("td"),this.Hm.style.padding="0",this.Um=document.createElement("td"),this.Um.style.padding="0",this.Wm.appendChild(i),this.sm=so(i,wt({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const r=this.sm.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.nm=so(i,wt({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const o=this.nm.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0",this.Xp=document.createElement("tr"),this.Xp.appendChild(this.Hm),this.Xp.appendChild(this.Wm),this.Xp.appendChild(this.Um),this.$m(),this.$p=new gm(this.nm.canvasElement,this,{dp:()=>this.Am===null&&!this.Lv.N().handleScroll.vertTouchDrag,fp:()=>this.Am===null&&!this.Lv.N().handleScroll.horzTouchDrag})}m(){this.km!==null&&this.km.m(),this.Pm!==null&&this.Pm.m(),this.Tm=null,this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),ro(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),ro(this.sm.canvasElement),this.sm.dispose(),this.Nm!==null&&(this.Nm.nu().u(this),this.Nm.m()),this.$p.m()}cv(){return ve(this.Nm)}qm(e){this.Nm!==null&&this.Nm.nu().u(this),this.Nm=e,this.Nm!==null&&this.Nm.nu().i(t1.prototype.Fm.bind(this),this,!0),this.$m(),this.Lv.Zp().indexOf(this)===this.Lv.Zp().length-1?(this.Tm=this.Tm??new OO(this.Wm,this.Lv),this.Tm.kt()):(this.Tm?.Ov(),this.Tm=null)}Gv(){return this.Lv}iv(){return this.Xp}$m(){if(this.Nm!==null&&(this.jm(),this.ns().tn().length!==0)){if(this.km!==null){const e=this.Nm.U_();this.km.cs(ve(e))}if(this.Pm!==null){const e=this.Nm.q_();this.Pm.cs(ve(e))}}}Ym(){this.km!==null&&this.km.kt(),this.Pm!==null&&this.Pm.kt()}E_(){return this.Nm!==null?this.Nm.E_():0}A_(e){this.Nm&&this.Nm.A_(e)}lp(e){if(!this.Nm)return;this.Km();const t=e.localX,i=e.localY;this.Zm(t,i,e)}Pp(e){this.Km(),this.Gm(),this.Zm(e.localX,e.localY,e)}op(e){if(!this.Nm)return;this.Km();const t=e.localX,i=e.localY;this.Zm(t,i,e)}Sp(e){this.Nm!==null&&(this.Km(),this.Xm(e))}ip(e){this.Nm!==null&&this.Jm(this.Vm,e)}Xf(e){this.ip(e)}mp(e){this.Km(),this.Qm(e),this.Zm(e.localX,e.localY,e)}bp(e){this.Nm!==null&&(this.Km(),this.Em=!1,this.tw(e))}Mp(e){this.Nm!==null&&this.Xm(e)}Op(e){if(this.Em=!0,this.Am===null){const t={x:e.localX,y:e.localY};this.iw(t,t,e)}}zp(e){this.Nm!==null&&(this.Km(),this.Nm.Qt().vd(null),this.sw())}nw(){return this.Im}ew(){return this.Vm}Ip(){this.Bm=1,this.ns().dn()}Vp(e,t){if(!this.Lv.N().handleScale.pinch)return;const i=5*(t-this.Bm);this.Bm=t,this.ns().Td(e._t,i)}yp(e){this.Em=!1,this.Lm=this.Am!==null,this.Gm();const t=this.ns().gd();this.Am!==null&&t.It()&&(this.zm={x:t.si(),y:t.ni()},this.Am={x:e.localX,y:e.localY})}pp(e){if(this.Nm===null)return;const t=e.localX,i=e.localY;if(this.Am===null)this.Qm(e);else{this.Lm=!1;const r=ve(this.zm),o=r.x+(t-this.Am.x),c=r.y+(i-this.Am.y);this.Zm(o,c,e)}}gp(e){this.Gv().N().trackingMode.exitMode===0&&(this.Lm=!0),this.rw(),this.tw(e)}Qn(e,t){const i=this.Nm;return i===null?null:vT(i,e,t)}hw(e,t){ve(t==="left"?this.km:this.Pm).dm(wt({width:e,height:this.Uv.height}))}sv(){return this.Uv}dm(e){Xa(this.Uv,e)||(this.Uv=e,this.Kv=!0,this.sm.resizeCanvasElement(e),this.nm.resizeCanvasElement(e),this.Kv=!1,this.Wm.style.width=e.width+"px",this.Wm.style.height=e.height+"px")}aw(){const e=ve(this.Nm);e.H_(e.U_()),e.H_(e.q_());for(const t of e.Sl())if(e.Zn(t)){const i=t.Ft();i!==null&&e.H_(i),t.Ws()}for(const t of e.ru())t.Ws()}nv(){return this.sm.bitmapSize}ev(e,t,i,r){const o=this.nv();if(o.width>0&&o.height>0&&(e.drawImage(this.sm.canvasElement,t,i),r)){const c=this.nm.canvasElement;e!==null&&e.drawImage(c,t,i)}}pm(e){if(e===0||this.Nm===null)return;e>1&&this.aw(),this.km!==null&&this.km.pm(e),this.Pm!==null&&this.Pm.pm(e);const t={colorSpace:this.Lv.N().layout.colorSpace};if(e!==1){this.sm.applySuggestedBitmapSize();const r=no(this.sm,t);r!==null&&(r.useBitmapCoordinateSpace((o=>{this.wm(o)})),this.Nm&&(this.lw(r,zO),this.ow(r),this.lw(r,sx),this.lw(r,rx)))}this.nm.applySuggestedBitmapSize();const i=no(this.nm,t);i!==null&&(i.useBitmapCoordinateSpace((({context:r,bitmapSize:o})=>{r.clearRect(0,0,o.width,o.height)})),this._w(i),this.lw(i,PO),this.lw(i,rx))}uw(){return this.km}cw(){return this.Pm}Mm(e,t){this.lw(e,t)}Fm(){this.Nm!==null&&this.Nm.nu().u(this),this.Nm=null}Xm(e){this.Jm(this.Im,e)}Jm(e,t){const i=t.localX,r=t.localY;e.v()&&e.p(this.ns().Et().wc(i),{x:i,y:r},t)}wm({context:e,bitmapSize:t}){const{width:i,height:r}=t,o=this.ns(),c=o.$(),h=o.Kd();c===h?hm(e,0,0,i,r,h):oT(e,0,0,i,r,c,h)}ow(e){const t=ve(this.Nm),i=t.eu().pr().Tt(t);i!==null&&i.nt(e,!1)}_w(e){this.dw(e,sx,Kd,this.ns().gd())}lw(e,t){const i=ve(this.Nm),r=i.Dt(),o=i.ru();for(const c of o)this.dw(e,t,D0,c);for(const c of r)this.dw(e,t,D0,c);for(const c of o)this.dw(e,t,Kd,c);for(const c of r)this.dw(e,t,Kd,c)}dw(e,t,i,r){const o=ve(this.Nm),c=o.Qt().pd(),h=c!==null&&c.hu===r,f=c!==null&&h&&c.au!==void 0?c.au.ie:void 0;O0(t,(m=>i(m,e,h,f)),r,o)}jm(){if(this.Nm===null)return;const e=this.Lv,t=this.Nm.U_().N().visible,i=this.Nm.q_().N().visible;t||this.km===null||(this.Hm.removeChild(this.km.iv()),this.km.m(),this.km=null),i||this.Pm===null||(this.Um.removeChild(this.Pm.iv()),this.Pm.m(),this.Pm=null);const r=e.Qt().Nd();t&&this.km===null&&(this.km=new nx(this,e.N(),r,"left"),this.Hm.appendChild(this.km.iv())),i&&this.Pm===null&&(this.Pm=new nx(this,e.N(),r,"right"),this.Um.appendChild(this.Pm.iv()))}fw(e){return e.Np&&this.Em||this.Am!==null}Zm(e,t,i){e=Math.max(0,Math.min(e,this.Uv.width-1)),t=Math.max(0,Math.min(t,this.Uv.height-1)),this.ns().Ad(e,t,i,ve(this.Nm))}sw(){this.ns().zd()}rw(){this.Lm&&(this.Am=null,this.sw())}iw(e,t,i){this.Am=e,this.Lm=!1,this.Zm(t.x,t.y,i);const r=this.ns().gd();this.zm={x:r.si(),y:r.ni()}}ns(){return this.Lv.Qt()}tw(e){if(!this.Dm)return;const t=this.ns(),i=this.cv();if(t.X_(i,i.Rs()),this.Rm=null,this.Dm=!1,t.Vd(),this.Om!==null){const r=performance.now(),o=t.Et();this.Om.fe(o.Cc(),r),this.Om.Ec(r)||t.vn(this.Om)}}Km(){this.Am=null}Gm(){if(this.Nm){if(this.ns().dn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)ve(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Nm.Rs().Gi()&&this.ns().Et().Gi()}}Qm(e){if(this.Nm===null)return;const t=this.ns(),i=t.Et();if(i.Gi())return;const r=this.Lv.N(),o=r.handleScroll,c=r.kineticScroll;if((!o.pressedMouseMove||e.Np)&&(!o.horzTouchDrag&&!o.vertTouchDrag||!e.Np))return;const h=this.Nm.Rs(),f=performance.now();if(this.Rm!==null||this.fw(e)||(this.Rm={x:e.clientX,y:e.clientY,cf:f,pw:e.localX,mw:e.localY}),this.Rm!==null&&!this.Dm&&(this.Rm.x!==e.clientX||this.Rm.y!==e.clientY)){if(e.Np&&c.touch||!e.Np&&c.mouse){const m=i.ul();this.Om=new DO(.2/m,7/m,.997,15/m),this.Om.Dv(i.Cc(),this.Rm.cf)}else this.Om=null;h.Gi()||t.Z_(this.Nm,h,e.localY),t.Dd(e.localX),this.Dm=!0}this.Dm&&(h.Gi()||t.G_(this.Nm,h,e.localY),t.Id(e.localX),this.Om!==null&&this.Om.Dv(i.Cc(),f))}}class ax{constructor(e,t,i,r,o){this.xt=!0,this.Uv=wt({width:0,height:0}),this.Zv=()=>this.pm(3),this.Jv=e==="left",this.hd=i.Nd,this.Ps=t,this.ww=r,this.gw=o,this.Jp=document.createElement("div"),this.Jp.style.width="25px",this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.sm=so(this.Jp,wt({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv)}m(){this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),ro(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Jp}sv(){return this.Uv}dm(e){Xa(this.Uv,e)||(this.Uv=e,this.sm.resizeCanvasElement(e),this.Jp.style.width=`${e.width}px`,this.Jp.style.height=`${e.height}px`,this.xt=!0)}pm(e){if(e<3&&!this.xt||this.Uv.width===0||this.Uv.height===0)return;this.xt=!1,this.sm.applySuggestedBitmapSize();const t=no(this.sm,{colorSpace:this.Ps.layout.colorSpace});t!==null&&t.useBitmapCoordinateSpace((i=>{this.wm(i),this.gm(i)}))}nv(){return this.sm.bitmapSize}ev(e,t,i){const r=this.nv();r.width>0&&r.height>0&&e.drawImage(this.sm.canvasElement,t,i)}gm({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:r}){if(!this.ww())return;e.fillStyle=this.Ps.timeScale.borderColor;const o=Math.floor(this.hd.N().S*i),c=Math.floor(this.hd.N().S*r),h=this.Jv?t.width-o:0;e.fillRect(h,0,o,c)}wm({context:e,bitmapSize:t}){hm(e,0,0,t.width,t.height,this.gw())}}function i1(n){return e=>e.Ka?.(n)??[]}const LO=i1("normal"),VO=i1("top"),UO=i1("bottom");class BO{constructor(e,t){this.Mw=null,this.bw=null,this.M=null,this.Sw=!1,this.Uv=wt({width:0,height:0}),this.xw=new $t,this.qv=new Cf(5),this.Kv=!1,this.Zv=()=>{this.Kv||this.Lv.Qt().dr()},this.Xv=()=>{this.Kv||this.Lv.Qt().dr()},this.Lv=e,this.cu=t,this.Ps=e.N().layout,this.Vv=document.createElement("tr"),this.Cw=document.createElement("td"),this.Cw.style.padding="0",this.yw=document.createElement("td"),this.yw.style.padding="0",this.Jp=document.createElement("td"),this.Jp.style.height="25px",this.Jp.style.padding="0",this.kw=document.createElement("div"),this.kw.style.width="100%",this.kw.style.height="100%",this.kw.style.position="relative",this.kw.style.overflow="hidden",this.Jp.appendChild(this.kw),this.sm=so(this.kw,wt({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const i=this.sm.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.nm=so(this.kw,wt({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const r=this.nm.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.Vv.appendChild(this.Cw),this.Vv.appendChild(this.Jp),this.Vv.appendChild(this.yw),this.Pw(),this.Lv.Qt().B_().i(this.Pw.bind(this),this),this.$p=new gm(this.nm.canvasElement,this,{dp:()=>!0,fp:()=>!this.Lv.N().handleScroll.horzTouchDrag})}m(){this.$p.m(),this.Mw!==null&&this.Mw.m(),this.bw!==null&&this.bw.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),ro(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),ro(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Vv}Tw(){return this.Mw}Rw(){return this.bw}Pp(e){if(this.Sw)return;this.Sw=!0;const t=this.Lv.Qt();!t.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&t.Pd(e.localX)}yp(e){this.Pp(e)}Tp(){const e=this.Lv.Qt();!e.Et().Gi()&&this.Sw&&(this.Sw=!1,this.Lv.N().handleScale.axisPressedMouseMove.time&&e.Ed())}mp(e){const t=this.Lv.Qt();!t.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&t.Bd(e.localX)}pp(e){this.mp(e)}bp(){this.Sw=!1;const e=this.Lv.Qt();e.Et().Gi()&&!this.Lv.N().handleScale.axisPressedMouseMove.time||e.Ed()}gp(){this.bp()}ip(){this.Lv.N().handleScale.axisDoubleClickReset.time&&this.Lv.Qt().wn()}Xf(){this.ip()}lp(){this.Lv.Qt().N().handleScale.axisPressedMouseMove.time&&this.Cm(1)}zp(){this.Cm(0)}sv(){return this.Uv}Dw(){return this.xw}Iw(e,t,i){Xa(this.Uv,e)||(this.Uv=e,this.Kv=!0,this.sm.resizeCanvasElement(e),this.nm.resizeCanvasElement(e),this.Kv=!1,this.Jp.style.width=`${e.width}px`,this.Jp.style.height=`${e.height}px`,this.xw.p(e)),this.Mw!==null&&this.Mw.dm(wt({width:t,height:e.height})),this.bw!==null&&this.bw.dm(wt({width:i,height:e.height}))}Vw(){const e=this.Bw();return Math.ceil(e.S+e.C+e.k+e.A+e.I+e.Ew)}kt(){this.Lv.Qt().Et().Vl()}nv(){return this.sm.bitmapSize}ev(e,t,i,r){const o=this.nv();if(o.width>0&&o.height>0&&(e.drawImage(this.sm.canvasElement,t,i),r)){const c=this.nm.canvasElement;e.drawImage(c,t,i)}}pm(e){if(e===0)return;const t={colorSpace:this.Ps.colorSpace};if(e!==1){this.sm.applySuggestedBitmapSize();const r=no(this.sm,t);r!==null&&(r.useBitmapCoordinateSpace((o=>{this.wm(o),this.gm(o),this.Aw(r,UO)})),this.bm(r),this.Aw(r,LO)),this.Mw!==null&&this.Mw.pm(e),this.bw!==null&&this.bw.pm(e)}this.nm.applySuggestedBitmapSize();const i=no(this.nm,t);i!==null&&(i.useBitmapCoordinateSpace((({context:r,bitmapSize:o})=>{r.clearRect(0,0,o.width,o.height)})),this.Lw([...this.Lv.Qt().tn(),this.Lv.Qt().gd()],i),this.Aw(i,VO))}Aw(e,t){const i=this.Lv.Qt().tn();for(const r of i)O0(t,(o=>D0(o,e,!1,void 0)),r,void 0);for(const r of i)O0(t,(o=>Kd(o,e,!1,void 0)),r,void 0)}wm({context:e,bitmapSize:t}){hm(e,0,0,t.width,t.height,this.Lv.Qt().Kd())}gm({context:e,bitmapSize:t,verticalPixelRatio:i}){if(this.Lv.N().timeScale.borderVisible){e.fillStyle=this.zw();const r=Math.max(1,Math.floor(this.Bw().S*i));e.fillRect(0,0,t.width,r)}}bm(e){const t=this.Lv.Qt().Et(),i=t.Vl();if(!i||i.length===0)return;const r=this.cu.maxTickMarkWeight(i),o=this.Bw(),c=t.N();c.borderVisible&&c.ticksVisible&&e.useBitmapCoordinateSpace((({context:h,horizontalPixelRatio:f,verticalPixelRatio:m})=>{h.strokeStyle=this.zw(),h.fillStyle=this.zw();const g=Math.max(1,Math.floor(f)),v=Math.floor(.5*f);h.beginPath();const _=Math.round(o.C*m);for(let w=i.length;w--;){const S=Math.round(i[w].coord*f);h.rect(S-v,0,g,_)}h.fill()})),e.useMediaCoordinateSpace((({context:h})=>{const f=o.S+o.C+o.A+o.k/2;h.textAlign="center",h.textBaseline="middle",h.fillStyle=this.H(),h.font=this._m();for(const m of i)if(m.weight<r){const g=m.needAlignCoordinate?this.Ow(h,m.coord,m.label):m.coord;h.fillText(m.label,g,f)}this.Lv.N().timeScale.allowBoldLabels&&(h.font=this.Nw());for(const m of i)if(m.weight>=r){const g=m.needAlignCoordinate?this.Ow(h,m.coord,m.label):m.coord;h.fillText(m.label,g,f)}}))}Ow(e,t,i){const r=this.qv.Ii(e,i),o=r/2,c=Math.floor(t-o)+.5;return c<0?t+=Math.abs(0-c):c+r>this.Uv.width&&(t-=Math.abs(this.Uv.width-(c+r))),t}Lw(e,t){const i=this.Bw();for(const r of e)for(const o of r.fs())o.Tt().nt(t,i)}zw(){return this.Lv.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}_m(){return Af(this.F(),this.Ps.fontFamily)}Nw(){return Af(this.F(),this.Ps.fontFamily,"bold")}Bw(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,I:NaN,ts:NaN,C:5,k:NaN,P:"",Qi:new Cf,Ew:0});const e=this.M,t=this._m();if(e.P!==t){const i=this.F();e.k=i,e.P=t,e.A=3*i/12,e.I=3*i/12,e.ts=9*i/12,e.L=0,e.Ew=4*i/12,e.Qi.On()}return this.M}Cm(e){this.Jp.style.cursor=e===1?"ew-resize":"default"}Pw(){const e=this.Lv.Qt(),t=e.N();t.leftPriceScale.visible||this.Mw===null||(this.Cw.removeChild(this.Mw.iv()),this.Mw.m(),this.Mw=null),t.rightPriceScale.visible||this.bw===null||(this.yw.removeChild(this.bw.iv()),this.bw.m(),this.bw=null);const i={Nd:this.Lv.Qt().Nd()},r=()=>t.leftPriceScale.borderVisible&&e.Et().N().borderVisible,o=()=>e.Kd();t.leftPriceScale.visible&&this.Mw===null&&(this.Mw=new ax("left",t,i,r,o),this.Cw.appendChild(this.Mw.iv())),t.rightPriceScale.visible&&this.bw===null&&(this.bw=new ax("right",t,i,r,o),this.yw.appendChild(this.bw.iv()))}}const FO=!!Nl&&!!navigator.userAgentData&&navigator.userAgentData.brands.some((n=>n.brand.includes("Chromium")))&&!!Nl&&(navigator?.userAgentData?.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class HO{constructor(e,t,i){var r;this.Fw=[],this.Ww=[],this.Hw=0,this.eo=0,this.S_=0,this.Uw=0,this.$w=0,this.qw=null,this.jw=!1,this.Im=new $t,this.Vm=new $t,this.nd=new $t,this.Yw=null,this.Kw=null,this.Av=e,this.Ps=t,this.cu=i,this.Vv=document.createElement("div"),this.Vv.classList.add("tv-lightweight-charts"),this.Vv.style.overflow="hidden",this.Vv.style.direction="ltr",this.Vv.style.width="100%",this.Vv.style.height="100%",(r=this.Vv).style.userSelect="none",r.style.webkitUserSelect="none",r.style.msUserSelect="none",r.style.MozUserSelect="none",r.style.webkitTapHighlightColor="transparent",this.Zw=document.createElement("table"),this.Zw.setAttribute("cellspacing","0"),this.Vv.appendChild(this.Zw),this.Gw=this.Xw.bind(this),Wg(this.Ps)&&this.Jw(!0),this.ns=new CO(this.rd.bind(this),this.Ps,i),this.Qt().Md().i(this.Qw.bind(this),this),this.tg=new BO(this,this.cu),this.Zw.appendChild(this.tg.iv());const o=t.autoSize&&this.ig();let c=this.Ps.width,h=this.Ps.height;if(o||c===0||h===0){const f=e.getBoundingClientRect();c=c||f.width,h=h||f.height}this.sg(c,h),this.ng(),e.appendChild(this.Vv),this.eg(),this.ns.Et().Oc().i(this.ns.Ca.bind(this.ns),this),this.ns.B_().i(this.ns.Ca.bind(this.ns),this)}Qt(){return this.ns}N(){return this.Ps}Zp(){return this.Fw}rg(){return this.tg}m(){this.Jw(!1),this.Hw!==0&&window.cancelAnimationFrame(this.Hw),this.ns.Md().u(this),this.ns.Et().Oc().u(this),this.ns.B_().u(this),this.ns.m();for(const e of this.Fw)this.Zw.removeChild(e.iv()),e.nw().u(this),e.ew().u(this),e.m();this.Fw=[];for(const e of this.Ww)this.hg(e);this.Ww=[],ve(this.tg).m(),this.Vv.parentElement!==null&&this.Vv.parentElement.removeChild(this.Vv),this.nd.m(),this.Im.m(),this.Vm.m(),this.ag()}sg(e,t,i=!1){if(this.eo===t&&this.S_===e)return;const r=(function(h){const f=Math.floor(h.width),m=Math.floor(h.height);return wt({width:f-f%2,height:m-m%2})})(wt({width:e,height:t}));this.eo=r.height,this.S_=r.width;const o=this.eo+"px",c=this.S_+"px";ve(this.Vv).style.height=o,ve(this.Vv).style.width=c,this.Zw.style.height=o,this.Zw.style.width=c,i?this.lg(Ai.yn(),performance.now()):this.ns.Ca()}pm(e){e===void 0&&(e=Ai.yn());for(let t=0;t<this.Fw.length;t++)this.Fw[t].pm(e.un(t).an);this.Ps.timeScale.visible&&this.tg.pm(e._n())}cr(e){const t=Wg(this.Ps);this.ns.cr(e);const i=Wg(this.Ps);i!==t&&this.Jw(i),e.layout?.panes&&this.og(),this.eg(),this._g(e)}nw(){return this.Im}ew(){return this.Vm}Md(){return this.nd}ug(e=!1){this.qw!==null&&(this.lg(this.qw,performance.now()),this.qw=null);const t=this.cg(null),i=document.createElement("canvas");i.width=t.width,i.height=t.height;const r=ve(i.getContext("2d"));return this.cg(r,e),i}dg(e){return e==="left"&&!this.fg()||e==="right"&&!this.pg()||this.Fw.length===0?0:ve(e==="left"?this.Fw[0].uw():this.Fw[0].cw()).fm()}vg(){return this.Ps.autoSize&&this.Yw!==null}hv(){return this.Vv}mg(e){this.Kw=e,this.Kw?this.hv().style.setProperty("cursor",e):this.hv().style.removeProperty("cursor")}wg(){return this.Kw}gg(e){return sn(this.Fw[e]).sv()}og(){this.Ww.forEach((e=>{e.kt()}))}_g(e){(e.autoSize!==void 0||!this.Yw||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Yw&&this.ig(),e.autoSize===!1&&this.Yw!==null&&this.ag(),e.autoSize||e.width===void 0&&e.height===void 0||this.sg(e.width||this.S_,e.height||this.eo))}cg(e,t){let i=0,r=0;const o=this.Fw[0],c=(f,m)=>{let g=0;for(let v=0;v<this.Fw.length;v++){const _=this.Fw[v],w=ve(f==="left"?_.uw():_.cw()),S=w.nv();if(e!==null&&w.ev(e,m,g,t),g+=S.height,v<this.Fw.length-1){const R=this.Ww[v],O=R.nv();e!==null&&R.ev(e,m,g),g+=O.height}}};this.fg()&&(c("left",0),i+=ve(o.uw()).nv().width);for(let f=0;f<this.Fw.length;f++){const m=this.Fw[f],g=m.nv();if(e!==null&&m.ev(e,i,r,t),r+=g.height,f<this.Fw.length-1){const v=this.Ww[f],_=v.nv();e!==null&&v.ev(e,i,r),r+=_.height}}i+=o.nv().width,this.pg()&&(c("right",i),i+=ve(o.cw()).nv().width);const h=(f,m,g)=>{ve(f==="left"?this.tg.Tw():this.tg.Rw()).ev(ve(e),m,g)};if(this.Ps.timeScale.visible){const f=this.tg.nv();if(e!==null){let m=0;this.fg()&&(h("left",m,r),m=ve(o.uw()).nv().width),this.tg.ev(e,m,r,t),m+=f.width,this.pg()&&h("right",m,r)}r+=f.height}return wt({width:i,height:r})}Mg(){let e=0,t=0,i=0;for(const O of this.Fw)this.fg()&&(t=Math.max(t,ve(O.uw()).om(),this.Ps.leftPriceScale.minimumWidth)),this.pg()&&(i=Math.max(i,ve(O.cw()).om(),this.Ps.rightPriceScale.minimumWidth)),e+=O.E_();t=j0(t),i=j0(i);const r=this.S_,o=this.eo,c=Math.max(r-t-i,0),h=1*this.Ww.length,f=this.Ps.timeScale.visible;let m=f?Math.max(this.tg.Vw(),this.Ps.timeScale.minimumHeight):0;var g;m=(g=m)+g%2;const v=h+m,_=o<v?0:o-v,w=_/e;let S=0;const R=window.devicePixelRatio||1;for(let O=0;O<this.Fw.length;++O){const M=this.Fw[O];M.qm(this.ns.Xs()[O]);let F=0,H=0;H=O===this.Fw.length-1?Math.ceil((_-S)*R)/R:Math.round(M.E_()*w*R)/R,F=Math.max(H,2),S+=F,M.dm(wt({width:c,height:F})),this.fg()&&M.hw(t,"left"),this.pg()&&M.hw(i,"right"),M.cv()&&this.ns.bd(M.cv(),F)}this.tg.Iw(wt({width:f?c:0,height:m}),f?t:0,f?i:0),this.ns.L_(c),this.Uw!==t&&(this.Uw=t),this.$w!==i&&(this.$w=i)}Jw(e){e?this.Vv.addEventListener("wheel",this.Gw,{passive:!1}):this.Vv.removeEventListener("wheel",this.Gw)}bg(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return FO?1/window.devicePixelRatio:1}Xw(e){if(!(e.deltaX!==0&&this.Ps.handleScroll.mouseWheel||e.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const t=this.bg(e),i=t*e.deltaX/100,r=-t*e.deltaY/100;if(e.cancelable&&e.preventDefault(),r!==0&&this.Ps.handleScale.mouseWheel){const o=Math.sign(r)*Math.min(1,Math.abs(r)),c=e.clientX-this.Vv.getBoundingClientRect().left;this.Qt().Td(c,o)}i!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().Rd(-80*i)}lg(e,t){const i=e._n();i===3&&this.Sg(),i!==3&&i!==2||(this.xg(e),this.Cg(e,t),this.tg.kt(),this.Fw.forEach((r=>{r.Ym()})),this.qw?._n()===3&&(this.qw.Sn(e),this.Sg(),this.xg(this.qw),this.Cg(this.qw,t),e=this.qw,this.qw=null)),this.pm(e)}Cg(e,t){for(const i of e.bn())this.xn(i,t)}xg(e){const t=this.ns.Xs();for(let i=0;i<t.length;i++)e.un(i).ln&&t[i].tu()}xn(e,t){const i=this.ns.Et();switch(e.fn){case 0:i.Fc();break;case 1:i.Wc(e.Wt);break;case 2:i.gn(e.Wt);break;case 3:i.Mn(e.Wt);break;case 4:i.Pc();break;case 5:e.Wt.Ec(t)||i.Mn(e.Wt.Ac(t))}}rd(e){this.qw!==null?this.qw.Sn(e):this.qw=e,this.jw||(this.jw=!0,this.Hw=window.requestAnimationFrame((t=>{if(this.jw=!1,this.Hw=0,this.qw!==null){const i=this.qw;this.qw=null,this.lg(i,t);for(const r of i.bn())if(r.fn===5&&!r.Wt.Ec(t)){this.Qt().vn(r.Wt);break}}})))}Sg(){this.ng()}hg(e){this.Zw.removeChild(e.iv()),e.m()}ng(){const e=this.ns.Xs(),t=e.length,i=this.Fw.length;for(let r=t;r<i;r++){const o=sn(this.Fw.pop());this.Zw.removeChild(o.iv()),o.nw().u(this),o.ew().u(this),o.m();const c=this.Ww.pop();c!==void 0&&this.hg(c)}for(let r=i;r<t;r++){const o=new t1(this,e[r]);if(o.nw().i(this.yg.bind(this,o),this),o.ew().i(this.kg.bind(this,o),this),this.Fw.push(o),r>0){const c=new jO(this,r-1,r);this.Ww.push(c),this.Zw.insertBefore(c.iv(),this.tg.iv())}this.Zw.insertBefore(o.iv(),this.tg.iv())}for(let r=0;r<t;r++){const o=e[r],c=this.Fw[r];c.cv()!==o?c.qm(o):c.$m()}this.eg(),this.Mg()}Pg(e,t,i,r){const o=new Map;e!==null&&this.ns.tn().forEach((v=>{const _=v.qs().$s(e);_!==null&&o.set(v,_)}));let c;if(e!==null){const v=this.ns.Et().es(e)?.originalTime;v!==void 0&&(c=v)}const h=this.Qt().pd(),f=h!==null&&h.hu instanceof pm?h.hu:void 0,m=h!==null&&h.au!==void 0?h.au.te:void 0,g=this.Tg(r);return{Gr:c,js:e??void 0,Rg:t??void 0,Dg:g!==-1?g:void 0,Ig:f,Vg:o,Bg:m,Eg:i??void 0}}Tg(e){let t=-1;if(e)t=this.Fw.indexOf(e);else{const i=this.Qt().gd().Gs();i!==null&&(t=this.Qt().Xs().indexOf(i))}return t}yg(e,t,i,r){this.Im.p((()=>this.Pg(t,i,r,e)))}kg(e,t,i,r){this.Vm.p((()=>this.Pg(t,i,r,e)))}Qw(e,t,i){this.mg(this.Qt().pd()?.ou??null),this.nd.p((()=>this.Pg(e,t,i)))}eg(){const e=this.Ps.timeScale.visible?"":"none";this.tg.iv().style.display=e}fg(){return this.Fw[0].cv().U_().N().visible}pg(){return this.Fw[0].cv().q_().N().visible}ig(){return"ResizeObserver"in window&&(this.Yw=new ResizeObserver((e=>{const t=e[e.length-1];t&&this.sg(t.contentRect.width,t.contentRect.height)})),this.Yw.observe(this.Av,{box:"border-box"}),!0)}ag(){this.Yw!==null&&this.Yw.disconnect(),this.Yw=null}}function Wg(n){return!!(n.handleScroll.mouseWheel||n.handleScale.mouseWheel)}function qO(n){return n.open===void 0&&n.value===void 0}function GO(n){return(function(e){return e.open!==void 0})(n)||(function(e){return e.value!==void 0})(n)}function ox(n,e,t,i){const r=t.value,o={js:e,wt:n,Wt:[r,r,r,r],Gr:i};return t.color!==void 0&&(o.R=t.color),o}function $O(n,e,t,i){const r=t.value,o={js:e,wt:n,Wt:[r,r,r,r],Gr:i};return t.lineColor!==void 0&&(o.vt=t.lineColor),t.topColor!==void 0&&(o.eh=t.topColor),t.bottomColor!==void 0&&(o.rh=t.bottomColor),o}function KO(n,e,t,i){const r=t.value,o={js:e,wt:n,Wt:[r,r,r,r],Gr:i};return t.topLineColor!==void 0&&(o.hh=t.topLineColor),t.bottomLineColor!==void 0&&(o.ah=t.bottomLineColor),t.topFillColor1!==void 0&&(o.oh=t.topFillColor1),t.topFillColor2!==void 0&&(o._h=t.topFillColor2),t.bottomFillColor1!==void 0&&(o.uh=t.bottomFillColor1),t.bottomFillColor2!==void 0&&(o.dh=t.bottomFillColor2),o}function YO(n,e,t,i){const r={js:e,wt:n,Wt:[t.open,t.high,t.low,t.close],Gr:i};return t.color!==void 0&&(r.R=t.color),r}function WO(n,e,t,i){const r={js:e,wt:n,Wt:[t.open,t.high,t.low,t.close],Gr:i};return t.color!==void 0&&(r.R=t.color),t.borderColor!==void 0&&(r.Ht=t.borderColor),t.wickColor!==void 0&&(r.nh=t.wickColor),r}function QO(n,e,t,i,r){const o=sn(r)(t),c=Math.max(...o),h=Math.min(...o),f=o[o.length-1],m=[f,c,h,f],{time:g,color:v,..._}=t;return{js:e,wt:n,Wt:m,Gr:i,le:_,R:v}}function el(n){return n.Wt!==void 0}function lx(n,e){return e.customValues!==void 0&&(n.Ag=e.customValues),n}function Ga(n){return(e,t,i,r,o,c)=>(function(h,f){return f?f(h):qO(h)})(i,c)?lx({wt:e,js:t,Gr:r},i):lx(n(e,t,i,r,o),i)}function cx(n){return{Candlestick:Ga(WO),Bar:Ga(YO),Area:Ga($O),Baseline:Ga(KO),Histogram:Ga(ox),Line:Ga(ox),Custom:Ga(QO)}[n]}function ux(n){return{js:0,Lg:new Map,Ea:n}}function hx(n,e){if(n!==void 0&&n.length!==0)return{zg:e.key(n[0].wt),Og:e.key(n[n.length-1].wt)}}function dx(n){let e;return n.forEach((t=>{e===void 0&&(e=t.Gr)})),sn(e)}class XO{constructor(e){this.Ng=new Map,this.Fg=new Map,this.Wg=new Map,this.Hg=[],this.cu=e}m(){this.Ng.clear(),this.Fg.clear(),this.Wg.clear(),this.Hg=[]}Ug(e,t){let i=this.Ng.size!==0,r=!1;const o=this.Fg.get(e);if(o!==void 0)if(this.Fg.size===1)i=!1,r=!0,this.Ng.clear();else for(const f of this.Hg)f.pointData.Lg.delete(e)&&(r=!0);let c=[];if(t.length!==0){const f=t.map((w=>w.time)),m=this.cu.createConverterToInternalObj(t),g=cx(e.wh()),v=e.rl(),_=e.hl();c=t.map(((w,S)=>{const R=m(w.time),O=this.cu.key(R);let M=this.Ng.get(O);M===void 0&&(M=ux(R),this.Ng.set(O,M),r=!0);const F=g(R,M.js,w,f[S],v,_);return M.Lg.set(e,F),F}))}i&&this.$g(),this.qg(e,c);let h=-1;if(r){const f=[];this.Ng.forEach((m=>{f.push({timeWeight:0,time:m.Ea,pointData:m,originalTime:dx(m.Lg)})})),f.sort(((m,g)=>this.cu.key(m.time)-this.cu.key(g.time))),h=this.jg(f)}return this.Yg(e,h,(function(f,m,g){const v=hx(f,g),_=hx(m,g);if(v!==void 0&&_!==void 0)return{Kg:!1,Ta:v.Og>=_.Og&&v.zg>=_.zg}})(this.Fg.get(e),o,this.cu))}Hd(e){return this.Ug(e,[])}Zg(e,t,i){if(i&&e.La())throw new Error("Historical updates are not supported when conflation is enabled. Conflation requires data to be processed in order.");const r=t;(function(M){M.Gr===void 0&&(M.Gr=M.time)})(r),this.cu.preprocessData(t);const o=this.cu.createConverterToInternalObj([t])(t.time),c=this.Wg.get(e);if(!i&&c!==void 0&&this.cu.key(o)<this.cu.key(c))throw new Error(`Cannot update oldest data, last time=${c}, new time=${o}`);let h=this.Ng.get(this.cu.key(o));if(i&&h===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const f=h===void 0;h===void 0&&(h=ux(o),this.Ng.set(this.cu.key(o),h));const m=cx(e.wh()),g=e.rl(),v=e.hl(),_=m(o,h.js,t,r.Gr,g,v),w=!i&&!f&&c!==void 0&&this.cu.key(o)===this.cu.key(c);h.Lg.set(e,_),i?this.Gg(e,_,h.js):w&&e.La()&&el(_)?(e.kr(_),this.Xg(e,_)):this.Xg(e,_);const S={Ta:el(_),Kg:i};if(!f)return this.Yg(e,-1,S);const R={timeWeight:0,time:h.Ea,pointData:h,originalTime:dx(h.Lg)},O=Rl(this.Hg,this.cu.key(R.time),((M,F)=>this.cu.key(M.time)<F));this.Hg.splice(O,0,R);for(let M=O;M<this.Hg.length;++M)kd(this.Hg[M].pointData,M);return this.cu.fillWeightsForPoints(this.Hg,O),this.Yg(e,O,S)}Jg(e,t){const i=this.Fg.get(e);if(i===void 0||t<=0)return[[],this.Qg()];t=Math.min(t,i.length);const r=i.splice(-t).reverse();i.length===0?this.Wg.delete(e):this.Wg.set(e,i[i.length-1].wt);for(const o of r){const c=this.Ng.get(this.cu.key(o.wt));if(c&&(c.Lg.delete(e),c.Lg.size===0)){this.Ng.delete(this.cu.key(c.Ea)),this.Hg.splice(c.js,1);for(let h=c.js;h<this.Hg.length;++h)kd(this.Hg[h].pointData,h)}}return[r,this.Yg(e,this.Hg.length-1,{Kg:!1,Ta:!1})]}Xg(e,t){let i=this.Fg.get(e);i===void 0&&(i=[],this.Fg.set(e,i));const r=i.length!==0?i[i.length-1]:null;r===null||this.cu.key(t.wt)>this.cu.key(r.wt)?el(t)&&i.push(t):el(t)?i[i.length-1]=t:i.splice(-1,1),this.Wg.set(e,t.wt)}Gg(e,t,i){const r=this.Fg.get(e);if(r===void 0)return;const o=Rl(r,i,((c,h)=>c.js<h));el(t)?r[o]=t:r.splice(o,1)}qg(e,t){t.length!==0?(this.Fg.set(e,t.filter(el)),this.Wg.set(e,t[t.length-1].wt)):(this.Fg.delete(e),this.Wg.delete(e))}$g(){for(const e of this.Hg)e.pointData.Lg.size===0&&this.Ng.delete(this.cu.key(e.time))}jg(e){let t=-1;for(let i=0;i<this.Hg.length&&i<e.length;++i){const r=this.Hg[i],o=e[i];if(this.cu.key(r.time)!==this.cu.key(o.time)){t=i;break}o.timeWeight=r.timeWeight,kd(o.pointData,i)}if(t===-1&&this.Hg.length!==e.length&&(t=Math.min(this.Hg.length,e.length)),t===-1)return-1;for(let i=t;i<e.length;++i)kd(e[i].pointData,i);return this.cu.fillWeightsForPoints(e,t),this.Hg=e,t}tM(){if(this.Fg.size===0)return null;let e=0;return this.Fg.forEach((t=>{t.length!==0&&(e=Math.max(e,t[t.length-1].js))})),e}Yg(e,t,i){const r=this.Qg();if(t!==-1)this.Fg.forEach(((o,c)=>{r.F_.set(c,{le:o,iM:c===e?i:void 0})})),this.Fg.has(e)||r.F_.set(e,{le:[],iM:i}),r.Et.sM=this.Hg,r.Et.nM=t;else{const o=this.Fg.get(e);r.F_.set(e,{le:o||[],iM:i})}return r}Qg(){return{F_:new Map,Et:{vc:this.tM()}}}}function kd(n,e){n.js=e,n.Lg.forEach((t=>{t.js=e}))}function JO(n,e){return n.wt<e}function ZO(n,e){return e<n.wt}function e8(n,e,t){const i=e.Aa(),r=e.bi(),o=Rl(n,i,JO),c=mT(n,r,ZO);if(!t)return{from:o,to:c};let h=o,f=c;return o>0&&o<n.length&&n[o].wt>=i&&(h=o-1),c>0&&c<n.length&&n[c-1].wt<=r&&(f=c+1),{from:h,to:f}}class xT{constructor(e,t,i){this.eM=!0,this.rM=!0,this.hM=!0,this.aM=[],this.lM=null,this.oM=-1,this.ee=e,this.re=t,this._M=i}kt(e){this.eM=!0,e==="data"&&(this.rM=!0),e==="options"&&(this.hM=!0)}Tt(){return this.ee.It()?(this.uM(),this.lM===null?null:this.cM):null}dM(){this.aM=this.aM.map((e=>({...e,...this.ee.ga().gh(e.wt)})))}fM(){this.lM=null}uM(){const e=this.re.Et(),t=e.N().enableConflation?e.Hc():0;t!==this.oM&&(this.rM=!0,this.oM=t),this.rM&&(this.pM(),this.rM=!1),this.hM&&(this.dM(),this.hM=!1),this.eM&&(this.vM(),this.eM=!1)}vM(){const e=this.ee.Ft(),t=this.re.Et();if(this.fM(),t.Gi()||e.Gi())return;const i=t.Ie();if(i===null||this.ee.qs().yh()===0)return;const r=this.ee.Lt();r!==null&&(this.lM=e8(this.aM,i,this._M),this.mM(e,t,r.Wt),this.wM())}}class t8{constructor(e,t){this.gM=e,this.Ki=t}nt(e,t,i){this.gM.draw(e,this.Ki,t,i)}}class i8 extends xT{constructor(e,t,i){super(e,t,!1),this.$h=i,this.cM=new t8(this.$h.renderer(),(r=>{const o=e.Lt();return o===null?null:e.Ft().Nt(r,o.Wt)}))}get ma(){return this.$h.conflationReducer}Oa(e){return this.$h.priceValueBuilder(e)}al(e){return this.$h.isWhitespace(e)}pM(){const e=this.ee.ga();this.aM=this.ee.Na().Dh().map((t=>({wt:t.js,_t:NaN,...e.gh(t.js),MM:t.le})))}mM(e,t){t.mc(this.aM,I0(this.lM))}wM(){this.$h.update({bars:this.aM.map(n8),barSpacing:this.re.Et().ul(),visibleRange:this.lM,conflationFactor:this.re.Et().Hc()},this.ee.N())}}function n8(n){return{x:n._t,time:n.wt,originalData:n.MM,barColor:n.th}}const s8={color:"#2196f3"},r8=(n,e,t)=>{const i=Xr(t);return new i8(n,e,i)};function n1(n){const e={value:n.Wt[3],time:n.Gr};return n.Ag!==void 0&&(e.customValues=n.Ag),e}function fx(n){const e=n1(n);return n.R!==void 0&&(e.color=n.R),e}function a8(n){const e=n1(n);return n.vt!==void 0&&(e.lineColor=n.vt),n.eh!==void 0&&(e.topColor=n.eh),n.rh!==void 0&&(e.bottomColor=n.rh),e}function o8(n){const e=n1(n);return n.hh!==void 0&&(e.topLineColor=n.hh),n.ah!==void 0&&(e.bottomLineColor=n.ah),n.oh!==void 0&&(e.topFillColor1=n.oh),n._h!==void 0&&(e.topFillColor2=n._h),n.uh!==void 0&&(e.bottomFillColor1=n.uh),n.dh!==void 0&&(e.bottomFillColor2=n.dh),e}function ET(n){const e={open:n.Wt[0],high:n.Wt[1],low:n.Wt[2],close:n.Wt[3],time:n.Gr};return n.Ag!==void 0&&(e.customValues=n.Ag),e}function l8(n){const e=ET(n);return n.R!==void 0&&(e.color=n.R),e}function c8(n){const e=ET(n),{R:t,Ht:i,nh:r}=n;return t!==void 0&&(e.color=t),i!==void 0&&(e.borderColor=i),r!==void 0&&(e.wickColor=r),e}function Yd(n){return{Area:a8,Line:fx,Baseline:o8,Histogram:fx,Bar:l8,Candlestick:c8,Custom:u8}[n]}function u8(n){const e=n.Gr;return{...n.le,time:e}}const h8={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1,doNotSnapToHiddenSeriesIndices:!1},d8={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},f8={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:aT,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},Qg={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},m8={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1,enableConflation:!1,conflationThresholdFactor:1,precomputeConflationOnInit:!1,precomputeConflationPriority:"background"};function mx(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:f8,crosshair:h8,grid:d8,overlayPriceScales:{...Qg},leftPriceScale:{...Qg,visible:!1},rightPriceScale:{...Qg,visible:!0},timeScale:m8,localization:{locale:Nl?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class ST{constructor(e,t,i){this.Yp=e,this.bM=t,this.SM=i??0}applyOptions(e){this.Yp.Qt().md(this.bM,e,this.SM)}options(){return this.Ki().N()}width(){return fm(this.bM)?this.Yp.dg(this.bM):0}setVisibleRange(e){this.setAutoScale(!1),this.Ki().$o(new qi(e.from,e.to))}getVisibleRange(){let e,t,i=this.Ki().er();if(i===null)return null;if(this.Ki().io()){const r=this.Ki().m_(),o=bT(r);i=hl(i,this.Ki().no()),e=Number((Math.round(i.Ze()/r)*r).toFixed(o)),t=Number((Math.round(i.Ge()/r)*r).toFixed(o))}else e=i.Ze(),t=i.Ge();return{from:e,to:t}}setAutoScale(e){this.applyOptions({autoScale:e})}Ki(){return ve(this.Yp.Qt().wd(this.bM,this.SM)).Ft}}class p8{constructor(e,t,i,r){this.Yp=e,this.yt=i,this.xM=t,this.CM=r}getHeight(){return this.yt.$t()}setHeight(e){const t=this.Yp.Qt(),i=t.Gd(this.yt);t.xd(i,e)}getStretchFactor(){return this.yt.E_()}setStretchFactor(e){this.yt.A_(e),this.Yp.Qt().Ca()}paneIndex(){return this.Yp.Qt().Gd(this.yt)}moveTo(e){const t=this.paneIndex();t!==e&&(Ri(e>=0&&e<this.Yp.Zp().length,"Invalid pane index"),this.Yp.Qt().yd(t,e))}getSeries(){return this.yt.F_().map((e=>this.xM(e)))??[]}getHTMLElement(){const e=this.Yp.Zp();return e&&e.length!==0&&e[this.paneIndex()]?e[this.paneIndex()].iv():null}attachPrimitive(e){this.yt.nl(e),e.attached&&e.attached({chart:this.CM,requestUpdate:()=>this.yt.Qt().Ca()})}detachPrimitive(e){this.yt.el(e)}priceScale(e){if(this.yt.V_(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new ST(this.Yp,e,this.paneIndex())}setPreserveEmptyPane(e){this.yt.O_(e)}preserveEmptyPane(){return this.yt.N_()}addCustomSeries(e,t={},i=0){return this.CM.addCustomSeries(e,t,i)}addSeries(e,t={}){return this.CM.addSeries(e,t,this.paneIndex())}}const g8={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class px{constructor(e){this.hr=e}applyOptions(e){this.hr.cr(e)}options(){return this.hr.N()}yM(){return this.hr}}class y8{constructor(e,t,i,r,o,c){this.kM=new $t,this.ee=e,this.PM=t,this.TM=i,this.cu=o,this.CM=r,this.RM=c}m(){this.kM.m()}priceFormatter(){return this.ee.Xa()}priceToCoordinate(e){const t=this.ee.Lt();return t===null?null:this.ee.Ft().Nt(e,t.Wt)}coordinateToPrice(e){const t=this.ee.Lt();return t===null?null:this.ee.Ft().Ds(e,t.Wt)}barsInLogicalRange(e){if(e===null)return null;const t=new gl(new uu(e.from,e.to)).Ru(),i=this.ee.qs();if(i.Gi())return null;const r=i.$s(t.Aa(),1),o=i.$s(t.bi(),-1),c=ve(i.kh()),h=ve(i.sn());if(r!==null&&o!==null&&r.js>o.js)return{barsBefore:e.from-c,barsAfter:h-e.to};const f={barsBefore:r===null||r.js===c?e.from-c:r.js-c,barsAfter:o===null||o.js===h?h-e.to:h-o.js};return r!==null&&o!==null&&(f.from=r.Gr,f.to=o.Gr),f}setData(e){this.cu,this.ee.wh(),this.PM.DM(this.ee,e),this.IM("full")}update(e,t=!1){this.ee.wh(),this.PM.VM(this.ee,e,t),this.IM("update")}pop(e=1){const t=this.PM.BM(this.ee,e);t.length!==0&&this.IM("update");const i=Yd(this.seriesType());return t.map((r=>i(r)))}dataByIndex(e,t){const i=this.ee.qs().$s(e,t);return i===null?null:Yd(this.seriesType())(i)}data(){const e=Yd(this.seriesType());return this.ee.qs().Dh().map((t=>e(t)))}subscribeDataChanged(e){this.kM.i(e)}unsubscribeDataChanged(e){this.kM._(e)}applyOptions(e){this.ee.cr(e)}options(){return Zs(this.ee.N())}priceScale(){return this.TM.priceScale(this.ee.Ft().ol(),this.getPane().paneIndex())}createPriceLine(e){const t=bn(Zs(g8),e),i=this.ee.Da(t);return new px(i)}removePriceLine(e){this.ee.Ia(e.yM())}priceLines(){return this.ee.Va().map((e=>new px(e)))}seriesType(){return this.ee.wh()}lastValueData(e){const t=this.ee.Ve(e);return t.Be?{noData:!0}:{noData:!1,price:t.gt,color:t.R}}attachPrimitive(e){this.ee.nl(e),e.attached&&e.attached({chart:this.CM,series:this,requestUpdate:()=>this.ee.Qt().Ca(),horzScaleBehavior:this.cu})}detachPrimitive(e){this.ee.el(e),e.detached&&e.detached(),this.ee.Qt().Ca()}getPane(){const e=this.ee,t=ve(this.ee.Qt().Kn(e));return this.RM(t)}moveToPane(e){this.ee.Qt().jd(this.ee,e)}seriesOrder(){const e=this.ee.Qt().Kn(this.ee);return e===null?-1:e.F_().indexOf(this.ee)}setSeriesOrder(e){const t=this.ee.Qt().Kn(this.ee);t!==null&&t.su(this.ee,e)}IM(e){this.kM.v()&&this.kM.p(e)}}class v8{constructor(e,t,i){this.EM=new $t,this.Nu=new $t,this.xw=new $t,this.ns=e,this.Jh=e.Et(),this.tg=t,this.Jh.Lc().i(this.AM.bind(this)),this.Jh.zc().i(this.LM.bind(this)),this.tg.Dw().i(this.zM.bind(this)),this.cu=i}m(){this.Jh.Lc().u(this),this.Jh.zc().u(this),this.tg.Dw().u(this),this.EM.m(),this.Nu.m(),this.xw.m()}scrollPosition(){return this.Jh.Cc()}scrollToPosition(e,t){t?this.Jh.Bc(e,1e3):this.ns.Mn(e)}scrollToRealTime(){this.Jh.Vc()}getVisibleRange(){const e=this.Jh.lc();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const t={from:this.cu.convertHorzItemToInternal(e.from),to:this.cu.convertHorzItemToInternal(e.to)},i=this.Jh.cc(t);this.ns.$d(i)}getVisibleLogicalRange(){const e=this.Jh.ac();return e===null?null:{from:e.Aa(),to:e.bi()}}setVisibleLogicalRange(e){Ri(e.from<=e.to,"The from index cannot be after the to index."),this.ns.$d(e)}resetTimeScale(){this.ns.wn()}fitContent(){this.ns.Fc()}logicalToCoordinate(e){const t=this.ns.Et();return t.Gi()?null:t.qt(e)}coordinateToLogical(e){return this.Jh.Gi()?null:this.Jh.wc(e)}timeToIndex(e,t){const i=this.cu.convertHorzItemToInternal(e);return this.Jh.ec(i,t)}timeToCoordinate(e){const t=this.timeToIndex(e,!1);return t===null?null:this.Jh.qt(t)}coordinateToTime(e){const t=this.ns.Et(),i=t.wc(e),r=t.es(i);return r===null?null:r.originalTime}width(){return this.tg.sv().width}height(){return this.tg.sv().height}subscribeVisibleTimeRangeChange(e){this.EM.i(e)}unsubscribeVisibleTimeRangeChange(e){this.EM._(e)}subscribeVisibleLogicalRangeChange(e){this.Nu.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.Nu._(e)}subscribeSizeChange(e){this.xw.i(e)}unsubscribeSizeChange(e){this.xw._(e)}applyOptions(e){this.Jh.cr(e)}options(){return{...Zs(this.Jh.N()),barSpacing:this.Jh.ul()}}AM(){this.EM.v()&&this.EM.p(this.getVisibleRange())}LM(){this.Nu.v()&&this.Nu.p(this.getVisibleLogicalRange())}zM(e){this.xw.p(e.width,e.height)}}function gx(n){return(function(e){if(Td(e.handleScale)){const i=e.handleScale;e.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:i,axisDoubleClickReset:r}=e.handleScale;Td(i)&&(e.handleScale.axisPressedMouseMove={time:i,price:i}),Td(r)&&(e.handleScale.axisDoubleClickReset={time:r,price:r})}const t=e.handleScroll;Td(t)&&(e.handleScroll={horzTouchDrag:t,vertTouchDrag:t,mouseWheel:t,pressedMouseMove:t})})(n),n}class b8{constructor(e,t,i){this.OM=new Map,this.NM=new Map,this.FM=new $t,this.WM=new $t,this.HM=new $t,this.Xc=new WeakMap,this.UM=new XO(t);const r=i===void 0?Zs(mx()):bn(Zs(mx()),gx(i));this.$M=t,this.Yp=new HO(e,r,t),this.Yp.nw().i((c=>{this.FM.v()&&this.FM.p(this.qM(c()))}),this),this.Yp.ew().i((c=>{this.WM.v()&&this.WM.p(this.qM(c()))}),this),this.Yp.Md().i((c=>{this.HM.v()&&this.HM.p(this.qM(c()))}),this);const o=this.Yp.Qt();this.jM=new v8(o,this.Yp.rg(),this.$M)}remove(){this.Yp.nw().u(this),this.Yp.ew().u(this),this.Yp.Md().u(this),this.jM.m(),this.Yp.m(),this.OM.clear(),this.NM.clear(),this.FM.m(),this.WM.m(),this.HM.m(),this.UM.m()}resize(e,t,i){this.autoSizeActive()||this.Yp.sg(e,t,i)}addCustomSeries(e,t={},i=0){const r=(o=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...s8,...o.defaultOptions()},YM:r8,KM:o}))(Xr(e));return this.ZM(r,t,i)}addSeries(e,t={},i=0){return this.ZM(e,t,i)}removeSeries(e){const t=sn(this.OM.get(e)),i=this.UM.Hd(t);this.Yp.Qt().Hd(t),this.GM(i),this.OM.delete(e),this.NM.delete(t)}DM(e,t){this.GM(this.UM.Ug(e,t))}VM(e,t,i){this.GM(this.UM.Zg(e,t,i))}BM(e,t){const[i,r]=this.UM.Jg(e,t);return i.length!==0&&this.GM(r),i}subscribeClick(e){this.FM.i(e)}unsubscribeClick(e){this.FM._(e)}subscribeCrosshairMove(e){this.HM.i(e)}unsubscribeCrosshairMove(e){this.HM._(e)}subscribeDblClick(e){this.WM.i(e)}unsubscribeDblClick(e){this.WM._(e)}priceScale(e,t=0){return new ST(this.Yp,e,t)}timeScale(){return this.jM}applyOptions(e){this.Yp.cr(gx(e))}options(){return this.Yp.N()}takeScreenshot(e=!1,t=!1){let i,r;try{t||(i=this.Yp.Qt().N().crosshair.mode,this.Yp.cr({crosshair:{mode:2}})),r=this.Yp.ug(e)}finally{t||i===void 0||this.Yp.Qt().cr({crosshair:{mode:i}})}return r}addPane(e=!1){const t=this.Yp.Qt().Xd();return t.O_(e),this.XM(t)}removePane(e){this.Yp.Qt().Sd(e)}swapPanes(e,t){this.Yp.Qt().Cd(e,t)}autoSizeActive(){return this.Yp.vg()}chartElement(){return this.Yp.hv()}panes(){return this.Yp.Qt().Xs().map((e=>this.XM(e)))}paneSize(e=0){const t=this.Yp.gg(e);return{height:t.height,width:t.width}}setCrosshairPosition(e,t,i){const r=this.OM.get(i);if(r===void 0)return;const o=this.Yp.Qt().Kn(r);o!==null&&this.Yp.Qt().Ld(e,t,o)}clearCrosshairPosition(){this.Yp.Qt().zd(!0)}horzBehaviour(){return this.$M}ZM(e,t={},i=0){Ri(e.YM!==void 0),(function(f){if(f===void 0||f.type==="custom")return;const m=f;m.minMove!==void 0&&m.precision===void 0&&(m.precision=bT(m.minMove))})(t.priceFormat),e.type==="Candlestick"&&(function(f){f.borderColor!==void 0&&(f.borderUpColor=f.borderColor,f.borderDownColor=f.borderColor),f.wickColor!==void 0&&(f.wickUpColor=f.wickColor,f.wickDownColor=f.wickColor)})(t);const r=bn(Zs(sT),Zs(e.defaultOptions),t),o=e.YM,c=new pm(this.Yp.Qt(),e.type,r,o,e.KM);this.Yp.Qt().Fd(c,i);const h=new y8(c,this,this,this,this.$M,(f=>this.XM(f)));return this.OM.set(h,c),this.NM.set(c,h),h}GM(e){const t=this.Yp.Qt();t.Od(e.Et.vc,e.Et.sM,e.Et.nM),e.F_.forEach(((i,r)=>r.ht(i.le,i.iM))),t.Et().Ju(),t.Sc()}JM(e){return sn(this.NM.get(e))}qM(e){const t=new Map;e.Vg.forEach(((r,o)=>{const c=o.wh(),h=Yd(c)(r);if(c!=="Custom")Ri(GO(h));else{const f=o.hl();Ri(!f||f(h)===!1)}t.set(this.JM(o),h)}));const i=e.Ig!==void 0&&this.NM.has(e.Ig)?this.JM(e.Ig):void 0;return{time:e.Gr,logical:e.js,point:e.Rg,paneIndex:e.Dg,hoveredSeries:i,hoveredObjectId:e.Bg,seriesData:t,sourceEvent:e.Eg}}XM(e){let t=this.Xc.get(e);return t||(t=new p8(this.Yp,(i=>this.JM(i)),e,this),this.Xc.set(e,t)),t}}function _8(n){if(Ku(n)){const e=document.getElementById(n);return Ri(e!==null,`Cannot find element in DOM with id=${n}`),e}return n}function w8(n,e,t){const i=_8(n),r=new b8(i,e,t);return e.setOptions(r.options()),r}function x8(n,e){return w8(n,new Z2,Z2.pf(e))}class E8 extends xT{constructor(e,t){super(e,t,!1)}mM(e,t,i){t.mc(this.aM,I0(this.lM)),e.Zo(this.aM,i,I0(this.lM))}Lb(e,t,i){return{wt:e,Hr:t.Wt[0],Ur:t.Wt[1],$r:t.Wt[2],qr:t.Wt[3],_t:NaN,Go:NaN,Xo:NaN,Jo:NaN,Qo:NaN}}pM(){const e=this.ee.ga();this.aM=this.ee.Na().Dh().map((t=>this.tb(t.js,t,e)))}}class S8 extends Hl{constructor(){super(...arguments),this.jt=null,this.Ib=0}ht(e){this.jt=e}et(e){if(this.jt===null||this.jt.qs.length===0||this.jt.lt===null)return;const{horizontalPixelRatio:t}=e;this.Ib=(function(o,c){if(o>=2.5&&o<=4)return Math.floor(3*c);const h=1-.2*Math.atan(Math.max(4,o)-4)/(.5*Math.PI),f=Math.floor(o*h*c),m=Math.floor(o*c),g=Math.min(f,m);return Math.max(Math.floor(c),g)})(this.jt.ul,t),this.Ib>=2&&Math.floor(t)%2!=this.Ib%2&&this.Ib--;const i=this.jt.qs;this.jt.zb&&this.Ob(e,i,this.jt.lt),this.jt.Mi&&this.gm(e,i,this.jt.lt);const r=this.Nb(t);(!this.jt.Mi||this.Ib>2*r)&&this.Fb(e,i,this.jt.lt)}Ob(e,t,i){if(this.jt===null)return;const{context:r,horizontalPixelRatio:o,verticalPixelRatio:c}=e;let h="",f=Math.min(Math.floor(o),Math.floor(this.jt.ul*o));f=Math.max(Math.floor(o),Math.min(f,this.Ib));const m=Math.floor(.5*f);let g=null;for(let v=i.from;v<i.to;v++){const _=t[v];_.sh!==h&&(r.fillStyle=_.sh,h=_.sh);const w=Math.round(Math.min(_.Go,_.Qo)*c),S=Math.round(Math.max(_.Go,_.Qo)*c),R=Math.round(_.Xo*c),O=Math.round(_.Jo*c);let M=Math.round(o*_._t)-m;const F=M+f-1;g!==null&&(M=Math.max(g+1,M),M=Math.min(M,F));const H=F-M+1;r.fillRect(M,R,H,w-R),r.fillRect(M,S+1,H,O-S),g=F}}Nb(e){let t=Math.floor(1*e);this.Ib<=2*t&&(t=Math.floor(.5*(this.Ib-1)));const i=Math.max(Math.floor(e),t);return this.Ib<=2*i?Math.max(Math.floor(e),Math.floor(1*e)):i}gm(e,t,i){if(this.jt===null)return;const{context:r,horizontalPixelRatio:o,verticalPixelRatio:c}=e;let h="";const f=this.Nb(o);let m=null;for(let g=i.from;g<i.to;g++){const v=t[g];v.ih!==h&&(r.fillStyle=v.ih,h=v.ih);let _=Math.round(v._t*o)-Math.floor(.5*this.Ib);const w=_+this.Ib-1,S=Math.round(Math.min(v.Go,v.Qo)*c),R=Math.round(Math.max(v.Go,v.Qo)*c);if(m!==null&&(_=Math.max(m+1,_),_=Math.min(_,w)),this.jt.ul*o>2*f)M9(r,_,S,w-_+1,R-S+1,f);else{const O=w-_+1;r.fillRect(_,S,O,R-S+1)}m=w}}Fb(e,t,i){if(this.jt===null)return;const{context:r,horizontalPixelRatio:o,verticalPixelRatio:c}=e;let h="";const f=this.Nb(o);for(let m=i.from;m<i.to;m++){const g=t[m];let v=Math.round(Math.min(g.Go,g.Qo)*c),_=Math.round(Math.max(g.Go,g.Qo)*c),w=Math.round(g._t*o)-Math.floor(.5*this.Ib),S=w+this.Ib-1;if(g.th!==h){const R=g.th;r.fillStyle=R,h=R}this.jt.Mi&&(w+=f,v+=f,S-=f,_-=f),v>_||r.fillRect(w,v,S-w+1,_-v+1)}}}class T8 extends E8{constructor(){super(...arguments),this.cM=new S8}tb(e,t,i){return{...this.Lb(e,t,i),...i.gh(e)}}wM(){const e=this.ee.N();this.cM.ht({qs:this.aM,ul:this.re.Et().ul(),zb:e.wickVisible,Mi:e.borderVisible,lt:this.lM})}}const A8={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},YM:(n,e)=>new T8(n,e)};({...sT});const C8=()=>{const{user:n,refreshUser:e}=Mi(),t=$.useRef(null),i=$.useRef(null),[r,o]=$.useState([]),[c,h]=$.useState(0),[f,m]=$.useState(""),[g,v]=$.useState(null);$.useEffect(()=>{(async()=>{try{const O=await yn(Je(we,"users"));let M=0;O.forEach(E=>M+=E.data().balance||0);const F=M*.03,G=await(await fetch("https://api.binance.com/api/v3/klines?symbol=BTCUSDT&interval=1d&limit=365")).json(),X=parseFloat(G[G.length-1][4]),U=F/X,N=G.map(E=>({time:new Date(E[0]).toISOString().split("T")[0],open:parseFloat(E[1])*U,high:parseFloat(E[2])*U,low:parseFloat(E[3])*U,close:parseFloat(E[4])*U}));o(N),h(N[N.length-1].close)}catch{console.error("    ")}})()},[]),$.useEffect(()=>{if(!r.length||!t.current)return;const R=x8(t.current,{layout:{background:{type:M0.Solid,color:"transparent"},textColor:"#64748b",fontSize:10,fontFamily:"JetBrains Mono, monospace"},grid:{vertLines:{color:"rgba(255, 255, 255, 0.01)"},horzLines:{color:"rgba(255, 255, 255, 0.01)"}},width:t.current.clientWidth,height:280,timeScale:{borderVisible:!1},rightPriceScale:{borderVisible:!1},handleScroll:{mouseWheel:!0,pressedMouseMove:!0},handleScale:{axisPressedMouseMove:!0,mouseWheel:!0,pinch:!0}});R.addSeries(A8,{upColor:"#10b981",downColor:"#ef4444",borderVisible:!1,wickUpColor:"#10b981",wickDownColor:"#ef4444"}).setData(r),i.current=R;const M=()=>{t.current&&R.applyOptions({width:t.current.clientWidth})};return window.addEventListener("resize",M),()=>{window.removeEventListener("resize",M),R.remove()}},[r]);const _=async R=>{const O=Number(f),M=n?.balance||0;if(O<=0||O>M)return alert("__:    .");if(g)return alert("_:       .");if(!window.confirm(`_:   ${R==="buy"?"":""}  $${O.toLocaleString()}`))return;v({type:R,entryPrice:c,amount:O,startTime:Date.now()});const F=ze(we,"users",n.id);await pn(F,{balance:M-O}),await e()},w=async()=>{if(!g||!n)return;const O=(c-g.entryPrice)/g.entryPrice;let M=g.type==="buy"?g.amount*O:g.amount*-O;const F=g.amount+M,H=ze(we,"users",n.id);await pn(H,{balance:n.balance+F}),await Jf(Je(we,"activities"),{userId:n.id,message:`  : ${M>=0?"_":"_"} $${Math.abs(M).toFixed(2)}`,timestamp:Nt(),type:"trade"}),await e(),v(null),m("")};let S=0;if(g){const O=(c-g.entryPrice)/g.entryPrice;S=g.type==="buy"?g.amount*O:g.amount*-O}return d.jsxs("div",{className:"page-container fade-in",style:{padding:"0.75rem"},children:[d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"1.5rem"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{color:"var(--primary)",letterSpacing:"2px",fontSize:"0.6rem"},children:"_: __"}),d.jsx("h1",{className:"text-gradient",style:{fontSize:"1.6rem",margin:0},children:" "})]}),d.jsxs("div",{className:"system-status",style:{width:"fit-content"},children:[d.jsx("div",{className:"status-dot"}),d.jsx("span",{className:"micro-label",style:{fontSize:"0.5rem"},children:"__"})]})]}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[d.jsxs("div",{className:"card card-glow",style:{padding:"1rem",border:"1px solid var(--border-bright)",position:"relative"},children:[d.jsx("div",{className:"scanline"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{opacity:.5,fontSize:"0.55rem"},children:" "}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem"},children:[d.jsx(j5,{size:12,color:"var(--primary)"}),d.jsx("span",{className:"mono",style:{fontSize:"0.9rem",fontWeight:"900"},children:"BTC / SOV"})]})]}),d.jsxs("div",{style:{textAlign:"left"},children:[d.jsx("p",{className:"micro-label",style:{opacity:.5,fontSize:"0.55rem"},children:" "}),d.jsxs("div",{className:"mono",style:{fontSize:"0.9rem",fontWeight:"900",color:"white"},children:["$",c.toLocaleString()]})]})]}),d.jsx("div",{ref:t,style:{width:"100%",height:"280px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",padding:"0.5rem",border:"1px solid rgba(255,255,255,0.02)"}})]}),g?d.jsxs("div",{className:"card card-glow",style:{border:`1px solid ${S>=0?"var(--success)":"var(--danger)"}`,padding:"1.25rem"},children:[d.jsx("div",{className:"scanline"}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsx(Fl,{size:18,color:S>=0?"var(--success)":"var(--danger)",className:"pulse"}),d.jsxs("h3",{className:"micro-label",style:{fontSize:"0.75rem"},children:[" : ",g.type==="buy"?"":""]})]}),d.jsx("div",{className:"status-badge connected",style:{fontSize:"0.5rem",background:S>=0?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",color:S>=0?"var(--success)":"var(--danger)"},children:" "})]}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[d.jsxs("div",{className:"card",style:{background:"rgba(255,255,255,0.02)",padding:"1rem",border:"1px solid var(--border-dim)"},children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.55rem",marginBottom:"0.25rem"},children:" "}),d.jsxs("div",{className:"mono",style:{fontSize:"1.2rem",fontWeight:"900"},children:["$",g.amount.toLocaleString()]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",marginTop:"0.4rem",opacity:.5},children:[d.jsx(wj,{size:10}),d.jsxs("span",{className:"micro-label",style:{fontSize:"0.5rem"},children:[" : $",g.entryPrice.toLocaleString()]})]})]}),d.jsxs("div",{className:"card",style:{background:S>=0?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)",padding:"1rem",border:`1px solid ${S>=0?"var(--success)":"var(--danger)"}`,textAlign:"center"},children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.6rem"},children:" /  "}),d.jsxs("div",{className:"mono",style:{fontSize:"2rem",fontWeight:"900",color:S>=0?"var(--success)":"var(--danger)",margin:"0.5rem 0"},children:[S>=0?"+":"","$",S.toLocaleString()]}),d.jsxs("div",{className:"micro-label",style:{opacity:.6,fontSize:"0.55rem"},children:[" : ",(S/g.amount*100).toFixed(2),"%"]})]})]}),d.jsx("button",{onClick:w,className:"primary",style:{width:"100%",marginTop:"1.5rem",padding:"1rem",background:"rgba(255,255,255,0.05)",border:"1px solid var(--border-bright)",fontSize:"0.85rem",fontWeight:"900"},children:"   // "})]}):d.jsxs("div",{className:"card card-glow",style:{padding:"1.25rem",border:"1px solid var(--border-dim)"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[d.jsx(hr,{size:16,color:"var(--primary)"}),d.jsx("h3",{className:"micro-label",style:{fontSize:"0.75rem"},children:"   "})]}),d.jsxs("div",{className:"card",style:{background:"rgba(255,255,255,0.02)",border:"1px solid var(--border-bright)",padding:"1rem",marginBottom:"1rem"},children:[d.jsx("label",{className:"micro-label",style:{marginBottom:"0.5rem",display:"block",fontSize:"0.6rem"},children:"  ($)"}),d.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[d.jsx("span",{className:"mono",style:{position:"absolute",left:"0.5rem",color:"var(--primary)",fontSize:"1.2rem",fontWeight:"900"},children:"$"}),d.jsx("input",{type:"number",value:f,onChange:R=>m(R.target.value),placeholder:"0.00",className:"mono",style:{padding:"0.75rem 0.75rem 0.75rem 2rem",fontSize:"1.5rem",width:"100%",background:"rgba(0,0,0,0.3)",border:"none",borderBottom:"2px solid var(--primary)",color:"white",outline:"none"}})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"0.75rem",opacity:.6},children:[d.jsx("span",{className:"micro-label",style:{fontSize:"0.55rem"},children:" "}),d.jsxs("span",{className:"mono",style:{color:"var(--success)",fontSize:"0.7rem"},children:["$",(n?.balance||0).toLocaleString()]})]})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[d.jsxs("button",{onClick:()=>_("buy"),className:"primary",style:{padding:"1rem",background:"linear-gradient(135deg, #064e3b, #10b981)",fontSize:"0.85rem",fontWeight:"900",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.4rem"},children:[d.jsx(Su,{size:20})," "]}),d.jsxs("button",{onClick:()=>_("sell"),className:"primary",style:{padding:"1rem",background:"linear-gradient(135deg, #450a0a, #ef4444)",fontSize:"0.85rem",fontWeight:"900",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.4rem"},children:[d.jsx(zD,{size:20})," "]})]})]})]}),d.jsx("style",{children:`
                @media (max-width: 768px) {
                    .page-container { padding-bottom: 110px !important; }
                }
            `})]})},R8=()=>{const{user:n,refreshUser:e}=Mi(),{showAlert:t}=$u(),[i,r]=$.useState({}),[o,c]=$.useState(!1),[h,f]=$.useState(null),[m,g]=$.useState(null),[v,_]=$.useState(!1),[w,S]=$.useState(1),[R,O]=$.useState(!1),M=20,F=20,H=()=>S(I=>Math.min(I+.3,3)),G=()=>S(I=>Math.max(I-.3,.5)),X=()=>S(1);$.useEffect(()=>sa(Je(we,"game_map"),z=>{const k={};z.forEach(W=>{k[W.id]=W.data()}),r(k)}),[]);const U=(I,z)=>{const k=`${I}_${z}`;return i[k]||{id:k,row:I,col:z,ownerId:null,ownerColor:null,points:0}},N=(I,z)=>{o&&(g(U(I,z)),O(!1))},E=I=>I>=1e6?(I/1e6).toFixed(1)+"M":I>=1e3?(I/1e3).toFixed(1)+"k":I,T=I=>I===0?0:.3+Math.min(I/5e3,.6),D=async()=>{if(!m||!h||!n)return;const I=h.type,z=m.ownerId===n.id;if(I==="Defense"&&!z)return t(m.ownerId?"_:  .":"_:    .");if(I==="Attack"&&z)return t("_:    .");_(!0);try{await Jn(we,async k=>{const W=ze(we,"users",n.id),K=ze(we,"game_map",m.id),j=await k.get(W),P=await k.get(K),ne=j.data()?.ownedWeapons||[],J=ne.findIndex(ee=>ee.id===h.id);if(J===-1||ne[J].quantity<1)throw new Error(" .");const re=[...ne];re[J].quantity-=1,k.update(W,{ownedWeapons:re});const V=P.exists()&&P.data().points||0,q=h.power||50;if(I==="Defense")k.set(K,{...m,ownerId:n.id,ownerColor:n.color,points:V+q},{merge:!0});else{const ee=V-q;k.set(K,{...m,ownerId:n.id,ownerColor:n.color,points:ee<=0?Math.abs(ee)||10:ee},{merge:!0})}}),g(null),await e()}catch(k){t(k.message)}_(!1)};return d.jsxs("div",{className:"page-container",style:{position:"relative",height:"100vh",padding:0,overflow:"hidden",background:"#020205"},children:[d.jsxs("div",{style:{position:"absolute",top:"1rem",right:"1rem",zIndex:50,textAlign:"right",pointerEvents:"none"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"0.4rem"},children:[d.jsx("p",{className:"micro-label",style:{color:"var(--primary)",fontSize:"0.55rem",letterSpacing:"1px"},children:"__"}),d.jsx(_D,{size:12,color:"var(--primary)",className:"radar-spin"})]}),d.jsx("h1",{className:"text-gradient",style:{margin:0,fontSize:"1.2rem"},children:" "})]}),d.jsxs("div",{style:{position:"absolute",top:"4rem",right:"1rem",zIndex:60,display:"flex",flexDirection:"column",gap:"0.5rem"},children:[d.jsx("button",{onClick:H,className:"map-ctrl-btn",children:d.jsx(V5,{size:18})}),d.jsx("button",{onClick:G,className:"map-ctrl-btn",children:d.jsx(aD,{size:18})}),d.jsx("button",{onClick:X,className:"map-ctrl-btn",children:d.jsx(ED,{size:14})})]}),d.jsx("div",{className:"map-viewport custom-scrollbar",children:d.jsx("div",{className:"grid-layer",style:{transform:`scale(${w})`,transformOrigin:"top right"},children:d.jsx("div",{className:"map-grid",style:{gridTemplateColumns:`repeat(${F}, 1fr)`},children:Array.from({length:M*F}).map((I,z)=>{const k=Math.floor(z/F),W=z%F,K=U(k,W),j=m?.id===K.id;return d.jsxs("div",{onClick:()=>N(k,W),className:`map-tile ${j?"targeted":""} ${o?"war-active":""}`,style:{"--owner-color":K.ownerColor||"transparent","--tile-opacity":T(K.points)},children:[d.jsx("div",{className:"tile-fill"}),d.jsx("div",{className:"tile-border"}),d.jsxs("span",{className:"tile-id",children:[String.fromCharCode(65+k),W+1]}),K.points>0&&d.jsx("span",{className:"tile-pts",children:E(K.points)}),j&&d.jsx("div",{className:"crosshair-overlay",children:d.jsx(am,{size:10})})]},K.id)})})})}),d.jsx("button",{onClick:()=>{c(!o),O(!o),o&&(f(null),g(null))},className:`war-main-fab ${o?"active":""}`,children:o?d.jsx(G5,{size:28}):d.jsx(N0,{size:28})}),o&&d.jsxs("div",{className:`tactical-drawer ${R?"open":"minimized"}`,children:[d.jsxs("div",{className:"drawer-handle",onClick:()=>O(!R),children:[d.jsx("div",{className:"handle-bar"}),d.jsx("p",{className:"micro-label",style:{fontSize:"0.6rem",marginTop:"4px"},children:R?" ":"  "})]}),d.jsxs("div",{className:"drawer-content",children:[d.jsxs("div",{className:"armory-status",children:[d.jsx(Fl,{size:10,className:"pulse",color:"var(--danger)"}),d.jsx("span",{className:"micro-label",style:{fontSize:"0.6rem"},children:h?` : ${h.name}`:"   -  "})]}),d.jsxs("div",{className:"weapon-scroll",children:[n?.ownedWeapons?.filter(I=>I.quantity>0).map((I,z)=>d.jsxs("div",{onClick:()=>f(I),className:`weapon-mini-card ${h?.id===I.id?"active":""}`,children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[d.jsx("span",{className:"w-name",children:I.name}),d.jsxs("span",{className:"w-qty",children:["x",I.quantity]})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[d.jsx(hr,{size:10,color:"var(--primary)"}),d.jsx("span",{className:"mono",style:{fontSize:"0.7rem"},children:I.power}),d.jsx("span",{className:`w-badge ${I.type==="Attack"?"atk":"def"}`,children:I.type==="Attack"?"":""})]})]},z)),(!n?.ownedWeapons||n.ownedWeapons.every(I=>I.quantity===0))&&d.jsx("p",{className:"micro-label",style:{padding:"1rem",textAlign:"center",width:"100%",opacity:.5},children:"    "})]})]})]}),m&&h&&d.jsx("div",{className:"strike-modal-overlay fade-in",children:d.jsxs("div",{className:"strike-modal-card",children:[d.jsx("div",{className:"scanline"}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[d.jsx(lm,{size:20,color:"var(--danger)"}),d.jsxs("h2",{className:"mono",style:{margin:0,fontSize:"1.4rem"},children:[String.fromCharCode(65+m.row),m.col+1]})]}),d.jsxs("div",{className:"strike-details",children:[d.jsxs("div",{className:"s-row",children:[d.jsx("span",{children:" :"})," ",d.jsx("span",{children:h.name})]}),d.jsxs("div",{className:"s-row",children:[d.jsx("span",{children:" :"})," ",d.jsx("span",{style:{color:"var(--primary)"},children:h.power})]}),d.jsxs("div",{className:"s-row",children:[d.jsx("span",{children:":"})," ",d.jsx("span",{children:m.ownerId?" ":" "})]})]}),d.jsxs("div",{className:"strike-btns",children:[d.jsx("button",{onClick:()=>g(null),className:"s-btn cancel",children:""}),d.jsx("button",{onClick:D,disabled:v,className:"s-btn confirm",children:v?d.jsx("div",{className:"neural-loader sm"}):" "})]})]})}),d.jsx("style",{children:`
                .map-viewport { height: 100%; width: 100%; overflow: auto; padding: 4rem 1rem 250px; direction: ltr; scroll-behavior: smooth; }
                .grid-layer { display: inline-block; padding: 4px; background: rgba(255,255,255,0.02); }
                .map-grid { display: grid; gap: 1px; }
                .map-tile { position: relative; width: 26px; height: 26px; background: rgba(255,255,255,0.03); }
                .tile-fill { position: absolute; inset: 0; background: var(--owner-color); opacity: var(--tile-opacity); }
                .tile-border { position: absolute; inset: 0; border: 0.2px solid rgba(255,255,255,0.05); }
                .map-tile.targeted .tile-border { border: 1.5px solid var(--danger); box-shadow: 0 0 8px var(--danger); }
                .tile-id { position: absolute; top: 1px; left: 1px; font-size: 5px; opacity: 0.3; color: #fff; }
                .tile-pts { position: absolute; bottom: 1px; right: 1px; font-size: 5.5px; font-weight: 900; color: #fff; }
                
                .map-ctrl-btn { width: 38px; height: 38px; border-radius: 12px; background: rgba(10,11,20,0.9); border: 1px solid var(--border-bright); color: #fff; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(10px); }
                
                .war-main-fab { position: fixed; bottom: 90px; right: 1.25rem; width: 60px; height: 60px; border-radius: 50%; background: #10111a; border: 1.5px solid var(--border-bright); color: #fff; z-index: 100; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
                .war-main-fab.active { background: var(--danger); border-color: #fff; box-shadow: 0 0 25px var(--danger-glow); }
                
                /* Tactical Drawer - Above Bottom Nav */
                .tactical-drawer { position: fixed; bottom: 85px; left: 0; width: 100%; background: rgba(8,9,16,0.98); backdrop-filter: blur(25px); border-top: 1.5px solid var(--border-bright); z-index: 90; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); border-radius: 24px 24px 0 0; }
                .tactical-drawer.minimized { height: 45px; transform: translateY(0); }
                .tactical-drawer.open { height: 180px; }
                
                .drawer-handle { height: 45px; display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; }
                .handle-bar { width: 40px; height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; }
                .drawer-content { padding: 0 1rem 1rem; }
                .armory-status { display: flex; alignItems: center; gap: 6px; margin-bottom: 0.75rem; opacity: 0.8; justify-content: center; }
                
                .weapon-scroll { display: flex; gap: 0.75rem; overflow-x: auto; padding-bottom: 0.5rem; scrollbar-width: none; }
                .weapon-mini-card { min-width: 135px; background: rgba(255,255,255,0.03); border: 1px solid var(--border-dim); padding: 0.6rem; border-radius: 12px; }
                .weapon-mini-card.active { border-color: var(--primary); background: rgba(99,102,241,0.1); }
                .w-name { font-size: 0.75rem; font-weight: 800; }
                .w-qty { font-size: 0.65rem; opacity: 0.5; }
                .w-badge { font-size: 0.5rem; padding: 1px 4px; border-radius: 3px; margin-left: auto; }
                .w-badge.atk { background: rgba(239,68,68,0.1); color: var(--danger); }
                .w-badge.def { background: rgba(99,102,241,0.1); color: var(--primary); }
                
                .strike-modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 200; display: flex; alignItems: center; justifyContent: center; padding: 1.5rem; backdrop-filter: blur(6px); direction: rtl; }
                .strike-modal-card { width: 100%; max-width: 320px; background: #0c0d14; border: 1.5px solid var(--border-bright); border-radius: 24px; padding: 1.5rem; position: relative; overflow: hidden; }
                .strike-details { display: flex; flex-direction: column; gap: 0.6rem; margin-bottom: 1.5rem; }
                .s-row { display: flex; justify-content: space-between; font-size: 0.8rem; border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 4px; }
                .strike-btns { display: flex; gap: 0.75rem; }
                .s-btn { flex: 1; padding: 0.85rem; border-radius: 12px; font-weight: 800; font-size: 0.85rem; border: none; }
                .s-btn.confirm { background: var(--danger); color: #fff; box-shadow: 0 0 15px var(--danger-glow); }
                .s-btn.cancel { background: rgba(255,255,255,0.05); color: #fff; border: 1px solid var(--border-dim); }
                
                .radar-spin { animation: spin 4s linear infinite; }
                @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
                @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }
                .pulse { animation: pulse 1.5s infinite; }
            `})]})},Wd={Gold:"",Uranium:"","Crude Oil":" ",Iron:"",Lithium:"",Copper:"","Natural Gas":" ",Aluminum:"",Silicon:"",Titanium:"",Coal:"",Silver:"",Diamond:"","Natural Rubber":" ",Nickel:"",Cobalt:"",Phosphate:"","Fresh Water":" ",Wood:"",Zinc:""},Xg=Object.keys(Wd),N8=[{id:1,name:"  ",req:["Silicon","Copper","Gold"],basePrice:4e4},{id:2,name:"  ",req:["Lithium","Cobalt","Nickel"],basePrice:1e6},{id:3,name:"  ",req:["Uranium","Iron","Fresh Water"],basePrice:9e9},{id:4,name:"  ",req:["Titanium","Aluminum","Natural Rubber"],basePrice:25e7},{id:5,name:"  ",req:["Silver","Silicon","Titanium"],basePrice:15e7},{id:6,name:"  ",req:["Aluminum","Lithium","Copper"],basePrice:12e4},{id:7,name:"  ",req:["Iron","Titanium","Natural Gas"],basePrice:6e8},{id:8,name:"  ",req:["Copper","Coal","Zinc"],basePrice:5e4},{id:9,name:"  ",req:["Iron","Copper","Aluminum"],basePrice:3e7},{id:10,name:"  ",req:["Fresh Water","Silver","Natural Gas"],basePrice:5e8},{id:11,name:"  ",req:["Silicon","Lithium","Gold"],basePrice:1200},{id:12,name:"  ",req:["Iron","Nickel","Crude Oil"],basePrice:12e7},{id:13,name:" ",req:["Silicon","Silver","Aluminum"],basePrice:15e3},{id:14,name:"  ",req:["Phosphate","Natural Gas","Fresh Water"],basePrice:800},{id:15,name:"  ",req:["Natural Rubber","Titanium","Silver"],basePrice:12e6},{id:16,name:"  ",req:["Iron","Wood","Aluminum"],basePrice:15e8},{id:17,name:"  ",req:["Copper","Silicon","Natural Rubber"],basePrice:45e3},{id:18,name:"  ",req:["Gold","Iron","Zinc"],basePrice:2e6},{id:19,name:"  ",req:["Titanium","Nickel","Crude Oil"],basePrice:1e7},{id:20,name:"  ",req:["Diamond","Silver","Copper"],basePrice:25e4}],I8=1e11,M8=()=>{const{user:n,refreshUser:e}=Mi(),{showAlert:t,showConfirm:i,showToast:r}=$u(),[o,c]=$.useState(0),[h,f]=$.useState({}),[m,g]=$.useState(1),[v,_]=$.useState({}),[w,S]=$.useState(!0),R=$.useCallback(async()=>{if(n){S(!0);try{const M=await yn(Je(we,"users"));let F=0;M.forEach(I=>F+=I.data().balance||0);const H=Math.max(1,F/I8);g(H);const G=n.resources||{};Xg.forEach(I=>{G[I]||(G[I]=0)}),f(G);const X=n.lastResourceClaim?.toDate()||new Date(0),N=Math.floor((new Date().getTime()-X.getTime())/864e5),E=On(Je(we,"game_map"),Wn("ownerId","==",n.id)),D=(await yn(E)).size;if(c(D),N>0&&D>0){const I=D*N,z={...G};Xg.forEach(k=>z[k]=(z[k]||0)+I),await pn(ze(we,"users",n.id),{resources:z,lastResourceClaim:Nt()}),f(z),await e()}else N>0&&await pn(ze(we,"users",n.id),{lastResourceClaim:Nt()})}catch{t("__:    .")}finally{S(!1)}}},[n,e,t]);$.useEffect(()=>{R()},[R]);const O=async M=>{const F=v[M.id]||0;if(F<=0)return t("_:   .");for(const X of M.req)if((h[X]||0)<F)return t(`_:  ${Wd[X]} .`);const H=M.basePrice*m*F;if(await i(`__:  ${F}x ${M.name}  : ${Dt(H)}`))try{await Jn(we,async X=>{const U=ze(we,"users",n.id),N=await X.get(U),E=N.data()?.resources||{};M.req.forEach(T=>E[T]-=F),X.update(U,{resources:E,balance:(N.data()?.balance||0)+H}),X.set(ze(Je(we,"activities")),{userId:n.id,message:` : ${F} ${M.name}`,timestamp:Nt(),type:"export"}),X.set(ze(Je(we,"news")),{type:"commerce",username:n.username,userColor:n.color,content:` : ${n.username}     ${M.name}.`,value:H,timestamp:Nt()})}),r(`_:   ${M.name}.`),_(X=>({...X,[M.id]:0})),R(),e()}catch{t("__:   .")}};return w?d.jsxs("div",{className:"page-container",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"60vh"},children:[d.jsx("div",{className:"neural-loader"}),d.jsx("p",{className:"micro-label",style:{marginLeft:"1rem",letterSpacing:"2px"},children:"   ..."})]}):d.jsxs("div",{className:"page-container fade-in",style:{padding:"0.75rem"},children:[d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",marginBottom:"2rem"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{color:"var(--primary)",letterSpacing:"2px",fontSize:"0.6rem"},children:"_: _"}),d.jsx("h1",{className:"text-gradient",style:{fontSize:"1.8rem",margin:0},children:" "})]}),d.jsxs("div",{className:"card card-glow",style:{padding:"0.6rem 1rem",background:"rgba(255,255,255,0.02)",border:"1px solid var(--border-bright)",borderRadius:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.6rem"},children:[d.jsx(qj,{size:16,color:"var(--primary)"}),d.jsx("p",{className:"micro-label",style:{fontSize:"0.6rem",opacity:.6},children:" "})]}),d.jsxs("span",{className:"mono",style:{fontSize:"1rem",fontWeight:"900",color:"var(--primary)"},children:["x",m.toFixed(4)]})]})]}),d.jsxs("div",{className:"card card-glow",style:{marginBottom:"1.5rem",padding:"1.25rem",borderRadius:"20px",border:"1px solid var(--border-bright)",position:"relative",overflow:"hidden"},children:[d.jsx("div",{className:"scanline"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[d.jsx(L5,{size:16,color:"var(--primary)"}),d.jsx("h3",{className:"micro-label",style:{fontSize:"0.75rem"},children:"  "})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[d.jsxs("div",{style:{textAlign:"center",padding:"0.75rem",background:"rgba(255,255,255,0.02)",borderRadius:"12px"},children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.55rem",opacity:.5},children:" "}),d.jsx("span",{className:"mono",style:{fontSize:"1.2rem",fontWeight:"900",color:"var(--primary)"},children:o})]}),d.jsxs("div",{style:{textAlign:"center",padding:"0.75rem",background:"rgba(255,255,255,0.02)",borderRadius:"12px"},children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.55rem",opacity:.5},children:" "}),d.jsxs("span",{className:"mono",style:{fontSize:"1.2rem",fontWeight:"900",color:"var(--success)"},children:["+",o]})]}),d.jsxs("div",{style:{textAlign:"center",padding:"0.75rem",background:"rgba(255,255,255,0.02)",borderRadius:"12px",gridColumn:"span 2"},children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.55rem",opacity:.5},children:"  "}),d.jsxs("span",{className:"mono",style:{fontSize:"1.2rem",fontWeight:"900",color:"var(--accent)"},children:[Object.values(h).reduce((M,F)=>M+F,0).toLocaleString()," "]})]})]})]}),d.jsxs("div",{className:"card card-glow",style:{marginBottom:"2.5rem",padding:"1.25rem",borderRadius:"20px",border:"1px solid var(--border-bright)"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[d.jsx(j5,{size:16,color:"var(--primary)"}),d.jsx("h3",{className:"micro-label",style:{fontSize:"0.75rem"},children:"  "})]}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.6rem"},children:Xg.map(M=>d.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",padding:"0.75rem",borderRadius:"10px",border:"1px solid var(--border-dim)"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.4rem"},children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.55rem",opacity:.4},children:Wd[M]}),d.jsx(C0,{size:10,style:{opacity:.2}})]}),d.jsx("p",{className:"mono",style:{fontSize:"1rem",fontWeight:"900",margin:0},children:h[M]?.toLocaleString()||0})]},M))})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.6rem",marginBottom:"1.5rem"},children:[d.jsx(D5,{size:20,color:"var(--warning)"}),d.jsx("h3",{className:"micro-label",style:{fontSize:"0.85rem"},children:"  "})]}),d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:N8.map(M=>{const F=M.basePrice*m,H=M.req.every(X=>(h[X]||0)>=1),G=Math.min(...M.req.map(X=>h[X]||0));return d.jsxs("div",{className:"card card-glow",style:{display:"flex",flexDirection:"column",padding:"1.25rem",border:H?"1px solid var(--border-bright)":"1px solid var(--border-dim)",opacity:H?1:.8,borderRadius:"16px"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[d.jsxs("div",{children:[d.jsx("h4",{style:{margin:0,fontSize:"1rem",fontWeight:"900"},children:M.name}),d.jsxs("p",{className:"micro-label",style:{color:"var(--success)",marginTop:"0.2rem",fontSize:"0.65rem"},children:[": ",Dt(F)]})]}),d.jsx(H5,{size:14,style:{opacity:.2}})]}),d.jsx("div",{style:{background:"rgba(0,0,0,0.2)",padding:"0.75rem",borderRadius:"10px",marginBottom:"1.25rem"},children:d.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem"},children:M.req.map(X=>d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.3rem 0.6rem",borderRadius:"6px",background:"rgba(255,255,255,0.03)",fontSize:"0.55rem"},children:[d.jsx("div",{style:{width:"5px",height:"5px",borderRadius:"50%",background:(h[X]||0)>0?"var(--primary)":"var(--danger)"}}),d.jsx("span",{style:{opacity:(h[X]||0)>0?1:.5},children:Wd[X]})]},X))})}),d.jsxs("div",{style:{marginTop:"auto",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[d.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[d.jsx("input",{type:"number",placeholder:"",value:v[M.id]||"",onChange:X=>_({...v,[M.id]:parseInt(X.target.value)||0}),className:"mono",style:{flex:1,fontSize:"0.9rem",padding:"0.6rem",background:"rgba(0,0,0,0.3)",border:"1px solid var(--border-dim)",borderRadius:"8px",color:"white",outline:"none"}}),d.jsxs("button",{onClick:()=>_({...v,[M.id]:G}),style:{padding:"0.6rem",background:"rgba(255,255,255,0.05)",border:"1px solid var(--border-dim)",borderRadius:"8px",color:"white",fontSize:"0.6rem"},children:[" (",G,")"]})]}),d.jsx("button",{onClick:()=>O(M),disabled:!H||!v[M.id],className:"primary",style:{width:"100%",padding:"0.8rem",fontSize:"0.85rem",background:H?"var(--primary)":"rgba(255,255,255,0.05)"},children:"  "})]})]},M.id)})}),d.jsx("style",{children:`
                @media (max-width: 768px) {
                    .page-container { padding-bottom: 110px !important; }
                }
            `})]})},k8=()=>{const{user:n,refreshUser:e}=Mi(),{showAlert:t,showConfirm:i,showPrompt:r,showToast:o}=$u(),[c,h]=$.useState("central"),[f,m]=$.useState(0),[g,v]=$.useState(.02),[_,w]=$.useState(""),[S,R]=$.useState([]),[O,M]=$.useState([]),[F,H]=$.useState([]),[G,X]=$.useState(!1),[U,N]=$.useState({maxAmount:1e6,interestRate:5,duration:48}),[E,T]=$.useState(!0);$.useEffect(()=>{n&&D()},[n]);const D=async()=>{T(!0);const K=await yn(Je(we,"users"));let j=0;K.forEach(ye=>j+=ye.data().balance||0),m(j);const ne=.02+.48*(j>0?(n?.balance||0)/j:0);v(ne);const J=Je(we,"loans"),re=On(J,Wn("borrowerId","==",n?.id),Wn("status","in",["active","overdue"])),V=On(J,Wn("lenderId","==",n?.id),Wn("status","in",["active","overdue"])),[q,ee]=await Promise.all([yn(re),yn(V)]),Q=[...q.docs,...ee.docs].map(ye=>({id:ye.id,...ye.data()}));R(Q.filter(ye=>ye.lenderId==="CENTRAL_BANK")),H(Q.filter(ye=>ye.lenderId!=="CENTRAL_BANK"));const te=On(Je(we,"loan_offers"),wu("createdAt","desc")),fe=await yn(te);M(fe.docs.map(ye=>({id:ye.id,...ye.data()})).filter(ye=>ye.lenderId!==n?.id)),T(!1)},I=async()=>{const K=Number(_);if(K<=0)return t("_:     .");const j=K*(1+g),P=new Date;if(P.setHours(P.getHours()+48),!!await i(`__:  ${Dt(K)}  ${(g*100).toFixed(2)}%`))try{await Jn(we,async J=>{const re=ze(we,"users",n.id),q=((await J.get(re)).data()?.balance||0)+K;J.update(re,{balance:q});const ee=ze(Je(we,"loans"));J.set(ee,{borrowerId:n.id,lenderId:"CENTRAL_BANK",originalAmount:K,remainingAmount:j,interestRate:g,totalDue:j,deadline:P,createdAt:Nt(),status:"active"}),J.set(ze(Je(we,"news")),{type:"loan",username:n.username,userColor:n.color,content:`       ${n.username}.    .`,value:K,timestamp:Nt()})}),w(""),D(),await e(),o("__:     .")}catch{t("_:     .")}},z=async()=>{if(U.maxAmount<=0)return t("__:       .");if(n.balance<U.maxAmount)return t("__:     .");if(await i(`_:  ${Dt(U.maxAmount)}  ${U.interestRate}%  ${U.duration} `))try{await Jf(Je(we,"loan_offers"),{lenderId:n.id,lenderName:n.username,maxAmount:Number(U.maxAmount),interestRate:Number(U.interestRate)/100,durationHours:Number(U.duration),createdAt:Nt()}),X(!1),N({maxAmount:1e6,interestRate:5,duration:48}),D(),o("__:    .")}catch{t("_:    .")}},k=async(K,j)=>{const P=n?.balance||0;if(j<=0||j>P)return t("__:    .");if(await i(`_:   ${Dt(j)}   ${K.id.slice(0,8).toUpperCase()}`))try{await Jn(we,async J=>{const re=ze(we,"users",n.id);if(J.update(re,{balance:P-j}),K.lenderId!=="CENTRAL_BANK"){const ee=ze(we,"users",K.lenderId),Q=await J.get(ee);J.update(ee,{balance:(Q.data()?.balance||0)+j})}const V=K.remainingAmount-j,q=ze(we,"loans",K.id);V<=.1?J.update(q,{remainingAmount:0,status:"repaid"}):J.update(q,{remainingAmount:V})}),D(),await e(),o("_:    .")}catch{t("__:    .")}},W=K=>{const j=K?.seconds?new Date(K.seconds*1e3):K,P=new Date,ne=j?.getTime()-P.getTime();return!ne||ne<0?"":`${Math.floor(ne/36e5)}  ${Math.floor(ne%36e5/6e4)} `};return E?d.jsxs("div",{className:"page-container",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"60vh"},children:[d.jsx("div",{className:"neural-loader"}),d.jsx("p",{className:"micro-label",style:{marginLeft:"1rem",letterSpacing:"2px"},children:"    ..."})]}):d.jsxs("div",{className:"page-container fade-in",style:{padding:"0.75rem"},children:[d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",marginBottom:"2rem"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{color:"var(--primary)",letterSpacing:"2px",fontSize:"0.6rem"},children:"_: __"}),d.jsx("h1",{className:"text-gradient",style:{fontSize:"1.8rem",margin:0},children:" "})]}),d.jsxs("div",{style:{display:"flex",gap:"0.5rem",background:"rgba(255,255,255,0.02)",padding:"0.4rem",borderRadius:"12px",border:"1px solid var(--border-dim)"},children:[d.jsx("button",{onClick:()=>h("central"),className:`micro-label ${c==="central"?"primary":""}`,style:{flex:1,padding:"0.6rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.65rem"},children:" "}),d.jsx("button",{onClick:()=>h("p2p"),className:`micro-label ${c==="p2p"?"primary":""}`,style:{flex:1,padding:"0.6rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.65rem"},children:" "})]})]}),c==="central"?d.jsxs("div",{className:"fade-in",children:[d.jsxs("div",{className:"card card-glow",style:{marginBottom:"1.5rem",padding:"1.25rem",borderRadius:"20px",border:"1px solid var(--border-bright)"},children:[d.jsx("div",{className:"scanline"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.6rem",marginBottom:"1.5rem"},children:[d.jsx(Qy,{size:18,color:"var(--primary)"}),d.jsx("h3",{className:"micro-label",style:{fontSize:"0.75rem"},children:"   "})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"1.5rem"},children:[d.jsxs("div",{className:"card",style:{background:"rgba(255,255,255,0.02)",padding:"1rem",border:"1px solid var(--border-dim)"},children:[d.jsx("p",{className:"micro-label",style:{opacity:.5,fontSize:"0.55rem"},children:"    (R)"}),d.jsxs("div",{className:"mono",style:{fontSize:"0.9rem",fontWeight:"900"},children:[((n?.balance||0)/(f||1)*100).toFixed(4),"%"]})]}),d.jsxs("div",{className:"card",style:{background:"rgba(99, 102, 241, 0.05)",padding:"1rem",border:"1px solid var(--primary)"},children:[d.jsx("p",{className:"micro-label",style:{opacity:.5,fontSize:"0.55rem"},children:"  "}),d.jsxs("div",{className:"mono",style:{fontSize:"0.9rem",fontWeight:"900",color:"var(--primary)"},children:[(g*100).toFixed(2),"%"]})]})]}),d.jsxs("div",{className:"card",style:{background:"rgba(0,0,0,0.3)",padding:"1.25rem",border:"1px solid var(--border-bright)"},children:[d.jsx("p",{className:"micro-label",style:{marginBottom:"0.75rem",fontSize:"0.6rem"},children:"    ($)"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[d.jsxs("div",{style:{position:"relative"},children:[d.jsx("span",{className:"mono",style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--primary)",fontSize:"1.2rem"},children:"$"}),d.jsx("input",{type:"number",placeholder:"0.00",value:_,onChange:K=>w(K.target.value),className:"mono",style:{fontSize:"1.4rem",width:"100%",padding:"0.75rem 0.75rem 0.75rem 2rem",background:"rgba(0,0,0,0.4)",border:"none",borderBottom:"2px solid var(--primary)",color:"white",outline:"none"}})]}),d.jsx("button",{onClick:I,className:"primary",style:{padding:"1rem",fontSize:"0.9rem"},children:" "})]})]})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[d.jsx(Fl,{size:16,color:"var(--warning)"}),d.jsx("h3",{className:"micro-label",style:{fontSize:"0.7rem"},children:"  "})]}),d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:S.map(K=>d.jsx("div",{className:"card card-glow",style:{borderRight:"4px solid var(--warning)",padding:"1rem"},children:d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{opacity:.6,fontSize:"0.55rem"},children:"  "}),d.jsx("div",{className:"mono",style:{fontSize:"1.4rem",fontWeight:"900",color:"var(--warning)"},children:Dt(K.remainingAmount)}),d.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"0.25rem"},children:[d.jsx("span",{className:"micro-label",style:{fontSize:"0.55rem"},children:W(K.deadline)}),d.jsxs("span",{className:"micro-label",style:{color:"var(--warning)",fontSize:"0.55rem"},children:[": ",(K.interestRate*100).toFixed(1),"%"]})]})]}),d.jsx("button",{onClick:async()=>{const j=await r(" :    ",K.remainingAmount.toFixed(2));j&&k(K,Number(j))},className:"primary",style:{padding:"0.6rem 1rem",fontSize:"0.7rem",background:"transparent",border:"1px solid var(--border-bright)"},children:""})]})},K.id))})]}):d.jsxs("div",{className:"fade-in",children:[d.jsx("button",{onClick:()=>X(!0),className:"primary",style:{width:"100%",padding:"1rem",marginBottom:"1.5rem",background:"var(--accent)",fontSize:"0.85rem"},children:"  "}),G&&d.jsxs("div",{className:"card card-glow",style:{marginBottom:"1.5rem",padding:"1.25rem",border:"1px solid var(--accent)"},children:[d.jsx("h4",{className:"micro-label",style:{marginBottom:"1.25rem"},children:"  "}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.6rem"},children:"   ($)"}),d.jsx("input",{type:"number",value:U.maxAmount,onChange:K=>N({...U,maxAmount:Number(K.target.value)}),className:"mono",style:{width:"100%",padding:"0.6rem",background:"rgba(0,0,0,0.3)",border:"1px solid var(--border-dim)",color:"white"}})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.6rem"},children:"  (%)"}),d.jsx("input",{type:"number",value:U.interestRate,onChange:K=>N({...U,interestRate:Number(K.target.value)}),className:"mono",style:{width:"100%",padding:"0.6rem",background:"rgba(0,0,0,0.3)",border:"1px solid var(--border-dim)",color:"white"}})]}),d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.6rem"},children:" ()"}),d.jsx("input",{type:"number",value:U.duration,onChange:K=>N({...U,duration:Number(K.target.value)}),className:"mono",style:{width:"100%",padding:"0.6rem",background:"rgba(0,0,0,0.3)",border:"1px solid var(--border-dim)",color:"white"}})]})]}),d.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[d.jsx("button",{onClick:z,className:"primary",style:{flex:1,padding:"0.8rem",background:"var(--accent)"},children:" "}),d.jsx("button",{onClick:()=>X(!1),className:"primary",style:{padding:"0.8rem",background:"transparent",border:"1px solid var(--border-bright)"},children:""})]})]})]}),d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:O.map(K=>d.jsxs("div",{className:"card card-glow",style:{padding:"1rem",border:"1px solid var(--border-dim)"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[d.jsxs("p",{className:"micro-label",style:{color:"var(--accent)",fontSize:"0.65rem"},children:[": ",K.lenderName]}),d.jsxs("p",{className:"mono",style:{color:"var(--success)",fontWeight:"900",fontSize:"0.75rem"},children:[(K.interestRate*100).toFixed(0),"% "]})]}),d.jsxs("div",{className:"mono",style:{fontSize:"1.5rem",fontWeight:"900"},children:["$",K.maxAmount.toLocaleString()]}),d.jsxs("p",{className:"micro-label",style:{fontSize:"0.55rem",opacity:.5,marginTop:"0.5rem"},children:[" : ",K.durationHours," "]})]},K.id))}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"2rem",marginBottom:"1rem"},children:[d.jsx(Yj,{size:16,color:"var(--primary)"}),d.jsx("h3",{className:"micro-label",style:{fontSize:"0.7rem"},children:"   "})]}),d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:F.map(K=>{const j=K.lenderId===n?.id;return d.jsx("div",{className:"card card-glow",style:{borderRight:`4px solid ${j?"var(--success)":"var(--danger)"}`,padding:"1rem"},children:d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{color:j?"var(--success)":"var(--danger)",fontSize:"0.55rem"},children:j?" ":" "}),d.jsxs("div",{className:"mono",style:{fontSize:"1.2rem",fontWeight:"900",margin:"0.2rem 0"},children:["$",K.remainingAmount.toLocaleString()]}),d.jsx("p",{className:"micro-label",style:{opacity:.5,fontSize:"0.5rem"},children:j?`: ${K.borrowerId.slice(0,8)}`:`: ${K.lenderName}`})]}),!j&&d.jsx("button",{onClick:async()=>{const P=await r(" :",K.remainingAmount.toString());P&&k(K,Number(P))},className:"primary",style:{padding:"0.5rem 0.8rem",fontSize:"0.7rem",background:"transparent",border:"1px solid var(--border-bright)"},children:""})]})},K.id)})})]}),d.jsx("style",{children:`
                @media (max-width: 768px) {
                    .page-container { padding-bottom: 100px !important; }
                    .primary { border-radius: 12px; }
                }
            `})]})},j8=[{id:"e1",name:"NVIDIA H100 AI GPU",category:"Electronics",price:4e4,image:"https://images.unsplash.com/photo-1591405351990-4726e33df58d?w=400"},{id:"e2",name:"MacBook Pro M3 Max Bundle",category:"Electronics",price:3500,image:"https://images.unsplash.com/photo-1517336712461-481bf4886578?w=400"},{id:"e3",name:"Quantum Processor Unit",category:"Electronics",price:25e5,image:"https://images.unsplash.com/photo-1635070041078-e363dbe005cb?w=400"},{id:"e4",name:"5G Base Station Tower",category:"Electronics",price:5e4,image:"https://images.unsplash.com/photo-1544724569-5f546fd6f2b5?w=400"},{id:"e5",name:"Smart Glass AR Lens",category:"Electronics",price:1200,image:"https://images.unsplash.com/photo-1593508512255-86ab42a8e620?w=400"},{id:"e6",name:"Industrial Mining Rig",category:"Electronics",price:15e3,image:"https://images.unsplash.com/photo-1624344565890-48e026521991?w=400"},{id:"e7",name:"Supercomputer Server Rack",category:"Electronics",price:12e5,image:"https://images.unsplash.com/photo-1558494949-ef010cbdcc51?w=400"},{id:"e8",name:"OLED Transparent Display",category:"Electronics",price:8e3,image:"https://images.unsplash.com/photo-1585241936939-be4099591252?w=400"},{id:"e9",name:"Holographic Projector",category:"Electronics",price:25e3,image:"https://images.unsplash.com/photo-1535223289827-42f1e9919769?w=400"},{id:"e10",name:"Advanced Drone Swarm",category:"Electronics",price:45e3,image:"https://images.unsplash.com/photo-1508614589041-895b88991e3e?w=400"},{id:"e11",name:"Cybernetic Neural Link",category:"Electronics",price:95e3,image:"https://images.unsplash.com/photo-1507413245164-6160d8298b31?w=400"},{id:"e12",name:"Global Starlink Terminal",category:"Electronics",price:2500,image:"https://images.unsplash.com/photo-1446776811953-b23d57bd21aa?w=400"},{id:"e13",name:"Crypto Hardware Wallet Bulk",category:"Electronics",price:150,image:"https://images.unsplash.com/photo-1625806782236-07b1d9776077?w=400"},{id:"e14",name:"Biometric Security Door",category:"Electronics",price:3200,image:"https://images.unsplash.com/photo-1558002038-1055907df827?w=400"},{id:"e15",name:"8K Broadcast Camera",category:"Electronics",price:65e3,image:"https://images.unsplash.com/photo-1492691527719-9d1e07e534b4?w=400"},{id:"e16",name:"Smart City Sensor Kit",category:"Electronics",price:12e3,image:"https://images.unsplash.com/photo-1518770660439-4636190af475?w=400"},{id:"e17",name:"Exoskeleton Battery Pack",category:"Electronics",price:5500,image:"https://images.unsplash.com/photo-1563770660941-20978e870e26?w=400"},{id:"e18",name:"Silicon Wafer Grade-A",category:"Electronics",price:1200,image:"https://images.unsplash.com/photo-1550751827-4bd374c3f58b?w=400"},{id:"e19",name:"Nano-Soldering Station",category:"Electronics",price:850,image:"https://images.unsplash.com/photo-1555664424-778a1e5e1b48?w=400"},{id:"e20",name:"AI Edge Computing Hub",category:"Electronics",price:18e3,image:"https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=400"},{id:"a1",name:"Tesla Model S Plaid",category:"Automotive",price:9e4,image:"https://images.unsplash.com/photo-1617788130012-02ba73443c2e?w=400"},{id:"a2",name:"Caterpillar Mining Truck",category:"Automotive",price:35e5,image:"https://images.unsplash.com/photo-1578575437130-527eed3abbec?w=400"},{id:"a3",name:"Electric Delivery Van",category:"Automotive",price:45e3,image:"https://images.unsplash.com/photo-1605152276897-4f618f831968?w=400"},{id:"a4",name:"Hydrogen Fuel Cell Bus",category:"Automotive",price:55e4,image:"https://images.unsplash.com/photo-1544620347-c4fd4a3d5957?w=400"},{id:"a5",name:"Rolls-Royce Spectre",category:"Automotive",price:42e4,image:"https://images.unsplash.com/photo-1631214503851-a17144e0078a?w=400"},{id:"a6",name:"Armored Diplomatic SUV",category:"Automotive",price:25e4,image:"https://images.unsplash.com/photo-1533473359331-0135ef1b58bf?w=400"},{id:"a7",name:"Formula 1 Chassis",category:"Automotive",price:15e6,image:"https://images.unsplash.com/photo-1504670073073-6123e39e0754?w=400"},{id:"a8",name:"Agri-Drone Tractor",category:"Automotive",price:85e3,image:"https://images.unsplash.com/photo-1594132176002-393f60a92f02?w=400"},{id:"a9",name:"Luxury Superyacht Tender",category:"Automotive",price:12e4,image:"https://images.unsplash.com/photo-1567899378494-47b22a2ec96a?w=400"},{id:"a10",name:"EV Battery Chassis Pack",category:"Automotive",price:22e3,image:"https://images.unsplash.com/photo-1593941707882-a5bba14938c7?w=400"},{id:"a11",name:"Autonomous Semi-Truck",category:"Automotive",price:18e4,image:"https://images.unsplash.com/photo-1586191121278-2207506bc7b5?w=400"},{id:"a12",name:"VTOL Personal Air-Cab",category:"Automotive",price:35e4,image:"https://images.unsplash.com/photo-1473960104312-bf9e182f33c0?w=400"},{id:"a13",name:"Jet Ski Carbon Edition",category:"Automotive",price:25e3,image:"https://images.unsplash.com/photo-1531641001900-2d93708170c9?w=400"},{id:"a14",name:"Bullet Train Engine",category:"Automotive",price:45e6,image:"https://images.unsplash.com/photo-1532105956626-ce5e407b5e85?w=400"},{id:"a15",name:"Military Humvee Replica",category:"Automotive",price:15e4,image:"https://images.unsplash.com/photo-1552519507-da3b142c6e3d?w=400"},{id:"a16",name:"Forklift Industrial 5-Ton",category:"Automotive",price:35e3,image:"https://images.unsplash.com/photo-1519074063912-ad2a0522ed22?w=400"},{id:"a17",name:"Vintage 1967 Mustang",category:"Automotive",price:11e4,image:"https://images.unsplash.com/photo-1584345604476-8ec5e12e42dd?w=400"},{id:"a18",name:"Snowmobile Pro",category:"Automotive",price:18e3,image:"https://images.unsplash.com/photo-1551944296-c894c2f49430?w=400"},{id:"a19",name:"Garbage Truck EV",category:"Automotive",price:32e4,image:"https://images.unsplash.com/photo-1543167423-34612e226a42?w=400"},{id:"a20",name:"SpaceX Merlin Engine",category:"Automotive",price:1e6,image:"https://images.unsplash.com/photo-1541339907198-e08756ebafe3?w=400"},{id:"f1",name:"Herms Birkin Bag",category:"Fashion",price:25e3,image:"https://images.unsplash.com/photo-1584917033904-491a3482a61b?w=400"},{id:"f2",name:"Rolex Daytona Gold",category:"Fashion",price:45e3,image:"https://images.unsplash.com/photo-1587836374828-4dbaba94cf0e?w=400"},{id:"f3",name:"Limited Edition Sneaker Bulk",category:"Fashion",price:5e3,image:"https://images.unsplash.com/photo-1552346154-21d32810aba3?w=400"},{id:"f4",name:"Bulletproof Silk Suit",category:"Fashion",price:12e3,image:"https://images.unsplash.com/photo-1594932224011-00104899279b?w=400"},{id:"f5",name:"Diamond Encrusted Watch",category:"Fashion",price:15e4,image:"https://images.unsplash.com/photo-1524805444758-089113d48a6d?w=400"},{id:"f6",name:"Designer Handbag Lot",category:"Fashion",price:1e4,image:"https://images.unsplash.com/photo-1548036328-c9fa89d128fa?w=400"},{id:"f7",name:"Smart Fitness Ring",category:"Fashion",price:300,image:"https://images.unsplash.com/photo-1610940882244-18ac607d7c71?w=400"},{id:"f8",name:"E-Ink Smart T-Shirt",category:"Fashion",price:450,image:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=400"},{id:"f9",name:"Space Suit Replica",category:"Fashion",price:15e3,image:"https://images.unsplash.com/photo-1581092160562-40aa08e78837?w=400"},{id:"f10",name:"Italian Leather Boots",category:"Fashion",price:850,image:"https://images.unsplash.com/photo-1520639889313-7272a74b1c69?w=400"},{id:"f11",name:"Cashmere Wool Roll (100m)",category:"Fashion",price:25e3,image:"https://images.unsplash.com/photo-1574634534894-89d7576c8259?w=400"},{id:"f12",name:"Gold Necklace Set",category:"Fashion",price:3500,image:"https://images.unsplash.com/photo-1599643478518-a784e5dc4c8f?w=400"},{id:"f13",name:"Luxury Sunglasses Pack",category:"Fashion",price:2e3,image:"https://images.unsplash.com/photo-1511499767390-903390e6fbc1?w=400"},{id:"f14",name:"Cyberpunk Jacket",category:"Fashion",price:1200,image:"https://images.unsplash.com/photo-1551488831-00ddcb6c6bd3?w=400"},{id:"f15",name:"Royal Velvet Cape",category:"Fashion",price:7500,image:"https://images.unsplash.com/photo-1584559582128-b8be739912e1?w=400"},{id:"f16",name:"Heated Winter Coat",category:"Fashion",price:600,image:"https://images.unsplash.com/photo-1539533018447-63fcce2678e3?w=400"},{id:"f17",name:"Silk Scarf Collection",category:"Fashion",price:1500,image:"https://images.unsplash.com/photo-1520903920243-00d872a2d1c9?w=400"},{id:"f18",name:"Custom Tuxedo Service",category:"Fashion",price:5e3,image:"https://images.unsplash.com/photo-1507679799987-c73779587ccf?w=400"},{id:"f19",name:"Eco-Leather Tote",category:"Fashion",price:350,image:"https://images.unsplash.com/photo-1544816155-12df9643f363?w=400"},{id:"f20",name:"High-Fashion Fedora",category:"Fashion",price:250,image:"https://images.unsplash.com/photo-1514327605112-b887c0e61c0a?w=400"},{id:"u1",name:"Herman Miller Aeron Chair",category:"Furniture",price:1200,image:"https://images.unsplash.com/photo-1580480055273-228ff5388ef8?w=400"},{id:"u2",name:"Soundproof Office Pod",category:"Furniture",price:15e3,image:"https://images.unsplash.com/photo-1543269865-cbf427effbad?w=400"},{id:"u3",name:"Smart Glass Dining Table",category:"Furniture",price:4500,image:"https://images.unsplash.com/photo-1577146333195-bc6013a94828?w=400"},{id:"u4",name:"Anti-Gravity Bed",category:"Furniture",price:12e3,image:"https://images.unsplash.com/photo-1505693314120-0d443867891c?w=400"},{id:"u5",name:"Modular Sofa System",category:"Furniture",price:8e3,image:"https://images.unsplash.com/photo-1555041469-a586c61ea9bc?w=400"},{id:"u6",name:"Industrial Shelving Unit",category:"Furniture",price:3500,image:"https://images.unsplash.com/photo-1594420489714-257a050d2681?w=400"},{id:"u7",name:"Mahogany CEO Desk",category:"Furniture",price:5500,image:"https://images.unsplash.com/photo-1518455027359-f3f8164ba6bd?w=400"},{id:"u8",name:"Eames Lounge Chair",category:"Furniture",price:6e3,image:"https://images.unsplash.com/photo-1493663284031-b7e3aefcae8e?w=400"},{id:"u9",name:"Hydroponic Indoor Farm",category:"Furniture",price:4200,image:"https://images.unsplash.com/photo-1530836361253-efad5cb2f6de?w=400"},{id:"u10",name:"Fireproof Safe (Large)",category:"Furniture",price:2500,image:"https://images.unsplash.com/photo-1582139329536-e7284fece509?w=400"},{id:"u11",name:"Home Cinema Seating (10)",category:"Furniture",price:22e3,image:"https://images.unsplash.com/photo-1595944187418-5394463910b0?w=400"},{id:"u12",name:"Antique Persian Rug",category:"Furniture",price:35e3,image:"https://images.unsplash.com/photo-1596464716127-f2a82984de30?w=400"},{id:"u13",name:"Smart Mirror Wardrobe",category:"Furniture",price:5800,image:"https://images.unsplash.com/photo-1595428774223-ef52624120d2?w=400"},{id:"u14",name:"Outdoor Garden Gazebo",category:"Furniture",price:12e3,image:"https://images.unsplash.com/photo-1582281227099-c399622a6b03?w=400"},{id:"u15",name:"Standing Desk Pro-Series",category:"Furniture",price:950,image:"https://images.unsplash.com/photo-1593062096033-9a26b09da705?w=400"},{id:"u16",name:"Crystal Chandelier",category:"Furniture",price:15e3,image:"https://images.unsplash.com/photo-1540932239986-30128078f3c5?w=400"},{id:"u17",name:"Minimalist Bookcase",category:"Furniture",price:1200,image:"https://images.unsplash.com/photo-1594620302200-9a762244a156?w=400"},{id:"u18",name:"Ergonomic Gaming Station",category:"Furniture",price:4500,image:"https://images.unsplash.com/photo-1598550476439-6847785fce6e?w=400"},{id:"u19",name:"Solid Oak Bar Counter",category:"Furniture",price:7200,image:"https://images.unsplash.com/photo-1551133990-79860b240509?w=400"},{id:"u20",name:"Bean Bag Cloud XL",category:"Furniture",price:400,image:"https://images.unsplash.com/photo-1567016376408-0226e4d0c1ea?w=400"},{id:"o1",name:"1 Ton Wagyu Beef A5",category:"Food",price:5e4,image:"https://images.unsplash.com/photo-1544025162-d76694265947?w=400"},{id:"o2",name:"Saffron Grade-A (1kg)",category:"Food",price:6500,image:"https://images.unsplash.com/photo-1615484477778-ca3b77940c25?w=400"},{id:"o3",name:"Bluefin Tuna (Whole)",category:"Food",price:3e4,image:"https://images.unsplash.com/photo-1534120247760-c44c3e4a62f1?w=400"},{id:"o4",name:"Wheat Reserve (100 Tons)",category:"Food",price:35e3,image:"https://images.unsplash.com/photo-1574323347407-f5e1ad6d020b?w=400"},{id:"o5",name:"Vintage Wine Case 1945",category:"Food",price:15e4,image:"https://images.unsplash.com/photo-1510812431401-41d2bd2722f3?w=400"},{id:"o6",name:"Edible Gold Leaf Pack",category:"Food",price:5e3,image:"https://images.unsplash.com/photo-1519708227418-c8fd9a32b7a2?w=400"},{id:"o7",name:"Artisan Cheese Wheel",category:"Food",price:1200,image:"https://images.unsplash.com/photo-1452195100486-9cc805987862?w=400"},{id:"o8",name:"Wild Truffle (White)",category:"Food",price:12e3,image:"https://images.unsplash.com/photo-1551024601-bec78aea704b?w=400"},{id:"o9",name:"Coffee Beans (Panama)",category:"Food",price:800,image:"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=400"},{id:"o10",name:"Synthetic Meat Batch",category:"Food",price:15e3,image:"https://images.unsplash.com/photo-1607623273573-fb94d65371bc?w=400"},{id:"o11",name:"Organic Honey Bulk",category:"Food",price:2500,image:"https://images.unsplash.com/photo-1587049352846-4a222e784d38?w=400"},{id:"o12",name:"Beluga Caviar (500g)",category:"Food",price:5e3,image:"https://images.unsplash.com/photo-1544333323-5374c4310860?w=400"},{id:"o13",name:"Melted Glacier Water (1kL)",category:"Food",price:12e3,image:"https://images.unsplash.com/photo-1548839140-29a749e1cf4d?w=400"},{id:"o14",name:"Rare Tea Leaves (Da-Hong)",category:"Food",price:25e3,image:"https://images.unsplash.com/photo-1544787210-2211d24715ec?w=400"},{id:"o15",name:"Space-Grown Lettuce",category:"Food",price:300,image:"https://images.unsplash.com/photo-1556801712-76c826673874?w=400"},{id:"o16",name:"Dark Chocolate (Pure)",category:"Food",price:120,image:"https://images.unsplash.com/photo-1511381939415-e44015466834?w=400"},{id:"o17",name:"Sea Urchin Uni Box",category:"Food",price:2200,image:"https://images.unsplash.com/photo-1553621042-f6e147245754?w=400"},{id:"o18",name:"Energy Drink Concentrate",category:"Food",price:1500,image:"https://images.unsplash.com/photo-1622543925917-763c34d1538c?w=400"},{id:"o19",name:"Dehydrated Space Meals",category:"Food",price:450,image:"https://images.unsplash.com/photo-1599420186946-7b6fb4e297f0?w=400"},{id:"o20",name:"Infinite Shelf-Life Rice",category:"Food",price:5e3,image:"https://images.unsplash.com/photo-1586201327693-d6f4affdc09a?w=400"}],D8=async(n,e)=>{await Jn(we,async i=>{const r=ze(we,"users",n),c=(await i.get(r)).data();if((c?.balance||0)<1e10)throw new Error("Insufficient funds for Store License (10B)");i.update(r,{balance:(c?.balance||0)-1e10});const h=ze(Je(we,"stores"));i.set(h,{ownerId:n,name:e,createdAt:Nt(),items:[]})})},O8=async(n,e,t,i)=>{const r=t.price*i;await Jn(we,async o=>{const c=ze(we,"users",n),h=ze(we,"stores",e),f=await o.get(c),m=await o.get(h);if((f.data()?.balance||0)<r)throw new Error("Insufficient funds");const v=[...m.data().items||[]];v.push({id:Date.now().toString(),templateId:t.id,name:t.name,imageUrl:t.image,basePrice:t.price,quantity:i,status:"storage"}),o.update(c,{balance:(f.data()?.balance||0)-r}),o.update(h,{items:v})})},z8=async(n,e,t)=>{const i=ze(we,"stores",n);await Jn(we,async r=>{const o=await r.get(i);if(!o.exists())throw new Error("Store not found");const h=[...o.data().items],f=h.findIndex(m=>m.id===e);if(f===-1)throw new Error("Item not found");h[f].sellingPrice=t,h[f].status="for_sale",r.update(i,{items:h})})},P8=async(n,e,t)=>{await Jn(we,async i=>{const r=ze(we,"stores",e),o=ze(we,"users",n),c=await i.get(r);if(!c.exists())return;const h=[...c.data().items],f=h.findIndex(_=>_.id===t.id);if(f===-1)return;const m=(h[f].sellingPrice||0)*h[f].quantity;h.splice(f,1),i.update(r,{items:h});const g=await i.get(o);i.update(o,{balance:(g.data()?.balance||0)+m});const v=ze(Je(we,"activities"));i.set(v,{userId:n,message:`Store Sale: Sold batch of ${t.name} for $${m.toLocaleString()}`,timestamp:Nt(),type:"sale"})})},L8=()=>{const{user:n,refreshUser:e}=Mi(),[t,i]=$.useState(null),[r,o]=$.useState(!0),[c,h]=$.useState(!1),[f,m]=$.useState("Electronics"),[g,v]=$.useState(null),[_,w]=$.useState(10),[S,R]=$.useState(null),[O,M]=$.useState(0),[F,H]=$.useState("");$.useEffect(()=>{if(!n)return;const N=On(Je(we,"stores"),Wn("ownerId","==",n.id));return sa(N,T=>{T.empty?i(null):i({id:T.docs[0].id,...T.docs[0].data()}),o(!1)})},[n]),$.useEffect(()=>{if(!t||!t.items)return;const N=setInterval(()=>{t.items.forEach(E=>{if(E.status==="for_sale"&&E.sellingPrice){const T=E.sellingPrice/E.basePrice;let D=.05;T<1.2?D=.3:T<1.5?D=.15:T>3&&(D=.01),Math.random()<D&&P8(n.id,t.id,E).catch(console.error)}})},8e3);return()=>clearInterval(N)},[t,n]);const G=async()=>{if(!F.trim())return alert(" :   ");try{await D8(n.id,F)}catch(N){alert(N.message)}},X=async()=>{if(g)try{await O8(n.id,t.id,g,_),h(!1),v(null),e()}catch(N){alert(N.message)}},U=async()=>{if(S&&!(O<S.basePrice&&!window.confirm("_:     .  ")))try{await z8(t.id,S.id,O),R(null)}catch(N){alert(N.message)}};return r?d.jsxs("div",{className:"page-container",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"80vh"},children:[d.jsx("div",{className:"neural-loader"}),d.jsx("p",{className:"micro-label",style:{marginTop:"2rem",letterSpacing:"2px"},children:"   ..."})]}):t?d.jsxs("div",{className:"page-container fade-in",style:{padding:"0.75rem"},children:[d.jsxs("div",{className:"card card-glow",style:{marginBottom:"1.25rem",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 1.25rem"},children:[d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.2rem"},children:[d.jsx("div",{className:"status-dot"}),d.jsx("p",{className:"micro-label",style:{color:"var(--primary)",fontSize:"0.55rem"},children:" : "})]}),d.jsx("h1",{className:"text-gradient",style:{margin:0,fontSize:"1.2rem"},children:t.name})]}),d.jsxs("div",{style:{textAlign:"left"},children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.55rem"},children:"_"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem"},children:[d.jsx(lD,{size:12,color:"var(--primary)"}),d.jsxs("span",{className:"mono",style:{fontSize:"0.9rem",fontWeight:"900"},children:[t.items?.length||0," "]})]})]})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[d.jsx(yj,{size:16,color:"var(--primary)"}),d.jsx("h3",{className:"micro-label",style:{fontSize:"0.7rem",opacity:.7},children:"  "})]}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem"},children:t.items?.length>0?t.items.map(N=>d.jsxs("div",{className:"card card-glow",style:{padding:0,overflow:"hidden",border:N.status==="for_sale"?"1px solid var(--primary)":"1px solid var(--border-dim)",borderRadius:"16px"},children:[d.jsxs("div",{style:{height:"140px",position:"relative"},children:[d.jsx("img",{src:N.imageUrl,alt:N.name,style:{width:"100%",height:"100%",objectFit:"cover"}}),d.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(to top, rgba(10,11,20,0.9), transparent)"}}),d.jsx("div",{style:{position:"absolute",top:"10px",right:"10px"},children:d.jsx("span",{className:`status-badge ${N.status==="for_sale"?"connected":""}`,style:{fontSize:"0.55rem",padding:"0.2rem 0.5rem"},children:N.status==="for_sale"?"":" "})}),d.jsxs("div",{style:{position:"absolute",bottom:"0.75rem",left:"1rem"},children:[d.jsx("p",{className:"micro-label",style:{color:"var(--primary)",marginBottom:"0.1rem",fontSize:"0.5rem"},children:"  "}),d.jsx("p",{className:"mono",style:{margin:0,fontSize:"1.2rem",fontWeight:"900"},children:N.quantity.toString().padStart(3,"0")})]})]}),d.jsxs("div",{style:{padding:"1rem"},children:[d.jsx("h4",{style:{margin:"0 0 1rem",fontSize:"0.9rem"},children:N.name}),N.status==="storage"?d.jsxs("div",{className:"fade-in",children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem",background:"rgba(255,255,255,0.02)",padding:"0.6rem",borderRadius:"8px"},children:[d.jsx("span",{className:"micro-label",style:{opacity:.5,fontSize:"0.55rem"},children:" "}),d.jsxs("span",{className:"mono",style:{fontSize:"0.85rem"},children:["$",N.basePrice.toLocaleString()]})]}),d.jsx("button",{onClick:()=>{R(N),M(Math.round(N.basePrice*1.5))},className:"primary",style:{width:"100%",padding:"0.75rem",fontSize:"0.7rem"},children:"  "})]}):d.jsxs("div",{className:"fade-in",children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem"},children:[d.jsx(ND,{size:12,color:"var(--success)"}),d.jsx("span",{className:"micro-label",style:{color:"var(--success)",fontSize:"0.6rem"},children:" "})]}),d.jsxs("span",{className:"mono",style:{fontWeight:"900",color:"var(--success)",fontSize:"1rem"},children:["$",N.sellingPrice?.toLocaleString()]})]}),d.jsx("div",{style:{height:"3px",background:"var(--surface-soft)",borderRadius:"10px",overflow:"hidden",marginBottom:"0.75rem"},children:d.jsx("div",{className:"progress-fill",style:{width:"65%",height:"100%",background:"linear-gradient(90deg, transparent, var(--success))"}})}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",opacity:.4},children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.5rem"},children:"  AI"}),d.jsx("p",{className:"micro-label",style:{fontSize:"0.5rem"},children:" : 1.2x"})]})]})]})]},N.id)):d.jsxs("div",{className:"card",style:{padding:"4rem 1.5rem",textAlign:"center",borderStyle:"dashed",background:"transparent"},children:[d.jsx(w2,{size:40,color:"var(--border-bright)",style:{marginBottom:"1rem",opacity:.3}}),d.jsx("p",{className:"micro-label",style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"  .     ."}),d.jsx("button",{onClick:()=>h(!0),className:"primary",style:{marginTop:"1.5rem",padding:"0.75rem 1.5rem",fontSize:"0.8rem"},children:"  "})]})}),d.jsx("button",{onClick:()=>h(!0),className:"war-fab",style:{background:"var(--primary)",bottom:"90px",right:"1.25rem",width:"56px",height:"56px",borderRadius:"16px",boxShadow:"0 0 20px var(--primary-glow)",zIndex:80},children:d.jsx(V5,{size:28,color:"white"})}),c&&d.jsx("div",{className:"engagement-overlay fade-in",style:{padding:0,zIndex:2e3},children:d.jsxs("div",{className:"card",style:{width:"100%",height:"100vh",display:"flex",flexDirection:"column",padding:0,borderRadius:0,border:"none"},children:[d.jsxs("div",{style:{padding:"1.25rem",borderBottom:"1px solid var(--border-bright)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(10,11,20,0.95)",backdropFilter:"blur(10px)"},children:[d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",marginBottom:"0.1rem"},children:[d.jsx(w2,{size:12,color:"var(--primary)"}),d.jsx("p",{className:"micro-label",style:{color:"var(--primary)",fontSize:"0.55rem"},children:" : "})]}),d.jsx("h2",{style:{margin:0,fontSize:"1.1rem"},children:"  "})]}),d.jsx("button",{onClick:()=>h(!1),style:{background:"rgba(239,68,68,0.1)",border:"1px solid var(--danger)",color:"var(--danger)",borderRadius:"8px",padding:"0.5rem"},children:d.jsx(G5,{size:20})})]}),d.jsx("div",{style:{display:"flex",gap:"0.6rem",padding:"0.75rem",background:"rgba(0,0,0,0.4)",overflowX:"auto",borderBottom:"1px solid var(--border-dim)",scrollbarWidth:"none"},children:["Electronics","Automotive","Fashion","Furniture","Food"].map(N=>{const E={Electronics:"",Automotive:"",Fashion:"",Furniture:"",Food:""};return d.jsx("button",{onClick:()=>m(N),style:{background:f===N?"var(--primary)":"rgba(255,255,255,0.03)",color:f===N?"white":"var(--text-muted)",border:"1px solid "+(f===N?"var(--primary)":"var(--border-dim)"),whiteSpace:"nowrap",padding:"0.5rem 1rem",borderRadius:"10px",fontSize:"0.7rem",transition:"0.2s"},children:E[N]},N)})}),d.jsx("div",{style:{flex:1,overflowY:"auto",padding:"0.75rem",background:"#03040b",paddingBottom:"100px"},children:d.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:j8.filter(N=>N.category===f).map(N=>d.jsxs("div",{className:"card",onClick:()=>{v(N),w(10)},style:{cursor:"pointer",padding:0,overflow:"hidden",border:"1px solid var(--border-dim)"},children:[d.jsxs("div",{style:{height:"100px",position:"relative"},children:[d.jsx("img",{src:N.image,style:{width:"100%",height:"100%",objectFit:"cover",opacity:.8}}),d.jsx("div",{style:{position:"absolute",bottom:"0.4rem",right:"0.4rem",background:"rgba(0,0,0,0.7)",padding:"2px 6px",borderRadius:"4px"},children:d.jsxs("span",{className:"mono",style:{fontSize:"0.75rem",color:"var(--primary)",fontWeight:"bold"},children:["$",N.price.toLocaleString()]})})]}),d.jsx("div",{style:{padding:"0.6rem"},children:d.jsx("h4",{style:{margin:0,fontSize:"0.7rem",color:"white",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:N.name})})]},N.id))})})]})}),g&&d.jsx("div",{className:"engagement-overlay fade-in",style:{zIndex:3e3,background:"rgba(5,5,8,0.98)",padding:"1rem"},children:d.jsxs("div",{className:"engagement-card",style:{width:"100%",background:"var(--surface)",border:"1px solid var(--primary)",padding:"1.25rem",borderRadius:"24px"},children:[d.jsx("div",{className:"scanline"}),d.jsx("img",{src:g.image,style:{width:"100%",height:"180px",objectFit:"cover",borderRadius:"16px",border:"1px solid var(--border-bright)"}}),d.jsxs("div",{style:{margin:"1.25rem 0"},children:[d.jsx("p",{className:"micro-label",style:{color:"var(--primary)",fontSize:"0.55rem"},children:" "}),d.jsx("h2",{className:"mono",style:{fontSize:"1.3rem",margin:"0.2rem 0"},children:g.name})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"1.25rem"},children:[d.jsxs("div",{className:"intel-item",style:{background:"rgba(255,255,255,0.02)",padding:"0.75rem",borderRadius:"12px"},children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.5rem"},children:" "}),d.jsxs("p",{className:"mono",style:{color:"var(--primary)",fontSize:"0.9rem"},children:["$",g.price.toLocaleString()]})]}),d.jsxs("div",{className:"intel-item",style:{background:"rgba(255,255,255,0.02)",padding:"0.75rem",borderRadius:"12px"},children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.5rem"},children:" "}),d.jsx("p",{className:"mono",style:{fontSize:"0.75rem"},children:g.category})]})]}),d.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",padding:"1.25rem",borderRadius:"20px",border:"1px solid var(--border-dim)"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[d.jsx("label",{className:"micro-label",style:{fontSize:"0.6rem"},children:" "}),d.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:[10,50,100].map(N=>d.jsxs("button",{onClick:()=>w(N),style:{background:_===N?"var(--primary)":"transparent",border:"1px solid var(--primary)",color:"white",borderRadius:"6px",padding:"0.2rem 0.5rem",fontSize:"0.6rem"},children:[N,"U"]},N))})]}),d.jsx("input",{type:"number",value:_,onChange:N=>w(Math.max(1,Number(N.target.value))),className:"mono",style:{width:"100%",fontSize:"1.5rem",color:"var(--primary)",background:"transparent",border:"none",borderBottom:"1px solid var(--primary)",textAlign:"center",outline:"none"}}),d.jsxs("div",{style:{marginTop:"1rem",display:"flex",justifyContent:"space-between"},children:[d.jsx("span",{className:"micro-label",style:{opacity:.5,fontSize:"0.55rem"},children:"  "}),d.jsxs("span",{className:"mono",style:{color:"var(--warning)",fontSize:"1.1rem",fontWeight:"900"},children:["$",(_*g.price).toLocaleString()]})]})]}),d.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1.5rem"},children:[d.jsx("button",{onClick:X,disabled:(n?.balance||0)<_*g.price,className:"primary",style:{flex:2,padding:"1rem",fontSize:"0.9rem"},children:(n?.balance||0)<_*g.price?"  ":"  "}),d.jsx("button",{onClick:()=>v(null),className:"micro-label",style:{flex:1,background:"rgba(255,255,255,0.05)",border:"none",fontSize:"0.7rem"},children:""})]})]})}),S&&d.jsx("div",{className:"engagement-overlay fade-in",style:{zIndex:3e3,background:"rgba(5,5,8,0.95)",padding:"1rem"},children:d.jsxs("div",{className:"engagement-card",style:{width:"100%",border:"1px solid var(--success)",borderRadius:"24px",padding:"1.5rem"},children:[d.jsx("div",{className:"scanline"}),d.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"center",marginBottom:"1.25rem"},children:[d.jsx("img",{src:S.imageUrl,style:{width:"50px",height:"50px",borderRadius:"10px",objectFit:"cover"}}),d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{color:"var(--success)",fontSize:"0.55rem"},children:"  V3"}),d.jsx("h3",{className:"mono",style:{margin:0,fontSize:"1rem"},children:S.name})]})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"1.25rem"},children:[d.jsxs("div",{className:"intel-item",children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.5rem"},children:" "}),d.jsxs("p",{className:"mono",style:{fontSize:"0.85rem"},children:["$",S.basePrice.toLocaleString()]})]}),d.jsxs("div",{className:"intel-item",children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.5rem"},children:" "}),d.jsxs("p",{className:"mono",style:{fontSize:"0.85rem"},children:[S.quantity," "]})]})]}),d.jsxs("div",{style:{background:"var(--surface-soft)",padding:"1.25rem",borderRadius:"18px",border:"1px solid var(--success)",textAlign:"center"},children:[d.jsx("p",{className:"micro-label",style:{marginBottom:"0.5rem",opacity:.6,fontSize:"0.55rem"},children:"   "}),d.jsx("input",{type:"number",value:O,onChange:N=>M(Number(N.target.value)),className:"mono",style:{width:"100%",fontSize:"2rem",color:"var(--success)",background:"transparent",border:"none",borderBottom:"2px dashed var(--success)",textAlign:"center",fontWeight:"900",outline:"none"}}),d.jsxs("div",{style:{marginTop:"1rem",display:"flex",justifyContent:"center",gap:"1.5rem"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.5rem"},children:" "}),d.jsxs("p",{className:"mono",style:{color:"var(--success)",fontSize:"0.8rem"},children:["+",((O/S.basePrice-1)*100).toFixed(1),"%"]})]}),d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.5rem"},children:" "}),d.jsxs("p",{className:"mono",style:{color:"white",fontSize:"0.8rem"},children:["$",(O*S.quantity).toLocaleString()]})]})]})]}),d.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1.5rem"},children:[d.jsx("button",{onClick:U,className:"primary",style:{flex:2,background:"var(--success)",padding:"1rem",fontSize:"0.85rem"},children:"  "}),d.jsx("button",{onClick:()=>R(null),className:"micro-label",style:{flex:1,background:"rgba(255,255,255,0.05)",border:"none",fontSize:"0.7rem"},children:""})]})]})}),d.jsx("style",{children:`
                @media (max-width: 768px) {
                    .page-container { padding-bottom: 150px !important; }
                }
                .weapon-scroll::-webkit-scrollbar { display: none; }
            `})]}):d.jsx("div",{className:"page-container fade-in",style:{padding:"1rem",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"80vh"},children:d.jsxs("div",{className:"card card-glow",style:{textAlign:"center",padding:"2rem 1.5rem",borderStyle:"double",borderWidth:"3px"},children:[d.jsx("div",{className:"icon-action",style:{width:"60px",height:"60px",margin:"0 auto 1rem",background:"var(--primary-glow)",border:"1px solid var(--primary)",borderRadius:"15px"},children:d.jsx(sm,{size:30,color:"var(--primary)"})}),d.jsx("p",{className:"micro-label",style:{color:"var(--primary)",letterSpacing:"1px"},children:"  "}),d.jsx("h1",{className:"text-gradient",style:{fontSize:"1.6rem",margin:"0.5rem 0"},children:" "}),d.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1.5rem",fontSize:"0.8rem",lineHeight:"1.5"},children:"        .         ."}),d.jsxs("div",{style:{background:"var(--surface-soft)",padding:"1.25rem",borderRadius:"20px",border:"1px solid var(--border-bright)"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[d.jsx("span",{className:"micro-label",style:{fontSize:"0.6rem"},children:" "}),d.jsx("span",{className:"mono",style:{color:"var(--warning)",fontWeight:"bold",fontSize:"0.8rem"},children:"$10,000,000,000"})]}),d.jsx("input",{placeholder:"__",value:F,onChange:N=>H(N.target.value),className:"mono",style:{marginBottom:"1rem",textAlign:"center",fontSize:"1rem",padding:"0.8rem",background:"rgba(0,0,0,0.3)",width:"100%",border:"1px solid var(--border-bright)",color:"white"}}),d.jsx("button",{onClick:G,disabled:(n?.balance||0)<1e10,className:"primary",style:{width:"100%",padding:"1rem",fontSize:"0.85rem"},children:(n?.balance||0)<1e10?"   ":" "})]})]})})};var yx;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(yx||(yx={}));var vx;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(vx||(vx={}));var bx;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(bx||(bx={}));const _x=["user","model","function","system"];var wx;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(wx||(wx={}));var xx;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(xx||(xx={}));var Ex;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Ex||(Ex={}));var Sx;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(Sx||(Sx={}));var hu;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(hu||(hu={}));var Tx;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(Tx||(Tx={}));var Ax;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(Ax||(Ax={}));var Cx;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Cx||(Cx={}));class Li extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class tl extends Li{constructor(e,t){super(e),this.response=t}}class TT extends Li{constructor(e,t,i,r){super(e),this.status=t,this.statusText=i,this.errorDetails=r}}class ra extends Li{}class AT extends Li{}const V8="https://generativelanguage.googleapis.com",U8="v1beta",B8="0.24.1",F8="genai-js";var ao;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(ao||(ao={}));class H8{constructor(e,t,i,r,o){this.model=e,this.task=t,this.apiKey=i,this.stream=r,this.requestOptions=o}toString(){var e,t;const i=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||U8;let o=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||V8}/${i}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function q8(n){const e=[];return n?.apiClient&&e.push(n.apiClient),e.push(`${F8}/${B8}`),e.join(" ")}async function G8(n){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",q8(n.requestOptions)),t.append("x-goog-api-key",n.apiKey);let i=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(r){throw new ra(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${r.message}`)}for(const[r,o]of i.entries()){if(r==="x-goog-api-key")throw new ra(`Cannot set reserved header name ${r}`);if(r==="x-goog-api-client")throw new ra(`Header name ${r} can only be set using the apiClient field`);t.append(r,o)}}return t}async function $8(n,e,t,i,r,o){const c=new H8(n,e,t,i,o);return{url:c.toString(),fetchOptions:Object.assign(Object.assign({},Q8(o)),{method:"POST",headers:await G8(c),body:r})}}async function Yu(n,e,t,i,r,o={},c=fetch){const{url:h,fetchOptions:f}=await $8(n,e,t,i,r,o);return K8(h,f,c)}async function K8(n,e,t=fetch){let i;try{i=await t(n,e)}catch(r){Y8(r,n)}return i.ok||await W8(i,n),i}function Y8(n,e){let t=n;throw t.name==="AbortError"?(t=new AT(`Request aborted when fetching ${e.toString()}: ${n.message}`),t.stack=n.stack):n instanceof TT||n instanceof ra||(t=new Li(`Error fetching from ${e.toString()}: ${n.message}`),t.stack=n.stack),t}async function W8(n,e){let t="",i;try{const r=await n.json();t=r.error.message,r.error.details&&(t+=` ${JSON.stringify(r.error.details)}`,i=r.error.details)}catch{}throw new TT(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${t}`,n.status,n.statusText,i)}function Q8(n){const e={};if(n?.signal!==void 0||n?.timeout>=0){const t=new AbortController;n?.timeout>=0&&setTimeout(()=>t.abort(),n.timeout),n?.signal&&n.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}function s1(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Qd(n.candidates[0]))throw new tl(`${Gr(n)}`,n);return X8(n)}else if(n.promptFeedback)throw new tl(`Text not available. ${Gr(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Qd(n.candidates[0]))throw new tl(`${Gr(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Rx(n)[0]}else if(n.promptFeedback)throw new tl(`Function call not available. ${Gr(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Qd(n.candidates[0]))throw new tl(`${Gr(n)}`,n);return Rx(n)}else if(n.promptFeedback)throw new tl(`Function call not available. ${Gr(n)}`,n)},n}function X8(n){var e,t,i,r;const o=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(r=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)c.text&&o.push(c.text),c.executableCode&&o.push("\n```"+c.executableCode.language+`
`+c.executableCode.code+"\n```\n"),c.codeExecutionResult&&o.push("\n```\n"+c.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function Rx(n){var e,t,i,r;const o=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(r=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)c.functionCall&&o.push(c.functionCall);if(o.length>0)return o}const J8=[hu.RECITATION,hu.SAFETY,hu.LANGUAGE];function Qd(n){return!!n.finishReason&&J8.includes(n.finishReason)}function Gr(n){var e,t,i;let r="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)r+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(r+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(r+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((i=n.candidates)===null||i===void 0)&&i[0]){const o=n.candidates[0];Qd(o)&&(r+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(r+=`: ${o.finishMessage}`))}return r}function Au(n){return this instanceof Au?(this.v=n,this):new Au(n)}function Z8(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r={},c("next"),c("throw"),c("return"),r[Symbol.asyncIterator]=function(){return this},r;function c(_){i[_]&&(r[_]=function(w){return new Promise(function(S,R){o.push([_,w,S,R])>1||h(_,w)})})}function h(_,w){try{f(i[_](w))}catch(S){v(o[0][3],S)}}function f(_){_.value instanceof Au?Promise.resolve(_.value.v).then(m,g):v(o[0][2],_)}function m(_){h("next",_)}function g(_){h("throw",_)}function v(_,w){_(w),o.shift(),o.length&&h(o[0][0],o[0][1])}}const Nx=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function ez(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=nz(e),[i,r]=t.tee();return{stream:iz(i),response:tz(r)}}async function tz(n){const e=[],t=n.getReader();for(;;){const{done:i,value:r}=await t.read();if(i)return s1(sz(e));e.push(r)}}function iz(n){return Z8(this,arguments,function*(){const t=n.getReader();for(;;){const{value:i,done:r}=yield Au(t.read());if(r)break;yield yield Au(s1(i))}})}function nz(n){const e=n.getReader();return new ReadableStream({start(i){let r="";return o();function o(){return e.read().then(({value:c,done:h})=>{if(h){if(r.trim()){i.error(new Li("Failed to parse stream"));return}i.close();return}r+=c;let f=r.match(Nx),m;for(;f;){try{m=JSON.parse(f[1])}catch{i.error(new Li(`Error parsing JSON response: "${f[1]}"`));return}i.enqueue(m),r=r.substring(f[0].length),f=r.match(Nx)}return o()}).catch(c=>{let h=c;throw h.stack=c.stack,h.name==="AbortError"?h=new AT("Request aborted when reading from the stream"):h=new Li("Error reading from the stream"),h})}}})}function sz(n){const e=n[n.length-1],t={promptFeedback:e?.promptFeedback};for(const i of n){if(i.candidates){let r=0;for(const o of i.candidates)if(t.candidates||(t.candidates=[]),t.candidates[r]||(t.candidates[r]={index:r}),t.candidates[r].citationMetadata=o.citationMetadata,t.candidates[r].groundingMetadata=o.groundingMetadata,t.candidates[r].finishReason=o.finishReason,t.candidates[r].finishMessage=o.finishMessage,t.candidates[r].safetyRatings=o.safetyRatings,o.content&&o.content.parts){t.candidates[r].content||(t.candidates[r].content={role:o.content.role||"user",parts:[]});const c={};for(const h of o.content.parts)h.text&&(c.text=h.text),h.functionCall&&(c.functionCall=h.functionCall),h.executableCode&&(c.executableCode=h.executableCode),h.codeExecutionResult&&(c.codeExecutionResult=h.codeExecutionResult),Object.keys(c).length===0&&(c.text=""),t.candidates[r].content.parts.push(c)}r++}i.usageMetadata&&(t.usageMetadata=i.usageMetadata)}return t}async function CT(n,e,t,i){const r=await Yu(e,ao.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(t),i);return ez(r)}async function RT(n,e,t,i){const o=await(await Yu(e,ao.GENERATE_CONTENT,n,!1,JSON.stringify(t),i)).json();return{response:s1(o)}}function NT(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function Cu(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const t of n)typeof t=="string"?e.push({text:t}):e.push(t);return rz(e)}function rz(n){const e={role:"user",parts:[]},t={role:"function",parts:[]};let i=!1,r=!1;for(const o of n)"functionResponse"in o?(t.parts.push(o),r=!0):(e.parts.push(o),i=!0);if(i&&r)throw new Li("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!r)throw new Li("No content is provided for sending chat message.");return i?e:t}function az(n,e){var t;let i={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(t=e?.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const r=n.generateContentRequest!=null;if(n.contents){if(r)throw new ra("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=n.contents}else if(r)i=Object.assign(Object.assign({},i),n.generateContentRequest);else{const o=Cu(n);i.contents=[o]}return{generateContentRequest:i}}function Ix(n){let e;return n.contents?e=n:e={contents:[Cu(n)]},n.systemInstruction&&(e.systemInstruction=NT(n.systemInstruction)),e}function oz(n){return typeof n=="string"||Array.isArray(n)?{content:Cu(n)}:n}const Mx=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],lz={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function cz(n){let e=!1;for(const t of n){const{role:i,parts:r}=t;if(!e&&i!=="user")throw new Li(`First content should be with role 'user', got ${i}`);if(!_x.includes(i))throw new Li(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(_x)}`);if(!Array.isArray(r))throw new Li("Content should have 'parts' property with an array of Parts");if(r.length===0)throw new Li("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const h of r)for(const f of Mx)f in h&&(o[f]+=1);const c=lz[i];for(const h of Mx)if(!c.includes(h)&&o[h]>0)throw new Li(`Content with role '${i}' can't contain '${h}' part`);e=!0}}function kx(n){var e;if(n.candidates===void 0||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const i of t.parts)if(i===void 0||Object.keys(i).length===0||i.text!==void 0&&i.text==="")return!1;return!0}const jx="SILENT_ERROR";class uz{constructor(e,t,i,r={}){this.model=t,this.params=i,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,i?.history&&(cz(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var i,r,o,c,h,f;await this._sendPromise;const m=Cu(e),g={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(h=this.params)===null||h===void 0?void 0:h.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,m]},v=Object.assign(Object.assign({},this._requestOptions),t);let _;return this._sendPromise=this._sendPromise.then(()=>RT(this._apiKey,this.model,g,v)).then(w=>{var S;if(kx(w.response)){this._history.push(m);const R=Object.assign({parts:[],role:"model"},(S=w.response.candidates)===null||S===void 0?void 0:S[0].content);this._history.push(R)}else{const R=Gr(w.response);R&&console.warn(`sendMessage() was unsuccessful. ${R}. Inspect response object for details.`)}_=w}).catch(w=>{throw this._sendPromise=Promise.resolve(),w}),await this._sendPromise,_}async sendMessageStream(e,t={}){var i,r,o,c,h,f;await this._sendPromise;const m=Cu(e),g={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(h=this.params)===null||h===void 0?void 0:h.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,m]},v=Object.assign(Object.assign({},this._requestOptions),t),_=CT(this._apiKey,this.model,g,v);return this._sendPromise=this._sendPromise.then(()=>_).catch(w=>{throw new Error(jx)}).then(w=>w.response).then(w=>{if(kx(w)){this._history.push(m);const S=Object.assign({},w.candidates[0].content);S.role||(S.role="model"),this._history.push(S)}else{const S=Gr(w);S&&console.warn(`sendMessageStream() was unsuccessful. ${S}. Inspect response object for details.`)}}).catch(w=>{w.message!==jx&&console.error(w)}),_}}async function hz(n,e,t,i){return(await Yu(e,ao.COUNT_TOKENS,n,!1,JSON.stringify(t),i)).json()}async function dz(n,e,t,i){return(await Yu(e,ao.EMBED_CONTENT,n,!1,JSON.stringify(t),i)).json()}async function fz(n,e,t,i){const r=t.requests.map(c=>Object.assign(Object.assign({},c),{model:e}));return(await Yu(e,ao.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:r}),i)).json()}class Dx{constructor(e,t,i={}){this.apiKey=e,this._requestOptions=i,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=NT(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var i;const r=Ix(e),o=Object.assign(Object.assign({},this._requestOptions),t);return RT(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),o)}async generateContentStream(e,t={}){var i;const r=Ix(e),o=Object.assign(Object.assign({},this._requestOptions),t);return CT(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),o)}startChat(e){var t;return new uz(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const i=az(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),t);return hz(this.apiKey,this.model,i,r)}async embedContent(e,t={}){const i=oz(e),r=Object.assign(Object.assign({},this._requestOptions),t);return dz(this.apiKey,this.model,i,r)}async batchEmbedContents(e,t={}){const i=Object.assign(Object.assign({},this._requestOptions),t);return fz(this.apiKey,this.model,e,i)}}class IT{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new Li("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Dx(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,i){if(!e.name)throw new ra("Cached content must contain a `name` field.");if(!e.model)throw new ra("Cached content must contain a `model` field.");const r=["model","systemInstruction"];for(const c of r)if(t?.[c]&&e[c]&&t?.[c]!==e[c]){if(c==="model"){const h=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,f=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(h===f)continue}throw new ra(`Different value for "${c}" specified in modelParams (${t[c]}) and cachedContent (${e[c]})`)}const o=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new Dx(this.apiKey,o,i)}}const mz=[{id:"xo_med",name:"  ()",prizeTier:"A",icon:d.jsx(N0,{size:20}),desc:"  "},{id:"xo_hard",name:"  ()",prizeTier:"B",icon:d.jsx(N0,{size:20,color:"var(--danger)"}),desc:"   "},{id:"slots",name:" 7 ",prizeTier:"C",icon:d.jsx(hr,{size:20,color:"gold"}),desc:"  "},{id:"buckshot",name:" ",prizeTier:"D",icon:d.jsx(am,{size:20,color:"var(--danger)"}),desc:"   "},{id:"quiz",name:"  ",prizeTier:"E",icon:d.jsx(I5,{size:20}),desc:"  "}],pz=()=>{const{user:n,refreshUser:e}=Mi(),[t,i]=$.useState({A:0,B:0,C:0,D:0,E:0}),[r,o]=$.useState(null),[c,h]=$.useState(!0),[f,m]=$.useState(3),[g,v]=$.useState(Array(9).fill(null)),[_,w]=$.useState(null),[S,R]=$.useState([7,7,7]),[O,M]=$.useState(!1),[F,H]=$.useState({playerHp:0,dealerHp:0,rounds:[],msg:""}),[G,X]=$.useState(null),[U,N]=$.useState(!1);$.useEffect(()=>{(async()=>{const q=await yn(Je(we,"users"));let ee=0;q.forEach(te=>ee+=te.data().balance||0);const Q=ee/(q.size||1);i({A:Math.floor(Q*.005),B:Math.floor(Q*.01),C:Math.floor(Q*.015),D:Math.floor(Q*.02),E:Math.floor(Q*.01)}),h(!1)})()},[]);const E=$.useCallback(V=>{if(!n?.gameStats||!n.gameStats[V])return!1;const q=n.gameStats[V].lastPlayed?.toDate?.()||new Date(n.gameStats[V].lastPlayed);return new Date().getTime()-q.getTime()<864e5},[n]),T=V=>{if(E(V)){alert("  :   .    24 .");return}o(V),m(3),D()},D=()=>{v(Array(9).fill(null)),w(null),H({playerHp:0,dealerHp:0,rounds:[],msg:""}),X(null)},I=async V=>{if(!n)return;const q=ze(we,"users",n.id),ee=n.gameStats||{};ee[V]={lastPlayed:new Date},await pn(q,{gameStats:ee}),await e(),o(null)},z=async(V,q)=>{const ee=t[V];try{await Jn(we,async te=>{const fe=ze(we,"users",n.id),ye=await te.get(fe);te.update(fe,{balance:(ye.data()?.balance||0)+ee}),te.set(ze(Je(we,"activities")),{userId:n.id,type:"win",message:`  : $${Dt(ee)}  ${q}`,timestamp:Nt()})}),await e();const Q=f-1;m(Q),Q<=0?(alert(` :    $${Dt(ee)}.     24 .`),I(r)):(alert(` :   $${Dt(ee)}.  ${Q} .`),D())}catch{alert(" :   .")}},k=()=>{const V=f-1;m(V),V<=0?(alert(" :  .     24 ."),I(r)):(alert(` :  ${V} .`),D())},W=V=>{const q=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const[ee,Q,te]of q)if(V[ee]&&V[ee]===V[Q]&&V[ee]===V[te])return V[ee];return V.includes(null)?null:""},K=(V,q,ee)=>{const Q=W(V);if(Q==="O")return 10-q;if(Q==="X")return q-10;if(Q==="")return 0;if(ee){let te=-1/0;for(let fe=0;fe<9;fe++)if(V[fe]===null){V[fe]="O";const ye=K(V,q+1,!1);V[fe]=null,te=Math.max(ye,te)}return te}else{let te=1/0;for(let fe=0;fe<9;fe++)if(V[fe]===null){V[fe]="X";const ye=K(V,q+1,!0);V[fe]=null,te=Math.min(ye,te)}return te}},j=V=>{if(g[V]||_)return;const q=[...g];q[V]="X",v(q);const ee=W(q);if(ee){w(ee),ee==="X"?z(r==="xo_hard"?"B":"A"," "):k();return}setTimeout(()=>{const Q=[...q];let te=-1;if(r==="xo_hard"){let fe=-1/0;for(let ye=0;ye<9;ye++)if(Q[ye]===null){Q[ye]="O";const Ne=K(Q,0,!1);Q[ye]=null,Ne>fe&&(fe=Ne,te=ye)}}else{const fe=Q.map((ye,Ne)=>ye===null?Ne:null).filter(ye=>ye!==null);te=fe[Math.floor(Math.random()*fe.length)]}if(te!==-1){Q[te]="O",v(Q);const fe=W(Q);fe&&(w(fe),(fe==="O"||fe==="")&&k())}},500)},P=()=>{if(O)return;M(!0);let V=0;const q=setInterval(()=>{if(R([Math.floor(Math.random()*10),Math.floor(Math.random()*10),Math.floor(Math.random()*10)]),V++,V>20){clearInterval(q);const ee=[7,7,7,7,1,2,3,4,5,6],Q=[ee[Math.floor(Math.random()*10)],ee[Math.floor(Math.random()*10)],ee[Math.floor(Math.random()*10)]];R(Q),M(!1),Q[0]===7&&Q[1]===7&&Q[2]===7?z("C"," 7"):k()}},80)},ne=()=>{const V=Math.floor(Math.random()*3)+1,q=Math.floor(Math.random()*3)+1,ee=[];for(let Q=0;Q<V;Q++)ee.push("live");for(let Q=0;Q<q;Q++)ee.push("blank");for(let Q=ee.length-1;Q>0;Q--){const te=Math.floor(Math.random()*(Q+1));[ee[Q],ee[te]]=[ee[te],ee[Q]]}H({playerHp:3,dealerHp:3,rounds:ee,msg:` : ${V}  / ${q}   .`})},J=V=>{const q=F.rounds[0],ee=F.rounds.slice(1);let Q=F.playerHp,te=F.dealerHp,fe="";if(q==="live"?(fe=`:    ${V==="self"?"":""}.`,V==="self"?Q--:te--):fe=":  .",Q<=0){H(ye=>({...ye,playerHp:0,msg:" :   ."})),setTimeout(()=>k(),1500);return}if(te<=0){H(ye=>({...ye,dealerHp:0,msg:"  .  ."})),setTimeout(()=>z("D"," "),1500);return}V==="dealer"||V==="self"&&q==="live"?(setTimeout(()=>{if(ee.length===0){H(tt=>({...tt,rounds:[],msg:" .  ..."})),setTimeout(()=>ne(),1e3);return}const ye=ee[0],Ne=ee.slice(1);let Ae=Q,We=ye==="live"?" :  .":" :  .";ye==="live"&&Ae--,H(tt=>({...tt,playerHp:Ae,rounds:Ne,msg:We})),Ae<=0&&setTimeout(()=>k(),1500)},1e3),H({playerHp:Q,dealerHp:te,rounds:ee,msg:fe})):(H({playerHp:Q,dealerHp:te,rounds:ee,msg:fe+"   ."}),ee.length===0&&setTimeout(()=>ne(),1e3))},re=async()=>{N(!0);try{const V="YOUR_GEMINI_API_KEY_HERE",te=(await(await new IT(V).getGenerativeModel({model:"gemini-2.0-flash"}).generateContent("        JSON: {question, options[], correct, article}  ")).response).text().replace(/```json|```/g,"").trim();X(JSON.parse(te))}catch{alert("  :  .")}finally{N(!1)}};return c?d.jsxs("div",{className:"page-container",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"60vh"},children:[d.jsx("div",{className:"neural-loader"}),d.jsx("p",{className:"micro-label",style:{marginLeft:"1rem",letterSpacing:"2px"},children:"   ..."})]}):d.jsxs("div",{className:"page-container fade-in",style:{padding:"0.75rem"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{color:"var(--primary)",letterSpacing:"2px",fontSize:"0.6rem"},children:"_07: _"}),d.jsx("h1",{className:"text-gradient",style:{fontSize:"1.8rem",margin:0},children:" "})]}),d.jsx("div",{className:"card card-glow",style:{padding:"0.4rem 0.8rem",background:"rgba(255,255,255,0.02)",border:"1px solid var(--border-bright)",borderRadius:"10px"},children:d.jsx(Fl,{size:12,color:"var(--primary)",className:"pulse"})})]}),r?d.jsxs("div",{className:"card card-glow fade-in",style:{margin:"0 auto",border:"1px solid var(--border-bright)",position:"relative",overflow:"hidden",padding:"1.25rem"},children:[d.jsx("div",{className:"scanline"}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",borderBottom:"1px solid rgba(255,255,255,0.05)",paddingBottom:"1rem"},children:[d.jsxs("button",{onClick:()=>{window.confirm(" :   .  ")&&I(r)},className:"micro-label",style:{background:"rgba(239, 68, 68, 0.1)",color:"var(--danger)",padding:"0.4rem 0.8rem",borderRadius:"6px",border:"1px solid var(--danger)",fontSize:"0.6rem"},children:[d.jsx(im,{size:10}),"  "]}),d.jsxs("div",{style:{textAlign:"right"},children:[d.jsx("p",{className:"micro-label",style:{color:"var(--primary)",fontSize:"0.55rem"},children:" "}),d.jsxs("h3",{className:"mono",style:{fontSize:"1rem",margin:0},children:["0",f,"_SDR"]})]})]}),r.startsWith("xo")&&d.jsx("div",{style:{textAlign:"center"},children:_?d.jsx("div",{className:"fade-in",children:d.jsx("h2",{className:"text-gradient",style:{fontSize:"1.5rem",marginBottom:"1.5rem"},children:_==="X"?"  ":_===""?" ":" "})}):d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.5rem",maxWidth:"280px",margin:"20px auto"},children:g.map((V,q)=>d.jsx("button",{onClick:()=>j(q),className:"card",style:{height:"85px",fontSize:"2rem",fontWeight:"900",background:"rgba(0,0,0,0.3)",border:"1px solid var(--border-dim)",color:V==="X"?"var(--primary)":"var(--danger)",boxShadow:V?`0 0 15px ${V==="X"?"var(--primary-glow)":"rgba(239, 68, 68, 0.2)"}`:"none"},children:V},q))})}),r==="slots"&&d.jsxs("div",{style:{textAlign:"center"},children:[d.jsx("div",{className:"card",style:{background:"rgba(0,0,0,0.5)",border:"1px solid var(--border-bright)",padding:"1.5rem",borderRadius:"16px",marginBottom:"2rem"},children:d.jsx("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"center"},children:S.map((V,q)=>d.jsx("div",{className:`slot-reel ${O?"spinning":""}`,style:{width:"70px",height:"100px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"3rem",fontWeight:"900",border:"1.5px solid var(--border-bright)",background:"linear-gradient(to bottom, #111, #222, #111)",color:V===7?"gold":"white",borderRadius:"8px"},children:V},q))})}),d.jsx("button",{onClick:P,disabled:O,className:"primary",style:{padding:"1rem",fontSize:"1rem",width:"100%"},children:O?" ...":" "})]}),r==="buckshot"&&d.jsx("div",{style:{textAlign:"center"},children:F.playerHp?d.jsxs("div",{className:"fade-in",children:[d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"1.5rem"},children:[d.jsxs("div",{className:"card",style:{background:"rgba(16, 185, 129, 0.05)",border:"1px solid var(--success)",padding:"0.75rem"},children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.5rem"},children:" "}),d.jsx("div",{style:{display:"flex",gap:"4px",justifyContent:"center",margin:"0.5rem 0"},children:[...Array(3)].map((V,q)=>d.jsx("div",{className:`hp-pip ${q<F.playerHp?"active":""}`,style:{width:"15px",height:"5px",borderRadius:"1px",background:q<F.playerHp?"var(--success)":"rgba(255,255,255,0.05)"}},q))})]}),d.jsxs("div",{className:"card",style:{background:"rgba(239, 68, 68, 0.05)",border:"1px solid var(--danger)",padding:"0.75rem"},children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.5rem"},children:" "}),d.jsx("div",{style:{display:"flex",gap:"4px",justifyContent:"center",margin:"0.5rem 0"},children:[...Array(3)].map((V,q)=>d.jsx("div",{className:`hp-pip ${q<F.dealerHp?"active-red":""}`,style:{width:"15px",height:"5px",borderRadius:"1px",background:q<F.dealerHp?"var(--danger)":"rgba(255,255,255,0.05)"}},q))})]})]}),d.jsx("div",{className:"card",style:{background:"rgba(0,0,0,0.5)",padding:"1rem",marginBottom:"1.5rem",border:"1px solid var(--border-bright)"},children:d.jsx("p",{className:"mono",style:{fontSize:"0.8rem",color:"var(--primary)"},children:F.msg})}),d.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[d.jsx("button",{onClick:()=>J("dealer"),className:"primary",style:{flex:1,background:"var(--danger)",padding:"1rem",fontSize:"0.8rem"},children:"  "}),d.jsx("button",{onClick:()=>J("self"),className:"primary",style:{flex:1,background:"rgba(255,255,255,0.02)",border:"1px solid var(--border-bright)",padding:"1rem",fontSize:"0.8rem"},children:"  "})]})]}):d.jsxs("div",{style:{padding:"2rem 0"},children:[d.jsx(am,{size:40,color:"var(--danger)",style:{marginBottom:"1rem"}}),d.jsx("button",{onClick:ne,className:"primary",style:{width:"100%",padding:"1rem"},children:" "})]})}),r==="quiz"&&d.jsx("div",{className:"fade-in",children:U?d.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[d.jsx("div",{className:"neural-loader"}),d.jsx("p",{className:"micro-label",style:{marginTop:"1.5rem"},children:"  ..."})]}):G?d.jsxs("div",{children:[d.jsx("div",{className:"card",style:{background:"rgba(99, 102, 241, 0.05)",borderLeft:"3px solid var(--primary)",marginBottom:"1.5rem",padding:"1rem"},children:d.jsx("p",{className:"mono",style:{fontSize:"0.8rem",opacity:.8},children:G.article})}),d.jsx("h3",{className:"mono",style:{fontSize:"1rem",marginBottom:"1.5rem",textAlign:"center"},children:G.question}),d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:G.options.map((V,q)=>d.jsxs("button",{onClick:()=>{q===G.correct?z("E"," "):k()},className:"card card-glow",style:{padding:"1rem",textAlign:"right",display:"flex",alignItems:"center",gap:"1rem",borderRadius:"12px"},children:[d.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"var(--primary)"}}),d.jsx("span",{className:"mono",style:{fontSize:"0.85rem"},children:V})]},q))})]}):d.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[d.jsx(I5,{size:40,color:"var(--primary)",style:{marginBottom:"1rem"}}),d.jsx("button",{onClick:re,className:"primary",style:{width:"100%",padding:"1rem"},children:" "})]})})]}):d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:mz.map(V=>{const q=E(V.id);return d.jsxs("div",{className:`card card-glow ${q?"locked":""}`,onClick:()=>!q&&T(V.id),style:{padding:"1.25rem",position:"relative",border:q?"1px solid rgba(239, 68, 68, 0.2)":"1px solid var(--border-dim)"},children:[q&&d.jsxs("div",{style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.7)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:10,backdropFilter:"blur(3px)",borderRadius:"16px"},children:[d.jsx(VD,{size:24,color:"var(--danger)"}),d.jsx("p",{className:"micro-label",style:{color:"var(--danger)",fontSize:"0.7rem"},children:"  "})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[d.jsx("div",{style:{width:"40px",height:"40px",background:"rgba(255,255,255,0.03)",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"10px"},children:V.icon}),d.jsxs("div",{style:{textAlign:"right"},children:[d.jsx("p",{className:"micro-label",style:{fontSize:"0.5rem",opacity:.5},children:" "}),d.jsxs("span",{className:"mono",style:{color:"var(--primary)",fontWeight:"900",fontSize:"0.8rem"},children:["RANK_",V.prizeTier]})]})]}),d.jsx("h3",{style:{margin:"0 0 0.25rem",fontSize:"1.1rem"},children:V.name}),d.jsx("p",{className:"micro-label",style:{opacity:.5,fontSize:"0.65rem",marginBottom:"1.25rem"},children:V.desc}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderTop:"1px solid rgba(255,255,255,0.05)",paddingTop:"0.75rem"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{color:"var(--success)",fontSize:"0.5rem"},children:" "}),d.jsxs("p",{className:"mono",style:{color:"var(--success)",fontWeight:"900",fontSize:"1.2rem"},children:["$",(t[V.prizeTier]||0).toLocaleString()]})]}),d.jsx(yD,{size:16,color:"var(--primary)"})]})]},V.id)})}),d.jsx("style",{children:`
                .slot-reel.spinning { animation: reel-blur 0.1s linear infinite; }
                @keyframes reel-blur { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-3px); filter: blur(2px); } }
                .hp-pip.active { box-shadow: 0 0 8px var(--success); }
                .hp-pip.active-red { box-shadow: 0 0 8px var(--danger); }
                @media (max-width: 768px) { .page-container { padding-bottom: 110px !important; } }
            `})]})},gz=[{id:"bugatti_tourbillon",name:"Equinox Tourbillon",category:"HYPER-CAR",price:46e5,image:"https://robbreport.com/wp-content/uploads/2024/06/opener-w-Bugatti-3.jpg?w=1024",description:"Kinetic-Hybrid V16. 1800HP neural-linked drive system.",icon:d.jsx(Sd,{size:14})},{id:"superyacht_azzam",name:"Azzam Dreadnought",category:"VESSEL",price:6e8,image:"https://cdn.boatinternational.com/files/2020/11/b3933040-1f73-11eb-aea0-39fb4a27baf8-Azzam-G.Romero-1.jpg",description:"180m Fortress. Includes missile interception & dual helipads.",icon:d.jsx($c,{size:14})},{id:"patek_grandmaster",name:"Chronos Grandmaster",category:"HOROLOGY",price:31e6,image:"https://hodinkee.imgix.net/uploads/article/hero_image/2125/_img.jpg?ixlib=rails-1.1.0&fm=jpg&q=55&auto=format&usm=12",description:"Mechanical perfection. 20 complications, 214 parts.",icon:d.jsx(kg,{size:14})},{id:"penthouse_nyc",name:"Sky-Tier Arcology",category:"HABITAT",price:195e6,image:"https://iconiclife.com/wp-content/uploads/2020/06/New-York-penthouse-living-room-with-city-view.jpg",description:"Highest terrestrial residence. 360 orbital visibility.",icon:d.jsx(Gd,{size:14})},{id:"private_island",name:"Lanai Sovereign Zone",category:"TERRITORY",price:3e8,image:"https://www.thepinnaclelist.com/wp-content/uploads/2019/12/08-Aerial-View-of-Lanai-Hawaii-Lanai-The-Most-Expensive-Private-Island-Real-Estate-Transaction-in-History.jpg",description:"Autonomous Pacific zone. Full diplomatic immunity included.",icon:d.jsx(k5,{size:14})},{id:"private_jet_g700",name:"G700 Stealth-Liner",category:"AVIONICS",price:78e6,image:"https://assets.gulfstream.aero/thedotcom/images/aircraft/g700/d_g700_a_mkt_00041_v02_webPROD.jpg",description:"Mach 0.95 sustained cruise. Anti-radar signature paint.",icon:d.jsx(jg,{size:14})},{id:"koenigsegg_jesko",name:"Koenigsegg Jesko",category:"HYPER-CAR",price:3e6,image:"https://media.autoexpress.co.uk/image/private/s--X-WVjvBW--/f_auto,t_content-image-full-desktop@1/v1626443953/autoexpress/2021/07/Koenigsegg%20Jesko%202021%20official-7.jpg",description:"1600HP megacar with revolutionary Light Speed Transmission.",icon:d.jsx(Sd,{size:14})},{id:"sailing_yacht_a",name:"Sailing Yacht A",category:"VESSEL",price:6e8,image:"https://yachtharbour.com/static/images/n/large_3272_62b65.jpg",description:"143m futuristic sailing vessel with underwater observation pod.",icon:d.jsx($c,{size:14})},{id:"graff_hallucination",name:"Graff Hallucination",category:"HOROLOGY",price:55e6,image:"https://www.ablogtowatch.com/wp-content/uploads/2014/06/Graff-Hallucination-2.jpg",description:"Rainbow of rare colored diamonds in a quartz masterpiece.",icon:d.jsx(kg,{size:14})},{id:"villa_leopolda",name:"Villa Leopolda",category:"HABITAT",price:75e7,image:"https://static.wixstatic.com/media/ad6d43_fe4408565e9a4d2798d6e7af634a3428~mv2.jpg/v1/fill/w_1600,h_1065,al_c/ad6d43_fe4408565e9a4d2798d6e7af634a3428~mv2.jpg",description:"Iconic French Riviera palace with 50 acres of manicured grounds.",icon:d.jsx(Gd,{size:14})},{id:"pink_star_diamond",name:"Vivid Pink Star",category:"JEWELRY",price:712e5,image:"https://truval.com/wp-content/uploads/2024/09/ap_17088294714233_wide-6e3cafced209629a1d506eede8d8a2be9f216e9f.jpg",description:"59.6-carat flawless fancy vivid pink diamond. Apex of terrestrial rarity.",icon:d.jsx(Qa,{size:14})},{id:"salvator_mundi",name:"Salvator Mundi",category:"FINE ART",price:4503e5,image:"https://cdn.britannica.com/47/198847-050-49EA5BDE/Salvator-Mundi-oil-walnut-panel-Leonardo-da.jpg",description:"Attributed to Leonardo da Vinci. The Redeemer of the World.",icon:d.jsx(_2,{size:14})},{id:"mercedes_300_slr",name:"300 SLR Uhlenhaut Coup",category:"HYPER-CAR",price:143e6,image:"https://www.mercedes-benz.com/assets/sustainability/responsibility/300-slr/02-mercedes-benz-classic-300-slr-article-2022-2560x1440.jpeg",description:"1955 masterpiece. Most valuable automobile in existence.",icon:d.jsx(Sd,{size:14})},{id:"superyacht_azzam",name:"Azzam Dreadnought",category:"VESSEL",price:6e8,image:"https://cdn.boatinternational.com/files/2020/11/b3933040-1f73-11eb-aea0-39fb4a27baf8-Azzam-G.Romero-1.jpg",description:"180m Fortress. Includes missile interception & dual helipads.",icon:d.jsx($c,{size:14})},{id:"rolls_boat_tail",name:"Boat Tail Apex",category:"HYPER-CAR",price:28e6,image:"https://sportscardigest.com/wp-content/uploads/2022/05/Rolls-RoyceBoatTail-TheNextChapterLifestyleShoot_2-scaled-1.jpg",description:"Handcrafted bespoke coachbuilt masterpiece. One of three in existence.",icon:d.jsx(Sd,{size:14})},{id:"eclipse_yacht",name:"Eclipse Fortress",category:"VESSEL",price:15e8,image:"https://cdn.boatinternational.com/convert/bi_prd/bi/library_images/tEu9fPGOTiWwGsKi0GOM_Eclipse-lines.jpg/r[width]=1920/tEu9fPGOTiWwGsKi0GOM_Eclipse-lines.jpg",description:"162m mega-yacht with laser anti-paparazzi shield and private submarine.",icon:d.jsx($c,{size:14})},{id:"bbj_747",name:"BBJ Sovereign Palace",category:"AVIONICS",price:4e8,image:"https://d3trj3zqmkebtg.cloudfront.net/pics/221/221440_big.jpg",description:"Converted Boeing 747 with palace interiors, global non-stop range.",icon:d.jsx(jg,{size:14})},{id:"antilia",name:"Antilia Vertical Dominion",category:"HABITAT",price:2e9,image:"https://c8.alamy.com/comp/F6BX35/antilia-building-private-residence-indian-billionaire-mukesh-ambani-F6BX35.jpg",description:"27-story private skyscraper with hanging gardens, snow room, and 3 helipads.",icon:d.jsx(Gd,{size:14})},{id:"interchange_art",name:"Interchange Masterpiece",category:"FINE ART",price:3e8,image:"https://www.shutterstock.com/editorial/image-editorial/MaTdYey3N5jac2x8NTMzNzg=/willem-de-kooning-interchange-sold-more-than-1500w-16103397w.jpg",description:"Iconic abstract expressionist painting by Willem de Kooning.",icon:d.jsx(_2,{size:14})},{id:"grandmaster_chime",name:"Grandmaster Chime Ref. 6300",category:"HOROLOGY",price:31e6,image:"https://hodinkee.imgix.net/uploads/article/hero_image/2125/_img.jpg?ixlib=rails-1.1.0&fm=jpg&q=55&auto=format&usm=12",description:"World's most complicated wristwatch with 20 complications.",icon:d.jsx(kg,{size:14})},{id:"global_7500",name:"Global 7500 Ultra-Liner",category:"AVIONICS",price:81e6,image:"https://safefly.aero/wp-content/uploads/2024/07/Bombardier-Global-7500-private-jet-charter.png",description:"Longest-range business jet with four living zones and permanent bed.",icon:d.jsx(jg,{size:14})},{id:"oppenheimer_blue",name:"Oppenheimer Eternal Blue",category:"JEWELRY",price:575e5,image:"https://images.seattletimes.com/wp-content/uploads/2016/05/be72b1b8711945a6af3a20ec46f0c3fc.jpg?d=2040x1360",description:"14.62-carat flawless fancy vivid blue diamond.",icon:d.jsx(Qa,{size:14})},{id:"monaco_floating",name:"Monaco Floating City",category:"VESSEL",price:11e8,image:"https://www.thesun.co.uk/wp-content/uploads/2020/04/NINTCHDBPICT000579904096.jpg?strip=all&w=960",description:"Floating replica of Monaco with casino, grand prix track, and beaches.",icon:d.jsx($c,{size:14})},{id:"macallan_1926",name:"Macallan Adami 1926",category:"RARE COLLECTION",price:27e5,image:"https://robbreport.com.au/application/assets/2023/11/The-Macallan-1926-cropped.jpg.webp",description:"Single bottle of the world's most valuable whisky, hand-painted masterpiece.",icon:d.jsx(Qa,{size:14})}],yz=()=>{const{user:n,refreshUser:e}=Mi(),[t,i]=$.useState(null),r=c=>(c/1e6).toLocaleString("ar-EG",{minimumFractionDigits:0,maximumFractionDigits:1}),o=async c=>{if(n){if(n.balance<c.price)return alert("    ");if((n.possessions||[]).some(h=>h.id===c.id))return alert("      ");if(window.confirm(` : ${c.name} | : ${r(c.price)}  `)){i(c.id);try{await Jn(we,async h=>{const f=ze(we,"users",n.id),g=(await h.get(f)).data()?.balance||0;if(g<c.price)throw new Error("Funds too low");h.update(f,{balance:g-c.price,possessions:Py({id:c.id,name:c.name,category:c.category,price:c.price,image:c.image,purchasedAt:Nt()})}),h.set(ze(Je(we,"activities")),{userId:n.id,message:`    : ${c.name}`,timestamp:Nt(),type:"purchase"}),h.set(ze(Je(we,"news")),{type:"acquisition",username:n.username,userColor:n.color,content:`   : ${n.username}    ${c.name}!`,value:c.price,timestamp:Nt()})}),await e()}catch{alert("  ")}i(null)}}};return d.jsxs("div",{className:"page-container fade-in",style:{padding:"1rem"},children:[d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"2rem"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{color:"var(--primary)",fontSize:"0.6rem",letterSpacing:"2px"},children:"  "}),d.jsx("h1",{className:"text-gradient",style:{margin:0,fontSize:"1.8rem"},children:" "})]}),d.jsx("div",{className:"card",style:{padding:"0.4rem 0.75rem",background:"var(--surface-soft)",border:"1px solid var(--border-bright)",width:"fit-content"},children:d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem"},children:[d.jsx(Qa,{size:12,color:"var(--primary)"}),d.jsx("span",{className:"micro-label",style:{fontSize:"0.55rem"},children:"___"})]})})]}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1.25rem"},children:gz.map(c=>{const h=(n?.possessions||[]).some(f=>f.id===c.id);return d.jsxs("div",{className:"card card-glow",style:{padding:0,overflow:"hidden",border:h?"2px solid var(--success)":"1px solid var(--border-dim)",borderRadius:"20px"},children:[d.jsxs("div",{style:{height:"180px",position:"relative"},children:[d.jsx("img",{src:c.image,alt:c.name,style:{width:"100%",height:"100%",objectFit:"cover"}}),d.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(to top, rgba(0,0,0,0.85), transparent)"}}),d.jsxs("div",{style:{position:"absolute",top:"0.75rem",left:"0.75rem",background:"rgba(0,0,0,0.7)",backdropFilter:"blur(8px)",padding:"0.3rem 0.6rem",borderRadius:"6px",border:"1px solid var(--border-bright)",display:"flex",alignItems:"center",gap:"4px"},children:[c.icon," ",d.jsx("span",{className:"micro-label",style:{color:"white",fontSize:"0.55rem"},children:c.category})]}),d.jsxs("div",{style:{position:"absolute",bottom:"0.75rem",right:"0.75rem",textAlign:"left"},children:[d.jsx("p",{className:"micro-label",style:{color:"var(--primary)",marginBottom:"0.1rem",fontSize:"0.55rem"},children:" "}),d.jsxs("p",{className:"mono",style:{margin:0,fontSize:"1.4rem",fontWeight:"900",color:"white"},children:["$",r(c.price),"M"]})]})]}),d.jsxs("div",{style:{padding:"1.25rem"},children:[d.jsx("h3",{style:{margin:"0 0 0.4rem",fontSize:"1.1rem",color:"white"},children:c.name}),d.jsx("p",{className:"micro-label",style:{opacity:.6,lineHeight:"1.4",fontSize:"0.7rem",minHeight:"2rem"},children:c.description}),d.jsx("div",{style:{marginTop:"1.25rem"},children:h?d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.85rem",background:"rgba(16, 185, 129, 0.1)",border:"1px solid var(--success)",borderRadius:"12px",color:"var(--success)"},children:[d.jsx(Nj,{size:16}),d.jsx("span",{className:"micro-label",style:{fontWeight:"900",fontSize:"0.65rem"},children:"  "})]}):d.jsx("button",{onClick:()=>o(c),disabled:!!t,className:"primary",style:{width:"100%",padding:"0.85rem",fontSize:"0.85rem"},children:t===c.id?" ...":" "})})]})]},c.id)})}),d.jsx("div",{className:"card",style:{marginTop:"2.5rem",background:"rgba(0,0,0,0.3)",border:"1px dashed var(--border-dim)",textAlign:"center",padding:"1.25rem"},children:d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",opacity:.5},children:[d.jsx(A0,{size:12}),d.jsx("p",{className:"micro-label",style:{fontSize:"0.6rem",lineHeight:"1.4"},children:"     (SLI).     ."})]})}),d.jsx("style",{children:`
                @media (max-width: 768px) {
                    .page-container { padding-bottom: 110px !important; }
                }
            `})]})},vz=[{id:"home",name:" ",domain:"         .",icon:d.jsx(rm,{size:32})},{id:"loans",name:" ",domain:"   /    .",icon:d.jsx(Ky,{size:32})},{id:"weapons",name:" ",domain:"   /  .",icon:d.jsx(om,{size:32})},{id:"loot",name:" ",domain:"      .",icon:d.jsx(D5,{size:32})},{id:"map",name:" ",domain:"      .",icon:d.jsx(lm,{size:32})},{id:"transfers",name:"  ",domain:"      .",icon:d.jsx(nm,{size:32})},{id:"store",name:" ",domain:"       .",icon:d.jsx(sm,{size:32})},{id:"accounts",name:"  ",domain:"/     .",icon:d.jsx(cm,{size:32})},{id:"companies",name:" ",domain:"     .",icon:d.jsx(M5,{size:32})},{id:"games",name:" ",domain:"     .",icon:d.jsx(Fj,{size:32})},{id:"trading",name:" ",domain:"     .",icon:d.jsx(Dj,{size:32})},{id:"marketplace",name:" ",domain:"      .",icon:d.jsx(Qa,{size:32})},{id:"chat",name:" ",domain:"     .",icon:d.jsx(Yy,{size:32})},{id:"tech",name:" ",domain:"       .",icon:d.jsx(hr,{size:32})}],bz=()=>{const{user:n}=Mi(),{showAlert:e}=$u(),[t,i]=$.useState(null),[r,o]=$.useState([]),[c,h]=$.useState(""),[f,m]=$.useState(!1),[g,v]=$.useState(!1),_=$.useRef(null),w="YOUR_GEMINI_API_KEY_HERE";$.useEffect(()=>{_.current?.scrollIntoView({behavior:"smooth"})},[r]),$.useEffect(()=>{if(!t||!n)return;v(!0);const R=`${n.id}_${t.id}`,O=sa(ze(we,"council_chats",R),M=>{M.exists()?o(M.data().messages||[]):o([]),v(!1)});return()=>O()},[t,n]);const S=async()=>{if(!c.trim()||!t||!n)return;const R=c.trim();h(""),m(!0);const O=`${n.id}_${t.id}`,M=ze(we,"council_chats",O);try{const F=await qS(M);let H=0;const G=new Date().toDateString();if(F.exists()){const j=F.data();j.dailyUsage&&j.dailyUsage.date===G&&(H=j.dailyUsage.count)}if(H>=10){e("RATE_LIMIT_EXCEEDED: Minister capacity reached for today. Try again tomorrow."),m(!1);return}const X={role:"user",text:R,timestamp:new Date},U=[...r,X].slice(-10);o(U);const E=new IT(w).getGenerativeModel({model:"gemini-2.5-flash"}),T=r.map(j=>`${j.role==="user"?"Sovereign":"Minister"}: ${j.text}`).join(`
`),I=`${` ${t.name}     ${t.domain}    ${n.username||"User"}.   ''.     ${t.domain}.         .    ( ' ' ' ').        200 .`}

HISTORY:
${T}

Sovereign: ${R}
Minister:`,W={role:"model",text:(await E.generateContent(I)).response.text(),timestamp:new Date},K=[...U,W].slice(-10);await GS(M,{userId:n.id,ministerId:t.id,messages:K,dailyUsage:{date:G,count:H+1},lastUpdated:Et.now()},{merge:!0})}catch(F){console.error(F);const H=["  :    ...     !","NEURAL_OVERLOAD:     !     ","BLACK_ICE_DETECTED:     ...     ","SYSTEM_MALFUNCTION:   '        !' ","QUANTUM_FLUX_DISRUPTION:     ...    !","ADVISOR_OFFLINE:         ","ERROR_404:     ...     ","NEURAL_LINK_DISRUPTED:   ' ...    !' ","GLITCH_IN_THE_MATRIX:     ...    ","IMMINENT_SYSTEM_FAILURE:    !     API  "],G=H[Math.floor(Math.random()*H.length)];e(G);const X={role:"model",text:" [  ]     ...     .      ! ",timestamp:new Date};o(U=>[...U.slice(-9),X]),o(U=>U.slice(0,-1))}m(!1)};return t?d.jsxs("div",{className:"page-container fade-in",children:[d.jsxs("button",{onClick:()=>i(null),className:"micro-label",style:{background:"transparent",display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"2rem",border:"none",color:"var(--primary)",cursor:"pointer",letterSpacing:"2px"},children:[d.jsx(im,{size:16})," RETURN_TO_COUNCIL"]}),d.jsxs("div",{className:"card card-glow",style:{height:"80vh",display:"flex",flexDirection:"column",padding:0,overflow:"hidden"},children:[d.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid var(--border-dim)",background:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",gap:"1rem"},children:[d.jsx("div",{className:"login-icon-box",style:{width:"50px",height:"50px",margin:0},children:t.icon}),d.jsxs("div",{children:[d.jsx("h2",{style:{fontSize:"1.2rem",margin:0},children:t.name.toUpperCase()}),d.jsx("p",{className:"micro-label",style:{opacity:.6},children:t.domain})]})]}),d.jsxs("div",{className:"custom-scrollbar",style:{flex:1,padding:"2rem",overflowY:"auto",display:"flex",flexDirection:"column",gap:"1.5rem"},children:[g&&d.jsxs("div",{style:{textAlign:"center",padding:"2rem",opacity:.5},children:[d.jsx("div",{className:"neural-loader sm"}),d.jsx("p",{className:"micro-label",style:{marginTop:"1rem"},children:"ESTABLISHING_SECURE_LINK..."})]}),r.length===0&&!g&&d.jsxs("div",{style:{textAlign:"center",margin:"auto",opacity:.3},children:[d.jsx(v2,{size:48}),d.jsx("p",{className:"micro-label",style:{marginTop:"1rem"},children:"AWAITING_INQUIRY"})]}),r.map((R,O)=>d.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:R.role==="user"?"flex-end":"flex-start"},children:[d.jsx("div",{style:{maxWidth:"80%",padding:"1rem 1.5rem",borderRadius:"16px",background:R.role==="user"?"var(--primary)":"var(--surface-soft)",border:R.role==="user"?"none":"1px solid var(--border-dim)",color:R.role==="user"?"white":"var(--text-main)",boxShadow:R.role==="user"?"0 4px 15px var(--primary-glow)":"none",borderBottomRightRadius:R.role==="user"?"4px":"16px",borderBottomLeftRadius:R.role==="user"?"16px":"4px"},children:d.jsx("p",{style:{lineHeight:"1.6",fontSize:"0.95rem"},children:R.text})}),d.jsxs("span",{className:"micro-label",style:{marginTop:"0.5rem",opacity:.4,fontSize:"0.6rem"},children:[R.role==="user"?"SOVEREIGN":"ADVISOR"," // ",new Date(R.timestamp.seconds?R.timestamp.seconds*1e3:R.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]},O)),d.jsx("div",{ref:_})]}),d.jsx("div",{style:{padding:"1.5rem",background:"rgba(0,0,0,0.3)",borderTop:"1px solid var(--border-dim)"},children:d.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[d.jsx("input",{value:c,onChange:R=>h(R.target.value),onKeyDown:R=>R.key==="Enter"&&!f&&S(),placeholder:"Transmit orders or query...",disabled:f,style:{flex:1,background:"rgba(255,255,255,0.03)",border:"1px solid var(--border-dim)"}}),d.jsx("button",{onClick:S,disabled:f||!c.trim(),className:"primary",style:{width:"60px",padding:0,display:"flex",alignItems:"center",justifyContent:"center"},children:f?d.jsx("div",{className:"neural-loader sm"}):d.jsx(Wy,{size:20})})]})})]})]}):d.jsxs("div",{className:"page-container fade-in",children:[d.jsxs("div",{style:{marginBottom:"3rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"micro-label",style:{color:"var(--primary)",letterSpacing:"4px"},children:"ROYAL_CHAMBER"}),d.jsx("h1",{className:"text-gradient",style:{fontSize:"3rem"},children:"Advisory Council"})]}),d.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",opacity:.6},children:[d.jsx(v2,{size:18,color:"var(--primary)"}),d.jsx("span",{className:"micro-label",children:"14_ACTIVE_NODES"})]})]}),d.jsx("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))"},children:vz.map(R=>d.jsxs("div",{className:"card card-glow hover-trigger",onClick:()=>i(R),style:{padding:"2rem",cursor:"pointer",display:"flex",flexDirection:"column",gap:"1.5rem",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[d.jsx("div",{className:"login-icon-box",style:{width:"60px",height:"60px",margin:0,background:"rgba(255,255,255,0.03)"},children:R.icon}),d.jsx("div",{className:"icon-action",style:{background:"var(--primary-glow)"},children:d.jsx(hr,{size:16,color:"var(--primary)"})})]}),d.jsxs("div",{children:[d.jsx("h3",{style:{fontSize:"1.2rem",margin:"0 0 0.5rem",color:"var(--text-main)"},children:R.name}),d.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-muted)",lineHeight:"1.5"},children:R.domain})]}),d.jsx("div",{style:{marginTop:"auto",paddingTop:"1.5rem",borderTop:"1px solid rgba(255,255,255,0.05)"},children:d.jsx("button",{className:"micro-label",style:{width:"100%",background:"rgba(255,255,255,0.03)",border:"none",color:"var(--primary)",letterSpacing:"2px"},children:"INITIATE_UPLINK"})})]},R.id))})]})},_z=({type:n})=>{switch(n){case"acquisition":return d.jsx(Gd,{size:18,color:"var(--primary)"});case"conflict":return d.jsx(om,{size:18,color:"var(--danger)"});case"uplink":return d.jsx(nm,{size:18,color:"#a855f7"});case"loan":return d.jsx(Ky,{size:18,color:"var(--warning)"});case"commerce":return d.jsx(Su,{size:18,color:"var(--success)"});default:return d.jsx(U5,{size:18,color:"var(--primary)"})}},wz=()=>{const[n,e]=$.useState([]),[t,i]=$.useState(!0);return $.useEffect(()=>{const r=On(Je(we,"news"),wu("timestamp","desc"),w0(50));return sa(r,c=>{e(c.docs.map(h=>({id:h.id,...h.data()}))),i(!1)})},[]),t?d.jsxs("div",{className:"page-container",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"60vh"},children:[d.jsx("div",{className:"neural-loader"}),d.jsx("p",{className:"micro-label",style:{marginLeft:"1rem",letterSpacing:"2px"},children:"   ..."})]}):d.jsxs("div",{className:"page-container fade-in",style:{padding:"1rem"},children:[d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"2rem"},children:[d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[d.jsx("div",{className:"pulse-indicator",style:{background:"var(--danger)",width:"6px",height:"6px"}}),d.jsx("p",{className:"micro-label",style:{color:"var(--danger)",fontSize:"0.6rem",letterSpacing:"2px"},children:"____"})]}),d.jsx("h1",{className:"text-gradient",style:{fontSize:"1.8rem",margin:0},children:"  "})]}),d.jsx("div",{className:"system-status",style:{width:"fit-content",padding:"0.3rem 0.6rem"},children:d.jsxs("span",{className:"micro-label",style:{fontSize:"0.6rem"},children:[" : ",Math.floor(Math.random()*100)+50]})})]}),d.jsxs("div",{className:"news-feed",style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[n.map(r=>d.jsxs("div",{className:"card card-glow news-card",style:{padding:"1rem",borderLeft:`3px solid ${r.userColor||"var(--primary)"}`,background:"rgba(255,255,255,0.01)",position:"relative",overflow:"hidden",borderRadius:"16px"},children:[d.jsx("div",{className:"scanline",style:{opacity:.05}}),d.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-start"},children:[d.jsx("div",{className:"news-icon-box",style:{background:"rgba(0,0,0,0.3)",padding:"0.75rem",borderRadius:"10px",border:"1px solid var(--border-dim)",flexShrink:0},children:d.jsx(_z,{type:r.type})}),d.jsxs("div",{style:{flex:1,minWidth:0},children:[d.jsxs("div",{style:{display:"flex",flexDirection:"column",marginBottom:"0.5rem"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("span",{className:"mono",style:{color:r.userColor,fontWeight:"900",fontSize:"0.8rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:["@",r.username.toUpperCase()]}),d.jsx("span",{className:"mono",style:{fontSize:"0.55rem",opacity:.4},children:r.timestamp?.toDate()?.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),d.jsxs("span",{className:"micro-label",style:{opacity:.2,fontSize:"0.5rem",marginTop:"2px"},children:["__",r.id.substring(0,8).toUpperCase()]})]}),d.jsx("p",{className:"news-content",style:{fontSize:"0.9rem",lineHeight:"1.4",color:"white",margin:0,opacity:.9},children:r.content}),r.value&&d.jsx("div",{style:{marginTop:"0.75rem"},children:d.jsxs("span",{className:"status-badge connected",style:{fontSize:"0.6rem",padding:"0.2rem 0.5rem"},children:[": ",typeof r.value=="number"?`$${Dt(r.value)}`:r.value]})})]})]})]},r.id)),n.length===0&&d.jsxs("div",{style:{textAlign:"center",padding:"4rem 2rem",opacity:.3},children:[d.jsx(U5,{size:40,style:{marginBottom:"1rem"}}),d.jsx("p",{className:"micro-label",children:"    ..."})]})]}),d.jsx("style",{children:`
                .news-card {
                    transition: all 0.2s ease;
                }
                .news-card:active {
                    transform: scale(0.98);
                    background: rgba(255,255,255,0.05) !important;
                }
                .pulse-indicator {
                    width: 8px;
                    height: 8px;
                    border-radius: 50%;
                    position: relative;
                }
                .pulse-indicator::after {
                    content: '';
                    position: absolute;
                    inset: -3px;
                    border-radius: 50%;
                    border: 1.5px solid currentColor;
                    animation: ripple 2s infinite;
                }
                @keyframes ripple {
                    0% { transform: scale(1); opacity: 1; }
                    100% { transform: scale(3); opacity: 0; }
                }
                @media (max-width: 768px) {
                    .page-container { padding-bottom: 110px !important; }
                }
            `})]})},xz=[{path:"/",icon:d.jsx(wf,{size:18}),label:" "},{path:"/council",icon:d.jsx(k5,{size:18}),label:""},{path:"/map",icon:d.jsx(P5,{size:18}),label:" "},{path:"/news",icon:d.jsx(uD,{size:18}),label:" "},{path:"/loot",icon:d.jsx(L5,{size:18}),label:""},{path:"/store",icon:d.jsx(F5,{size:18}),label:""},{path:"/trading",icon:d.jsx(Su,{size:18}),label:""},{path:"/loans",icon:d.jsx(Ky,{size:18}),label:" "},{path:"/companies",icon:d.jsx(sm,{size:18}),label:""},{path:"/weapons",icon:d.jsx(om,{size:18}),label:""},{path:"/marketplace",icon:d.jsx(Qa,{size:18}),label:" "},{path:"/games",icon:d.jsx(BD,{size:18}),label:""},{path:"/transfers",icon:d.jsx(nm,{size:18}),label:""},{path:"/accounts",icon:d.jsx(cm,{size:18}),label:""},{path:"/chat",icon:d.jsx(Yy,{size:18}),label:""}],Ez=({isOpen:n,onClose:e})=>{const t=Is(),{logout:i}=Mi();return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:`sidebar-overlay ${n?"active":""}`,onClick:e}),d.jsxs("aside",{className:`app-sidebar ${n?"mobile-open":""}`,children:[d.jsxs("div",{className:"sidebar-header",children:[d.jsx("div",{className:"logo-box",children:d.jsx(hr,{size:18,className:"logo-spark"})}),d.jsx(yl,{to:"/",className:"sidebar-logo text-gradient",onClick:e,children:"K2_SOV"}),d.jsx("button",{className:"mobile-close-btn",onClick:e,children:d.jsx(b2,{size:18,style:{transform:"rotate(180deg)"}})})]}),d.jsxs("nav",{className:"sidebar-nav",children:[d.jsx("p",{className:"micro-label",style:{padding:"0 1rem",marginBottom:"0.5rem",opacity:.4},children:" "}),xz.map(r=>d.jsxs(yl,{to:r.path,className:`sidebar-link ${t.pathname===r.path?"active":""}`,onClick:e,children:[d.jsx("span",{className:"link-icon",children:r.icon}),d.jsx("span",{className:"link-text",children:r.label})]},r.path))]}),d.jsx("div",{className:"sidebar-footer",children:d.jsxs("button",{onClick:()=>{i(),e()},className:"logout-btn",children:[d.jsx(b2,{size:14}),d.jsx("span",{children:" "})]})})]})]})},Sz=({onMenuClick:n})=>{const{user:e}=Mi();return d.jsxs("header",{className:"app-header",children:[d.jsxs("div",{className:"header-left",children:[d.jsxs("button",{className:"mobile-menu-trigger",onClick:n,children:[d.jsx(wf,{size:18}),d.jsx("span",{className:"micro-label",children:""})]}),d.jsxs("div",{className:"system-status desktop-only",children:[d.jsx("div",{className:"status-dot pulse"}),d.jsx("span",{className:"micro-label",children:"_"})]}),d.jsxs("button",{className:"desktop-menu-trigger",onClick:n,children:[d.jsx(wf,{size:16}),d.jsx("span",{className:"micro-label",children:""})]})]}),d.jsxs("div",{className:"header-right",children:[d.jsxs("div",{className:"wealth-hud",children:[d.jsx("div",{className:"wealth-label micro-label",children:"_"}),d.jsxs("div",{className:"wealth-value mono",children:["$",Dt(e?.balance||0)]})]}),d.jsxs(yl,{to:"/accounts",className:"avatar-uplink",children:[e?.photoUrl?d.jsx("img",{src:e.photoUrl,className:"user-avatar",style:{borderColor:e.color},alt:""}):d.jsx("div",{className:"user-avatar",style:{backgroundColor:e?.color,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"900",color:"white",fontSize:"12px"},children:e?.username?.charAt(0).toUpperCase()}),d.jsx("div",{className:"avatar-ring",style:{borderColor:e?.color}})]})]})]})},Tz=({onMenuClick:n})=>{const e=Is(),t=[{path:"/",icon:d.jsx(wf,{size:22})},{path:"/map",icon:d.jsx(P5,{size:22})},{path:"/store",icon:d.jsx(F5,{size:22})},{path:"/chat",icon:d.jsx(Yy,{size:22})}];return d.jsxs("nav",{className:"app-bottom-nav",children:[t.map(i=>d.jsxs(yl,{to:i.path,className:`bottom-link ${e.pathname===i.path?"active":""}`,children:[i.icon,d.jsx("div",{className:"bottom-indicator"})]},i.path)),d.jsxs("button",{className:"bottom-link",onClick:n,children:[d.jsx(cm,{size:22}),d.jsx("span",{className:"micro-label",style:{fontSize:"7px",marginTop:"2px"},children:""})]})]})},Az=({children:n})=>{const{user:e,loading:t}=Mi();return t?d.jsxs("div",{className:"loading-screen",children:[d.jsxs("div",{className:"neural-loader",children:[d.jsx("div",{className:"circuit-1"}),d.jsx("div",{className:"circuit-2"})]}),d.jsx("p",{className:"micro-label",style:{marginTop:"2rem",letterSpacing:"0.1em"},children:"   ..."})]}):e?n:d.jsx(Wx,{to:"/login"})},Fi=({children:n})=>{const[e,t]=hC.useState(!1),i=()=>t(r=>!r);return d.jsx(Az,{children:d.jsxs("div",{className:`app-layout ${e?"":"sidebar-closed"}`,children:[d.jsx("div",{className:"bg-glitch"}),d.jsx("div",{className:"orb orb-1"}),d.jsx("div",{className:"orb orb-2"}),d.jsx(Ez,{isOpen:e,onClose:()=>t(!1)}),d.jsxs("div",{className:"app-content-wrapper",children:[d.jsx(Sz,{onMenuClick:i}),d.jsx("main",{className:"app-main",children:n}),d.jsx(Tz,{onMenuClick:i})]})]})})};function Cz(){return d.jsx(lj,{children:d.jsxs(KD,{children:[d.jsx(VR,{children:d.jsxs(pR,{children:[d.jsx(fi,{path:"/login",element:d.jsx(s9,{})}),d.jsx(fi,{path:"/",element:d.jsx(Fi,{children:d.jsx(YD,{})})}),d.jsx(fi,{path:"/transfers",element:d.jsx(Fi,{children:d.jsx(r9,{})})}),d.jsx(fi,{path:"/companies",element:d.jsx(Fi,{children:d.jsx(l9,{})})}),d.jsx(fi,{path:"/weapons",element:d.jsx(Fi,{children:d.jsx(h9,{})})}),d.jsx(fi,{path:"/accounts",element:d.jsx(Fi,{children:d.jsx(f9,{})})}),d.jsx(fi,{path:"/chat",element:d.jsx(Fi,{children:d.jsx(m9,{})})}),d.jsx(fi,{path:"/news",element:d.jsx(Fi,{children:d.jsx(wz,{})})}),d.jsx(fi,{path:"/trading",element:d.jsx(Fi,{children:d.jsx(C8,{})})}),d.jsx(fi,{path:"/map",element:d.jsx(Fi,{children:d.jsx(R8,{})})}),d.jsx(fi,{path:"/loot",element:d.jsx(Fi,{children:d.jsx(M8,{})})}),d.jsx(fi,{path:"/loans",element:d.jsx(Fi,{children:d.jsx(k8,{})})}),d.jsx(fi,{path:"/store",element:d.jsx(Fi,{children:d.jsx(L8,{})})}),d.jsx(fi,{path:"/games",element:d.jsx(Fi,{children:d.jsx(pz,{})})}),d.jsx(fi,{path:"/council",element:d.jsx(Fi,{children:d.jsx(bz,{})})}),d.jsx(fi,{path:"/marketplace",element:d.jsx(Fi,{children:d.jsx(yz,{})})}),d.jsx(fi,{path:"*",element:d.jsx(Wx,{to:"/"})})]})}),d.jsx("style",{children:`
        :root {
            --sidebar-width: 260px;
            --header-height: 64px;
        }

        .app-layout {
          display: flex;
          min-height: 100vh;
          background: #03040b;
          overflow-x: hidden;
          width: 100%;
        }
        
        .app-content-wrapper {
          flex: 1;
          display: flex;
          flex-direction: column;
          min-width: 0;
          padding-left: var(--sidebar-width);
          transition: all 0.3s ease;
          position: relative;
        }
        
        .app-layout.sidebar-closed .app-content-wrapper {
          padding-left: 0;
        }
        
        /* SIDEBAR */
        .app-sidebar {
          position: fixed;
          left: 0;
          top: 0;
          bottom: 0;
          width: var(--sidebar-width);
          background: rgba(8, 9, 15, 0.98);
          backdrop-filter: blur(20px);
          border-right: 1px solid var(--border-bright);
          display: flex;
          flex-direction: column;
          z-index: 1001;
          transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .sidebar-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(4px);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .sidebar-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .sidebar-header {
          padding: 1.25rem 1rem;
          display: flex;
          align-items: center;
          gap: 0.5rem;
          border-bottom: 1px solid rgba(255,255,255,0.03);
        }

        .mobile-close-btn {
            display: none;
            margin-left: auto;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            color: var(--text-muted);
            padding: 0.4rem;
            border-radius: 8px;
        }

        .logo-box {
            width: 28px;
            height: 28px;
            background: var(--primary);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 15px var(--primary-glow);
        }
        
        .sidebar-logo {
          font-size: 1rem;
          font-weight: 900;
          text-decoration: none;
          letter-spacing: 0.1em;
          color: #fff;
        }
        
        .sidebar-nav {
          flex: 1;
          padding: 0.75rem 0.5rem;
          overflow-y: auto;
          scrollbar-width: none;
        }

        .sidebar-link {
          display: flex;
          align-items: center;
          gap: 0.75rem;
          padding: 0.65rem 0.75rem;
          text-decoration: none;
          color: var(--text-muted);
          border-radius: 10px;
          margin-bottom: 0.2rem;
          transition: 0.2s;
          font-size: 0.8rem;
        }
        
        .sidebar-link.active {
          background: rgba(99, 102, 241, 0.15);
          color: var(--primary);
          border: 1px solid rgba(99, 102, 241, 0.3);
        }
        
        .sidebar-footer {
          padding: 1rem;
          border-top: 1px solid var(--border-dim);
        }
        
        .logout-btn {
          width: 100%;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 0.5rem;
          background: rgba(239, 68, 68, 0.1);
          border: 1px solid rgba(239, 68, 68, 0.2);
          color: var(--danger);
          padding: 0.6rem;
          border-radius: 8px;
          font-weight: 700;
          font-size: 0.75rem;
        }
        
        /* HEADER */
        .app-header {
          height: var(--header-height);
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 0 1.25rem;
          background: rgba(3, 4, 11, 0.7);
          backdrop-filter: blur(15px);
          border-bottom: 1px solid var(--border-dim);
          position: sticky;
          top: 0;
          z-index: 900;
        }

        .mobile-menu-trigger {
            display: none;
            background: var(--surface-soft);
            border: 1px solid var(--border-bright);
            padding: 0.4rem 0.6rem;
            color: var(--primary);
            gap: 0.4rem;
            border-radius: 10px;
            align-items: center;
        }

        .wealth-label { color: var(--primary); font-size: 0.55rem; }
        .wealth-value { font-size: 1.1rem; font-weight: 900; color: white; }
        
        .user-avatar {
          width: 32px;
          height: 32px;
          border-radius: 6px;
          border: 1.5px solid var(--surface-soft);
          object-fit: cover;
        }

        /* BOTTOM NAV */
        .app-bottom-nav {
          display: none;
          position: fixed;
          bottom: 16px;
          left: 50%;
          transform: translateX(-50%);
          background: rgba(10, 11, 19, 0.9);
          backdrop-filter: blur(20px);
          border: 1px solid rgba(255,255,255,0.1);
          padding: 0.4rem;
          border-radius: 20px;
          z-index: 999;
          width: 90%;
          max-width: 400px;
          justify-content: space-around;
          box-shadow: 0 10px 30px rgba(0,0,0,0.8);
        }
        
        .bottom-link {
          flex: 1;
          height: 44px;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          color: var(--text-muted);
          position: relative;
          background: transparent;
          border: none;
        }
        
        .bottom-link.active { color: var(--primary); }

        .bottom-indicator {
            position: absolute;
            bottom: 2px;
            width: 3px;
            height: 3px;
            border-radius: 50%;
            background: var(--primary);
            opacity: 0;
        }

        .bottom-link.active .bottom-indicator { opacity: 1; box-shadow: 0 0 8px var(--primary); }
        
        /* RESPONSIVE */
        @media (max-width: 1024px) {
          .app-sidebar { transform: translateX(-100%); width: 280px; }
          .app-sidebar.mobile-open { transform: translateX(0); }
          .app-content-wrapper { padding-left: 0 !important; }
          .app-bottom-nav { display: flex; }
          .mobile-close-btn { display: flex; }
          .mobile-menu-trigger { display: flex; }
          .desktop-only, .desktop-menu-trigger { display: none !important; }
          .app-main { padding: 1rem; padding-bottom: 90px; }
          .wealth-value { font-size: 0.95rem; }
          .header-right { gap: 0.75rem; }
          .app-header { padding: 0 1rem; height: 56px; }
        }

        @media (max-width: 414px) {
            .wealth-hud { display: flex; flex-direction: column; align-items: flex-end; }
            .sidebar-logo { font-size: 0.9rem; }
            .sidebar-link { padding: 0.55rem 0.6rem; font-size: 0.75rem; }
        }

        .loading-screen {
          height: 100vh;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          background: #03040b;
          text-align: center;
          padding: 20px;
        }
      `})]})})}vC.createRoot(document.getElementById("root")).render(d.jsx($.StrictMode,{children:d.jsx(Cz,{})}));
